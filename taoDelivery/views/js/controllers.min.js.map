{"version":3,"file":"routes.js","sources":["routes.js","compilation/compiling.js","deliveryAssembly.js","runtime/deliveryExecution.js","runtime/index.js","template/editDelivery.js","testtaker.js"],"names":[],"mappings":"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","sourcesContent":["/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n * \n * \n */\n\n//@see http://forge.taotesting.com/projects/tao/wiki/Front_js\ndefine('taoDelivery/controller/routes',[],function(){\n    'use strict';\n\n    return {\n        'Delivery': {\n            'deps' : 'controller/deliveryAssembly',\n            'actions' : {\n\t            'excludeTesttaker' : 'controller/testtaker'\n            }\n        },\n        'DeliveryTemplate': {\n            'actions' : {\n                'editDelivery' : 'controller/template/editDelivery'\n            }\n        },\n        'Compilation' : {\n            'actions' : {\n                'index' : 'controller/compilation/compiling'\n\t        }\n        }\n    };\n});\n\n","/*  \n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n * \n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n * \n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n * \n * Copyright (c) 2008-2010 (original work) Deutsche Institut für Internationale Pädagogische Forschung (under the project TAO-TRANSFER);\n *               2009-2012 (update and modification) Public Research Centre Henri Tudor (under the project TAO-SUSTAIN & TAO-DEV);\n * \n */\ndefine('taoDelivery/controller/compilation/compiling',['module' ,'jquery', 'i18n', 'context', 'helpers'], function(module, $, __, context, helpers){\n\n    function initCompilation(uri, clazz){\n        $(\"#initCompilation\").hide();\n        $('#generatingProcess_info').show();\n        $('#generatingProcess_feedback').empty().hide();\n        $(\"#progressbar\").empty();\n        $('.main-container').append('<div id=\"compilationReport\"></div>');\n        \n        $.ajax({\n\t        url: helpers._url('compile', 'Compilation', 'taoDelivery'),\n\t        type: \"POST\",\n\t        dataType: \"text\",\n\t        data: {uri : uri, classUri: clazz},\n\t        success: function (data, textStatus, jqXHR){\n\t            $('#generatingProcess_info').hide();\n\t            $('#compilationReport').html(data);\n\t        },\n\t        error: function (jqXHR, textStatus, errorThrown) {\n\t        \tfinalMessage(errorThrown);\n\t        }\n        });\n    }\n\n    function finalMessage(msg, imageFile){\n        $('<img/>').attr(\"src\", context.root_url + 'taoDelivery/views/img/' + imageFile).appendTo($(\"#progressbar\"));\n        $(\"#progressbar\").append(msg);\n\n        //reinitiate the values and suggest recompilation\n        $('#postCompilation').show();\n        $(\"#initCompilation\").html( __(\"Recompile the delivery\") );\n    }\n    \n    return {\n        start : function(){\n            \n            var conf = module.config();\n            \n            $('#generatingProcess_info').hide();\n            $('.back').click(function(e){\n                e.preventDefault();\n                helpers._load(helpers.getMainContainerSelector(), context.root_url + 'taoDelivery/Delivery/editDelivery/', {\n                    uri: conf.uri,\n                    classUri:  conf.classUri\n                });\n            });\n            $('#compiler').click(function(e){\n                e.preventDefault();\n                initCompilation(conf.uri, conf.classUri);\n            });\n        }\n    };\n});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/deliveryAssembly',['jquery', 'i18n', 'helpers', 'ui/feedback', 'module'], function ($, __, helpers, feedback, module) {\n\n        return {\n            start : function(){\n                var conf = module.config();\n                \n                if(conf.message){\n                    feedback().info(conf.message);\n                }\n                \n                $('#saver-status').click(function(e){\n                \tvar status = $('input[name=\"status\"]:checked').val();\n                \tvar uri = $('input[name=\"assemblyUri\"]').val();\n                    $.ajax({\n            \t        url: helpers._url('setStatus', 'Delivery', 'taoDelivery'),\n            \t        type: \"POST\",\n            \t        dataType: \"text\",\n            \t        data: {uri : uri, status: status},\n            \t        success: function (data, textStatus, jqXHR){\n                        \tfeedback().success(__(\"Status saved\"));\n                            $('.tree').trigger('refresh.taotree', [{\n                                selectNode : uri\n                            }]);\n            \t        },\n            \t        error: function (jqXHR, textStatus, errorThrown) {\n                        \tfeedback().error('Error occured: ' + errorThrown);\n            \t        }\n                    });\n            \t});\n            }\n        };\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/runtime/deliveryExecution',['jquery', 'iframeResizer', 'spin'], function($, iframeResizer, Spinner){\n    \n    function loading(reverse) {\n        if($('#overlay').length === 0){\n            \n            $('<div id=\"overlay\"></div>').appendTo(document.body);\n            $('<div id=\"loading\"><div></div></div>').appendTo(document.body);\n        }\n\n        var opts = {\n                lines: 11, // The number of lines to draw\n                length: 21, // The length of each line\n                width: 8, // The line thickness\n                radius: 36, // The radius of the inner circle\n                corners: 1, // Corner roundness (0..1)\n                rotate: 0, // The rotation offset\n                direction: (reverse === true) ? -1 : 1, // 1: clockwise, -1: counterclockwise\n                color: '#888', // #rgb or #rrggbb or array of colors\n                speed: 1.5, // Rounds per second\n                trail: 60, // Afterglow percentage\n                shadow: false, // Whether to render a shadow\n                hwaccel: false, // Whether to use hardware acceleration\n                className: 'spinner', // The CSS class to assign to the spinner\n                zIndex: 2e9, // The z-index (defaults to 2000000000)\n        };\n        new Spinner(opts).spin($('#loading > div').get(0));\n    }\n    \n    function unloading() {\n        setTimeout(function(){\n            $('#loading').fadeOut(300, function(){\n                $(this).remove();\n                $('#overlay').remove();\n            });\n        }, 300);\n    }\n    \n    function resizeMainFrame() {\n        var $frame = $('#iframeDeliveryExec');\n        var windowHeight = $(window).height();\n        var controlHeight = 0;\n        var $control = $('#control');\n        \n        if ($control.length === 1) {\n            controlHeight = $control.outerHeight(true);\n        }\n        \n        var newHeight = windowHeight - controlHeight;\n        \n        if (navigator.userAgent.match(/(iPad|iPhone|iPod)/g) ? true : false == true) {\n            newHeight -= 20;\n        }\n        \n        $frame.css('height', newHeight + 'px');\n    }\n    \n    return {\n        start: function(options){\n            \n            var $frame = $('#iframeDeliveryExec');\n            $('#tools').css('height', 'auto');\n            \n            var serviceApi = options.serviceApi;\n\n            serviceApi.onFinish(function() {\n                $.ajax({\n                    url : options.finishDeliveryExecution,\n                    data : {\n                        'deliveryExecution' : options.deliveryExecution\n                    },\n                    type : 'post',\n                    dataType : 'json',\n                    success : function(data) {\n                        window.location = data.destination;\n                    }\n                });\n            });\n            \n            $(document)\n                .on('loading', function(e, reverse){\n                    loading(reverse);\n                })\n                .on('unloading', function(){\n                    unloading();\n                })\n                .on('shutdown-com', function(){\n                    //use when we want to stop all exchange between frames\n                    $(document).off('heightchange');\n                    $frame.off('load.eventHeight')\n                           .off('load.cors');\n                });\n            \n            serviceApi.loadInto($frame.get(0));\n            \n            $(window).bind('resize', function() {\n                resizeMainFrame();\n            });\n            \n            resizeMainFrame();\n        }\n    };\n});\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\n(function(){\n    //the url of the app config is set into the data-config attr of the loader.\n    var appConfig = document.getElementById('amd-loader').getAttribute('data-config');\n    require([appConfig], function(){\n   \n        require(['jquery'], function($){\n            $('ul li').mouseover(function() {\n                $(\"a .actionsBox .button\", this).addClass(\"buttonSelected\");\n            });\n            $('ul li').mouseleave(function() {\n                $(\"a .actionsBox .button\", this).removeClass(\"buttonSelected\");\n            });\n        });\n    });\n\n}());\n\ndefine(\"taoDelivery/controller/runtime/index\", function(){});\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2014 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/template/editDelivery',['jquery', 'layout/section'], function ($, section) {\n\n        return {\n            start : function(){\n                $('#compileLink').on('click', function(e){\n                    e.preventDefault();\n                    section.loadContentBlock($(this).attr('href')); \n                });\n            }\n        };\n});\n\n\n\n","/**\n * This program is free software; you can redistribute it and/or\n * modify it under the terms of the GNU General Public License\n * as published by the Free Software Foundation; under version 2\n * of the License (non-upgradable).\n *\n * This program is distributed in the hope that it will be useful,\n * but WITHOUT ANY WARRANTY; without even the implied warranty of\n * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n * GNU General Public License for more details.\n *\n * You should have received a copy of the GNU General Public License\n * along with this program; if not, write to the Free Software\n * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.\n *\n * Copyright (c) 2013 (original work) Open Assessment Technologies SA (under the project TAO-PRODUCT);\n *\n *\n */\ndefine('taoDelivery/controller/testtaker',['jquery', 'i18n', 'helpers', 'module', 'layout/section', 'ui/feedback'], \nfunction ($, __, helpers, module, section, feedback) {\n    'use strict';\n\n\tfunction switchList() {\n\t\tvar current = $(this).parent().attr('id');\n        var target; \n\t\tif (current == 'excludedList') {\n\t\t\ttarget = $('#assignedList'); \n\t\t} else if (current == 'assignedList') {\n\t\t\ttarget = $('#excludedList');\n\t\t}\n\t\tif (typeof target !== 'undefined') {\n\t\t\ttarget.append(this);\n\t\t\tthis.scrollIntoView();\n\t\t}\n\t}\n\t\n\tvar $search = $('#tt-filter');\n    var $list   = $('#assignedList');\n    var timeout;\n    \n    var liveSearch = function(){\n        var pattern = $search.val();\n        clearTimeout(timeout);\n        timeout = setTimeout(function(){\n        \tfilterList(new RegExp(pattern), $list);\n        }, 300);\n    };\n    \n    var filterList = function(regex, list) {\n    \tlist.children().each(function(index, element) {\n    \t\tif ($(element).text().match(regex) === null) {\n    \t\t\t$(element).hide();\n    \t\t} else {\n    \t\t\t$(element).show();\n    \t\t}\n    \t});\n    };\n\t\n    return {\n        start : function(){\n\t        $('#save-tt').click(function() {\n\t        \tvar excluded = [];\n\t        \t$('#excludedList > li').each(function(index) {\n\t        \t\texcluded.push($(this).data('uri'));\n\t        \t});\n\t        \tvar assemblyUri = $('input[name=\"assemblyUri\"]').val();\n\t        \t$.ajax({\n\t        \t\turl: helpers._url('saveExcluded', 'Delivery', 'taoDelivery'),\n\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\tdata: {\n\t\t\t\t\t\turi: assemblyUri,\n\t\t\t\t\t\texcluded: JSON.stringify(excluded)\n\t\t\t\t\t},\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tsuccess: function(response) {\n\t\t\t\t\t\tif (response.saved) {\n                            feedback().success(__('Selection saved successfully'));\n                            section.loadContentBlock(helpers._url('editDelivery', 'Delivery', 'taoDelivery'), {uri: assemblyUri});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t        });\n        \t$('#assignedList > li').click(switchList);\n        \t$('#excludedList > li').click(switchList);\n        \t\n        \t$('#close-tt').click(function() {\n        \t\t$('#testtaker-form').modal('close');\n        \t});\n                \n            //trigger the search on keyp and on the magnifer button click\n            $search.keyup(liveSearch).siblings('.ctrl').click(liveSearch);\n        \t\n        }\n    };\n});\n\n\n\n"]}