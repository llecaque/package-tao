!function(a,b){function G(a){var b=F[a]={};return p.each(a.split(s),function(a,c){b[c]=!0}),b}function J(a,c,d){if(d===b&&1===a.nodeType){var e="data-"+c.replace(I,"-$1").toLowerCase();if(d=a.getAttribute(e),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:H.test(d)?p.parseJSON(d):d}catch(f){}p.data(a,c,d)}else d=b}return d}function K(a){var b;for(b in a)if(("data"!==b||!p.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function ba(){return!1}function bb(){return!0}function bh(a){return!a||!a.parentNode||11===a.parentNode.nodeType}function bi(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function bj(a,b,c){if(b=b||0,p.isFunction(b))return p.grep(a,function(a,d){var e=!!b.call(a,d,a);
return e===c});if(b.nodeType)return p.grep(a,function(a){return a===b===c});if("string"==typeof b){var d=p.grep(a,function(a){return 1===a.nodeType});if(be.test(b))return p.filter(b,d,!c);b=p.filter(b,d)}return p.grep(a,function(a){return p.inArray(a,b)>=0===c})}function bk(a){var b=bl.split("|"),c=a.createDocumentFragment();if(c.createElement)for(;b.length;)c.createElement(b.pop());return c}function bC(a,b){return a.getElementsByTagName(b)[0]||a.appendChild(a.ownerDocument.createElement(b))}function bD(a,b){if(1===b.nodeType&&p.hasData(a)){var c,d,e,f=p._data(a),g=p._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)p.event.add(b,c,h[c][d])
}g.data&&(g.data=p.extend({},g.data))}}function bE(a,b){var c;1===b.nodeType&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),p.support.html5Clone&&a.innerHTML&&!p.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&bv.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.selected=a.defaultSelected:"input"===c||"textarea"===c?b.defaultValue=a.defaultValue:"script"===c&&b.text!==a.text&&(b.text=a.text),b.removeAttribute(p.expando))}function bF(a){return"undefined"!=typeof a.getElementsByTagName?a.getElementsByTagName("*"):"undefined"!=typeof a.querySelectorAll?a.querySelectorAll("*"):[]
}function bG(a){bv.test(a.type)&&(a.defaultChecked=a.checked)}function bX(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=bV.length;e--;)if(b=bV[e]+c,b in a)return b;return d}function bY(a,b){return a=b||a,"none"===p.css(a,"display")||!p.contains(a.ownerDocument,a)}function bZ(a,b){for(var c,d,e=[],f=0,g=a.length;g>f;f++)c=a[f],c.style&&(e[f]=p._data(c,"olddisplay"),b?(!e[f]&&"none"===c.style.display&&(c.style.display=""),""===c.style.display&&bY(c)&&(e[f]=p._data(c,"olddisplay",cb(c.nodeName)))):(d=bH(c,"display"),!e[f]&&"none"!==d&&p._data(c,"olddisplay",d)));for(f=0;g>f;f++)c=a[f],c.style&&(b&&"none"!==c.style.display&&""!==c.style.display||(c.style.display=b?e[f]||"":"none"));
return a}function b$(a,b,c){var d=bO.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function b_(a,b,c,d){for(var e=c===(d?"border":"content")?4:"width"===b?1:0,f=0;4>e;e+=2)"margin"===c&&(f+=p.css(a,c+bU[e],!0)),d?("content"===c&&(f-=parseFloat(bH(a,"padding"+bU[e]))||0),"margin"!==c&&(f-=parseFloat(bH(a,"border"+bU[e]+"Width"))||0)):(f+=parseFloat(bH(a,"padding"+bU[e]))||0,"padding"!==c&&(f+=parseFloat(bH(a,"border"+bU[e]+"Width"))||0));return f}function ca(a,b,c){var d="width"===b?a.offsetWidth:a.offsetHeight,e=!0,f=p.support.boxSizing&&"border-box"===p.css(a,"boxSizing");if(0>=d){if(d=bH(a,b),(0>d||null==d)&&(d=a.style[b]),bP.test(d))return d;e=f&&(p.support.boxSizingReliable||d===a.style[b]),d=parseFloat(d)||0
}return d+b_(a,b,c||(f?"border":"content"),e)+"px"}function cb(a){if(bR[a])return bR[a];var b=p("<"+a+">").appendTo(e.body),c=b.css("display");return b.remove(),("none"===c||""===c)&&(bI=e.body.appendChild(bI||p.extend(e.createElement("iframe"),{frameBorder:0,width:0,height:0})),bJ&&bI.createElement||(bJ=(bI.contentWindow||bI.contentDocument).document,bJ.write("<!doctype html><html><body>"),bJ.close()),b=bJ.body.appendChild(bJ.createElement(a)),c=bH(b,"display"),e.body.removeChild(bI)),bR[a]=c,c}function ch(a,b,c,d){var e;if(p.isArray(b))p.each(b,function(b,e){c||cd.test(a)?d(a,e):ch(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==p.type(b))d(a,b);
else for(e in b)ch(a+"["+e+"]",b[e],c,d)}function cy(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e,f,g=b.toLowerCase().split(s),h=0,i=g.length;if(p.isFunction(c))for(;i>h;h++)d=g[h],f=/^\+/.test(d),f&&(d=d.substr(1)||"*"),e=a[d]=a[d]||[],e[f?"unshift":"push"](c)}}function cz(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;for(var h,i=a[f],j=0,k=i?i.length:0,l=a===cu;k>j&&(l||!h);j++)h=i[j](c,d,e),"string"==typeof h&&(!l||g[h]?h=b:(c.dataTypes.unshift(h),h=cz(a,c,d,e,h,g)));return(l||!h)&&!g["*"]&&(h=cz(a,c,d,e,"*",g)),h}function cA(a,c){var d,e,f=p.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&p.extend(!0,a,e)
}function cB(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes,k=a.responseFields;for(f in k)f in d&&(c[k[f]]=d[f]);for(;"*"===j[0];)j.shift(),e===b&&(e=a.mimeType||c.getResponseHeader("content-type"));if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}return g?(g!==j[0]&&j.unshift(g),d[g]):void 0}function cC(a,b){var c,d,e,f,g=a.dataTypes.slice(),h=g[0],i={},j=0;if(a.dataFilter&&(b=a.dataFilter(b,a.dataType)),g[1])for(c in a.converters)i[c.toLowerCase()]=a.converters[c];for(;e=g[++j];)if("*"!==e){if("*"!==h&&h!==e){if(c=i[h+" "+e]||i["* "+e],!c)for(d in i)if(f=d.split(" "),f[1]===e&&(c=i[h+" "+f[0]]||i["* "+f[0]])){c===!0?c=i[d]:i[d]!==!0&&(e=f[0],g.splice(j--,0,e));
break}if(c!==!0)if(c&&a["throws"])b=c(b);else try{b=c(b)}catch(k){return{state:"parsererror",error:c?k:"No conversion from "+h+" to "+e}}}h=e}return{state:"success",data:b}}function cK(){try{return new a.XMLHttpRequest}catch(b){}}function cL(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function cT(){return setTimeout(function(){cM=b},0),cM=p.now()}function cU(a,b){p.each(b,function(b,c){for(var d=(cS[b]||[]).concat(cS["*"]),e=0,f=d.length;f>e;e++)if(d[e].call(a,b,c))return})}function cV(a,b,c){var d,e=0,g=cR.length,h=p.Deferred().always(function(){delete i.elem}),i=function(){for(var b=cM||cT(),c=Math.max(0,j.startTime+j.duration-b),d=1-(c/j.duration||0),e=0,f=j.tweens.length;f>e;e++)j.tweens[e].run(d);
return h.notifyWith(a,[j,d,c]),1>d&&f?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:p.extend({},b),opts:p.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:cM||cT(),duration:c.duration,tweens:[],createTween:function(b,c){var e=p.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(e),e},stop:function(b){for(var c=0,d=b?j.tweens.length:0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(cW(k,j.opts.specialEasing);g>e;e++)if(d=cR[e].call(j,a,k,j.opts))return d;return cU(j,k),p.isFunction(j.opts.start)&&j.opts.start.call(a,j),p.fx.timer(p.extend(i,{anim:j,queue:j.opts.queue,elem:a})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)
}function cW(a,b){var c,d,e,f,g;for(c in a)if(d=p.camelCase(c),e=b[d],f=a[c],p.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=p.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function cX(a,b,c){var d,e,f,g,h,i,j,k,l=this,m=a.style,n={},o=[],q=a.nodeType&&bY(a);c.queue||(j=p._queueHooks(a,"fx"),null==j.unqueued&&(j.unqueued=0,k=j.empty.fire,j.empty.fire=function(){j.unqueued||k()}),j.unqueued++,l.always(function(){l.always(function(){j.unqueued--,p.queue(a,"fx").length||j.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[m.overflow,m.overflowX,m.overflowY],"inline"===p.css(a,"display")&&"none"===p.css(a,"float")&&(p.support.inlineBlockNeedsLayout&&"inline"!==cb(a.nodeName)?m.zoom=1:m.display="inline-block")),c.overflow&&(m.overflow="hidden",p.support.shrinkWrapBlocks||l.done(function(){m.overflow=c.overflow[0],m.overflowX=c.overflow[1],m.overflowY=c.overflow[2]
}));for(d in b)if(f=b[d],cO.exec(f)){if(delete b[d],f===(q?"hide":"show"))continue;o.push(d)}if(g=o.length)for(h=p._data(a,"fxshow")||p._data(a,"fxshow",{}),q?p(a).show():l.done(function(){p(a).hide()}),l.done(function(){var b;p.removeData(a,"fxshow",!0);for(b in n)p.style(a,b,n[b])}),d=0;g>d;d++)e=o[d],i=l.createTween(e,q?h[e]:0),n[e]=h[e]||p.style(a,e),e in h||(h[e]=i.start,q&&(i.end=i.start,i.start="width"===e||"height"===e?1:0))}function cY(a,b,c,d,e){return new cY.prototype.init(a,b,c,d,e)}function cZ(a,b){for(var c,d={height:a},e=0;4>e;e+=2-b)c=bU[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function c_(a){return p.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1
}var c,d,e=a.document,f=a.location,g=a.navigator,h=a.jQuery,i=a.$,j=Array.prototype.push,k=Array.prototype.slice,l=Array.prototype.indexOf,m=Object.prototype.toString,n=Object.prototype.hasOwnProperty,o=String.prototype.trim,p=function(a,b){return new p.fn.init(a,b,c)},q=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,r=/\S/,s=/\s+/,t=r.test("Â ")?/^[\s\xA0]+|[\s\xA0]+$/g:/^\s+|\s+$/g,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^[\],:{}\s]*$/,x=/(?:^|:|,)(?:\s*\[)+/g,y=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,A=/^-ms-/,B=/-([\da-z])/gi,C=function(a,b){return(b+"").toUpperCase()
},D=function(){e.addEventListener?(e.removeEventListener("DOMContentLoaded",D,!1),p.ready()):"complete"===e.readyState&&(e.detachEvent("onreadystatechange",D),p.ready())},E={};p.fn=p.prototype={constructor:p,init:function(a,c,d){var f,g,i;if(!a)return this;if(a.nodeType)return this.context=this[0]=a,this.length=1,this;if("string"==typeof a){if(f="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:u.exec(a),f&&(f[1]||!c)){if(f[1])return c=c instanceof p?c[0]:c,i=c&&c.nodeType?c.ownerDocument||c:e,a=p.parseHTML(f[1],i,!0),v.test(f[1])&&p.isPlainObject(c)&&this.attr.call(a,c,!0),p.merge(this,a);if(g=e.getElementById(f[2]),g&&g.parentNode){if(g.id!==f[2])return d.find(a);
this.length=1,this[0]=g}return this.context=e,this.selector=a,this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}return p.isFunction(a)?d.ready(a):(a.selector!==b&&(this.selector=a.selector,this.context=a.context),p.makeArray(a,this))},selector:"",jquery:"1.8.0",length:0,size:function(){return this.length},toArray:function(){return k.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=p.merge(this.constructor(),a);return d.prevObject=this,d.context=this.context,"find"===b?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")"),d},each:function(a,b){return p.each(this,a,b)
},ready:function(a){return p.ready.promise().done(a),this},eq:function(a){return a=+a,-1===a?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(k.apply(this,arguments),"slice",k.call(arguments).join(","))},map:function(a){return this.pushStack(p.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:j,sort:[].sort,splice:[].splice},p.fn.init.prototype=p.fn,p.extend=p.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;for("boolean"==typeof h&&(k=h,h=arguments[1]||{},i=2),"object"!=typeof h&&!p.isFunction(h)&&(h={}),j===i&&(h=this,--i);j>i;i++)if(null!=(a=arguments[i]))for(c in a)d=h[c],e=a[c],h!==e&&(k&&e&&(p.isPlainObject(e)||(f=p.isArray(e)))?(f?(f=!1,g=d&&p.isArray(d)?d:[]):g=d&&p.isPlainObject(d)?d:{},h[c]=p.extend(k,g,e)):e!==b&&(h[c]=e));
return h},p.extend({noConflict:function(b){return a.$===p&&(a.$=i),b&&a.jQuery===p&&(a.jQuery=h),p},isReady:!1,readyWait:1,holdReady:function(a){a?p.readyWait++:p.ready(!0)},ready:function(a){if(a===!0?!--p.readyWait:!p.isReady){if(!e.body)return setTimeout(p.ready,1);p.isReady=!0,a!==!0&&--p.readyWait>0||(d.resolveWith(e,[p]),p.fn.trigger&&p(e).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===p.type(a)},isArray:Array.isArray||function(a){return"array"===p.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):E[m.call(a)]||"object"
},isPlainObject:function(a){if(!a||"object"!==p.type(a)||a.nodeType||p.isWindow(a))return!1;try{if(a.constructor&&!n.call(a,"constructor")&&!n.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}var d;for(d in a);return d===b||n.call(a,d)},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){var d;return a&&"string"==typeof a?("boolean"==typeof b&&(c=b,b=0),b=b||e,(d=v.exec(a))?[b.createElement(d[1])]:(d=p.buildFragment([a],b,c?null:[]),p.merge([],(d.cacheable?p.clone(d.fragment):d.fragment).childNodes))):null},parseJSON:function(b){return b&&"string"==typeof b?(b=p.trim(b),a.JSON&&a.JSON.parse?a.JSON.parse(b):w.test(b.replace(y,"@").replace(z,"]").replace(x,""))?new Function("return "+b)():void p.error("Invalid JSON: "+b)):null
},parseXML:function(c){var d,e;if(!c||"string"!=typeof c)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(f){d=b}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+c),d},noop:function(){},globalEval:function(b){b&&r.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(A,"ms-").replace(B,C)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var e,f=0,g=a.length,h=g===b||p.isFunction(a);if(d)if(h){for(e in a)if(c.apply(a[e],d)===!1)break
}else for(;g>f&&c.apply(a[f++],d)!==!1;);else if(h){for(e in a)if(c.call(a[e],e,a[e])===!1)break}else for(;g>f&&c.call(a[f],f,a[f++])!==!1;);return a},trim:o?function(a){return null==a?"":o.call(a)}:function(a){return null==a?"":a.toString().replace(t,"")},makeArray:function(a,b){var c,d=b||[];return null!=a&&(c=p.type(a),null==a.length||"string"===c||"function"===c||"regexp"===c||p.isWindow(a)?j.call(d,a):p.merge(d,a)),d},inArray:function(a,b,c){var d;if(b){if(l)return l.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,c){var d=c.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=c[f];
else for(;c[f]!==b;)a[e++]=c[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,c,d){var e,f,g=[],h=0,i=a.length,j=a instanceof p||i!==b&&"number"==typeof i&&(i>0&&a[0]&&a[i-1]||0===i||p.isArray(a));if(j)for(;i>h;h++)e=c(a[h],h,d),null!=e&&(g[g.length]=e);else for(f in a)e=c(a[f],f,d),null!=e&&(g[g.length]=e);return g.concat.apply([],g)},guid:1,proxy:function(a,c){var d,e,f;return"string"==typeof c&&(d=a[c],c=a,a=d),p.isFunction(a)?(e=k.call(arguments,2),f=function(){return a.apply(c,e.concat(k.call(arguments)))},f.guid=a.guid=a.guid||f.guid||p.guid++,f):b},access:function(a,c,d,e,f,g,h){var i,j=null==d,k=0,l=a.length;
if(d&&"object"==typeof d){for(k in d)p.access(a,c,k,d[k],1,g,e);f=1}else if(e!==b){if(i=h===b&&p.isFunction(e),j&&(i?(i=c,c=function(a,b,c){return i.call(p(a),c)}):(c.call(a,e),c=null)),c)for(;l>k;k++)c(a[k],d,i?e.call(a[k],k,c(a[k],d)):e,h);f=1}return f?a:j?c.call(a):l?c(a[0],d):g},now:function(){return(new Date).getTime()}}),p.ready.promise=function(b){if(!d)if(d=p.Deferred(),"complete"===e.readyState||"loading"!==e.readyState&&e.addEventListener)setTimeout(p.ready,1);else if(e.addEventListener)e.addEventListener("DOMContentLoaded",D,!1),a.addEventListener("load",p.ready,!1);else{e.attachEvent("onreadystatechange",D),a.attachEvent("onload",p.ready);var c=!1;
try{c=null==a.frameElement&&e.documentElement}catch(f){}c&&c.doScroll&&function g(){if(!p.isReady){try{c.doScroll("left")}catch(a){return setTimeout(g,50)}p.ready()}}()}return d.promise(b)},p.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){E["[object "+b+"]"]=b.toLowerCase()}),c=p(e);var F={};p.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):p.extend({},a);var c,d,e,f,g,h,i=[],j=!a.once&&[],k=function(b){for(c=a.memory&&b,d=!0,h=f||0,f=0,g=i.length,e=!0;i&&g>h;h++)if(i[h].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}e=!1,i&&(j?j.length&&k(j.shift()):c?i=[]:l.disable())},l={add:function(){if(i){var b=i.length;!function d(b){p.each(b,function(b,c){!p.isFunction(c)||a.unique&&l.has(c)?c&&c.length&&d(c):i.push(c)
})}(arguments),e?g=i.length:c&&(f=b,k(c))}return this},remove:function(){return i&&p.each(arguments,function(a,b){for(var c;(c=p.inArray(b,i,c))>-1;)i.splice(c,1),e&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return p.inArray(a,i)>-1},empty:function(){return i=[],this},disable:function(){return i=j=c=b,this},disabled:function(){return!i},lock:function(){return j=b,c||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return b=b||[],b=[a,b.slice?b.slice():b],i&&(!d||j)&&(e?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!d}};return l},p.extend({Deferred:function(a){var b=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],c="pending",d={state:function(){return c
},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return p.Deferred(function(c){p.each(b,function(b,d){var f=d[0],g=a[b];e[d[1]](p.isFunction(g)?function(){var a=g.apply(this,arguments);a&&p.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f+"With"](this===e?c:this,[a])}:c[f])}),a=null}).promise()},promise:function(a){return"object"==typeof a?p.extend(a,d):d}},e={};return d.pipe=d.then,p.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=g.fire,e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var h,i,j,b=0,c=k.call(arguments),d=c.length,e=1!==d||a&&p.isFunction(a.promise)?d:0,f=1===e?a:p.Deferred(),g=function(a,b,c){return function(d){b[a]=this,c[a]=arguments.length>1?k.call(arguments):d,c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)
}};if(d>1)for(h=new Array(d),i=new Array(d),j=new Array(d);d>b;b++)c[b]&&p.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e;return e||f.resolveWith(j,c),f.promise()}}),p.support=function(){var b,c,d,f,g,h,i,j,k,l,m,n=e.createElement("div");if(n.setAttribute("className","t"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",c=n.getElementsByTagName("*"),d=n.getElementsByTagName("a")[0],d.style.cssText="top:1px;float:left;opacity:.5",!c||!c.length||!d)return{};f=e.createElement("select"),g=f.appendChild(e.createElement("option")),h=n.getElementsByTagName("input")[0],b={leadingWhitespace:3===n.firstChild.nodeType,tbody:!n.getElementsByTagName("tbody").length,htmlSerialize:!!n.getElementsByTagName("link").length,style:/top/.test(d.getAttribute("style")),hrefNormalized:"/a"===d.getAttribute("href"),opacity:/^0.5/.test(d.style.opacity),cssFloat:!!d.style.cssFloat,checkOn:"on"===h.value,optSelected:g.selected,getSetAttribute:"t"!==n.className,enctype:!!e.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==e.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===e.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},h.checked=!0,b.noCloneChecked=h.cloneNode(!0).checked,f.disabled=!0,b.optDisabled=!g.disabled;
try{delete n.test}catch(o){b.deleteExpando=!1}if(!n.addEventListener&&n.attachEvent&&n.fireEvent&&(n.attachEvent("onclick",m=function(){b.noCloneEvent=!1}),n.cloneNode(!0).fireEvent("onclick"),n.detachEvent("onclick",m)),h=e.createElement("input"),h.value="t",h.setAttribute("type","radio"),b.radioValue="t"===h.value,h.setAttribute("checked","checked"),h.setAttribute("name","t"),n.appendChild(h),i=e.createDocumentFragment(),i.appendChild(n.lastChild),b.checkClone=i.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=h.checked,i.removeChild(h),i.appendChild(n),n.attachEvent)for(k in{submit:!0,change:!0,focusin:!0})j="on"+k,l=j in n,l||(n.setAttribute(j,"return;"),l="function"==typeof n[j]),b[k+"Bubbles"]=l;
return p(function(){var c,d,f,g,h="padding:0;margin:0;border:0;display:block;overflow:hidden;",i=e.getElementsByTagName("body")[0];i&&(c=e.createElement("div"),c.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",i.insertBefore(c,i.firstChild),d=e.createElement("div"),c.appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",f=d.getElementsByTagName("td"),f[0].style.cssText="padding:0;margin:0;border:0;display:none",l=0===f[0].offsetHeight,f[0].style.display="",f[1].style.display="none",b.reliableHiddenOffsets=l&&0===f[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",b.boxSizing=4===d.offsetWidth,b.doesNotIncludeMarginInBodyOffset=1!==i.offsetTop,a.getComputedStyle&&(b.pixelPosition="1%"!==(a.getComputedStyle(d,null)||{}).top,b.boxSizingReliable="4px"===(a.getComputedStyle(d,null)||{width:"4px"}).width,g=e.createElement("div"),g.style.cssText=d.style.cssText=h,g.style.marginRight=g.style.width="0",d.style.width="1px",d.appendChild(g),b.reliableMarginRight=!parseFloat((a.getComputedStyle(g,null)||{}).marginRight)),"undefined"!=typeof d.style.zoom&&(d.innerHTML="",d.style.cssText=h+"width:1px;padding:1px;display:inline;zoom:1",b.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.style.overflow="visible",d.innerHTML="<div></div>",d.firstChild.style.width="5px",b.shrinkWrapBlocks=3!==d.offsetWidth,c.style.zoom=1),i.removeChild(c),c=d=f=g=null)
}),i.removeChild(n),c=d=f=g=h=i=n=null,b}();var H=/^(?:\{.*\}|\[.*\])$/,I=/([A-Z])/g;p.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(p.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){return a=a.nodeType?p.cache[a[p.expando]]:a[p.expando],!!a&&!K(a)},data:function(a,c,d,e){if(p.acceptData(a)){var f,g,h=p.expando,i="string"==typeof c,j=a.nodeType,k=j?p.cache:a,l=j?a[h]:a[h]&&h;if(l&&k[l]&&(e||k[l].data)||!i||d!==b)return l||(j?a[h]=l=p.deletedIds.pop()||++p.uuid:l=h),k[l]||(k[l]={},j||(k[l].toJSON=p.noop)),("object"==typeof c||"function"==typeof c)&&(e?k[l]=p.extend(k[l],c):k[l].data=p.extend(k[l].data,c)),f=k[l],e||(f.data||(f.data={}),f=f.data),d!==b&&(f[p.camelCase(c)]=d),i?(g=f[c],null==g&&(g=f[p.camelCase(c)])):g=f,g
}},removeData:function(a,b,c){if(p.acceptData(a)){var d,e,f,g=a.nodeType,h=g?p.cache:a,i=g?a[p.expando]:p.expando;if(h[i]){if(b&&(d=c?h[i]:h[i].data)){p.isArray(b)||(b in d?b=[b]:(b=p.camelCase(b),b=b in d?[b]:b.split(" ")));for(e=0,f=b.length;f>e;e++)delete d[b[e]];if(!(c?K:p.isEmptyObject)(d))return}(c||(delete h[i].data,K(h[i])))&&(g?p.cleanData([a],!0):p.support.deleteExpando||h!=h.window?delete h[i]:h[i]=null)}}},_data:function(a,b,c){return p.data(a,b,c,!0)},acceptData:function(a){var b=a.nodeName&&p.noData[a.nodeName.toLowerCase()];return!b||b!==!0&&a.getAttribute("classid")===b}}),p.fn.extend({data:function(a,c){var d,e,f,g,h,i=this[0],j=0,k=null;if(a===b){if(this.length&&(k=p.data(i),1===i.nodeType&&!p._data(i,"parsedAttrs"))){for(f=i.attributes,h=f.length;h>j;j++)g=f[j].name,0===g.indexOf("data-")&&(g=p.camelCase(g.substring(5)),J(i,g,k[g]));
p._data(i,"parsedAttrs",!0)}return k}return"object"==typeof a?this.each(function(){p.data(this,a)}):(d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!",p.access(this,function(c){return c===b?(k=this.triggerHandler("getData"+e,[d[0]]),k===b&&i&&(k=p.data(i,a),k=J(i,a,k)),k===b&&d[1]?this.data(d[0]):k):(d[1]=c,void this.each(function(){var b=p(this);b.triggerHandler("setData"+e,d),p.data(this,a,c),b.triggerHandler("changeData"+e,d)}))},null,c,arguments.length>1,null,!1))},removeData:function(a){return this.each(function(){p.removeData(this,a)})}}),p.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=p._data(a,b),c&&(!d||p.isArray(c)?d=p._data(a,b,p.makeArray(c)):d.push(c)),d||[]):void 0
},dequeue:function(a,b){b=b||"fx";var c=p.queue(a,b),d=c.shift(),e=p._queueHooks(a,b),f=function(){p.dequeue(a,b)};"inprogress"===d&&(d=c.shift()),d&&("fx"===b&&c.unshift("inprogress"),delete e.stop,d.call(a,f,e)),!c.length&&e&&e.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return p._data(a,c)||p._data(a,c,{empty:p.Callbacks("once memory").add(function(){p.removeData(a,b+"queue",!0),p.removeData(a,c,!0)})})}}),p.fn.extend({queue:function(a,c){var d=2;return"string"!=typeof a&&(c=a,a="fx",d--),arguments.length<d?p.queue(this[0],a):c===b?this:this.each(function(){var b=p.queue(this,a,c);p._queueHooks(this,a),"fx"===a&&"inprogress"!==b[0]&&p.dequeue(this,a)
})},dequeue:function(a){return this.each(function(){p.dequeue(this,a)})},delay:function(a,b){return a=p.fx?p.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=p.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(c=a,a=b),a=a||"fx";h--;)(d=p._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(c)}});var L,M,N,O=/[\t\r\n]/g,P=/\r/g,Q=/^(?:button|input)$/i,R=/^(?:button|input|object|select|textarea)$/i,S=/^a(?:rea|)$/i,T=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,U=p.support.getSetAttribute;
p.fn.extend({attr:function(a,b){return p.access(this,p.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){p.removeAttr(this,a)})},prop:function(a,b){return p.access(this,p.prop,a,b,arguments.length>1)},removeProp:function(a){return a=p.propFix[a]||a,this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,f,g,h;if(p.isFunction(a))return this.each(function(b){p(this).addClass(a.call(this,b,this.className))});if(a&&"string"==typeof a)for(b=a.split(s),c=0,d=this.length;d>c;c++)if(e=this[c],1===e.nodeType)if(e.className||1!==b.length){for(f=" "+e.className+" ",g=0,h=b.length;h>g;g++)~f.indexOf(" "+b[g]+" ")||(f+=b[g]+" ");
e.className=p.trim(f)}else e.className=a;return this},removeClass:function(a){var c,d,e,f,g,h,i;if(p.isFunction(a))return this.each(function(b){p(this).removeClass(a.call(this,b,this.className))});if(a&&"string"==typeof a||a===b)for(c=(a||"").split(s),h=0,i=this.length;i>h;h++)if(e=this[h],1===e.nodeType&&e.className){for(d=(" "+e.className+" ").replace(O," "),f=0,g=c.length;g>f;f++)for(;d.indexOf(" "+c[f]+" ")>-1;)d=d.replace(" "+c[f]+" "," ");e.className=a?p.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a,d="boolean"==typeof b;return this.each(p.isFunction(a)?function(c){p(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var e,f=0,g=p(this),h=b,i=a.split(s);e=i[f++];)h=d?h:!g.hasClass(e),g[h?"addClass":"removeClass"](e);
else("undefined"===c||"boolean"===c)&&(this.className&&p._data(this,"__className__",this.className),this.className=this.className||a===!1?"":p._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(O," ").indexOf(b)>-1)return!0;return!1},val:function(a){var c,d,e,f=this[0];{if(arguments.length)return e=p.isFunction(a),this.each(function(d){var f,g=p(this);1===this.nodeType&&(f=e?a.call(this,d,g.val()):a,null==f?f="":"number"==typeof f?f+="":p.isArray(f)&&(f=p.map(f,function(a){return null==a?"":a+""})),c=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()],c&&"set"in c&&c.set(this,f,"value")!==b||(this.value=f))
});if(f)return c=p.valHooks[f.type]||p.valHooks[f.nodeName.toLowerCase()],c&&"get"in c&&(d=c.get(f,"value"))!==b?d:(d=f.value,"string"==typeof d?d.replace(P,""):null==d?"":d)}}}),p.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,f=a.selectedIndex,g=[],h=a.options,i="select-one"===a.type;if(0>f)return null;for(c=i?f:0,d=i?f+1:h.length;d>c;c++)if(e=h[c],!(!e.selected||(p.support.optDisabled?e.disabled:null!==e.getAttribute("disabled"))||e.parentNode.disabled&&p.nodeName(e.parentNode,"optgroup"))){if(b=p(e).val(),i)return b;g.push(b)}return i&&!g.length&&h.length?p(h[f]).val():g
},set:function(a,b){var c=p.makeArray(b);return p(a).find("option").each(function(){this.selected=p.inArray(p(this).val(),c)>=0}),c.length||(a.selectedIndex=-1),c}}},attrFn:{},attr:function(a,c,d,e){var f,g,h,i=a.nodeType;if(a&&3!==i&&8!==i&&2!==i)return e&&p.isFunction(p.fn[c])?p(a)[c](d):"undefined"==typeof a.getAttribute?p.prop(a,c,d):(h=1!==i||!p.isXMLDoc(a),h&&(c=c.toLowerCase(),g=p.attrHooks[c]||(T.test(c)?M:L)),d!==b?null===d?void p.removeAttr(a,c):g&&"set"in g&&h&&(f=g.set(a,d,c))!==b?f:(a.setAttribute(c,""+d),d):g&&"get"in g&&h&&null!==(f=g.get(a,c))?f:(f=a.getAttribute(c),null===f?b:f))},removeAttr:function(a,b){var c,d,e,f,g=0;if(b&&1===a.nodeType)for(d=b.split(s);g<d.length;g++)e=d[g],e&&(c=p.propFix[e]||e,f=T.test(e),f||p.attr(a,e,""),a.removeAttribute(U?e:c),f&&c in a&&(a[c]=!1))
},attrHooks:{type:{set:function(a,b){if(Q.test(a.nodeName)&&a.parentNode)p.error("type property can't be changed");else if(!p.support.radioValue&&"radio"===b&&p.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}},value:{get:function(a,b){return L&&p.nodeName(a,"button")?L.get(a,b):b in a?a.value:null},set:function(a,b,c){return L&&p.nodeName(a,"button")?L.set(a,b,c):void(a.value=b)}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,f,g,h=a.nodeType;
if(a&&3!==h&&8!==h&&2!==h)return g=1!==h||!p.isXMLDoc(a),g&&(c=p.propFix[c]||c,f=p.propHooks[c]),d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&null!==(e=f.get(a,c))?e:a[c]},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):R.test(a.nodeName)||S.test(a.nodeName)&&a.href?0:b}}}}),M={get:function(a,c){var d,e=p.prop(a,c);return e===!0||"boolean"!=typeof e&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;return b===!1?p.removeAttr(a,c):(d=p.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase())),c}},U||(N={name:!0,id:!0,coords:!0},L=p.valHooks.button={get:function(a,c){var d;
return d=a.getAttributeNode(c),d&&(N[c]?""!==d.value:d.specified)?d.value:b},set:function(a,b,c){var d=a.getAttributeNode(c);return d||(d=e.createAttribute(c),a.setAttributeNode(d)),d.value=b+""}},p.each(["width","height"],function(a,b){p.attrHooks[b]=p.extend(p.attrHooks[b],{set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}})}),p.attrHooks.contenteditable={get:L.get,set:function(a,b,c){""===b&&(b="false"),L.set(a,b,c)}}),p.support.hrefNormalized||p.each(["href","src","width","height"],function(a,c){p.attrHooks[c]=p.extend(p.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return null===d?b:d}})}),p.support.style||(p.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b
},set:function(a,b){return a.style.cssText=""+b}}),p.support.optSelected||(p.propHooks.selected=p.extend(p.propHooks.selected,{get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}})),p.support.enctype||(p.propFix.enctype="encoding"),p.support.checkOn||p.each(["radio","checkbox"],function(){p.valHooks[this]={get:function(a){return null===a.getAttribute("value")?"on":a.value}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]=p.extend(p.valHooks[this],{set:function(a,b){return p.isArray(b)?a.checked=p.inArray(p(a).val(),b)>=0:void 0}})});var V=/^(?:textarea|input|select)$/i,W=/^([^\.]*|)(?:\.(.+)|)$/,X=/(?:^|\s)hover(\.\S+|)\b/,Y=/^key/,Z=/^(?:mouse|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=function(a){return p.event.special.hover?a:a.replace(X,"mouseenter$1 mouseleave$1")
};p.event={add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,q,r;if(3!==a.nodeType&&8!==a.nodeType&&c&&d&&(g=p._data(a))){for(d.handler&&(o=d,d=o.handler,f=o.selector),d.guid||(d.guid=p.guid++),i=g.events,i||(g.events=i={}),h=g.handle,h||(g.handle=h=function(a){return"undefined"==typeof p||a&&p.event.triggered===a.type?b:p.event.dispatch.apply(h.elem,arguments)},h.elem=a),c=p.trim(_(c)).split(" "),j=0;j<c.length;j++)k=W.exec(c[j])||[],l=k[1],m=(k[2]||"").split(".").sort(),r=p.event.special[l]||{},l=(f?r.delegateType:r.bindType)||l,r=p.event.special[l]||{},n=p.extend({type:l,origType:k[1],data:e,handler:d,guid:d.guid,selector:f,namespace:m.join(".")},o),q=i[l],q||(q=i[l]=[],q.delegateCount=0,r.setup&&r.setup.call(a,e,m,h)!==!1||(a.addEventListener?a.addEventListener(l,h,!1):a.attachEvent&&a.attachEvent("on"+l,h))),r.add&&(r.add.call(a,n),n.handler.guid||(n.handler.guid=d.guid)),f?q.splice(q.delegateCount++,0,n):q.push(n),p.event.global[l]=!0;
a=null}},global:{},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,q,r=p.hasData(a)&&p._data(a);if(r&&(m=r.events)){for(b=p.trim(_(b||"")).split(" "),f=0;f<b.length;f++)if(g=W.exec(b[f])||[],h=i=g[1],j=g[2],h){for(n=p.event.special[h]||{},h=(d?n.delegateType:n.bindType)||h,o=m[h]||[],k=o.length,j=j?new RegExp("(^|\\.)"+j.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,l=0;l<o.length;l++)q=o[l],!(!e&&i!==q.origType||c&&c.guid!==q.guid||j&&!j.test(q.namespace)||d&&d!==q.selector&&("**"!==d||!q.selector)||(o.splice(l--,1),q.selector&&o.delegateCount--,!n.remove||!n.remove.call(a,q)));0===o.length&&k!==o.length&&((!n.teardown||n.teardown.call(a,j,r.handle)===!1)&&p.removeEvent(a,h,r.handle),delete m[h])
}else for(h in m)p.event.remove(a,h+b[f],c,d,!0);p.isEmptyObject(m)&&(delete r.handle,p.removeData(a,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,f,g){if(!f||3!==f.nodeType&&8!==f.nodeType){var h,i,j,k,l,m,n,o,q,r,s=c.type||c,t=[];if($.test(s+p.event.triggered))return;if(s.indexOf("!")>=0&&(s=s.slice(0,-1),i=!0),s.indexOf(".")>=0&&(t=s.split("."),s=t.shift(),t.sort()),(!f||p.event.customEvent[s])&&!p.event.global[s])return;if(c="object"==typeof c?c[p.expando]?c:new p.Event(s,c):new p.Event(s),c.type=s,c.isTrigger=!0,c.exclusive=i,c.namespace=t.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+t.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,m=s.indexOf(":")<0?"on"+s:"",!f){h=p.cache;
for(j in h)h[j].events&&h[j].events[s]&&p.event.trigger(c,d,h[j].handle.elem,!0);return}if(c.result=b,c.target||(c.target=f),d=null!=d?p.makeArray(d):[],d.unshift(c),n=p.event.special[s]||{},n.trigger&&n.trigger.apply(f,d)===!1)return;if(q=[[f,n.bindType||s]],!g&&!n.noBubble&&!p.isWindow(f)){for(r=n.delegateType||s,k=$.test(r+s)?f:f.parentNode,l=f;k;k=k.parentNode)q.push([k,r]),l=k;l===(f.ownerDocument||e)&&q.push([l.defaultView||l.parentWindow||a,r])}for(j=0;j<q.length&&!c.isPropagationStopped();j++)k=q[j][0],c.type=q[j][1],o=(p._data(k,"events")||{})[c.type]&&p._data(k,"handle"),o&&o.apply(k,d),o=m&&k[m],o&&p.acceptData(k)&&o.apply(k,d)===!1&&c.preventDefault();
return c.type=s,!(g||c.isDefaultPrevented()||n._default&&n._default.apply(f.ownerDocument,d)!==!1||"click"===s&&p.nodeName(f,"a")||!p.acceptData(f)||!m||!f[s]||("focus"===s||"blur"===s)&&0===c.target.offsetWidth||p.isWindow(f)||(l=f[m],l&&(f[m]=null),p.event.triggered=s,f[s](),p.event.triggered=b,!l||!(f[m]=l))),c.result}},dispatch:function(c){c=p.event.fix(c||a.event);var d,e,f,g,h,i,j,k,l,m,o=(p._data(this,"events")||{})[c.type]||[],q=o.delegateCount,r=[].slice.call(arguments),s=!c.exclusive&&!c.namespace,t=p.event.special[c.type]||{},u=[];if(r[0]=c,c.delegateTarget=this,!t.preDispatch||t.preDispatch.call(this,c)!==!1){if(q&&(!c.button||"click"!==c.type))for(g=p(this),g.context=this,f=c.target;f!=this;f=f.parentNode||this)if(f.disabled!==!0||"click"!==c.type){for(i={},k=[],g[0]=f,d=0;q>d;d++)l=o[d],m=l.selector,i[m]===b&&(i[m]=g.is(m)),i[m]&&k.push(l);
k.length&&u.push({elem:f,matches:k})}for(o.length>q&&u.push({elem:this,matches:o.slice(q)}),d=0;d<u.length&&!c.isPropagationStopped();d++)for(j=u[d],c.currentTarget=j.elem,e=0;e<j.matches.length&&!c.isImmediatePropagationStopped();e++)l=j.matches[e],(s||!c.namespace&&!l.namespace||c.namespace_re&&c.namespace_re.test(l.namespace))&&(c.data=l.data,c.handleObj=l,h=((p.event.special[l.origType]||{}).handle||l.handler).apply(j.elem,r),h!==b&&(c.result=h,h===!1&&(c.preventDefault(),c.stopPropagation())));return t.postDispatch&&t.postDispatch.call(this,c),c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a
}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,f,g,h=c.button,i=c.fromElement;return null==a.pageX&&null!=c.clientX&&(d=a.target.ownerDocument||e,f=d.documentElement,g=d.body,a.pageX=c.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=c.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?c.toElement:i),!a.which&&h!==b&&(a.which=1&h?1:2&h?3:4&h?2:0),a}},fix:function(a){if(a[p.expando])return a;var b,c,d=a,f=p.event.fixHooks[a.type]||{},g=f.props?this.props.concat(f.props):this.props;
for(a=p.Event(d),b=g.length;b;)c=g[--b],a[c]=d[c];return a.target||(a.target=d.srcElement||e),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,d):a},special:{ready:{setup:p.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){p.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=p.extend(new p.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?p.event.trigger(e,null,b):p.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},p.event.handle=p.event.dispatch,p.removeEvent=e.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)
}:function(a,b,c){var d="on"+b;a.detachEvent&&("undefined"==typeof a[d]&&(a[d]=null),a.detachEvent(d,c))},p.Event=function(a,b){return this instanceof p.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?bb:ba):this.type=a,b&&p.extend(this,b),this.timeStamp=a&&a.timeStamp||p.now(),this[p.expando]=!0,void 0):new p.Event(a,b)},p.Event.prototype={preventDefault:function(){this.isDefaultPrevented=bb;var a=this.originalEvent;a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=bb;var a=this.originalEvent;
a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=bb,this.stopPropagation()},isDefaultPrevented:ba,isPropagationStopped:ba,isImmediatePropagationStopped:ba},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){p.event.special[a]={delegateType:b,bindType:b,handle:function(a){{var c,d=this,e=a.relatedTarget,f=a.handleObj;f.selector}return(!e||e!==d&&!p.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),p.support.submitBubbles||(p.event.special.submit={setup:function(){return p.nodeName(this,"form")?!1:void p.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=p.nodeName(c,"input")||p.nodeName(c,"button")?c.form:b;
d&&!p._data(d,"_submit_attached")&&(p.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),p._data(d,"_submit_attached",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&p.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return p.nodeName(this,"form")?!1:void p.event.remove(this,"._submit")}}),p.support.changeBubbles||(p.event.special.change={setup:function(){return V.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(p.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,a,!0)
})),!1):void p.event.add(this,"beforeactivate._change",function(a){var b=a.target;V.test(b.nodeName)&&!p._data(b,"_change_attached")&&(p.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&p.event.simulate("change",this.parentNode,a,!0)}),p._data(b,"_change_attached",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return p.event.remove(this,"._change"),V.test(this.nodeName)}}),p.support.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){p.event.simulate(b,a.target,p.event.fix(a),!0)
};p.event.special[b]={setup:function(){0===c++&&e.addEventListener(a,d,!0)},teardown:function(){0===--c&&e.removeEventListener(a,d,!0)}}}),p.fn.extend({on:function(a,c,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof c&&(d=d||c,c=b);for(h in a)this.on(h,c,d,a[h],f);return this}if(null==d&&null==e?(e=c,d=c=b):null==e&&("string"==typeof c?(e=d,d=b):(e=d,d=c,c=b)),e===!1)e=ba;else if(!e)return this;return 1===f&&(g=e,e=function(a){return p().off(a),g.apply(this,arguments)},e.guid=g.guid||(g.guid=p.guid++)),this.each(function(){p.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,p(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;
if("object"==typeof a){for(f in a)this.off(f,c,a[f]);return this}return(c===!1||"function"==typeof c)&&(d=c,c=b),d===!1&&(d=ba),this.each(function(){p.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){return p(this.context).on(a,this.selector,b,c),this},die:function(a,b){return p(this.context).off(a,this.selector||"**",b),this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1==arguments.length?this.off(a,"**"):this.off(b,a||"**",c)},trigger:function(a,b){return this.each(function(){p.event.trigger(a,b,this)})},triggerHandler:function(a,b){return this[0]?p.event.trigger(a,b,this[0],!0):void 0
},toggle:function(a){var b=arguments,c=a.guid||p.guid++,d=0,e=function(c){var e=(p._data(this,"lastToggle"+a.guid)||0)%d;return p._data(this,"lastToggle"+a.guid,e+1),c.preventDefault(),b[e].apply(this,arguments)||!1};for(e.guid=c;d<b.length;)b[d++].guid=c;return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){p.fn[b]=function(a,c){return null==c&&(c=a,a=null),arguments.length>0?this.on(b,null,a,c):this.trigger(b)
},Y.test(b)&&(p.event.fixHooks[b]=p.event.keyHooks),Z.test(b)&&(p.event.fixHooks[b]=p.event.mouseHooks)}),function(a,b){function bd(a,b,c,d){for(var e=0,f=b.length;f>e;e++)Z(a,b[e],c,d)}function be(a,b,c,d,e,f){var g,h=$.setFilters[b.toLowerCase()];return h||Z.error(b),(a||!(g=e))&&bd(a||"*",d,g=[],e),g.length>0?h(g,c,f):[]}function bf(a,c,d,e,f){for(var g,h,i,j,k,l,m,n,p=0,q=f.length,s=L.POS,t=new RegExp("^"+s.source+"(?!"+r+")","i"),u=function(){for(var a=1,c=arguments.length-2;c>a;a++)arguments[a]===b&&(g[a]=b)};q>p;p++){for(s.exec(""),a=f[p],j=[],i=0,k=e;g=s.exec(a);)n=s.lastIndex=g.index+g[0].length,n>i&&(m=a.slice(i,g.index),i=n,l=[c],B.test(m)&&(k&&(l=k),k=e),(h=H.test(m))&&(m=m.slice(0,-5).replace(B,"$&*")),g.length>1&&g[0].replace(t,u),k=be(m,g[1],g[2],l,k,h));
k?(j=j.concat(k),(m=a.slice(i))&&")"!==m?B.test(m)?bd(m,j,d,e):Z(m,c,d,e?e.concat(k):k):o.apply(d,j)):Z(a,c,d,e)}return 1===q?d:Z.uniqueSort(d)}function bg(a,b,c){for(var d,e,f,g=[],i=0,j=D.exec(a),k=!j.pop()&&!j.pop(),l=k&&a.match(C)||[""],m=$.preFilter,n=$.filter,o=!c&&b!==h;null!=(e=l[i])&&k;i++)for(g.push(d=[]),o&&(e=" "+e);e;){k=!1,(j=B.exec(e))&&(e=e.slice(j[0].length),k=d.push({part:j.pop().replace(A," "),captures:j}));for(f in n)(j=L[f].exec(e))&&(!m[f]||(j=m[f](j,b,c)))&&(e=e.slice(j.shift().length),k=d.push({part:f,captures:j}));if(!k)break}return k||Z.error(a),g}function bh(a,b,e){var f=b.dir,g=m++;return a||(a=function(a){return a===e}),b.first?function(b,c){for(;b=b[f];)if(1===b.nodeType)return a(b,c)&&b
}:function(b,e){for(var h,i=g+"."+d,j=i+"."+c;b=b[f];)if(1===b.nodeType){if((h=b[q])===j)return b.sizset;if("string"==typeof h&&0===h.indexOf(i)){if(b.sizset)return b}else{if(b[q]=j,a(b,e))return b.sizset=!0,b;b.sizset=!1}}}}function bi(a,b){return a?function(c,d){var e=b(c,d);return e&&a(e===!0?c:e,d)}:b}function bj(a,b,c){for(var d,e,f=0;d=a[f];f++)$.relative[d.part]?e=bh(e,$.relative[d.part],b):(d.captures.push(b,c),e=bi(e,$.filter[d.part].apply(null,d.captures)));return e}function bk(a){return function(b,c){for(var d,e=0;d=a[e];e++)if(d(b,c))return!0;return!1}}var c,d,e,f,g,h=a.document,i=h.documentElement,j="undefined",k=!1,l=!0,m=0,n=[].slice,o=[].push,q=("sizcache"+Math.random()).replace(".",""),r="[\\x20\\t\\r\\n\\f]",s="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",t=s.replace("w","w#"),u="([*^$|!~]?=)",v="\\["+r+"*("+s+")"+r+"*(?:"+u+r+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+t+")|)|)"+r+"*\\]",w=":("+s+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|((?:[^,]|\\\\,|(?:,(?=[^\\[]*\\]))|(?:,(?=[^\\(]*\\))))*))\\)|)",x=":(nth|eq|gt|lt|first|last|even|odd)(?:\\((\\d*)\\)|)(?=[^-]|$)",y=r+"*([\\x20\\t\\r\\n\\f>+~])"+r+"*",z="(?=[^\\x20\\t\\r\\n\\f])(?:\\\\.|"+v+"|"+w.replace(2,7)+"|[^\\\\(),])+",A=new RegExp("^"+r+"+|((?:^|[^\\\\])(?:\\\\.)*)"+r+"+$","g"),B=new RegExp("^"+y),C=new RegExp(z+"?(?="+r+"*,|$)","g"),D=new RegExp("^(?:(?!,)(?:(?:^|,)"+r+"*"+z+")*?|"+r+"*(.*?))(\\)|$)"),E=new RegExp(z.slice(19,-6)+"\\x20\\t\\r\\n\\f>+~])+|"+y,"g"),F=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,G=/[\x20\t\r\n\f]*[+~]/,H=/:not\($/,I=/h\d/i,J=/input|select|textarea|button/i,K=/\\(?!\\)/g,L={ID:new RegExp("^#("+s+")"),CLASS:new RegExp("^\\.("+s+")"),NAME:new RegExp("^\\[name=['\"]?("+s+")['\"]?\\]"),TAG:new RegExp("^("+s.replace("[-","[-\\*")+")"),ATTR:new RegExp("^"+v),PSEUDO:new RegExp("^"+w),CHILD:new RegExp("^:(only|nth|last|first)-child(?:\\("+r+"*(even|odd|(([+-]|)(\\d*)n|)"+r+"*(?:([+-]|)"+r+"*(\\d+)|))"+r+"*\\)|)","i"),POS:new RegExp(x,"ig"),needsContext:new RegExp("^"+r+"*[>+~]|"+x,"i")},M={},N=[],O={},P=[],Q=function(a){return a.sizzleFilter=!0,a
},R=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},S=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},T=function(a){var b=!1,c=h.createElement("div");try{b=a(c)}catch(d){}return c=null,b},U=T(function(a){a.innerHTML="<select></select>";var b=typeof a.lastChild.getAttribute("multiple");return"boolean"!==b&&"string"!==b}),V=T(function(a){a.id=q+0,a.innerHTML="<a name='"+q+"'></a><div name='"+q+"'></div>",i.insertBefore(a,i.firstChild);var b=h.getElementsByName&&h.getElementsByName(q).length===2+h.getElementsByName(q+0).length;return g=!h.getElementById(q),i.removeChild(a),b
}),W=T(function(a){return a.appendChild(h.createComment("")),0===a.getElementsByTagName("*").length}),X=T(function(a){return a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!==j&&"#"===a.firstChild.getAttribute("href")}),Y=T(function(a){return a.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",a.getElementsByClassName&&0!==a.getElementsByClassName("e").length?(a.lastChild.className="e",1!==a.getElementsByClassName("e").length):!1}),Z=function(a,b,c,d){c=c||[],b=b||h;var e,f,g,i,j=b.nodeType;if(1!==j&&9!==j)return[];if(!a||"string"!=typeof a)return c;if(g=ba(b),!g&&!d&&(e=F.exec(a)))if(i=e[1]){if(9===j){if(f=b.getElementById(i),!f||!f.parentNode)return c;
if(f.id===i)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(i))&&bb(b,f)&&f.id===i)return c.push(f),c}else{if(e[2])return o.apply(c,n.call(b.getElementsByTagName(a),0)),c;if((i=e[3])&&Y&&b.getElementsByClassName)return o.apply(c,n.call(b.getElementsByClassName(i),0)),c}return bm(a,b,c,d,g)},$=Z.selectors={cacheLength:50,match:L,order:["ID","TAG"],attrHandle:{},createPseudo:Q,find:{ID:g?function(a,b,c){if(typeof b.getElementById!==j&&!c){var d=b.getElementById(a);return d&&d.parentNode?[d]:[]}}:function(a,c,d){if(typeof c.getElementById!==j&&!d){var e=c.getElementById(a);return e?e.id===a||typeof e.getAttributeNode!==j&&e.getAttributeNode("id").value===a?[e]:b:[]
}},TAG:W?function(a,b){return typeof b.getElementsByTagName!==j?b.getElementsByTagName(a):void 0}:function(a,b){var c=b.getElementsByTagName(a);if("*"===a){for(var d,e=[],f=0;d=c[f];f++)1===d.nodeType&&e.push(d);return e}return c}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(K,""),a[3]=(a[4]||a[5]||"").replace(K,""),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1]?(a[2]||Z.error(a[0]),a[3]=+(a[3]?a[4]+(a[5]||1):2*("even"===a[2]||"odd"===a[2])),a[4]=+(a[6]+a[7]||"odd"===a[2])):a[2]&&Z.error(a[0]),a
},PSEUDO:function(a){var b,c=a[4];return L.CHILD.test(a[0])?null:(c&&(b=D.exec(c))&&b.pop()&&(a[0]=a[0].slice(0,b[0].length-c.length-1),c=b[0].slice(0,-1)),a.splice(2,3,c||a[3]),a)}},filter:{ID:g?function(a){return a=a.replace(K,""),function(b){return b.getAttribute("id")===a}}:function(a){return a=a.replace(K,""),function(b){var c=typeof b.getAttributeNode!==j&&b.getAttributeNode("id");return c&&c.value===a}},TAG:function(a){return"*"===a?function(){return!0}:(a=a.replace(K,"").toLowerCase(),function(b){return b.nodeName&&b.nodeName.toLowerCase()===a})},CLASS:function(a){var b=M[a];return b||(b=M[a]=new RegExp("(^|"+r+")"+a+"("+r+"|$)"),N.push(a),N.length>$.cacheLength&&delete M[N.shift()]),function(a){return b.test(a.className||typeof a.getAttribute!==j&&a.getAttribute("class")||"")
}},ATTR:function(a,b,c){return b?function(d){var e=Z.attr(d,a),f=e+"";if(null==e)return"!="===b;switch(b){case"=":return f===c;case"!=":return f!==c;case"^=":return c&&0===f.indexOf(c);case"*=":return c&&f.indexOf(c)>-1;case"$=":return c&&f.substr(f.length-c.length)===c;case"~=":return(" "+f+" ").indexOf(c)>-1;case"|=":return f===c||f.substr(0,c.length+1)===c+"-"}}:function(b){return null!=Z.attr(b,a)}},CHILD:function(a,b,c,d){if("nth"===a){var e=m++;return function(a){var b,f,g=0,h=a;if(1===c&&0===d)return!0;if(b=a.parentNode,b&&(b[q]!==e||!a.sizset)){for(h=b.firstChild;h&&(1!==h.nodeType||(h.sizset=++g,h!==a));h=h.nextSibling);b[q]=e}return f=a.sizset-d,0===c?0===f:f%c===0&&f/c>=0
}}return function(b){var c=b;switch(a){case"only":case"first":for(;c=c.previousSibling;)if(1===c.nodeType)return!1;if("first"===a)return!0;c=b;case"last":for(;c=c.nextSibling;)if(1===c.nodeType)return!1;return!0}}},PSEUDO:function(a,b,c,d){var e=$.pseudos[a]||$.pseudos[a.toLowerCase()];return e||Z.error("unsupported pseudo: "+a),e.sizzleFilter?e(b,c,d):e}},pseudos:{not:Q(function(a,b,c){var d=bl(a.replace(A,"$1"),b,c);return function(a){return!d(a)}}),enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0
},parent:function(a){return!$.pseudos.empty(a)},empty:function(a){var b;for(a=a.firstChild;a;){if(a.nodeName>"@"||3===(b=a.nodeType)||4===b)return!1;a=a.nextSibling}return!0},contains:Q(function(a){return function(b){return(b.textContent||b.innerText||bc(b)).indexOf(a)>-1}}),has:Q(function(a){return function(b){return Z(a,b).length>0}}),header:function(a){return I.test(a.nodeName)},text:function(a){var b,c;return"input"===a.nodeName.toLowerCase()&&"text"===(b=a.type)&&(null==(c=a.getAttribute("type"))||c.toLowerCase()===b)},radio:R("radio"),checkbox:R("checkbox"),file:R("file"),password:R("password"),image:R("image"),submit:S("submit"),reset:S("reset"),button:function(a){var b=a.nodeName.toLowerCase();
return"input"===b&&"button"===a.type||"button"===b},input:function(a){return J.test(a.nodeName)},focus:function(a){var b=a.ownerDocument;return!(a!==b.activeElement||b.hasFocus&&!b.hasFocus()||!a.type&&!a.href)},active:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b,c){return c?a.slice(1):[a[0]]},last:function(a,b,c){var d=a.pop();return c?a:[d]},even:function(a,b,c){for(var d=[],e=c?1:0,f=a.length;f>e;e+=2)d.push(a[e]);return d},odd:function(a,b,c){for(var d=[],e=c?0:1,f=a.length;f>e;e+=2)d.push(a[e]);return d},lt:function(a,b,c){return c?a.slice(+b):a.slice(0,+b)},gt:function(a,b,c){return c?a.slice(0,+b+1):a.slice(+b+1)
},eq:function(a,b,c){var d=a.splice(+b,1);return c?a:d}}};$.setFilters.nth=$.setFilters.eq,$.filters=$.pseudos,X||($.attrHandle={href:function(a){return a.getAttribute("href",2)},type:function(a){return a.getAttribute("type")}}),V&&($.order.push("NAME"),$.find.NAME=function(a,b){return typeof b.getElementsByName!==j?b.getElementsByName(a):void 0}),Y&&($.order.splice(1,0,"CLASS"),$.find.CLASS=function(a,b,c){return typeof b.getElementsByClassName===j||c?void 0:b.getElementsByClassName(a)});try{n.call(i.childNodes,0)[0].nodeType}catch(_){n=function(a){for(var b,c=[];b=this[a];a++)c.push(b);return c}}var ba=Z.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;
return b?"HTML"!==b.nodeName:!1},bb=Z.contains=i.compareDocumentPosition?function(a,b){return!!(16&a.compareDocumentPosition(b))}:i.contains?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b.parentNode;return a===d||!!(d&&1===d.nodeType&&c.contains&&c.contains(d))}:function(a,b){for(;b=b.parentNode;)if(b===a)return!0;return!1},bc=Z.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=bc(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d];d++)c+=bc(b);return c};Z.attr=function(a,b){var c,d=ba(a);return d||(b=b.toLowerCase()),$.attrHandle[b]?$.attrHandle[b](a):U||d?a.getAttribute(b):(c=a.getAttributeNode(b),c?"boolean"==typeof a[b]?a[b]?b:null:c.specified?c.value:null:null)
},Z.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},[0,0].sort(function(){return l=0}),i.compareDocumentPosition?e=function(a,b){return a===b?(k=!0,0):(a.compareDocumentPosition&&b.compareDocumentPosition?4&a.compareDocumentPosition(b):a.compareDocumentPosition)?-1:1}:(e=function(a,b){if(a===b)return k=!0,0;if(a.sourceIndex&&b.sourceIndex)return a.sourceIndex-b.sourceIndex;var c,d,e=[],g=[],h=a.parentNode,i=b.parentNode,j=h;if(h===i)return f(a,b);if(!h)return-1;if(!i)return 1;for(;j;)e.unshift(j),j=j.parentNode;for(j=i;j;)g.unshift(j),j=j.parentNode;c=e.length,d=g.length;for(var l=0;c>l&&d>l;l++)if(e[l]!==g[l])return f(e[l],g[l]);
return l===c?f(a,g[l],-1):f(e[l],b,1)},f=function(a,b,c){if(a===b)return c;for(var d=a.nextSibling;d;){if(d===b)return-1;d=d.nextSibling}return 1}),Z.uniqueSort=function(a){var b,c=1;if(e&&(k=l,a.sort(e),k))for(;b=a[c];c++)b===a[c-1]&&a.splice(c--,1);return a};var bl=Z.compile=function(a,b,c){var d,e,f,g=O[a];if(g&&g.context===b)return g;for(e=bg(a,b,c),f=0;d=e[f];f++)e[f]=bj(d,b,c);return g=O[a]=bk(e),g.context=b,g.runs=g.dirruns=0,P.push(a),P.length>$.cacheLength&&delete O[P.shift()],g};Z.matches=function(a,b){return Z(a,null,null,b)},Z.matchesSelector=function(a,b){return Z(b,null,null,[a]).length>0};var bm=function(a,b,e,f,g){a=a.replace(A,"$1");var h,i,j,k,l,m,p,q,r,s=a.match(C),t=a.match(E),u=b.nodeType;
if(L.POS.test(a))return bf(a,b,e,f,s);if(f)h=n.call(f,0);else if(s&&1===s.length){if(t.length>1&&9===u&&!g&&(s=L.ID.exec(t[0]))){if(b=$.find.ID(s[1],b,g)[0],!b)return e;a=a.slice(t.shift().length)}for(q=(s=G.exec(t[0]))&&!s.index&&b.parentNode||b,r=t.pop(),m=r.split(":not")[0],j=0,k=$.order.length;k>j;j++)if(p=$.order[j],s=L[p].exec(m)){if(h=$.find[p]((s[1]||"").replace(K,""),q,g),null==h)continue;m===r&&(a=a.slice(0,a.length-r.length)+m.replace(L[p],""),a||o.apply(e,n.call(h,0)));break}}if(a)for(i=bl(a,b,g),d=i.dirruns++,null==h&&(h=$.find.TAG("*",G.test(a)&&b.parentNode||b)),j=0;l=h[j];j++)c=i.runs++,i(l,b)&&e.push(l);return e};h.querySelectorAll&&function(){var a,b=bm,c=/'|\\/g,d=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,e=[],f=[":active"],g=i.matchesSelector||i.mozMatchesSelector||i.webkitMatchesSelector||i.oMatchesSelector||i.msMatchesSelector;
T(function(a){a.innerHTML="<select><option selected></option></select>",a.querySelectorAll("[selected]").length||e.push("\\["+r+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),a.querySelectorAll(":checked").length||e.push(":checked")}),T(function(a){a.innerHTML="<p test=''></p>",a.querySelectorAll("[test^='']").length&&e.push("[*^$]="+r+"*(?:\"\"|'')"),a.innerHTML="<input type='hidden'>",a.querySelectorAll(":enabled").length||e.push(":enabled",":disabled")}),e=e.length&&new RegExp(e.join("|")),bm=function(a,d,f,g,h){if(!(g||h||e&&e.test(a)))if(9===d.nodeType)try{return o.apply(f,n.call(d.querySelectorAll(a),0)),f}catch(i){}else if(1===d.nodeType&&"object"!==d.nodeName.toLowerCase()){var j=d.getAttribute("id"),k=j||q,l=G.test(a)&&d.parentNode||d;
j?k=k.replace(c,"\\$&"):d.setAttribute("id",k);try{return o.apply(f,n.call(l.querySelectorAll(a.replace(C,"[id='"+k+"'] $&")),0)),f}catch(i){}finally{j||d.removeAttribute("id")}}return b(a,d,f,g,h)},g&&(T(function(b){a=g.call(b,"div");try{g.call(b,"[test!='']:sizzle"),f.push($.match.PSEUDO)}catch(c){}}),f=new RegExp(f.join("|")),Z.matchesSelector=function(b,c){if(c=c.replace(d,"='$1']"),!(ba(b)||f.test(c)||e&&e.test(c)))try{var h=g.call(b,c);if(h||a||b.document&&11!==b.document.nodeType)return h}catch(i){}return Z(c,null,null,[b]).length>0})}(),Z.attr=p.attr,p.find=Z,p.expr=Z.selectors,p.expr[":"]=p.expr.pseudos,p.unique=Z.uniqueSort,p.text=Z.getText,p.isXMLDoc=Z.isXML,p.contains=Z.contains
}(a);var bc=/Until$/,bd=/^(?:parents|prev(?:Until|All))/,be=/^.[^:#\[\.,]*$/,bf=p.expr.match.needsContext,bg={children:!0,contents:!0,next:!0,prev:!0};p.fn.extend({find:function(a){var b,c,d,e,f,g,h=this;if("string"!=typeof a)return p(a).filter(function(){for(b=0,c=h.length;c>b;b++)if(p.contains(h[b],this))return!0});for(g=this.pushStack("","find",a),b=0,c=this.length;c>b;b++)if(d=g.length,p.find(a,this[b],g),b>0)for(e=d;e<g.length;e++)for(f=0;d>f;f++)if(g[f]===g[e]){g.splice(e--,1);break}return g},has:function(a){var b,c=p(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(p.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(bj(this,a,!1),"not",a)
},filter:function(a){return this.pushStack(bj(this,a,!0),"filter",a)},is:function(a){return!!a&&("string"==typeof a?bf.test(a)?p(a,this.context).index(this[0])>=0:p.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=bf.test(a)||"string"!=typeof a?p(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c.ownerDocument&&c!==b&&11!==c.nodeType;){if(g?g.index(c)>-1:p.find.matchesSelector(c,a)){f.push(c);break}c=c.parentNode}return f=f.length>1?p.unique(f):f,this.pushStack(f,"closest",a)},index:function(a){return a?"string"==typeof a?p.inArray(this[0],p(a)):p.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.prevAll().length:-1
},add:function(a,b){var c="string"==typeof a?p(a,b):p.makeArray(a&&a.nodeType?[a]:a),d=p.merge(this.get(),c);return this.pushStack(bh(c[0])||bh(d[0])?d:p.unique(d))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),p.fn.andSelf=p.fn.addBack,p.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return p.dir(a,"parentNode")},parentsUntil:function(a,b,c){return p.dir(a,"parentNode",c)},next:function(a){return bi(a,"nextSibling")},prev:function(a){return bi(a,"previousSibling")},nextAll:function(a){return p.dir(a,"nextSibling")},prevAll:function(a){return p.dir(a,"previousSibling")
},nextUntil:function(a,b,c){return p.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return p.dir(a,"previousSibling",c)},siblings:function(a){return p.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return p.sibling(a.firstChild)},contents:function(a){return p.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:p.merge([],a.childNodes)}},function(a,b){p.fn[a]=function(c,d){var e=p.map(this,b,c);return bc.test(a)||(d=c),d&&"string"==typeof d&&(e=p.filter(d,e)),e=this.length>1&&!bg[a]?p.unique(e):e,this.length>1&&bd.test(a)&&(e=e.reverse()),this.pushStack(e,a,k.call(arguments).join(","))}}),p.extend({filter:function(a,b,c){return c&&(a=":not("+a+")"),1===b.length?p.find.matchesSelector(b[0],a)?[b[0]]:[]:p.find.matches(a,b)
},dir:function(a,c,d){for(var e=[],f=a[c];f&&9!==f.nodeType&&(d===b||1!==f.nodeType||!p(f).is(d));)1===f.nodeType&&e.push(f),f=f[c];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var bl="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",bm=/ jQuery\d+="(?:null|\d+)"/g,bn=/^\s+/,bo=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bp=/<([\w:]+)/,bq=/<tbody/i,br=/<|&#?\w+;/,bs=/<(?:script|style|link)/i,bt=/<(?:script|object|embed|option|style)/i,bu=new RegExp("<(?:"+bl+")[\\s/>]","i"),bv=/^(?:checkbox|radio)$/,bw=/checked\s*(?:[^=]|=\s*.checked.)/i,bx=/\/(java|ecma)script/i,by=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,bz={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bA=bk(e),bB=bA.appendChild(e.createElement("div"));
bz.optgroup=bz.option,bz.tbody=bz.tfoot=bz.colgroup=bz.caption=bz.thead,bz.th=bz.td,p.support.htmlSerialize||(bz._default=[1,"X<div>","</div>"]),p.fn.extend({text:function(a){return p.access(this,function(a){return a===b?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||e).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(p.isFunction(a))return this.each(function(b){p(this).wrapAll(a.call(this,b))});if(this[0]){var b=p(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(p.isFunction(a)?function(b){p(this).wrapInner(a.call(this,b))
}:function(){var b=p(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=p.isFunction(a);return this.each(function(c){p(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(a,this.firstChild)})},before:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)
});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(a,this),"before",this.selector)}},after:function(){if(!bh(this[0]))return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)});if(arguments.length){var a=p.clean(arguments);return this.pushStack(p.merge(this,a),"after",this.selector)}},remove:function(a,b){for(var c,d=0;null!=(c=this[d]);d++)(!a||p.filter(a,[c]).length)&&(!b&&1===c.nodeType&&(p.cleanData(c.getElementsByTagName("*")),p.cleanData([c])),c.parentNode&&c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)for(1===a.nodeType&&p.cleanData(a.getElementsByTagName("*"));a.firstChild;)a.removeChild(a.firstChild);
return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return p.clone(this,a,b)})},html:function(a){return p.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b)return 1===c.nodeType?c.innerHTML.replace(bm,""):b;if(!("string"!=typeof a||bs.test(a)||!p.support.htmlSerialize&&bu.test(a)||!p.support.leadingWhitespace&&bn.test(a)||bz[(bp.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(bo,"<$1></$2>");try{for(;e>d;d++)c=this[d]||{},1===c.nodeType&&(p.cleanData(c.getElementsByTagName("*")),c.innerHTML=a);c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){return bh(this[0])?this.length?this.pushStack(p(p.isFunction(a)?a():a),"replaceWith",a):this:p.isFunction(a)?this.each(function(b){var c=p(this),d=c.html();
c.replaceWith(a.call(this,b,d))}):("string"!=typeof a&&(a=p(a).detach()),this.each(function(){var b=this.nextSibling,c=this.parentNode;p(this).remove(),b?p(b).before(a):p(c).append(a)}))},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){a=[].concat.apply([],a);var e,f,g,h,i=0,j=a[0],k=[],l=this.length;if(!p.support.checkClone&&l>1&&"string"==typeof j&&bw.test(j))return this.each(function(){p(this).domManip(a,c,d)});if(p.isFunction(j))return this.each(function(e){var f=p(this);a[0]=j.call(this,e,c?f.html():b),f.domManip(a,c,d)});if(this[0]){if(e=p.buildFragment(a,this,k),g=e.fragment,f=g.firstChild,1===g.childNodes.length&&(g=f),f)for(c=c&&p.nodeName(f,"tr"),h=e.cacheable||l-1;l>i;i++)d.call(c&&p.nodeName(this[i],"table")?bC(this[i],"tbody"):this[i],i===h?g:p.clone(g,!0,!0));
g=f=null,k.length&&p.each(k,function(a,b){b.src?p.ajax?p.ajax({url:b.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):p.error("no ajax"):p.globalEval((b.text||b.textContent||b.innerHTML||"").replace(by,"")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),p.buildFragment=function(a,c,d){var f,g,h,i=a[0];return c=c||e,c=(c[0]||c).ownerDocument||c[0]||c,"undefined"==typeof c.createDocumentFragment&&(c=e),1===a.length&&"string"==typeof i&&i.length<512&&c===e&&"<"===i.charAt(0)&&!bt.test(i)&&(p.support.checkClone||!bw.test(i))&&(p.support.html5Clone||!bu.test(i))&&(g=!0,f=p.fragments[i],h=f!==b),f||(f=c.createDocumentFragment(),p.clean(a,c,f,d),g&&(p.fragments[i]=h&&f)),{fragment:f,cacheable:g}
},p.fragments={},p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){p.fn[a]=function(c){var d,e=0,f=[],g=p(c),h=g.length,i=1===this.length&&this[0].parentNode;if((null==i||i&&11===i.nodeType&&1===i.childNodes.length)&&1===h)return g[b](this[0]),this;for(;h>e;e++)d=(e>0?this.clone(!0):this).get(),p(g[e])[b](d),f=f.concat(d);return this.pushStack(f,a,g.selector)}}),p.extend({clone:function(a,b,c){var d,e,f,g;if(p.support.html5Clone||p.isXMLDoc(a)||!bu.test("<"+a.nodeName+">")?g=a.cloneNode(!0):(bB.innerHTML=a.outerHTML,bB.removeChild(g=bB.firstChild)),!(p.support.noCloneEvent&&p.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||p.isXMLDoc(a)))for(bE(a,g),d=bF(a),e=bF(g),f=0;d[f];++f)e[f]&&bE(d[f],e[f]);
if(b&&(bD(a,g),c))for(d=bF(a),e=bF(g),f=0;d[f];++f)bD(d[f],e[f]);return d=e=null,g},clean:function(a,b,c,d){var f,g,h,i,j,k,l,m,n,q,r,s=0,t=[];for(b&&"undefined"!=typeof b.createDocumentFragment||(b=e),g=b===e&&bA;null!=(h=a[s]);s++)if("number"==typeof h&&(h+=""),h){if("string"==typeof h)if(br.test(h)){for(g=g||bk(b),l=l||g.appendChild(b.createElement("div")),h=h.replace(bo,"<$1></$2>"),i=(bp.exec(h)||["",""])[1].toLowerCase(),j=bz[i]||bz._default,k=j[0],l.innerHTML=j[1]+h+j[2];k--;)l=l.lastChild;if(!p.support.tbody)for(m=bq.test(h),n="table"!==i||m?"<table>"!==j[1]||m?[]:l.childNodes:l.firstChild&&l.firstChild.childNodes,f=n.length-1;f>=0;--f)p.nodeName(n[f],"tbody")&&!n[f].childNodes.length&&n[f].parentNode.removeChild(n[f]);
!p.support.leadingWhitespace&&bn.test(h)&&l.insertBefore(b.createTextNode(bn.exec(h)[0]),l.firstChild),h=l.childNodes,l=g.lastChild}else h=b.createTextNode(h);h.nodeType?t.push(h):t=p.merge(t,h)}if(l&&(g.removeChild(l),h=l=g=null),!p.support.appendChecked)for(s=0;null!=(h=t[s]);s++)p.nodeName(h,"input")?bG(h):"undefined"!=typeof h.getElementsByTagName&&p.grep(h.getElementsByTagName("input"),bG);if(c)for(q=function(a){return!a.type||bx.test(a.type)?d?d.push(a.parentNode?a.parentNode.removeChild(a):a):c.appendChild(a):void 0},s=0;null!=(h=t[s]);s++)p.nodeName(h,"script")&&q(h)||(c.appendChild(h),"undefined"!=typeof h.getElementsByTagName&&(r=p.grep(p.merge([],h.getElementsByTagName("script")),q),t.splice.apply(t,[s+1,0].concat(r)),s+=r.length));
return t},cleanData:function(a,b){for(var c,d,e,f,g=0,h=p.expando,i=p.cache,j=p.support.deleteExpando,k=p.event.special;null!=(e=a[g]);g++)if((b||p.acceptData(e))&&(d=e[h],c=d&&i[d])){if(c.events)for(f in c.events)k[f]?p.event.remove(e,f):p.removeEvent(e,f,c.handle);i[d]&&(delete i[d],j?delete e[h]:e.removeAttribute?e.removeAttribute(h):e[h]=null,p.deletedIds.push(d))}}}),function(){var a,b;p.uaMatch=function(a){a=a.toLowerCase();var b=/(chrome)[ \/]([\w.]+)/.exec(a)||/(webkit)[ \/]([\w.]+)/.exec(a)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(a)||/(msie) ([\w.]+)/.exec(a)||a.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}
},a=p.uaMatch(g.userAgent),b={},a.browser&&(b[a.browser]=!0,b.version=a.version),b.webkit&&(b.safari=!0),p.browser=b,p.sub=function(){function a(b,c){return new a.fn.init(b,c)}p.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function c(c,d){return d&&d instanceof p&&!(d instanceof a)&&(d=a(d)),p.fn.init.call(this,c,d,b)},a.fn.init.prototype=a.fn;var b=a(e);return a}}();var bH,bI,bJ,bK=/alpha\([^)]*\)/i,bL=/opacity=([^)]*)/,bM=/^(top|right|bottom|left)$/,bN=/^margin/,bO=new RegExp("^("+q+")(.*)$","i"),bP=new RegExp("^("+q+")(?!px)[a-z%]+$","i"),bQ=new RegExp("^([-+])=("+q+")","i"),bR={},bS={position:"absolute",visibility:"hidden",display:"block"},bT={letterSpacing:0,fontWeight:400,lineHeight:1},bU=["Top","Right","Bottom","Left"],bV=["Webkit","O","Moz","ms"],bW=p.fn.toggle;
p.fn.extend({css:function(a,c){return p.access(this,function(a,c,d){return d!==b?p.style(a,c,d):p.css(a,c)},a,c,arguments.length>1)},show:function(){return bZ(this,!0)},hide:function(){return bZ(this)},toggle:function(a,b){var c="boolean"==typeof a;return p.isFunction(a)&&p.isFunction(b)?bW.apply(this,arguments):this.each(function(){(c?a:bY(this))?p(this).show():p(this).hide()})}}),p.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=bH(a,"opacity");return""===c?"1":c}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":p.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=p.camelCase(c),j=a.style;
if(c=p.cssProps[i]||(p.cssProps[i]=bX(j,i)),h=p.cssHooks[c]||p.cssHooks[i],d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];if(g=typeof d,"string"===g&&(f=bQ.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(p.css(a,c)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"===g&&!p.cssNumber[i]&&(d+="px"),h&&"set"in h&&(d=h.set(a,d,e))===b)))try{j[c]=d}catch(k){}}},css:function(a,c,d,e){var f,g,h,i=p.camelCase(c);return c=p.cssProps[i]||(p.cssProps[i]=bX(a.style,i)),h=p.cssHooks[c]||p.cssHooks[i],h&&"get"in h&&(f=h.get(a,!0,e)),f===b&&(f=bH(a,c)),"normal"===f&&c in bT&&(f=bT[c]),d||e!==b?(g=parseFloat(f),d||p.isNumeric(g)?g||0:f):f},swap:function(a,b,c){var d,e,f={};
for(e in b)f[e]=a.style[e],a.style[e]=b[e];d=c.call(a);for(e in b)a.style[e]=f[e];return d}}),a.getComputedStyle?bH=function(a,b){var c,d,e,f,g=getComputedStyle(a,null),h=a.style;return g&&(c=g[b],""===c&&!p.contains(a.ownerDocument.documentElement,a)&&(c=p.style(a,b)),bP.test(c)&&bN.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=c,c=g.width,h.width=d,h.minWidth=e,h.maxWidth=f)),c}:e.documentElement.currentStyle&&(bH=function(a,b){var c,d,e=a.currentStyle&&a.currentStyle[b],f=a.style;return null==e&&f&&f[b]&&(e=f[b]),bP.test(e)&&!bM.test(b)&&(c=f.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),f.left="fontSize"===b?"1em":e,e=f.pixelLeft+"px",f.left=c,d&&(a.runtimeStyle.left=d)),""===e?"auto":e
}),p.each(["height","width"],function(a,b){p.cssHooks[b]={get:function(a,c,d){return c?0!==a.offsetWidth||"none"!==bH(a,"display")?ca(a,b,d):p.swap(a,bS,function(){return ca(a,b,d)}):void 0},set:function(a,c,d){return b$(a,c,d?b_(a,b,d,p.support.boxSizing&&"border-box"===p.css(a,"boxSizing")):0)}}}),p.support.opacity||(p.cssHooks.opacity={get:function(a,b){return bL.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=p.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,b>=1&&""===p.trim(f.replace(bK,""))&&c.removeAttribute&&(c.removeAttribute("filter"),d&&!d.filter)||(c.filter=bK.test(f)?f.replace(bK,e):f+" "+e)
}}),p(function(){p.support.reliableMarginRight||(p.cssHooks.marginRight={get:function(a,b){return p.swap(a,{display:"inline-block"},function(){return b?bH(a,"marginRight"):void 0})}}),!p.support.pixelPosition&&p.fn.position&&p.each(["top","left"],function(a,b){p.cssHooks[b]={get:function(a,c){if(c){var d=bH(a,b);return bP.test(d)?p(a).position()[b]+"px":d}}}})}),p.expr&&p.expr.filters&&(p.expr.filters.hidden=function(a){return 0===a.offsetWidth&&0===a.offsetHeight||!p.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||bH(a,"display"))},p.expr.filters.visible=function(a){return!p.expr.filters.hidden(a)}),p.each({margin:"",padding:"",border:"Width"},function(a,b){p.cssHooks[a+b]={expand:function(c){var d,e="string"==typeof c?c.split(" "):[c],f={};
for(d=0;4>d;d++)f[a+bU[d]+b]=e[d]||e[d-2]||e[0];return f}},bN.test(a)||(p.cssHooks[a+b].set=b$)});var cc=/%20/g,cd=/\[\]$/,ce=/\r?\n/g,cf=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,cg=/^(?:select|textarea)/i;p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?p.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||cg.test(this.nodeName)||cf.test(this.type))}).map(function(a,b){var c=p(this).val();return null==c?null:p.isArray(c)?p.map(c,function(a){return{name:b.name,value:a.replace(ce,"\r\n")}
}):{name:b.name,value:c.replace(ce,"\r\n")}}).get()}}),p.param=function(a,c){var d,e=[],f=function(a,b){b=p.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(c===b&&(c=p.ajaxSettings&&p.ajaxSettings.traditional),p.isArray(a)||a.jquery&&!p.isPlainObject(a))p.each(a,function(){f(this.name,this.value)});else for(d in a)ch(d,a[d],c,f);return e.join("&").replace(cc,"+")};var ci,cj,ck=/#.*$/,cl=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,cm=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,cn=/^(?:GET|HEAD)$/,co=/^\/\//,cp=/\?/,cq=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,cr=/([?&])_=[^&]*/,cs=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,ct=p.fn.load,cu={},cv={},cw=["*/"]+["*"];
try{ci=f.href}catch(cx){ci=e.createElement("a"),ci.href="",ci=ci.href}cj=cs.exec(ci.toLowerCase())||[],p.fn.load=function(a,c,d){if("string"!=typeof a&&ct)return ct.apply(this,arguments);if(!this.length)return this;var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),p.isFunction(c)?(d=c,c=b):"object"==typeof c&&(f="POST"),p.ajax({url:a,type:f,dataType:"html",data:c,complete:function(a,b){d&&h.each(d,g||[a.responseText,b,a])}}).done(function(a){g=arguments,h.html(e?p("<div>").append(a.replace(cq,"")).find(e):a)}),this},p.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){p.fn[b]=function(a){return this.on(b,a)
}}),p.each(["get","post"],function(a,c){p[c]=function(a,d,e,f){return p.isFunction(d)&&(f=f||e,e=d,d=b),p.ajax({type:c,url:a,data:d,success:e,dataType:f})}}),p.extend({getScript:function(a,c){return p.get(a,b,c,"script")},getJSON:function(a,b,c){return p.get(a,b,c,"json")},ajaxSetup:function(a,b){return b?cA(a,p.ajaxSettings):(b=a,a=p.ajaxSettings),cA(a,b),a},ajaxSettings:{url:ci,isLocal:cm.test(cj[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":cw},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:cy(cu),ajaxTransport:cy(cv),ajax:function(a,c){function y(a,c,f,i){var k,s,t,u,w,y=c;
2!==v&&(v=2,h&&clearTimeout(h),g=b,e=i||"",x.readyState=a>0?4:0,f&&(u=cB(l,x,f)),a>=200&&300>a||304===a?(l.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(p.lastModified[d]=w),w=x.getResponseHeader("Etag"),w&&(p.etag[d]=w)),304===a?(y="notmodified",k=!0):(k=cC(l,u),y=k.state,s=k.data,t=k.error,k=!t)):(t=y,(!y||a)&&(y="error",0>a&&(a=0))),x.status=a,x.statusText=""+(c||y),k?o.resolveWith(m,[s,y,x]):o.rejectWith(m,[x,y,t]),x.statusCode(r),r=b,j&&n.trigger("ajax"+(k?"Success":"Error"),[x,l,k?s:t]),q.fireWith(m,[x,y]),j&&(n.trigger("ajaxComplete",[x,l]),--p.active||p.event.trigger("ajaxStop")))}"object"==typeof a&&(c=a,a=b),c=c||{};var d,e,f,g,h,i,j,k,l=p.ajaxSetup({},c),m=l.context||l,n=m!==l&&(m.nodeType||m instanceof p)?p(m):p.event,o=p.Deferred(),q=p.Callbacks("once memory"),r=l.statusCode||{},t={},u={},v=0,w="canceled",x={readyState:0,setRequestHeader:function(a,b){if(!v){var c=a.toLowerCase();
a=u[c]=u[c]||a,t[a]=b}return this},getAllResponseHeaders:function(){return 2===v?e:null},getResponseHeader:function(a){var c;if(2===v){if(!f)for(f={};c=cl.exec(e);)f[c[1].toLowerCase()]=c[2];c=f[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){return v||(l.mimeType=a),this},abort:function(a){return a=a||w,g&&g.abort(a),y(0,a),this}};if(o.promise(x),x.success=x.done,x.error=x.fail,x.complete=q.add,x.statusCode=function(a){if(a){var b;if(2>v)for(b in a)r[b]=[r[b],a[b]];else b=a[x.status],x.always(b)}return this},l.url=((a||l.url)+"").replace(ck,"").replace(co,cj[1]+"//"),l.dataTypes=p.trim(l.dataType||"*").toLowerCase().split(s),null==l.crossDomain&&(i=cs.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]==cj[1]&&i[2]==cj[2]&&(i[3]||("http:"===i[1]?80:443))==(cj[3]||("http:"===cj[1]?80:443)))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=p.param(l.data,l.traditional)),cz(cu,l,c,x),2===v)return x;
if(j=l.global,l.type=l.type.toUpperCase(),l.hasContent=!cn.test(l.type),j&&0===p.active++&&p.event.trigger("ajaxStart"),!l.hasContent&&(l.data&&(l.url+=(cp.test(l.url)?"&":"?")+l.data,delete l.data),d=l.url,l.cache===!1)){var z=p.now(),A=l.url.replace(cr,"$1_="+z);l.url=A+(A===l.url?(cp.test(l.url)?"&":"?")+"_="+z:"")}(l.data&&l.hasContent&&l.contentType!==!1||c.contentType)&&x.setRequestHeader("Content-Type",l.contentType),l.ifModified&&(d=d||l.url,p.lastModified[d]&&x.setRequestHeader("If-Modified-Since",p.lastModified[d]),p.etag[d]&&x.setRequestHeader("If-None-Match",p.etag[d])),x.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+cw+"; q=0.01":""):l.accepts["*"]);
for(k in l.headers)x.setRequestHeader(k,l.headers[k]);if(!l.beforeSend||l.beforeSend.call(m,x,l)!==!1&&2!==v){w="abort";for(k in{success:1,error:1,complete:1})x[k](l[k]);if(g=cz(cv,l,c,x)){x.readyState=1,j&&n.trigger("ajaxSend",[x,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){x.abort("timeout")},l.timeout));try{v=1,g.send(t,y)}catch(B){if(!(2>v))throw B;y(-1,B)}}else y(-1,"No Transport");return x}return x.abort()},active:0,lastModified:{},etag:{}});var cD=[],cE=/\?/,cF=/(=)\?(?=&|$)|\?\?/,cG=p.now();p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=cD.pop()||p.expando+"_"+cG++;return this[a]=!0,a}}),p.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.data,j=c.url,k=c.jsonp!==!1,l=k&&cF.test(j),m=k&&!l&&"string"==typeof i&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&cF.test(i);
return"jsonp"===c.dataTypes[0]||l||m?(f=c.jsonpCallback=p.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback,g=a[f],l?c.url=j.replace(cF,"$1"+f):m?c.data=i.replace(cF,"$1"+f):k&&(c.url+=(cE.test(j)?"&":"?")+c.jsonp+"="+f),c.converters["script json"]=function(){return h||p.error(f+" was not called"),h[0]},c.dataTypes[0]="json",a[f]=function(){h=arguments},e.always(function(){a[f]=g,c[f]&&(c.jsonpCallback=d.jsonpCallback,cD.push(f)),h&&p.isFunction(g)&&g(h[0]),h=g=b}),"script"):void 0}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){return p.globalEval(a),a
}}}),p.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),p.ajaxTransport("script",function(a){if(a.crossDomain){var c,d=e.head||e.getElementsByTagName("head")[0]||e.documentElement;return{send:function(f,g){c=e.createElement("script"),c.async="async",a.scriptCharset&&(c.charset=a.scriptCharset),c.src=a.url,c.onload=c.onreadystatechange=function(a,e){(e||!c.readyState||/loaded|complete/.test(c.readyState))&&(c.onload=c.onreadystatechange=null,d&&c.parentNode&&d.removeChild(c),c=b,e||g(200,"success"))},d.insertBefore(c,d.firstChild)},abort:function(){c&&c.onload(0,1)}}}});var cH,cI=a.ActiveXObject?function(){for(var a in cH)cH[a](0,1)
}:!1,cJ=0;p.ajaxSettings.xhr=a.ActiveXObject?function(){return!this.isLocal&&cK()||cL()}:cK,function(a){p.extend(p.support,{ajax:!!a,cors:!!a&&"withCredentials"in a})}(p.ajaxSettings.xhr()),p.support.ajax&&p.ajaxTransport(function(c){if(!c.crossDomain||p.support.cors){var d;return{send:function(e,f){var g,h,i=c.xhr();if(c.username?i.open(c.type,c.url,c.async,c.username,c.password):i.open(c.type,c.url,c.async),c.xhrFields)for(h in c.xhrFields)i[h]=c.xhrFields[h];c.mimeType&&i.overrideMimeType&&i.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(c.hasContent&&c.data||null),d=function(a,e){var h,j,k,l,m;
try{if(d&&(e||4===i.readyState))if(d=b,g&&(i.onreadystatechange=p.noop,cI&&delete cH[g]),e)4!==i.readyState&&i.abort();else{h=i.status,k=i.getAllResponseHeaders(),l={},m=i.responseXML,m&&m.documentElement&&(l.xml=m);try{l.text=i.responseText}catch(a){}try{j=i.statusText}catch(n){j=""}h||!c.isLocal||c.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(o){e||f(-1,o)}l&&f(h,j,l,k)},c.async?4===i.readyState?setTimeout(d,0):(g=++cJ,cI&&(cH||(cH={},p(a).unload(cI)),cH[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(0,1)}}}});var cM,cN,cO=/^(?:toggle|show|hide)$/,cP=new RegExp("^(?:([-+])=|)("+q+")([a-z%]*)$","i"),cQ=/queueHooks$/,cR=[cX],cS={"*":[function(a,b){var c,d,e,f=this.createTween(a,b),g=cP.exec(b),h=f.cur(),i=+h||0,j=1;
if(g){if(c=+g[2],d=g[3]||(p.cssNumber[a]?"":"px"),"px"!==d&&i){i=p.css(f.elem,a,!0)||c||1;do e=j=j||".5",i/=j,p.style(f.elem,a,i+d),j=f.cur()/h;while(1!==j&&j!==e)}f.unit=d,f.start=i,f.end=g[1]?i+(g[1]+1)*c:c}return f}]};p.Animation=p.extend(cV,{tweener:function(a,b){p.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cS[c]=cS[c]||[],cS[c].unshift(b)},prefilter:function(a,b){b?cR.unshift(a):cR.push(a)}}),p.Tween=cY,cY.prototype={constructor:cY,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(p.cssNumber[c]?"":"px")},cur:function(){var a=cY.propHooks[this.prop];
return a&&a.get?a.get(this):cY.propHooks._default.get(this)},run:function(a){var b,c=cY.propHooks[this.prop];return this.pos=b=p.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration),this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):cY.propHooks._default.set(this),this}},cY.prototype.init.prototype=cY.prototype,cY.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=p.css(a.elem,a.prop,!1,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){p.fx.step[a.prop]?p.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[p.cssProps[a.prop]]||p.cssHooks[a.prop])?p.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now
}}},cY.propHooks.scrollTop=cY.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},p.each(["toggle","show","hide"],function(a,b){var c=p.fn[b];p.fn[b]=function(d,e,f){return null==d||"boolean"==typeof d||!a&&p.isFunction(d)&&p.isFunction(e)?c.apply(this,arguments):this.animate(cZ(b,!0),d,e,f)}}),p.fn.extend({fadeTo:function(a,b,c,d){return this.filter(bY).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=p.isEmptyObject(a),f=p.speed(b,c,d),g=function(){var b=cV(this,p.extend({},a),f);e&&b.stop(!0)};return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;
delete a.stop,b(d)};return"string"!=typeof a&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=p.timers,g=p._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&cQ.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem===this&&(null==a||f[c].queue===a)&&(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&p.dequeue(this,a)})}}),p.each({slideDown:cZ("show"),slideUp:cZ("hide"),slideToggle:cZ("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){p.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),p.speed=function(a,b,c){var d=a&&"object"==typeof a?p.extend({},a):{complete:c||!c&&b||p.isFunction(a)&&a,duration:a,easing:c&&b||b&&!p.isFunction(b)&&b};
return d.duration=p.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in p.fx.speeds?p.fx.speeds[d.duration]:p.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){p.isFunction(d.old)&&d.old.call(this),d.queue&&p.dequeue(this,d.queue)},d},p.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},p.timers=[],p.fx=cY.prototype.init,p.fx.tick=function(){for(var a,b=p.timers,c=0;c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||p.fx.stop()},p.fx.timer=function(a){a()&&p.timers.push(a)&&!cN&&(cN=setInterval(p.fx.tick,p.fx.interval))},p.fx.interval=13,p.fx.stop=function(){clearInterval(cN),cN=null
},p.fx.speeds={slow:600,fast:200,_default:400},p.fx.step={},p.expr&&p.expr.filters&&(p.expr.filters.animated=function(a){return p.grep(p.timers,function(b){return a===b.elem}).length});var c$=/^(?:body|html)$/i;p.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){p.offset.setOffset(this,a,b)});var c,d,e,f,g,h,i,j,k,l,m=this[0],n=m&&m.ownerDocument;if(n)return(e=n.body)===m?p.offset.bodyOffset(m):(d=n.documentElement,p.contains(d,m)?(c=m.getBoundingClientRect(),f=c_(n),g=d.clientTop||e.clientTop||0,h=d.clientLeft||e.clientLeft||0,i=f.pageYOffset||d.scrollTop,j=f.pageXOffset||d.scrollLeft,k=c.top+i-g,l=c.left+j-h,{top:k,left:l}):{top:0,left:0})
},p.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;return p.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(p.css(a,"marginTop"))||0,c+=parseFloat(p.css(a,"marginLeft"))||0),{top:b,left:c}},setOffset:function(a,b,c){var d=p.css(a,"position");"static"===d&&(a.style.position="relative");var l,m,e=p(a),f=e.offset(),g=p.css(a,"top"),h=p.css(a,"left"),i=("absolute"===d||"fixed"===d)&&p.inArray("auto",[g,h])>-1,j={},k={};i?(k=e.position(),l=k.top,m=k.left):(l=parseFloat(g)||0,m=parseFloat(h)||0),p.isFunction(b)&&(b=b.call(a,c,f)),null!=b.top&&(j.top=b.top-f.top+l),null!=b.left&&(j.left=b.left-f.left+m),"using"in b?b.using.call(a,j):e.css(j)
}},p.fn.extend({position:function(){if(this[0]){var a=this[0],b=this.offsetParent(),c=this.offset(),d=c$.test(b[0].nodeName)?{top:0,left:0}:b.offset();return c.top-=parseFloat(p.css(a,"marginTop"))||0,c.left-=parseFloat(p.css(a,"marginLeft"))||0,d.top+=parseFloat(p.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(p.css(b[0],"borderLeftWidth"))||0,{top:c.top-d.top,left:c.left-d.left}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||e.body;a&&!c$.test(a.nodeName)&&"static"===p.css(a,"position");)a=a.offsetParent;return a||e.body})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);p.fn[a]=function(e){return p.access(this,function(a,e,f){var g=c_(a);
return f===b?g?c in g?g[c]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?p(g).scrollLeft():f,d?f:p(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),p.each({Height:"height",Width:"width"},function(a,c){p.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){p.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(e===!0||f===!0?"margin":"border");return p.access(this,function(c,d,e){var f;return p.isWindow(c)?c.document.documentElement["client"+a]:9===c.nodeType?(f=c.documentElement,Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])):e===b?p.css(c,d,e,h):p.style(c,d,e,h)},c,g?e:b,g)
}})}),a.jQuery=a.$=p,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return p})}(window),function(){function n(n,t,e){e=(e||0)-1;for(var r=n?n.length:0;++e<r;)if(n[e]===t)return e;return-1}function t(t,e){var r=typeof e;if(t=t.l,"boolean"==r||null==e)return t[e]?0:-1;"number"!=r&&"string"!=r&&(r="object");var u="number"==r?e:b+e;return t=(t=t[r])&&t[u],"object"==r?t&&-1<n(t,e)?0:-1:t?0:-1}function e(n){var t=this.l,e=typeof n;if("boolean"==e||null==n)t[n]=!0;else{"number"!=e&&"string"!=e&&(e="object");var r="number"==e?n:b+n,t=t[e]||(t[e]={});"object"==e?(t[r]||(t[r]=[])).push(n):t[r]=!0}}function r(n){return n.charCodeAt(0)
}function u(n,t){for(var e=n.m,r=t.m,u=-1,o=e.length;++u<o;){var a=e[u],i=r[u];if(a!==i){if(a>i||"undefined"==typeof a)return 1;if(i>a||"undefined"==typeof i)return-1}}return n.n-t.n}function o(n){var t=-1,r=n.length,u=n[0],o=n[r/2|0],a=n[r-1];if(u&&"object"==typeof u&&o&&"object"==typeof o&&a&&"object"==typeof a)return!1;for(u=l(),u["false"]=u["null"]=u["true"]=u.undefined=!1,o=l(),o.k=n,o.l=u,o.push=e;++t<r;)o.push(n[t]);return o}function a(n){return"\\"+Y[n]}function i(){return v.pop()||[]}function l(){return y.pop()||{k:null,l:null,m:null,"false":!1,n:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,o:null}}function f(n){return"function"!=typeof n.toString&&"string"==typeof(n+"")
}function c(n){n.length=0,v.length<w&&v.push(n)}function p(n){var t=n.l;t&&p(t),n.k=n.l=n.m=n.object=n.number=n.string=n.o=null,y.length<w&&y.push(n)}function s(n,t,e){t||(t=0),"undefined"==typeof e&&(e=n?n.length:0);var r=-1;e=e-t||0;for(var u=Array(0>e?0:e);++r<e;)u[r]=n[t+r];return u}function g(e){function v(n){return n&&"object"==typeof n&&!qe(n)&&we.call(n,"__wrapped__")?n:new y(n)}function y(n,t){this.__chain__=!!t,this.__wrapped__=n}function w(n){function t(){if(r){var n=s(r);je.apply(n,arguments)}if(this instanceof t){var o=nt(e.prototype),n=e.apply(o,n||arguments);return xt(n)?n:o}return e.apply(u,n||arguments)}var e=n[0],r=n[2],u=n[4];return ze(t,n),t
}function Y(n,t,e,r,u){if(e){var o=e(n);if("undefined"!=typeof o)return o}if(!xt(n))return n;var a=he.call(n);if(!V[a]||!Le.nodeClass&&f(n))return n;var l=Te[a];switch(a){case L:case z:return new l(+n);case W:case M:return new l(n);case J:return o=l(n.source,S.exec(n)),o.lastIndex=n.lastIndex,o}if(a=qe(n),t){var p=!r;r||(r=i()),u||(u=i());for(var g=r.length;g--;)if(r[g]==n)return u[g];o=a?l(n.length):{}}else o=a?s(n):Ye({},n);return a&&(we.call(n,"index")&&(o.index=n.index),we.call(n,"input")&&(o.input=n.input)),t?(r.push(n),u.push(o),(a?Xe:tr)(n,function(n,a){o[a]=Y(n,t,e,r,u)}),p&&(c(r),c(u)),o):o}function nt(n){return xt(n)?Se(n):{}}function tt(n,t,e){if("function"!=typeof n)return Ht;
if("undefined"==typeof t||!("prototype"in n))return n;var r=n.__bindData__;if("undefined"==typeof r&&(Le.funcNames&&(r=!n.name),r=r||!Le.funcDecomp,!r)){var u=be.call(n);Le.funcNames||(r=!A.test(u)),r||(r=B.test(u),ze(n,r))}if(!1===r||!0!==r&&1&r[1])return n;switch(e){case 1:return function(e){return n.call(t,e)};case 2:return function(e,r){return n.call(t,e,r)};case 3:return function(e,r,u){return n.call(t,e,r,u)};case 4:return function(e,r,u,o){return n.call(t,e,r,u,o)}}return Mt(n,t)}function et(n){function t(){var n=l?a:this;if(u){var h=s(u);je.apply(h,arguments)}return(o||c)&&(h||(h=s(arguments)),o&&je.apply(h,o),c&&h.length<i)?(r|=16,et([e,p?r:-4&r,h,null,a,i])):(h||(h=arguments),f&&(e=n[g]),this instanceof t?(n=nt(e.prototype),h=e.apply(n,h),xt(h)?h:n):e.apply(n,h))
}var e=n[0],r=n[1],u=n[2],o=n[3],a=n[4],i=n[5],l=1&r,f=2&r,c=4&r,p=8&r,g=e;return ze(t,n),t}function rt(e,r){var u=-1,a=ht(),i=e?e.length:0,l=i>=_&&a===n,f=[];if(l){var c=o(r);c?(a=t,r=c):l=!1}for(;++u<i;)c=e[u],0>a(r,c)&&f.push(c);return l&&p(r),f}function ot(n,t,e,r){r=(r||0)-1;for(var u=n?n.length:0,o=[];++r<u;){var a=n[r];if(a&&"object"==typeof a&&"number"==typeof a.length&&(qe(a)||dt(a))){t||(a=ot(a,t,e));var i=-1,l=a.length,f=o.length;for(o.length+=l;++i<l;)o[f++]=a[i]}else e||o.push(a)}return o}function at(n,t,e,r,u,o){if(e){var a=e(n,t);if("undefined"!=typeof a)return!!a}if(n===t)return 0!==n||1/n==1/t;if(n===n&&!(n&&X[typeof n]||t&&X[typeof t]))return!1;
if(null==n||null==t)return n===t;var l=he.call(n),p=he.call(t);if(l==T&&(l=G),p==T&&(p=G),l!=p)return!1;switch(l){case L:case z:return+n==+t;case W:return n!=+n?t!=+t:0==n?1/n==1/t:n==+t;case J:case M:return n==ie(t)}if(p=l==$,!p){var s=we.call(n,"__wrapped__"),g=we.call(t,"__wrapped__");if(s||g)return at(s?n.__wrapped__:n,g?t.__wrapped__:t,e,r,u,o);if(l!=G||!Le.nodeClass&&(f(n)||f(t)))return!1;if(l=!Le.argsObject&&dt(n)?oe:n.constructor,s=!Le.argsObject&&dt(t)?oe:t.constructor,l!=s&&!(jt(l)&&l instanceof l&&jt(s)&&s instanceof s)&&"constructor"in n&&"constructor"in t)return!1}for(l=!u,u||(u=i()),o||(o=i()),s=u.length;s--;)if(u[s]==n)return o[s]==t;var h=0,a=!0;
if(u.push(n),o.push(t),p){if(s=n.length,h=t.length,(a=h==s)||r)for(;h--;)if(p=s,g=t[h],r)for(;p--&&!(a=at(n[p],g,e,r,u,o)););else if(!(a=at(n[h],g,e,r,u,o)))break}else nr(t,function(t,i,l){return we.call(l,i)?(h++,a=we.call(n,i)&&at(n[i],t,e,r,u,o)):void 0}),a&&!r&&nr(n,function(n,t,e){return we.call(e,t)?a=-1<--h:void 0});return u.pop(),o.pop(),l&&(c(u),c(o)),a}function it(n,t,e,r,u){(qe(t)?Dt:tr)(t,function(t,o){var a,i,l=t,f=n[o];if(t&&((i=qe(t))||er(t))){for(l=r.length;l--;)if(a=r[l]==t){f=u[l];break}if(!a){var c;e&&(l=e(f,t),c="undefined"!=typeof l)&&(f=l),c||(f=i?qe(f)?f:[]:er(f)?f:{}),r.push(t),u.push(f),c||it(f,t,e,r,u)}}else e&&(l=e(f,t),"undefined"==typeof l&&(l=t)),"undefined"!=typeof l&&(f=l);
n[o]=f})}function lt(n,t){return n+de(Fe()*(t-n+1))}function ft(e,r,u){var a=-1,l=ht(),f=e?e.length:0,s=[],g=!r&&f>=_&&l===n,h=u||g?i():s;for(g&&(h=o(h),l=t);++a<f;){var v=e[a],y=u?u(v,a,e):v;(r?!a||h[h.length-1]!==y:0>l(h,y))&&((u||g)&&h.push(y),s.push(v))}return g?(c(h.k),p(h)):u&&c(h),s}function ct(n){return function(t,e,r){var u={};if(e=v.createCallback(e,r,3),qe(t)){r=-1;for(var o=t.length;++r<o;){var a=t[r];n(u,a,e(a,r,t),t)}}else Xe(t,function(t,r,o){n(u,t,e(t,r,o),o)});return u}}function pt(n,t,e,r,u,o){var a=1&t,i=4&t,l=16&t,f=32&t;if(!(2&t||jt(n)))throw new le;l&&!e.length&&(t&=-17,l=e=!1),f&&!r.length&&(t&=-33,f=r=!1);var c=n&&n.__bindData__;return c&&!0!==c?(c=s(c),c[2]&&(c[2]=s(c[2])),c[3]&&(c[3]=s(c[3])),!a||1&c[1]||(c[4]=u),!a&&1&c[1]&&(t|=8),!i||4&c[1]||(c[5]=o),l&&je.apply(c[2]||(c[2]=[]),e),f&&Ee.apply(c[3]||(c[3]=[]),r),c[1]|=t,pt.apply(null,c)):(1==t||17===t?w:et)([n,t,e,r,u,o])
}function st(){Q.h=F,Q.b=Q.c=Q.g=Q.i="",Q.e="t",Q.j=!0;for(var n,t=0;n=arguments[t];t++)for(var e in n)Q[e]=n[e];t=Q.a,Q.d=/^[^,]+/.exec(t)[0],n=ee,t="return function("+t+"){",e=Q;var r="var n,t="+e.d+",E="+e.e+";if(!t)return E;"+e.i+";";e.b?(r+="var u=t.length;n=-1;if("+e.b+"){",Le.unindexedChars&&(r+="if(s(t)){t=t.split('')}"),r+="while(++n<u){"+e.g+";}}else{"):Le.nonEnumArgs&&(r+="var u=t.length;n=-1;if(u&&p(t)){while(++n<u){n+='';"+e.g+";}}else{"),Le.enumPrototypes&&(r+="var G=typeof t=='function';"),Le.enumErrorProps&&(r+="var F=t===k||t instanceof Error;");var u=[];if(Le.enumPrototypes&&u.push('!(G&&n=="prototype")'),Le.enumErrorProps&&u.push('!(F&&(n=="message"||n=="name"))'),e.j&&e.f)r+="var C=-1,D=B[typeof t]&&v(t),u=D?D.length:0;while(++C<u){n=D[C];",u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}";
else if(r+="for(n in t){",e.j&&u.push("m.call(t, n)"),u.length&&(r+="if("+u.join("&&")+"){"),r+=e.g+";",u.length&&(r+="}"),r+="}",Le.nonEnumShadows){for(r+="if(t!==A){var i=t.constructor,r=t===(i&&i.prototype),f=t===J?I:t===k?j:L.call(t),x=y[f];",k=0;7>k;k++)r+="n='"+e.h[k]+"';if((!(r&&x[n])&&m.call(t,n))",e.j||(r+="||(!x[n]&&t[n]!==A[n])"),r+="){"+e.g+"}";r+="}"}return(e.b||Le.nonEnumArgs)&&(r+="}"),r+=e.c+";return E",n("d,j,k,m,o,p,q,s,v,A,B,y,I,J,L",t+r+"}")(tt,q,ce,we,d,dt,qe,kt,Q.f,pe,X,$e,M,se,he)}function gt(n){return Ve[n]}function ht(){var t=(t=v.indexOf)===zt?n:t;return t}function vt(n){return"function"==typeof n&&ve.test(n)}function yt(n){var t,e;return!n||he.call(n)!=G||(t=n.constructor,jt(t)&&!(t instanceof t))||!Le.argsClass&&dt(n)||!Le.nodeClass&&f(n)?!1:Le.ownLast?(nr(n,function(n,t,r){return e=we.call(r,t),!1
}),!1!==e):(nr(n,function(n,t){e=t}),"undefined"==typeof e||we.call(n,e))}function mt(n){return He[n]}function dt(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==T||!1}function bt(n,t,e){var r=We(n),u=r.length;for(t=tt(t,e,3);u--&&(e=r[u],!1!==t(n[e],e,n)););return n}function _t(n){var t=[];return nr(n,function(n,e){jt(n)&&t.push(e)}),t.sort()}function wt(n){for(var t=-1,e=We(n),r=e.length,u={};++t<r;){var o=e[t];u[n[o]]=o}return u}function jt(n){return"function"==typeof n}function xt(n){return!(!n||!X[typeof n])}function Ct(n){return"number"==typeof n||n&&"object"==typeof n&&he.call(n)==W||!1}function kt(n){return"string"==typeof n||n&&"object"==typeof n&&he.call(n)==M||!1
}function Et(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;)u[t]=n[e[t]];return u}function Ot(n,t,e){var r=-1,u=ht(),o=n?n.length:0,a=!1;return e=(0>e?Be(0,o+e):e)||0,qe(n)?a=-1<u(n,t,e):"number"==typeof o?a=-1<(kt(n)?n.indexOf(t,e):u(n,t,e)):Xe(n,function(n){return++r<e?void 0:!(a=n===t)}),a}function St(n,t,e){var r=!0;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&(r=!!t(n[e],e,n)););}else Xe(n,function(n,e,u){return r=!!t(n,e,u)});return r}function At(n,t,e){var r=[];if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u;){var o=n[e];t(o,e,n)&&r.push(o)}}else Xe(n,function(n,e,u){t(n,e,u)&&r.push(n)});return r}function It(n,t,e){if(t=v.createCallback(t,e,3),!qe(n)){var r;
return Xe(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r}e=-1;for(var u=n.length;++e<u;){var o=n[e];if(t(o,e,n))return o}}function Dt(n,t,e){if(t&&"undefined"==typeof e&&qe(n)){e=-1;for(var r=n.length;++e<r&&!1!==t(n[e],e,n););}else Xe(n,t,e);return n}function Nt(n,t,e){var r=n,u=n?n.length:0;if(t=t&&"undefined"==typeof e?t:tt(t,e,3),qe(n))for(;u--&&!1!==t(n[u],u,n););else{if("number"!=typeof u)var o=We(n),u=o.length;else Le.unindexedChars&&kt(n)&&(r=n.split(""));Xe(n,function(n,e,a){return e=o?o[--u]:--u,t(r[e],e,a)})}return n}function Bt(n,t,e){var r=-1,u=n?n.length:0,o=Zt("number"==typeof u?u:0);if(t=v.createCallback(t,e,3),qe(n))for(;++r<u;)o[r]=t(n[r],r,n);
else Xe(n,function(n,e,u){o[++r]=t(n,e,u)});return o}function Pt(n,t,e){var u=-1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;for(var a=n.length;++e<a;){var i=n[e];i>o&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){e=t(n,e,r),e>u&&(u=e,o=n)});return o}function Rt(n,t,e,r){var u=3>arguments.length;if(t=v.createCallback(t,r,4),qe(n)){var o=-1,a=n.length;for(u&&(e=n[++o]);++o<a;)e=t(e,n[o],o,n)}else Xe(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)});return e}function Ft(n,t,e,r){var u=3>arguments.length;return t=v.createCallback(t,r,4),Nt(n,function(n,r,o){e=u?(u=!1,n):t(e,n,r,o)}),e}function Tt(n){var t=-1,e=n?n.length:0,r=Zt("number"==typeof e?e:0);
return Dt(n,function(n){var e=lt(0,++t);r[t]=r[e],r[e]=n}),r}function $t(n,t,e){var r;if(t=v.createCallback(t,e,3),qe(n)){e=-1;for(var u=n.length;++e<u&&!(r=t(n[e],e,n)););}else Xe(n,function(n,e,u){return!(r=t(n,e,u))});return!!r}function Lt(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=-1;for(t=v.createCallback(t,e,3);++o<u&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[0]:h;return s(n,0,Pe(Be(0,r),u))}function zt(t,e,r){if("number"==typeof r){var u=t?t.length:0;r=0>r?Be(0,u+r):r||0}else if(r)return r=Kt(t,e),t[r]===e?r:-1;return n(t,e,r)}function qt(n,t,e){if("number"!=typeof t&&null!=t){var r=0,u=-1,o=n?n.length:0;for(t=v.createCallback(t,e,3);++u<o&&t(n[u],u,n);)r++
}else r=null==t||e?1:Be(0,t);return s(n,r)}function Kt(n,t,e,r){var u=0,o=n?n.length:u;for(e=e?v.createCallback(e,r,1):Ht,t=e(t);o>u;)r=u+o>>>1,e(n[r])<t?u=r+1:o=r;return u}function Wt(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(e=v.createCallback(e,r,3)),ft(n,t,e)}function Gt(){for(var n=1<arguments.length?arguments:arguments[0],t=-1,e=n?Pt(ar(n,"length")):0,r=Zt(0>e?0:e);++t<e;)r[t]=ar(n,t);return r}function Jt(n,t){var e=-1,r=n?n.length:0,u={};for(t||!r||qe(n[0])||(t=[]);++e<r;){var o=n[e];t?u[o]=t[e]:o&&(u[o[0]]=o[1])}return u}function Mt(n,t){return 2<arguments.length?pt(n,17,s(arguments,2),null,t):pt(n,1,null,null,t)
}function Vt(n,t,e){var r,u,o,a,i,l,f,c=0,p=!1,s=!0;if(!jt(n))throw new le;if(t=Be(0,t)||0,!0===e)var g=!0,s=!1;else xt(e)&&(g=e.leading,p="maxWait"in e&&(Be(t,e.maxWait)||0),s="trailing"in e?e.trailing:s);var v=function(){var e=t-(ir()-a);e>0?l=Ce(v,e):(u&&me(u),e=f,u=l=f=h,e&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null)))},y=function(){l&&me(l),u=l=f=h,(s||p!==t)&&(c=ir(),o=n.apply(i,r),l||u||(r=i=null))};return function(){if(r=arguments,a=ir(),i=this,f=s&&(l||!g),!1===p)var e=g&&!l;else{u||g||(c=a);var h=p-(a-c),m=0>=h;m?(u&&(u=me(u)),c=a,o=n.apply(i,r)):u||(u=Ce(y,h))}return m&&l?l=me(l):l||t===p||(l=Ce(v,t)),e&&(m=!0,o=n.apply(i,r)),!m||l||u||(r=i=null),o}}function Ht(n){return n
}function Ut(n,t,e){var r=!0,u=t&&_t(t);t&&(e||u.length)||(null==e&&(e=t),o=y,t=n,n=v,u=_t(t)),!1===e?r=!1:xt(e)&&"chain"in e&&(r=e.chain);var o=n,a=jt(o);Dt(u,function(e){var u=n[e]=t[e];a&&(o.prototype[e]=function(){var t=this.__chain__,e=this.__wrapped__,a=[e];if(je.apply(a,arguments),a=u.apply(n,a),r||t){if(e===a&&xt(a))return this;a=new o(a),a.__chain__=t}return a})})}function Qt(){}function Xt(n){return function(t){return t[n]}}function Yt(){return this.__wrapped__}e=e?ut.defaults(Z.Object(),e,ut.pick(Z,R)):Z;var Zt=e.Array,ne=e.Boolean,te=e.Date,ee=e.Function,re=e.Math,ue=e.Number,oe=e.Object,ae=e.RegExp,ie=e.String,le=e.TypeError,fe=[],ce=e.Error.prototype,pe=oe.prototype,se=ie.prototype,ge=e._,he=pe.toString,ve=ae("^"+ie(he).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),ye=re.ceil,me=e.clearTimeout,de=re.floor,be=ee.prototype.toString,_e=vt(_e=oe.getPrototypeOf)&&_e,we=pe.hasOwnProperty,je=fe.push,xe=pe.propertyIsEnumerable,Ce=e.setTimeout,ke=fe.splice,Ee=fe.unshift,Oe=function(){try{var n={},t=vt(t=oe.defineProperty)&&t,e=t(n,n,n)&&t
}catch(r){}return e}(),Se=vt(Se=oe.create)&&Se,Ae=vt(Ae=Zt.isArray)&&Ae,Ie=e.isFinite,De=e.isNaN,Ne=vt(Ne=oe.keys)&&Ne,Be=re.max,Pe=re.min,Re=e.parseInt,Fe=re.random,Te={};Te[$]=Zt,Te[L]=ne,Te[z]=te,Te[K]=ee,Te[G]=oe,Te[W]=ue,Te[J]=ae,Te[M]=ie;var $e={};$e[$]=$e[z]=$e[W]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},$e[L]=$e[M]={constructor:!0,toString:!0,valueOf:!0},$e[q]=$e[K]=$e[J]={constructor:!0,toString:!0},$e[G]={constructor:!0},function(){for(var n=F.length;n--;){var t,e=F[n];for(t in $e)we.call($e,t)&&!we.call($e[t],e)&&($e[t][e]=!1)}}(),y.prototype=v.prototype;var Le=v.support={};!function(){var n=function(){this.x=1},t={0:1,length:1},r=[];
n.prototype={valueOf:1,y:1};for(var u in new n)r.push(u);for(u in arguments);Le.argsClass=he.call(arguments)==T,Le.argsObject=arguments.constructor==oe&&!(arguments instanceof Zt),Le.enumErrorProps=xe.call(ce,"message")||xe.call(ce,"name"),Le.enumPrototypes=xe.call(n,"prototype"),Le.funcDecomp=!vt(e.WinRTError)&&B.test(g),Le.funcNames="string"==typeof ee.name,Le.nonEnumArgs=0!=u,Le.nonEnumShadows=!/valueOf/.test(r),Le.ownLast="x"!=r[0],Le.spliceObjects=(fe.splice.call(t,0,1),!t[0]),Le.unindexedChars="xx"!="x"[0]+oe("x")[0];try{Le.nodeClass=!(he.call(document)==G&&!({toString:0}+""))}catch(o){Le.nodeClass=!0}}(1),v.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:I,variable:"",imports:{_:v}},Se||(nt=function(){function n(){}return function(t){if(xt(t)){n.prototype=t;
var r=new n;n.prototype=null}return r||e.Object()}}());var ze=Oe?function(n,t){U.value=t,Oe(n,"__bindData__",U)}:Qt;Le.argsClass||(dt=function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&we.call(n,"callee")&&!xe.call(n,"callee")||!1});var qe=Ae||function(n){return n&&"object"==typeof n&&"number"==typeof n.length&&he.call(n)==$||!1},Ke=st({a:"z",e:"[]",i:"if(!(B[typeof z]))return E",g:"E.push(n)"}),We=Ne?function(n){return xt(n)?Le.enumPrototypes&&"function"==typeof n||Le.nonEnumArgs&&n.length&&dt(n)?Ke(n):Ne(n):[]}:Ke,Ge={a:"g,e,K",i:"e=e&&typeof K=='undefined'?e:d(e,K,3)",b:"typeof u=='number'",v:We,g:"if(e(t[n],n,g)===false)return E"},Je={a:"z,H,l",i:"var a=arguments,b=0,c=typeof l=='number'?2:a.length;while(++b<c){t=a[b];if(t&&B[typeof t]){",v:We,g:"if(typeof E[n]=='undefined')E[n]=t[n]",c:"}}"},Me={i:"if(!B[typeof t])return E;"+Ge.i,b:!1},Ve={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},He=wt(Ve),Ue=ae("("+We(He).join("|")+")","g"),Qe=ae("["+We(Ve).join("")+"]","g"),Xe=st(Ge),Ye=st(Je,{i:Je.i.replace(";",";if(c>3&&typeof a[c-2]=='function'){var e=d(a[--c-1],a[c--],2)}else if(c>2&&typeof a[c-1]=='function'){e=a[--c]}"),g:"E[n]=e?e(E[n],t[n]):t[n]"}),Ze=st(Je),nr=st(Ge,Me,{j:!1}),tr=st(Ge,Me);
jt(/x/)&&(jt=function(n){return"function"==typeof n&&he.call(n)==K});var er=_e?function(n){if(!n||he.call(n)!=G||!Le.argsClass&&dt(n))return!1;var t=n.valueOf,e=vt(t)&&(e=_e(t))&&_e(e);return e?n==e||_e(n)==e:yt(n)}:yt,rr=ct(function(n,t,e){we.call(n,e)?n[e]++:n[e]=1}),ur=ct(function(n,t,e){(we.call(n,e)?n[e]:n[e]=[]).push(t)}),or=ct(function(n,t,e){n[e]=t}),ar=Bt,ir=vt(ir=te.now)&&ir||function(){return(new te).getTime()},lr=8==Re(j+"08")?Re:function(n,t){return Re(kt(n)?n.replace(D,""):n,t||0)};return v.after=function(n,t){if(!jt(t))throw new le;return function(){return 1>--n?t.apply(this,arguments):void 0}},v.assign=Ye,v.at=function(n){var t=arguments,e=-1,r=ot(t,!0,!1,1),t=t[2]&&t[2][t[1]]===n?1:r.length,u=Zt(t);
for(Le.unindexedChars&&kt(n)&&(n=n.split(""));++e<t;)u[e]=n[r[e]];return u},v.bind=Mt,v.bindAll=function(n){for(var t=1<arguments.length?ot(arguments,!0,!1,1):_t(n),e=-1,r=t.length;++e<r;){var u=t[e];n[u]=pt(n[u],1,null,null,n)}return n},v.bindKey=function(n,t){return 2<arguments.length?pt(t,19,s(arguments,2),null,n):pt(t,3,null,null,n)},v.chain=function(n){return n=new y(n),n.__chain__=!0,n},v.compact=function(n){for(var t=-1,e=n?n.length:0,r=[];++t<e;){var u=n[t];u&&r.push(u)}return r},v.compose=function(){for(var n=arguments,t=n.length;t--;)if(!jt(n[t]))throw new le;return function(){for(var t=arguments,e=n.length;e--;)t=[n[e].apply(this,t)];return t[0]}},v.constant=function(n){return function(){return n
}},v.countBy=rr,v.create=function(n,t){var e=nt(n);return t?Ye(e,t):e},v.createCallback=function(n,t,e){var r=typeof n;if(null==n||"function"==r)return tt(n,t,e);if("object"!=r)return Xt(n);var u=We(n),o=u[0],a=n[o];return 1!=u.length||a!==a||xt(a)?function(t){for(var e=u.length,r=!1;e--&&(r=at(t[u[e]],n[u[e]],null,!0)););return r}:function(n){return n=n[o],a===n&&(0!==a||1/a==1/n)}},v.curry=function(n,t){return t="number"==typeof t?t:+t||n.length,pt(n,4,null,null,null,t)},v.debounce=Vt,v.defaults=Ze,v.defer=function(n){if(!jt(n))throw new le;var t=s(arguments,1);return Ce(function(){n.apply(h,t)},1)},v.delay=function(n,t){if(!jt(n))throw new le;var e=s(arguments,2);
return Ce(function(){n.apply(h,e)},t)},v.difference=function(n){return rt(n,ot(arguments,!0,!0,1))},v.filter=At,v.flatten=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e="function"!=typeof t&&r&&r[t]===n?null:t,t=!1),null!=e&&(n=Bt(n,e,r)),ot(n,t)},v.forEach=Dt,v.forEachRight=Nt,v.forIn=nr,v.forInRight=function(n,t,e){var r=[];nr(n,function(n,t){r.push(t,n)});var u=r.length;for(t=tt(t,e,3);u--&&!1!==t(r[u--],r[u],n););return n},v.forOwn=tr,v.forOwnRight=bt,v.functions=_t,v.groupBy=ur,v.indexBy=or,v.initial=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else r=null==t||e?1:t||r;
return s(n,0,Pe(Be(0,u-r),u))},v.intersection=function(){for(var e=[],r=-1,u=arguments.length,a=i(),l=ht(),f=l===n,s=i();++r<u;){var g=arguments[r];(qe(g)||dt(g))&&(e.push(g),a.push(f&&g.length>=_&&o(r?e[r]:s)))}var f=e[0],h=-1,v=f?f.length:0,y=[];n:for(;++h<v;){var m=a[0],g=f[h];if(0>(m?t(m,g):l(s,g))){for(r=u,(m||s).push(g);--r;)if(m=a[r],0>(m?t(m,g):l(e[r],g)))continue n;y.push(g)}}for(;u--;)(m=a[u])&&p(m);return c(a),c(s),y},v.invert=wt,v.invoke=function(n,t){var e=s(arguments,2),r=-1,u="function"==typeof t,o=n?n.length:0,a=Zt("number"==typeof o?o:0);return Dt(n,function(n){a[++r]=(u?t:n[t]).apply(n,e)}),a},v.keys=We,v.map=Bt,v.mapValues=function(n,t,e){var r={};
return t=v.createCallback(t,e,3),tr(n,function(n,e,u){r[e]=t(n,e,u)}),r},v.max=Pt,v.memoize=function(n,t){if(!jt(n))throw new le;var e=function(){var r=e.cache,u=t?t.apply(this,arguments):b+arguments[0];return we.call(r,u)?r[u]:r[u]=n.apply(this,arguments)};return e.cache={},e},v.merge=function(n){var t=arguments,e=2;if(!xt(n))return n;if("number"!=typeof t[2]&&(e=t.length),e>3&&"function"==typeof t[e-2])var r=tt(t[--e-1],t[e--],2);else e>2&&"function"==typeof t[e-1]&&(r=t[--e]);for(var t=s(arguments,1,e),u=-1,o=i(),a=i();++u<e;)it(n,t[u],r,o,a);return c(o),c(a),n},v.min=function(n,t,e){var u=1/0,o=u;if("function"!=typeof t&&e&&e[t]===n&&(t=null),null==t&&qe(n)){e=-1;
for(var a=n.length;++e<a;){var i=n[e];o>i&&(o=i)}}else t=null==t&&kt(n)?r:v.createCallback(t,e,3),Xe(n,function(n,e,r){e=t(n,e,r),u>e&&(u=e,o=n)});return o},v.omit=function(n,t,e){var r={};if("function"!=typeof t){var u=[];nr(n,function(n,t){u.push(t)});for(var u=rt(u,ot(arguments,!0,!1,1)),o=-1,a=u.length;++o<a;){var i=u[o];r[i]=n[i]}}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)||(r[e]=n)});return r},v.once=function(n){var t,e;if(!jt(n))throw new le;return function(){return t?e:(t=!0,e=n.apply(this,arguments),n=null,e)}},v.pairs=function(n){for(var t=-1,e=We(n),r=e.length,u=Zt(r);++t<r;){var o=e[t];u[t]=[o,n[o]]}return u},v.partial=function(n){return pt(n,16,s(arguments,1))
},v.partialRight=function(n){return pt(n,32,null,s(arguments,1))},v.pick=function(n,t,e){var r={};if("function"!=typeof t)for(var u=-1,o=ot(arguments,!0,!1,1),a=xt(n)?o.length:0;++u<a;){var i=o[u];i in n&&(r[i]=n[i])}else t=v.createCallback(t,e,3),nr(n,function(n,e,u){t(n,e,u)&&(r[e]=n)});return r},v.pluck=ar,v.property=Xt,v.pull=function(n){for(var t=arguments,e=0,r=t.length,u=n?n.length:0;++e<r;)for(var o=-1,a=t[e];++o<u;)n[o]===a&&(ke.call(n,o--,1),u--);return n},v.range=function(n,t,e){n=+n||0,e="number"==typeof e?e:+e||1,null==t&&(t=n,n=0);var r=-1;t=Be(0,ye((t-n)/(e||1)));for(var u=Zt(t);++r<t;)u[r]=n,n+=e;return u},v.reject=function(n,t,e){return t=v.createCallback(t,e,3),At(n,function(n,e,r){return!t(n,e,r)
})},v.remove=function(n,t,e){var r=-1,u=n?n.length:0,o=[];for(t=v.createCallback(t,e,3);++r<u;)e=n[r],t(e,r,n)&&(o.push(e),ke.call(n,r--,1),u--);return o},v.rest=qt,v.shuffle=Tt,v.sortBy=function(n,t,e){var r=-1,o=qe(t),a=n?n.length:0,f=Zt("number"==typeof a?a:0);for(o||(t=v.createCallback(t,e,3)),Dt(n,function(n,e,u){var a=f[++r]=l();o?a.m=Bt(t,function(t){return n[t]}):(a.m=i())[0]=t(n,e,u),a.n=r,a.o=n}),a=f.length,f.sort(u);a--;)n=f[a],f[a]=n.o,o||c(n.m),p(n);return f},v.tap=function(n,t){return t(n),n},v.throttle=function(n,t,e){var r=!0,u=!0;if(!jt(n))throw new le;return!1===e?r=!1:xt(e)&&(r="leading"in e?e.leading:r,u="trailing"in e?e.trailing:u),H.leading=r,H.maxWait=t,H.trailing=u,Vt(n,t,H)
},v.times=function(n,t,e){n=-1<(n=+n)?n:0;var r=-1,u=Zt(n);for(t=tt(t,e,1);++r<n;)u[r]=t(r);return u},v.toArray=function(n){return n&&"number"==typeof n.length?Le.unindexedChars&&kt(n)?n.split(""):s(n):Et(n)},v.transform=function(n,t,e,r){var u=qe(n);if(null==e)if(u)e=[];else{var o=n&&n.constructor;e=nt(o&&o.prototype)}return t&&(t=v.createCallback(t,r,4),(u?Xe:tr)(n,function(n,r,u){return t(e,n,r,u)})),e},v.union=function(){return ft(ot(arguments,!0,!0))},v.uniq=Wt,v.values=Et,v.where=At,v.without=function(n){return rt(n,s(arguments,1))},v.wrap=function(n,t){return pt(t,16,[n])},v.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var e=arguments[n];if(qe(e)||dt(e))var r=r?ft(rt(r,e).concat(rt(e,r))):e
}return r||[]},v.zip=Gt,v.zipObject=Jt,v.collect=Bt,v.drop=qt,v.each=Dt,v.eachRight=Nt,v.extend=Ye,v.methods=_t,v.object=Jt,v.select=At,v.tail=qt,v.unique=Wt,v.unzip=Gt,Ut(v),v.clone=function(n,t,e,r){return"boolean"!=typeof t&&null!=t&&(r=e,e=t,t=!1),Y(n,t,"function"==typeof e&&tt(e,r,1))},v.cloneDeep=function(n,t,e){return Y(n,!0,"function"==typeof t&&tt(t,e,1))},v.contains=Ot,v.escape=function(n){return null==n?"":ie(n).replace(Qe,gt)},v.every=St,v.find=It,v.findIndex=function(n,t,e){var r=-1,u=n?n.length:0;for(t=v.createCallback(t,e,3);++r<u;)if(t(n[r],r,n))return r;return-1},v.findKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),tr(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0
}),r},v.findLast=function(n,t,e){var r;return t=v.createCallback(t,e,3),Nt(n,function(n,e,u){return t(n,e,u)?(r=n,!1):void 0}),r},v.findLastIndex=function(n,t,e){var r=n?n.length:0;for(t=v.createCallback(t,e,3);r--;)if(t(n[r],r,n))return r;return-1},v.findLastKey=function(n,t,e){var r;return t=v.createCallback(t,e,3),bt(n,function(n,e,u){return t(n,e,u)?(r=e,!1):void 0}),r},v.has=function(n,t){return n?we.call(n,t):!1},v.identity=Ht,v.indexOf=zt,v.isArguments=dt,v.isArray=qe,v.isBoolean=function(n){return!0===n||!1===n||n&&"object"==typeof n&&he.call(n)==L||!1},v.isDate=function(n){return n&&"object"==typeof n&&he.call(n)==z||!1},v.isElement=function(n){return n&&1===n.nodeType||!1
},v.isEmpty=function(n){var t=!0;if(!n)return t;var e=he.call(n),r=n.length;return e==$||e==M||(Le.argsClass?e==T:dt(n))||e==G&&"number"==typeof r&&jt(n.splice)?!r:(tr(n,function(){return t=!1}),t)},v.isEqual=function(n,t,e,r){return at(n,t,"function"==typeof e&&tt(e,r,2))},v.isFinite=function(n){return Ie(n)&&!De(parseFloat(n))},v.isFunction=jt,v.isNaN=function(n){return Ct(n)&&n!=+n},v.isNull=function(n){return null===n},v.isNumber=Ct,v.isObject=xt,v.isPlainObject=er,v.isRegExp=function(n){return n&&X[typeof n]&&he.call(n)==J||!1},v.isString=kt,v.isUndefined=function(n){return"undefined"==typeof n},v.lastIndexOf=function(n,t,e){var r=n?n.length:0;for("number"==typeof e&&(r=(0>e?Be(0,r+e):Pe(e,r-1))+1);r--;)if(n[r]===t)return r;
return-1},v.mixin=Ut,v.noConflict=function(){return e._=ge,this},v.noop=Qt,v.now=ir,v.parseInt=lr,v.random=function(n,t,e){var r=null==n,u=null==t;return null==e&&("boolean"==typeof n&&u?(e=n,n=1):u||"boolean"!=typeof t||(e=t,u=!0)),r&&u&&(t=1),n=+n||0,u?(t=n,n=0):t=+t||0,e||n%1||t%1?(e=Fe(),Pe(n+e*(t-n+parseFloat("1e-"+((e+"").length-1))),t)):lt(n,t)},v.reduce=Rt,v.reduceRight=Ft,v.result=function(n,t){if(n){var e=n[t];return jt(e)?n[t]():e}},v.runInContext=g,v.size=function(n){var t=n?n.length:0;return"number"==typeof t?t:We(n).length},v.some=$t,v.sortedIndex=Kt,v.template=function(n,t,e){var r=v.templateSettings;n=ie(n||""),e=Ze({},e,r);var u,o=Ze({},e.imports,r.imports),r=We(o),o=Et(o),i=0,l=e.interpolate||N,f="__p+='",l=ae((e.escape||N).source+"|"+l.source+"|"+(l===I?O:N).source+"|"+(e.evaluate||N).source+"|$","g");
n.replace(l,function(t,e,r,o,l,c){return r||(r=o),f+=n.slice(i,c).replace(P,a),e&&(f+="'+__e("+e+")+'"),l&&(u=!0,f+="';"+l+";\n__p+='"),r&&(f+="'+((__t=("+r+"))==null?'':__t)+'"),i=c+t.length,t}),f+="';",l=e=e.variable,l||(e="obj",f="with("+e+"){"+f+"}"),f=(u?f.replace(x,""):f).replace(C,"$1").replace(E,"$1;"),f="function("+e+"){"+(l?"":e+"||("+e+"={});")+"var __t,__p='',__e=_.escape"+(u?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+f+"return __p}";try{var c=ee(r,"return "+f).apply(h,o)}catch(p){throw p.source=f,p}return t?c(t):(c.source=f,c)},v.unescape=function(n){return null==n?"":ie(n).replace(Ue,mt)},v.uniqueId=function(n){var t=++m;
return ie(null==n?"":n)+t},v.all=St,v.any=$t,v.detect=It,v.findWhere=It,v.foldl=Rt,v.foldr=Ft,v.include=Ot,v.inject=Rt,Ut(function(){var n={};return tr(v,function(t,e){v.prototype[e]||(n[e]=t)}),n}(),!1),v.first=Lt,v.last=function(n,t,e){var r=0,u=n?n.length:0;if("number"!=typeof t&&null!=t){var o=u;for(t=v.createCallback(t,e,3);o--&&t(n[o],o,n);)r++}else if(r=t,null==r||e)return n?n[u-1]:h;return s(n,Be(0,u-r))},v.sample=function(n,t,e){return n&&"number"!=typeof n.length?n=Et(n):Le.unindexedChars&&kt(n)&&(n=n.split("")),null==t||e?n?n[lt(0,n.length-1)]:h:(n=Tt(n),n.length=Pe(Be(0,t),n.length),n)},v.take=Lt,v.head=Lt,tr(v,function(n,t){var e="sample"!==t;v.prototype[t]||(v.prototype[t]=function(t,r){var u=this.__chain__,o=n(this.__wrapped__,t,r);
return u||null!=t&&(!r||e&&"function"==typeof t)?new y(o,u):o})}),v.VERSION="2.4.1",v.prototype.chain=function(){return this.__chain__=!0,this},v.prototype.toString=function(){return ie(this.__wrapped__)},v.prototype.value=Yt,v.prototype.valueOf=Yt,Xe(["join","pop","shift"],function(n){var t=fe[n];v.prototype[n]=function(){var n=this.__chain__,e=t.apply(this.__wrapped__,arguments);return n?new y(e,n):e}}),Xe(["push","reverse","sort","unshift"],function(n){var t=fe[n];v.prototype[n]=function(){return t.apply(this.__wrapped__,arguments),this}}),Xe(["concat","slice","splice"],function(n){var t=fe[n];v.prototype[n]=function(){return new y(t.apply(this.__wrapped__,arguments),this.__chain__)
}}),Le.spliceObjects||Xe(["pop","shift","splice"],function(n){var t=fe[n],e="splice"==n;v.prototype[n]=function(){var n=this.__chain__,r=this.__wrapped__,u=t.apply(r,arguments);return 0===r.length&&delete r[0],n||e?new y(u,n):u}}),v}var h,v=[],y=[],m=0,d={},b=+new Date+"",_=75,w=40,j=" 	\fÂ ï»¿\n\r\u2028\u2029áá ââââââââââââ¯âã",x=/\b__p\+='';/g,C=/\b(__p\+=)''\+/g,E=/(__e\(.*?\)|\b__t\))\+'';/g,O=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,S=/\w*$/,A=/^\s*function[ \n\r\t]+\w/,I=/<%=([\s\S]+?)%>/g,D=RegExp("^["+j+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,P=/['\n\r\t\u2028\u2029\\]/g,R="Array Boolean Date Error Function Math Number Object RegExp String _ attachEvent clearTimeout isFinite isNaN parseInt setTimeout".split(" "),F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),T="[object Arguments]",$="[object Array]",L="[object Boolean]",z="[object Date]",q="[object Error]",K="[object Function]",W="[object Number]",G="[object Object]",J="[object RegExp]",M="[object String]",V={};
V[K]=!1,V[T]=V[$]=V[L]=V[z]=V[W]=V[G]=V[J]=V[M]=!0;var H={leading:!1,maxWait:0,trailing:!1},U={configurable:!1,enumerable:!1,value:null,writable:!1},Q={a:"",b:null,c:"",d:"",e:"",v:null,g:"",h:null,support:null,i:"",j:!1},X={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},Y={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},Z=X[typeof window]&&window||this,nt=X[typeof exports]&&exports&&!exports.nodeType&&exports,tt=X[typeof module]&&module&&!module.nodeType&&module,et=tt&&tt.exports===nt&&nt,rt=X[typeof global]&&global;!rt||rt.global!==rt&&rt.window!==rt||(Z=rt);var ut=g();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Z._=ut,define("lodash",[],function(){return ut
})):nt&&tt?et?(tt.exports=ut)._=ut:nt._=ut:Z._=ut}.call(this);var initializing=!1,fnTest=/xyz/.test(function(){})?/\b_super\b/:/.*/;Class=function(){},Class.extend=function(prop){var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop)prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prop[name];return Class=function(){!initializing&&this.init&&this.init.apply(this,arguments)},Class.prototype=prototype,Class.constructor=Class,Class.extend=arguments.callee,Class
},"undefined"!=typeof exports&&(exports.Class=Class),define("class",function(global){return function(){var ret;return ret||global.Class}}(this)),define("taoQtiItem/qtiItem/core/qtiClasses",[],function(){return{_container:"taoQtiItem/qtiItem/core/Container",assessmentItem:"taoQtiItem/qtiItem/core/Item",responseProcessing:"taoQtiItem/qtiItem/core/ResponseProcessing",_simpleFeedbackRule:"taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",stylesheet:"taoQtiItem/qtiItem/core/Stylesheet",math:"taoQtiItem/qtiItem/core/Math",img:"taoQtiItem/qtiItem/core/Img",object:"taoQtiItem/qtiItem/core/Object",outcomeDeclaration:"taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiItem/core/variables/ResponseDeclaration",rubricBlock:"taoQtiItem/qtiItem/core/RubricBlock",associableHotspot:"taoQtiItem/qtiItem/core/choices/AssociableHotspot",gap:"taoQtiItem/qtiItem/core/choices/Gap",gapImg:"taoQtiItem/qtiItem/core/choices/GapImg",gapText:"taoQtiItem/qtiItem/core/choices/GapText",hotspotChoice:"taoQtiItem/qtiItem/core/choices/HotspotChoice",hottext:"taoQtiItem/qtiItem/core/choices/Hottext",inlineChoice:"taoQtiItem/qtiItem/core/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiItem/core/choices/SimpleChoice",associateInteraction:"taoQtiItem/qtiItem/core/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",endAttemptInteraction:"taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction",extendedTextInteraction:"taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiItem/core/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiItem/core/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiItem/core/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiItem/core/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiItem/core/interactions/OrderInteraction",prompt:"taoQtiItem/qtiItem/core/interactions/Prompt",selectPointInteraction:"taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiItem/core/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",uploadInteraction:"taoQtiItem/qtiItem/core/interactions/UploadInteraction",feedbackBlock:"taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock",feedbackInline:"taoQtiItem/qtiItem/core/feedbacks/FeedbackInline",modalFeedback:"taoQtiItem/qtiItem/core/feedbacks/ModalFeedback",customInteraction:"taoQtiItem/qtiItem/core/interactions/CustomInteraction",infoControl:"taoQtiItem/qtiItem/core/PortableInfoControl"}
}),define("taoQtiItem/qtiItem/helper/util",["lodash"],function(_){var util={buildSerial:function(prefix){for(var id=prefix||"",chars="abcdefghijklmnopqrstuvwxyz0123456789",i=0;22>i;i++)id+=chars.charAt(Math.floor(Math.random()*chars.length));return id},fullpath:function(src,baseUrl){return src=src||"",baseUrl=baseUrl||"",src&&(src=src.replace(/^\//,""),src.match(/^http/i)||(baseUrl&&!baseUrl.match(/\/$/)&&(baseUrl+="/"),src=baseUrl+src)),src},findInCollection:function(element,collectionNames,searchedSerial){var found=null;if(_.isString(collectionNames)&&(collectionNames=[collectionNames]),!_.isArray(collectionNames))throw new Error("invalid argument : colllectionNames must be an array or a string");
return _.each(collectionNames,function(collectionName){var collection=element;_.each(collectionName.split("."),function(nameToken){collection=collection[nameToken]});var elt=collection[searchedSerial];return elt?(found={parent:element,element:elt},!1):(_.each(collection,function(elt){return _.isFunction(elt.find)&&(found=elt.find(searchedSerial))?!1:void 0}),found?!1:void 0)}),found},addMarkupNamespace:function(markup,ns){return ns?markup.replace(/<(\/)?([^!\/:>]+)(\/)?>/g,"<$1"+ns+":$2$3>"):markup},removeMarkupNamespaces:function(markup){return markup.replace(/<(\/)?(\w*):([^>]*)>/g,"<$1$3>")},getMarkupUsedNamespaces:function(markup){var namespaces=[];return markup.replace(/<(\/)?(\w*):([^>]*)>/g,function(original,slash,ns,node){return namespaces.push(ns),"<"+slash+node+">"
}),_.uniq(namespaces)}};return util}),define("taoQtiItem/qtiItem/helper/rendererConfig",["lodash","jquery"],function(_,$){var rendererConfigHelper={};return rendererConfigHelper.getOptionsFromArguments=function(args){var options={data:{},placeholder:null,subclass:"",renderer:null};return _.each(args,function(arg){arg&&(arg.isRenderer?options.renderer=arg:arg instanceof $&&arg.length?options.placeholder=arg:_.isString(arg)?options.subclass=arg:_.isPlainObject(arg)?options.data=arg:console.log("invalid arg",arg,args))}),options},rendererConfigHelper}),define("taoQtiItem/qtiItem/core/Element",["jquery","class","lodash","taoQtiItem/qtiItem/helper/util","taoQtiItem/qtiItem/helper/rendererConfig"],function($,Class,_,util,rendererConfig){var _instances={},Element=Class.extend({qtiClass:"",serial:"",relatedItem:null,init:function(serial,attributes){if(this.attributes={},this.metaData={},"object"==typeof serial&&(attributes=serial,serial=""),serial||(serial=util.buildSerial(this.qtiClass+"_")),serial&&("string"!=typeof serial||!serial.match(/^[a-z_0-9]*$/i)))throw"invalid QTI serial : ("+typeof serial+") "+serial;
if(_instances[serial])throw"a QTI Element with the same serial already exists "+serial;_instances[serial]=this,this.serial=serial,this.setAttributes(attributes||{}),"function"==typeof this.initContainer&&this.initContainer(arguments[2]||""),"function"==typeof this.initObject&&this.initObject()},is:function(qtiClass){return qtiClass===this.qtiClass},placeholder:function(){return"{{"+this.serial+"}}"},getSerial:function(){return this.serial},getUsedIdentifiers:function(){var usedIds={},elts=this.getComposingElements();for(var i in elts){var elt=elts[i],id=elt.attr("identifier");id&&(usedIds[id]=elt)}return usedIds},attr:function(name,value){if(name)if(void 0!==value)this.attributes[name]=value;
else if("object"==typeof name)for(var prop in name)this.attr(prop,name[prop]);else if("string"==typeof name)return void 0===this.attributes[name]?void 0:this.attributes[name];return this},data:function(name,value){if(name)if(void 0!==value)this.metaData[name]=value,$(document).trigger("metaChange.qti-widget",{element:this,key:name,value:value});else if("object"==typeof name)for(var prop in name)this.data(prop,name[prop]);else if("string"==typeof name)return void 0===this.metaData[name]?void 0:this.metaData[name];return this},removeData:function(name){return delete this.metaData[name],this},removeAttr:function(name){return this.removeAttributes(name)},setAttributes:function(attributes){return this.attributes=attributes,this
},getAttributes:function(){return _.clone(this.attributes)},removeAttributes:function(attrNames){"string"==typeof attrNames&&(attrNames=[attrNames]);for(var i in attrNames)delete this.attributes[attrNames[i]];return this},getComposingElements:function(){var elts={};if("function"==typeof this.initContainer){var container=this.getBody();elts[container.getSerial()]=container,elts=_.extend(elts,container.getComposingElements())}if("function"==typeof this.initObject){var object=this.getObject();elts[object.getSerial()]=object,elts=_.extend(elts,object.getComposingElements())}return _.each(this.metaData,function(v){Element.isA(v,"_container")&&(elts[v.getSerial()]=v,elts=_.extend(elts,v.getComposingElements()))
}),elts},getUsedClasses:function(){var ret=[this.qtiClass],composingElts=this.getComposingElements();return _.each(composingElts,function(elt){ret.push(elt.qtiClass)}),_.uniq(ret)},find:function(serial){var found=null;if("function"==typeof this.initObject){var object=this.getObject();object.serial===serial&&(found={parent:this,element:object,location:"object"})}return found||"function"!=typeof this.initContainer||(found=this.getBody().find(serial,this)),found},parent:function(){var item=this.getRelatedItem();if(item){var found=item.find(this.getSerial());if(found)return found.parent}return null},setRelatedItem:function(item,recursive){if(recursive="undefined"==typeof recursive?!0:recursive,Element.isA(item,"assessmentItem")){this.relatedItem=item;
var composingElts=this.getComposingElements();for(var i in composingElts)composingElts[i].setRelatedItem(item,!1)}},getRelatedItem:function(){var ret=null;return Element.isA(this.relatedItem,"assessmentItem")&&(ret=this.relatedItem),ret},setRenderer:function(renderer){if(!renderer||!renderer.isRenderer)throw"invalid qti rendering engine";this.renderer=renderer;var elts=this.getComposingElements();for(var serial in elts)elts[serial].setRenderer(renderer)},getRenderer:function(){return this.renderer},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),tplData={},defaultData={tag:this.qtiClass,serial:this.serial,attributes:this.getAttributes()};
if(!renderer)throw"render: no renderer found for the element "+this.qtiClass+":"+this.serial;"function"==typeof this.initContainer&&(defaultData.body=this.getBody().render(renderer)),"function"==typeof this.initObject&&(defaultData.object={attributes:this.object.getAttributes()},defaultData.object.attributes.data=renderer.getAbsoluteUrl(this.object.attr("data"))),tplData=_.merge(defaultData,args.data||{}),tplData=renderer.getData(this,tplData,args.subclass);var rendering=renderer.renderTpl(this,tplData,args.subclass);return args.placeholder&&args.placeholder.replaceWith(rendering),rendering},postRender:function(data,altClassName,renderer){if(renderer=renderer||this.getRenderer(),"function"==typeof this.initContainer&&this.getBody().postRender({},"",renderer),renderer)return renderer.postRender(this,data,altClassName);
throw"postRender: no renderer found for the element "+this.qtiClass+":"+this.serial},getContainer:function($scope,subclass){var renderer=this.getRenderer();if(renderer)return renderer.getContainer(this,$scope,subclass);throw"getContainer: no renderer found for the element "+this.qtiClass+":"+this.serial},toArray:function(){var arr={serial:this.serial,type:this.qtiClass,attributes:this.getAttributes()};return"function"==typeof this.initContainer&&(arr.body=this.getBody().toArray()),"function"==typeof this.initObject&&(arr.object=this.object.toArray()),arr},isEmpty:function(){return!1},addClass:function(className){var clazz=this.attr("class")||"";_containClass(clazz,className)||this.attr("class",clazz+(clazz.length?" ":"")+className)
},hasClass:function(className){return _containClass(this.attr("class"),className)},removeClass:function(className){var clazz=this.attr("class")||"";if(clazz){var regex=new RegExp("(?:^|\\s)"+className+"(?:\\s|$)","");clazz=clazz.replace(regex,"").replace(/^\s+/,""),clazz?this.attr("class",clazz):this.removeAttr("class")}},isset:function(){return Element.issetElement(this.serial)},unset:function(){return Element.unsetElement(this.serial)}}),_containClass=function(allClassStr,className){var regex=new RegExp("(?:^|\\s)"+className+"(?:\\s|$)","");return allClassStr&&regex.test(allClassStr)};return Element.isA=function(qtiElement,qtiClass){return qtiElement instanceof Element&&qtiElement.is(qtiClass)
},Element.getElementBySerial=function(serial){return _instances[serial]},Element.issetElement=function(serial){return!!_instances[serial]},Element.unsetElement=function(serial){var element=Element.getElementBySerial(serial);if(!element)throw"cannot unset an element that does not exist";var composingElements=element.getComposingElements();return _.each(composingElements,function(elt){delete _instances[elt.serial]}),delete _instances[element.serial],!0},Element}),define("taoQtiItem/qtiItem/core/Loader",["lodash","class","taoQtiItem/qtiItem/core/qtiClasses","taoQtiItem/qtiItem/core/Element"],function(_,Class,qtiClasses,Element){function loadPortableCustomElementData(portableElement,data){portableElement.typeIdentifier=data.typeIdentifier,portableElement.markup=data.markup,portableElement.entryPoint=data.entryPoint,portableElement.properties=data.properties,portableElement.libraries=data.libraries
}var Loader=Class.extend({init:function(item,classesLocation){this.qti={},this.classesLocation={},this.item=item||null,this.setClassesLocation(classesLocation||qtiClasses)},setClassesLocation:function(qtiClasses){return _.extend(this.classesLocation,qtiClasses),this},getRequiredClasses:function(data){var ret=[];for(var i in data)"qtiClass"===i&&"_container"!==data[i]&&"relatedItem"!==i?ret.push(data[i]):"object"==typeof data[i]&&(ret=_.union(ret,this.getRequiredClasses(data[i])));return ret},loadRequiredClasses:function(data,callback,reload){var requiredClasses=this.getRequiredClasses(data,reload),required=[];for(var i in requiredClasses){var requiredClass=requiredClasses[i];
if(!this.classesLocation[requiredClass])throw new Error("missing qti class location declaration : "+requiredClass);required.push(this.classesLocation[requiredClass])}var _this=this;require(required,function(){_.each(arguments,function(QtiClass){_this.qti[QtiClass.prototype.qtiClass]=QtiClass}),callback.call(_this,_this.qti)})},getLoadedClasses:function(){return _.keys(this.qti)},loadItemData:function(data,callback){var _this=this;_this.loadRequiredClasses(data,function(Qti){if("object"==typeof data&&"assessmentItem"===data.qtiClass){_this.item=new Qti.assessmentItem(data.serial,data.attributes||{}),_this.loadContainer(_this.item.getBody(),data.body);for(var i in data.outcomes){var outcome=_this.buildOutcome(data.outcomes[i]);
outcome&&_this.item.addOutcomeDeclaration(outcome)}for(var i in data.feedbacks){var feedback=_this.buildElement(data.feedbacks[i]);feedback&&_this.item.addModalFeedback(feedback)}for(var i in data.stylesheets){var stylesheet=_this.buildElement(data.stylesheets[i]);stylesheet&&_this.item.addStylesheet(stylesheet)}for(var i in data.responses){var response=_this.buildResponse(data.responses[i]);if(response){_this.item.addResponseDeclaration(response);var feedbackRules=data.responses[i].feedbackRules;feedbackRules&&_.forIn(feedbackRules,function(fbData,serial){response.feedbackRules[serial]=_this.buildSimpleFeedbackRule(fbData)})}}data.responseProcessing&&_this.item.setResponseProcessing(_this.buildResponseProcessing(data.responseProcessing)),_this.item.setNamespaces(data.namespaces)
}"function"==typeof callback&&callback.call(_this,_this.item)})},loadElement:function(data,callback){var _this=this;_this.loadRequiredClasses(data,function(){var element=_this.buildElement(data);"function"==typeof callback&&callback.call(_this,element)})},loadElements:function(data,callback){var _this=this;if(!_this.item)throw"QtiLoader : cannot load elements in empty item";this.loadRequiredClasses(data,function(){var allElements=_this.item.getComposingElements();for(var i in data){var elementData=data[i];elementData&&elementData.qtiClass&&elementData.serial&&allElements[elementData.serial]&&_this.loadElementData(allElements[elementData.serial],elementData)}"function"==typeof callback&&callback.call(_this,_this.item)
})},buildResponse:function(data){var response=this.buildElement(data);return response.template=data.howMatch||null,response.defaultValue=data.defaultValue||null,response.correctResponse=data.correctResponses||null,response.mapEntries=_.size(data.mapping)?data.mapping:_.size(data.areaMapping)?data.areaMapping:{},response.mappingAttributes=data.mappingAttributes||{},response},buildSimpleFeedbackRule:function(data){var feedbackRule=this.buildElement(data);return data.condition&&(feedbackRule.condition=data.condition),data.comparedValue&&(feedbackRule.comparedValue=data.comparedValue),feedbackRule.comparedOutcome=this.item.responses[data.comparedOutcome]||null,feedbackRule.feedbackOutcome=this.item.outcomes[data.feedbackOutcome]||null,feedbackRule.feedbackThen=this.item.modalFeedbacks[data.feedbackThen]||null,feedbackRule.feedbackElse=this.item.modalFeedbacks[data.feedbackElse]||null,feedbackRule
},buildOutcome:function(data){var outcome=this.buildElement(data);return outcome.defaultValue=data.defaultValue||null,outcome},buildResponseProcessing:function(data){var rp=this.buildElement(data);return data&&data.processingType&&("custom"===data.processingType?(rp.xml=data.data,rp.processingType="custom"):rp.processingType="templateDriven"),rp},loadContainer:function(bodyObject,bodyData){if(!Element.isA(bodyObject,"_container"))throw"bodyObject must be a QTI Container";if(!bodyData||"string"!=typeof bodyData.body||"array"!=typeof bodyData.elements&&"object"!=typeof bodyData.elements)throw"wrong bodydata format";for(var serial in bodyData.elements){var eltData=bodyData.elements[serial],element=this.buildElement(eltData);
element&&bodyObject.setElement(element,bodyData.body)}bodyObject.body(bodyData.body)},buildElement:function(elementData){var elt=null;if(!(elementData&&elementData.qtiClass&&elementData.serial))throw"wrong elementData format";var className=elementData.qtiClass;if(!this.qti[className])throw"the qti element class does not exist: "+className;return elt=new this.qti[className](elementData.serial),this.loadElementData(elt,elementData),elt},loadElementData:function(element,data){return element.setAttributes(_.clone(data.attributes)||{}),element.body&&data.body&&element.bdy&&this.loadContainer(element.getBody(),data.body),element.object&&data.object&&element.object&&this.loadObjectData(element.object,data.object),Element.isA(element,"interaction")?this.loadInteractionData(element,data):Element.isA(element,"choice")?this.loadChoiceData(element,data):Element.isA(element,"math")?this.loadMathData(element,data):Element.isA(element,"infoControl")&&this.loadPicData(element,data),element
},loadInteractionData:function(interaction,data){Element.isA(interaction,"blockInteraction")&&data.prompt&&this.loadContainer(interaction.prompt.getBody(),data.prompt),this.buildInteractionChoices(interaction,data),Element.isA(interaction,"customInteraction")&&this.loadPciData(interaction,data)},buildInteractionChoices:function(interaction,data){if(data.choices){if(Element.isA(interaction,"matchInteraction"))for(var set=0;2>set;set++){if(!data.choices[set])throw"missing match set #"+set;var matchSet=data.choices[set];for(var serial in matchSet){var choice=this.buildElement(matchSet[serial]);choice&&interaction.addChoice(choice,set)}}else for(var serial in data.choices){var choice=this.buildElement(data.choices[serial]);
choice&&interaction.addChoice(choice)}if(Element.isA(interaction,"graphicGapMatchInteraction")&&data.gapImgs)for(var serial in data.gapImgs){var gapImg=this.buildElement(data.gapImgs[serial]);gapImg&&interaction.addGapImg(gapImg)}}},loadChoiceData:function(choice,data){Element.isA(choice,"textVariableChoice")?choice.val(data.text):Element.isA(choice,"gapImg")||Element.isA(choice,"containerChoice")},loadObjectData:function(object,data){object.setAttributes(data.attributes),data._alt&&(object._alt="object"===data._alt.qtiClass?Loader.buildElement(data._alt):data._alt)},loadMathData:function(math,data){math.ns=data.ns||{},math.setMathML(data.mathML||""),math.annotations=data.annotations||{}
},loadPciData:function(pci,data){loadPortableCustomElementData(pci,data)},loadPicData:function(pic,data){loadPortableCustomElementData(pic,data)}});return Loader}),define("taoQtiItem/qtiItem/helper/pci",["lodash"],function(_){var pci={getRawValues:function(pciVar){if(_.isPlainObject(pciVar)){if(void 0!==pciVar.base)return _.values(pciVar.base);if(pciVar.list)return _.values(pciVar.list)}throw"unsupported type "}};return pci}),define("taoQtiItem/qtiItem/core/IdentifiedElement",["taoQtiItem/qtiItem/core/Element"],function(Element){var IdentifiedElement=Element.extend({buildIdentifier:function(prefix,useSuffix){void 0===useSuffix&&(useSuffix=!0);var item=this.getRelatedItem();
if(!item)throw"cannot build identifier of an element that is not attached to an assessment item";var suffix="",i=1,usedIds=item.getUsedIdentifiers();prefix?(prefix=prefix.replace(/_[0-9]+$/gi,"_"),prefix=prefix.replace(/[^a-zA-Z0-9_]/gi,"_"),prefix=prefix.replace(/(_)+/gi,"_"),useSuffix&&(suffix="_"+i)):(prefix=this.qtiClass,suffix="_"+i);do{var exists=!1,id=prefix+suffix;usedIds[id]&&(exists=!0,suffix="_"+i,i++)}while(exists);return this.attr("identifier",id),this},id:function(value){return value||this.attr("identifier")||this.buildIdentifier(value),this.attr("identifier",value)}});return IdentifiedElement}),define("taoQtiItem/qtiItem/mixin/Mixin",[],function(){return{augment:function(targetClass,methods,options){if("function"==typeof targetClass&&"object"==typeof methods)for(var methodName in methods)if(Object.hasOwnProperty(targetClass.prototype,methodName)){if(options&&options.append){var _parent=targetClass.prototype[methodName];
targetClass.prototype[methodName]=function(){return methods[methodName].apply(this,arguments),_parent.apply(this,arguments)}}}else targetClass.prototype[methodName]=methods[methodName]}}}),define("taoQtiItem/qtiItem/core/Container",["taoQtiItem/qtiItem/core/Element","lodash","jquery","taoQtiItem/qtiItem/helper/rendererConfig"],function(Element,_,$,rendererConfig){var Container=Element.extend({qtiClass:"_container",init:function(body){if(this._super(),body&&"string"!=typeof body)throw"the body of a container must be a string";this.bdy=body||"",this.elements={}},body:function(body){if("undefined"==typeof body)return this.bdy;if("string"!=typeof body)throw"body must be a string";
this.bdy=body,$(document).trigger("containerBodyChange",{body:body,container:this})},setElements:function(elements,body){var returnValue=!1;for(var i in elements){var elt=elements[i];if(!(elt instanceof Element))throw returnValue=!1,"expected a qti element";body=body||this.bdy,-1===body.indexOf(elt.placeholder())&&(body+=elt.placeholder()),elt.setRelatedItem(this.getRelatedItem()||null),this.elements[elt.getSerial()]=elt,$(document).trigger("containerElementAdded",{element:elt,container:this}),returnValue=!0}return this.body(body),returnValue},setElement:function(element,body){return this.setElements([element],body)},removeElement:function(element){var serial="";
return"string"==typeof element?serial=element:element instanceof Element&&(serial=element.getSerial()),delete this.elements[serial],this.body(this.body().replace("{{"+serial+"}}","")),this},getElements:function(qtiClass){var elts={};if("string"==typeof qtiClass)for(var serial in this.elements)Element.isA(this.elements[serial],qtiClass)&&(elts[serial]=this.elements[serial]);else elts=_.clone(this.elements);return elts},getElement:function(serial){return this.elements[serial]?this.elements[serial]:null},getComposingElements:function(){var elements=this.getElements(),elts={};for(var serial in elements)elts[serial]=elements[serial],elts=_.extend(elts,elements[serial].getComposingElements());
return elts},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),elementsData=[],tpl=this.body();for(var serial in this.elements){var elt=this.elements[serial];if("function"!=typeof elt.render)throw"render() is not defined for the qti element: "+serial;"_container"===elt.qtiClass?tpl=tpl.replace(elt.placeholder(),elt.render(renderer)):(tpl=tpl.replace(elt.placeholder(),"{{{"+serial+"}}}"),elementsData[serial]=elt.render(renderer))}if(renderer.isRenderer)return this._super({body:renderer.renderDirect(tpl,elementsData),contentModel:this.contentModel||"flow"},renderer,args.placeholder);throw"invalid qti renderer for qti container"
},postRender:function(data,altClassName,renderer){renderer=renderer||this.getRenderer();for(var serial in this.elements){var elt=this.elements[serial];"function"==typeof elt.postRender&&elt.postRender(data,"",renderer)}this._super(data,altClassName,renderer)},toArray:function(){var arr={serial:this.serial,body:this.bdy,elements:{}};for(var serial in this.elements)arr.elements[serial]=this.elements[serial].toArray();return arr},find:function(serial,parent){var found=null;return this.elements[serial]?found={parent:parent||this,element:this.elements[serial],location:"body"}:_.each(this.elements,function(elt){return found=elt.find(serial),found?!1:void 0}),found}});
return Container}),define("taoQtiItem/qtiItem/mixin/Container",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/core/Container"],function(Mixin,Container){var methods={initContainer:function(body){this.bdy=new Container(body||""),this.bdy.setRelatedItem(this.getRelatedItem()||null),this.bdy.contentModel="blockStatic"},getBody:function(){return this.bdy},body:function(body){var ret=this.bdy.body(body);return body?this:ret},setElement:function(element,body){return this.bdy.setElement(element,body),this},removeElement:function(element){return this.bdy.removeElement(element)},getElements:function(qtiClass){return this.bdy.getElements(qtiClass)},getElement:function(serial){return this.bdy.getElement(serial)
}};return{augment:function(targetClass){Mixin.augment(targetClass,methods)},methods:methods}}),define("taoQtiItem/qtiItem/core/feedbacks/ModalFeedback",["taoQtiItem/qtiItem/core/IdentifiedElement","taoQtiItem/qtiItem/mixin/Container"],function(IdentifiedElement,Container){var ModalFeedback=IdentifiedElement.extend({qtiClass:"modalFeedback",is:function(qtiClass){return"feedback"===qtiClass||this._super(qtiClass)}});return Container.augment(ModalFeedback),ModalFeedback}),define("taoQtiItem/qtiRunner/core/QtiRunner",["jquery","lodash","taoQtiItem/qtiItem/core/Loader","taoQtiItem/qtiItem/helper/pci","taoQtiItem/qtiItem/core/feedbacks/ModalFeedback"],function($,_,ItemLoader,pci,ModalFeedback){var QtiRunner=function(){this.item=null,this.rpEngine=null,this.renderer=null,this.loader=null,this.itemApi=void 0
};return QtiRunner.prototype.updateItemApi=function(){var responses=this.getResponses();for(var key in responses){var value=responses[key];if("undefined"!=typeof value.base)for(var property in value.base)if("file"===property){var file=value.base.file;value={base:{file:{name:file.name,mime:"qti+application/octet-stream",data:"cXRpX2ZpbGVfZGF0YXR5cGVfcGxhY2Vob2xkZXJfZGF0YQ=="}}}}this.itemApi.setVariable(key,value)}this.itemApi.saveResponses(responses),this.itemApi.resultApi.setQtiRunner(this)},QtiRunner.prototype.setItemApi=function(itemApi){this.itemApi=itemApi;var that=this,oldStateVariables=JSON.stringify(itemApi.stateVariables);itemApi.onKill(function(killCallback){that.updateItemApi();
var newStateVariables=JSON.stringify(itemApi.stateVariables);oldStateVariables!=newStateVariables?itemApi.submit(function(){killCallback(0)}):killCallback(0)})},QtiRunner.prototype.setRenderer=function(renderer){if(!renderer.isRenderer)throw"invalid renderer";this.renderer=renderer},QtiRunner.prototype.getLoader=function(){return this.loader||(this.loader=new ItemLoader),this.loader},QtiRunner.prototype.loadItemData=function(data,callback){var _this=this;this.getLoader().loadItemData(data,function(item){_this.item=item,callback(_this.item)})},QtiRunner.prototype.loadElements=function(elements,callback){if(!this.getLoader().item)throw"QtiRunner : cannot load elements in empty item";
this.getLoader().loadElements(elements,callback)},QtiRunner.prototype.renderItem=function(data,callback){var _this=this,render=function(){if(!_this.item)throw"cannot render item: empty item";if(!_this.renderer)throw"cannot render item: no rendered set";_this.renderer.load(function(){_this.item.setRenderer(_this.renderer),_this.item.render({},$("#qti_item")),_this.item.postRender(),_this.initInteractionsResponse(),"undefined"!=typeof callback&&callback()},_this.getLoader().getLoadedClasses())};"object"==typeof data?this.loadItemData(data,render):render()},QtiRunner.prototype.initInteractionsResponse=function(){if(this.item){var interactions=this.item.getInteractions();
for(var i in interactions){var interaction=interactions[i],responseId=interaction.attr("responseIdentifier");this.itemApi.getVariable(responseId,function(values){values&&interaction.setResponse(values)})}}},QtiRunner.prototype.validate=function(){this.updateItemApi(),this.itemApi.finish()},QtiRunner.prototype.getResponses=function(){var responses={},interactions=this.item.getInteractions();for(var serial in interactions){var interaction=interactions[serial],response=interaction.getResponse();responses[interaction.attr("responseIdentifier")]=response}return responses},QtiRunner.prototype.setResponseProcessing=function(callback){this.rpEngine=callback},QtiRunner.prototype.showFeedbacks=function(itemSession,callback,onShowCallback){var _this=this,feedbacksToBeDisplayed=[];
_.each(this.item.modalFeedbacks,function(feedback){var outcomeIdentifier=feedback.attr("outcomeIdentifier");if(itemSession[outcomeIdentifier]){var feedbackIds=pci.getRawValues(itemSession[outcomeIdentifier]);_.indexOf(feedbackIds,feedback.id())>=0&&feedbacksToBeDisplayed.push(feedback)}});var count=feedbacksToBeDisplayed.length;count>0&&"undefined"!=typeof onShowCallback&&onShowCallback();var lastFeedback=feedbacksToBeDisplayed.shift();return _.eachRight(feedbacksToBeDisplayed,function(feedback){_this.showModalFeedback(feedback)}),this.showModalFeedback(lastFeedback,callback),count},QtiRunner.prototype.showModalFeedback=function(modalFeedback,callback){modalFeedback instanceof ModalFeedback&&($("#modalFeedbacks").append(modalFeedback.render()),modalFeedback.postRender({callback:callback}))
},QtiRunner});var Handlebars=function(){var __module4__=function(){function SafeString(string){this.string=string}var __exports__;return SafeString.prototype.toString=function(){return""+this.string},__exports__=SafeString}(),__module3__=function(__dependency1__){function escapeChar(chr){return escape[chr]||"&amp;"}function extend(obj,value){for(var key in value)Object.prototype.hasOwnProperty.call(value,key)&&(obj[key]=value[key])}function escapeExpression(string){return string instanceof SafeString?string.toString():string||0===string?(string=""+string,possible.test(string)?string.replace(badChars,escapeChar):string):""}function isEmpty(value){return value||0===value?isArray(value)&&0===value.length?!0:!1:!0
}var __exports__={},SafeString=__dependency1__,escape={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},badChars=/[&<>"'`]/g,possible=/[&<>"'`]/;__exports__.extend=extend;var toString=Object.prototype.toString;__exports__.toString=toString;var isFunction=function(value){return"function"==typeof value};isFunction(/x/)&&(isFunction=function(value){return"function"==typeof value&&"[object Function]"===toString.call(value)});var isFunction;__exports__.isFunction=isFunction;var isArray=Array.isArray||function(value){return value&&"object"==typeof value?"[object Array]"===toString.call(value):!1};return __exports__.isArray=isArray,__exports__.escapeExpression=escapeExpression,__exports__.isEmpty=isEmpty,__exports__
}(__module4__),__module5__=function(){function Exception(message,node){var line;node&&node.firstLine&&(line=node.firstLine,message+=" - "+line+":"+node.firstColumn);for(var tmp=Error.prototype.constructor.call(this,message),idx=0;idx<errorProps.length;idx++)this[errorProps[idx]]=tmp[errorProps[idx]];line&&(this.lineNumber=line,this.column=node.firstColumn)}var __exports__,errorProps=["description","fileName","lineNumber","message","name","number","stack"];return Exception.prototype=new Error,__exports__=Exception}(),__module2__=function(__dependency1__,__dependency2__){function HandlebarsEnvironment(helpers,partials){this.helpers=helpers||{},this.partials=partials||{},registerDefaultHelpers(this)
}function registerDefaultHelpers(instance){instance.registerHelper("helperMissing",function(arg){if(2===arguments.length)return void 0;throw new Exception("Missing helper: '"+arg+"'")}),instance.registerHelper("blockHelperMissing",function(context,options){var inverse=options.inverse||function(){},fn=options.fn;return isFunction(context)&&(context=context.call(this)),context===!0?fn(this):context===!1||null==context?inverse(this):isArray(context)?context.length>0?instance.helpers.each(context,options):inverse(this):fn(context)}),instance.registerHelper("each",function(context,options){var data,fn=options.fn,inverse=options.inverse,i=0,ret="";if(isFunction(context)&&(context=context.call(this)),options.data&&(data=createFrame(options.data)),context&&"object"==typeof context)if(isArray(context))for(var j=context.length;j>i;i++)data&&(data.index=i,data.first=0===i,data.last=i===context.length-1),ret+=fn(context[i],{data:data});
else for(var key in context)context.hasOwnProperty(key)&&(data&&(data.key=key,data.index=i,data.first=0===i),ret+=fn(context[key],{data:data}),i++);return 0===i&&(ret=inverse(this)),ret}),instance.registerHelper("if",function(conditional,options){return isFunction(conditional)&&(conditional=conditional.call(this)),!options.hash.includeZero&&!conditional||Utils.isEmpty(conditional)?options.inverse(this):options.fn(this)}),instance.registerHelper("unless",function(conditional,options){return instance.helpers["if"].call(this,conditional,{fn:options.inverse,inverse:options.fn,hash:options.hash})}),instance.registerHelper("with",function(context,options){return isFunction(context)&&(context=context.call(this)),Utils.isEmpty(context)?void 0:options.fn(context)
}),instance.registerHelper("log",function(context,options){var level=options.data&&null!=options.data.level?parseInt(options.data.level,10):1;instance.log(level,context)})}function log(level,obj){logger.log(level,obj)}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,VERSION="1.3.0";__exports__.VERSION=VERSION;var COMPILER_REVISION=4;__exports__.COMPILER_REVISION=COMPILER_REVISION;var REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};__exports__.REVISION_CHANGES=REVISION_CHANGES;var isArray=Utils.isArray,isFunction=Utils.isFunction,toString=Utils.toString,objectType="[object Object]";__exports__.HandlebarsEnvironment=HandlebarsEnvironment,HandlebarsEnvironment.prototype={constructor:HandlebarsEnvironment,logger:logger,log:log,registerHelper:function(name,fn,inverse){if(toString.call(name)===objectType){if(inverse||fn)throw new Exception("Arg not supported with multiple helpers");
Utils.extend(this.helpers,name)}else inverse&&(fn.not=inverse),this.helpers[name]=fn},registerPartial:function(name,str){toString.call(name)===objectType?Utils.extend(this.partials,name):this.partials[name]=str}};var logger={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(level,obj){if(logger.level<=level){var method=logger.methodMap[level];"undefined"!=typeof console&&console[method]&&console[method].call(console,obj)}}};__exports__.logger=logger,__exports__.log=log;var createFrame=function(object){var obj={};return Utils.extend(obj,object),obj};return __exports__.createFrame=createFrame,__exports__}(__module3__,__module5__),__module6__=function(__dependency1__,__dependency2__,__dependency3__){function checkRevision(compilerInfo){var compilerRevision=compilerInfo&&compilerInfo[0]||1,currentRevision=COMPILER_REVISION;
if(compilerRevision!==currentRevision){if(currentRevision>compilerRevision){var runtimeVersions=REVISION_CHANGES[currentRevision],compilerVersions=REVISION_CHANGES[compilerRevision];throw new Exception("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+runtimeVersions+") or downgrade your runtime to an older version ("+compilerVersions+").")}throw new Exception("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+compilerInfo[1]+").")}}function template(templateSpec,env){if(!env)throw new Exception("No environment passed to template");
var invokePartialWrapper=function(partial,name,context,helpers,partials,data){var result=env.VM.invokePartial.apply(this,arguments);if(null!=result)return result;if(env.compile){var options={helpers:helpers,partials:partials,data:data};return partials[name]=env.compile(partial,{data:void 0!==data},env),partials[name](context,options)}throw new Exception("The partial "+name+" could not be compiled when running in runtime-only mode")},container={escapeExpression:Utils.escapeExpression,invokePartial:invokePartialWrapper,programs:[],program:function(i,fn,data){var programWrapper=this.programs[i];return data?programWrapper=program(i,fn,data):programWrapper||(programWrapper=this.programs[i]=program(i,fn)),programWrapper
},merge:function(param,common){var ret=param||common;return param&&common&&param!==common&&(ret={},Utils.extend(ret,common),Utils.extend(ret,param)),ret},programWithDepth:env.VM.programWithDepth,noop:env.VM.noop,compilerInfo:null};return function(context,options){options=options||{};var helpers,partials,namespace=options.partial?options:env;options.partial||(helpers=options.helpers,partials=options.partials);var result=templateSpec.call(container,namespace,context,helpers,partials,options.data);return options.partial||env.VM.checkRevision(container.compilerInfo),result}}function programWithDepth(i,fn,data){var args=Array.prototype.slice.call(arguments,3),prog=function(context,options){return options=options||{},fn.apply(this,[context,options.data||data].concat(args))
};return prog.program=i,prog.depth=args.length,prog}function program(i,fn,data){var prog=function(context,options){return options=options||{},fn(context,options.data||data)};return prog.program=i,prog.depth=0,prog}function invokePartial(partial,name,context,helpers,partials,data){var options={partial:!0,helpers:helpers,partials:partials,data:data};if(void 0===partial)throw new Exception("The partial "+name+" could not be found");return partial instanceof Function?partial(context,options):void 0}function noop(){return""}var __exports__={},Utils=__dependency1__,Exception=__dependency2__,COMPILER_REVISION=__dependency3__.COMPILER_REVISION,REVISION_CHANGES=__dependency3__.REVISION_CHANGES;
return __exports__.checkRevision=checkRevision,__exports__.template=template,__exports__.programWithDepth=programWithDepth,__exports__.program=program,__exports__.invokePartial=invokePartial,__exports__.noop=noop,__exports__}(__module3__,__module5__,__module2__),__module1__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,base=__dependency1__,SafeString=__dependency2__,Exception=__dependency3__,Utils=__dependency4__,runtime=__dependency5__,create=function(){var hb=new base.HandlebarsEnvironment;return Utils.extend(hb,base),hb.SafeString=SafeString,hb.Exception=Exception,hb.Utils=Utils,hb.VM=runtime,hb.template=function(spec){return runtime.template(spec,hb)
},hb},Handlebars=create();return Handlebars.create=create,__exports__=Handlebars}(__module2__,__module4__,__module5__,__module3__,__module6__),__module7__=function(__dependency1__){function LocationInfo(locInfo){locInfo=locInfo||{},this.firstLine=locInfo.first_line,this.firstColumn=locInfo.first_column,this.lastColumn=locInfo.last_column,this.lastLine=locInfo.last_line}var __exports__,Exception=__dependency1__,AST={ProgramNode:function(statements,inverseStrip,inverse,locInfo){var inverseLocationInfo,firstInverseNode;3===arguments.length?(locInfo=inverse,inverse=null):2===arguments.length&&(locInfo=inverseStrip,inverseStrip=null),LocationInfo.call(this,locInfo),this.type="program",this.statements=statements,this.strip={},inverse?(firstInverseNode=inverse[0],firstInverseNode?(inverseLocationInfo={first_line:firstInverseNode.firstLine,last_line:firstInverseNode.lastLine,last_column:firstInverseNode.lastColumn,first_column:firstInverseNode.firstColumn},this.inverse=new AST.ProgramNode(inverse,inverseStrip,inverseLocationInfo)):this.inverse=new AST.ProgramNode(inverse,inverseStrip),this.strip.right=inverseStrip.left):inverseStrip&&(this.strip.left=inverseStrip.right)
},MustacheNode:function(rawParams,hash,open,strip,locInfo){if(LocationInfo.call(this,locInfo),this.type="mustache",this.strip=strip,null!=open&&open.charAt){var escapeFlag=open.charAt(3)||open.charAt(2);this.escaped="{"!==escapeFlag&&"&"!==escapeFlag}else this.escaped=!!open;this.sexpr=rawParams instanceof AST.SexprNode?rawParams:new AST.SexprNode(rawParams,hash),this.sexpr.isRoot=!0,this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(rawParams,hash,locInfo){LocationInfo.call(this,locInfo),this.type="sexpr",this.hash=hash;var id=this.id=rawParams[0],params=this.params=rawParams.slice(1),eligibleHelper=this.eligibleHelper=id.isSimple;
this.isHelper=eligibleHelper&&(params.length||hash)},PartialNode:function(partialName,context,strip,locInfo){LocationInfo.call(this,locInfo),this.type="partial",this.partialName=partialName,this.context=context,this.strip=strip},BlockNode:function(mustache,program,inverse,close,locInfo){if(LocationInfo.call(this,locInfo),mustache.sexpr.id.original!==close.path.original)throw new Exception(mustache.sexpr.id.original+" doesn't match "+close.path.original,this);this.type="block",this.mustache=mustache,this.program=program,this.inverse=inverse,this.strip={left:mustache.strip.left,right:close.strip.right},(program||inverse).strip.left=mustache.strip.right,(inverse||program).strip.right=close.strip.left,inverse&&!program&&(this.isInverse=!0)
},ContentNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="content",this.string=string},HashNode:function(pairs,locInfo){LocationInfo.call(this,locInfo),this.type="hash",this.pairs=pairs},IdNode:function(parts,locInfo){LocationInfo.call(this,locInfo),this.type="ID";for(var original="",dig=[],depth=0,i=0,l=parts.length;l>i;i++){var part=parts[i].part;if(original+=(parts[i].separator||"")+part,".."===part||"."===part||"this"===part){if(dig.length>0)throw new Exception("Invalid path: "+original,this);".."===part?depth++:this.isScoped=!0}else dig.push(part)}this.original=original,this.parts=dig,this.string=dig.join("."),this.depth=depth,this.isSimple=1===parts.length&&!this.isScoped&&0===depth,this.stringModeValue=this.string
},PartialNameNode:function(name,locInfo){LocationInfo.call(this,locInfo),this.type="PARTIAL_NAME",this.name=name.original},DataNode:function(id,locInfo){LocationInfo.call(this,locInfo),this.type="DATA",this.id=id},StringNode:function(string,locInfo){LocationInfo.call(this,locInfo),this.type="STRING",this.original=this.string=this.stringModeValue=string},IntegerNode:function(integer,locInfo){LocationInfo.call(this,locInfo),this.type="INTEGER",this.original=this.integer=integer,this.stringModeValue=Number(integer)},BooleanNode:function(bool,locInfo){LocationInfo.call(this,locInfo),this.type="BOOLEAN",this.bool=bool,this.stringModeValue="true"===bool},CommentNode:function(comment,locInfo){LocationInfo.call(this,locInfo),this.type="comment",this.comment=comment
}};return __exports__=AST}(__module5__),__module9__=function(){var __exports__,handlebars=function(){function stripFlags(open,close){return{left:"~"===open.charAt(2),right:"~"===close.charAt(0)||"~"===close.charAt(1)}}function Parser(){this.yy={}}var parser={trace:function(){},yy:{},symbols_:{error:2,root:3,statements:4,EOF:5,program:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,sexpr:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,CLOSE_UNESCAPED:24,OPEN_PARTIAL:25,partialName:26,partial_option0:27,sexpr_repetition0:28,sexpr_option0:29,dataName:30,param:31,STRING:32,INTEGER:33,BOOLEAN:34,OPEN_SEXPR:35,CLOSE_SEXPR:36,hash:37,hash_repetition_plus0:38,hashSegment:39,ID:40,EQUALS:41,DATA:42,pathSegments:43,SEP:44,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"CLOSE_UNESCAPED",25:"OPEN_PARTIAL",32:"STRING",33:"INTEGER",34:"BOOLEAN",35:"OPEN_SEXPR",36:"CLOSE_SEXPR",40:"ID",41:"EQUALS",42:"DATA",44:"SEP"},productions_:[0,[3,2],[3,1],[6,2],[6,3],[6,2],[6,1],[6,1],[6,0],[4,1],[4,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,4],[7,2],[17,3],[17,1],[31,1],[31,1],[31,1],[31,1],[31,1],[31,3],[37,1],[39,3],[26,1],[26,1],[26,1],[30,2],[21,1],[43,3],[43,1],[27,0],[27,1],[28,0],[28,2],[29,0],[29,1],[38,1],[38,2]],performAction:function(yytext,yyleng,yylineno,yy,yystate,$$){var $0=$$.length-1;
switch(yystate){case 1:return new yy.ProgramNode($$[$0-1],this._$);case 2:return new yy.ProgramNode([],this._$);case 3:this.$=new yy.ProgramNode([],$$[$0-1],$$[$0],this._$);break;case 4:this.$=new yy.ProgramNode($$[$0-2],$$[$0-1],$$[$0],this._$);break;case 5:this.$=new yy.ProgramNode($$[$0-1],$$[$0],[],this._$);break;case 6:this.$=new yy.ProgramNode($$[$0],this._$);break;case 7:this.$=new yy.ProgramNode([],this._$);break;case 8:this.$=new yy.ProgramNode([],this._$);break;case 9:this.$=[$$[$0]];break;case 10:$$[$0-1].push($$[$0]),this.$=$$[$0-1];break;case 11:this.$=new yy.BlockNode($$[$0-2],$$[$0-1].inverse,$$[$0-1],$$[$0],this._$);break;case 12:this.$=new yy.BlockNode($$[$0-2],$$[$0-1],$$[$0-1].inverse,$$[$0],this._$);
break;case 13:this.$=$$[$0];break;case 14:this.$=$$[$0];break;case 15:this.$=new yy.ContentNode($$[$0],this._$);break;case 16:this.$=new yy.CommentNode($$[$0],this._$);break;case 17:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 18:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 19:this.$={path:$$[$0-1],strip:stripFlags($$[$0-2],$$[$0])};break;case 20:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 21:this.$=new yy.MustacheNode($$[$0-1],null,$$[$0-2],stripFlags($$[$0-2],$$[$0]),this._$);break;case 22:this.$=new yy.PartialNode($$[$0-2],$$[$0-1],stripFlags($$[$0-3],$$[$0]),this._$);
break;case 23:this.$=stripFlags($$[$0-1],$$[$0]);break;case 24:this.$=new yy.SexprNode([$$[$0-2]].concat($$[$0-1]),$$[$0],this._$);break;case 25:this.$=new yy.SexprNode([$$[$0]],null,this._$);break;case 26:this.$=$$[$0];break;case 27:this.$=new yy.StringNode($$[$0],this._$);break;case 28:this.$=new yy.IntegerNode($$[$0],this._$);break;case 29:this.$=new yy.BooleanNode($$[$0],this._$);break;case 30:this.$=$$[$0];break;case 31:$$[$0-1].isHelper=!0,this.$=$$[$0-1];break;case 32:this.$=new yy.HashNode($$[$0],this._$);break;case 33:this.$=[$$[$0-2],$$[$0]];break;case 34:this.$=new yy.PartialNameNode($$[$0],this._$);break;case 35:this.$=new yy.PartialNameNode(new yy.StringNode($$[$0],this._$),this._$);
break;case 36:this.$=new yy.PartialNameNode(new yy.IntegerNode($$[$0],this._$));break;case 37:this.$=new yy.DataNode($$[$0],this._$);break;case 38:this.$=new yy.IdNode($$[$0],this._$);break;case 39:$$[$0-2].push({part:$$[$0],separator:$$[$0-1]}),this.$=$$[$0-2];break;case 40:this.$=[{part:$$[$0]}];break;case 43:this.$=[];break;case 44:$$[$0-1].push($$[$0]);break;case 47:this.$=[$$[$0]];break;case 48:$$[$0-1].push($$[$0])}},table:[{3:1,4:2,5:[1,3],8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[3]},{5:[1,16],8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],25:[1,15]},{1:[2,2]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],25:[2,9]},{4:20,6:18,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{4:20,6:22,7:19,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,8],22:[1,13],23:[1,14],25:[1,15]},{5:[2,13],14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],25:[2,13]},{5:[2,14],14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],25:[2,14]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],25:[2,15]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],25:[2,16]},{17:23,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:29,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:30,21:24,30:25,40:[1,28],42:[1,27],43:26},{17:31,21:24,30:25,40:[1,28],42:[1,27],43:26},{21:33,26:32,32:[1,34],33:[1,35],40:[1,28],43:26},{1:[2,1]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],25:[2,10]},{10:36,20:[1,37]},{4:38,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,7],22:[1,13],23:[1,14],25:[1,15]},{7:39,8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,21],20:[2,6],22:[1,13],23:[1,14],25:[1,15]},{17:23,18:[1,40],21:24,30:25,40:[1,28],42:[1,27],43:26},{10:41,20:[1,37]},{18:[1,42]},{18:[2,43],24:[2,43],28:43,32:[2,43],33:[2,43],34:[2,43],35:[2,43],36:[2,43],40:[2,43],42:[2,43]},{18:[2,25],24:[2,25],36:[2,25]},{18:[2,38],24:[2,38],32:[2,38],33:[2,38],34:[2,38],35:[2,38],36:[2,38],40:[2,38],42:[2,38],44:[1,44]},{21:45,40:[1,28],43:26},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],42:[2,40],44:[2,40]},{18:[1,46]},{18:[1,47]},{24:[1,48]},{18:[2,41],21:50,27:49,40:[1,28],43:26},{18:[2,34],40:[2,34]},{18:[2,35],40:[2,35]},{18:[2,36],40:[2,36]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],25:[2,11]},{21:51,40:[1,28],43:26},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,3],22:[1,13],23:[1,14],25:[1,15]},{4:52,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,5],22:[1,13],23:[1,14],25:[1,15]},{14:[2,23],15:[2,23],16:[2,23],19:[2,23],20:[2,23],22:[2,23],23:[2,23],25:[2,23]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],25:[2,12]},{14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],25:[2,18]},{18:[2,45],21:56,24:[2,45],29:53,30:60,31:54,32:[1,57],33:[1,58],34:[1,59],35:[1,61],36:[2,45],37:55,38:62,39:63,40:[1,64],42:[1,27],43:26},{40:[1,65]},{18:[2,37],24:[2,37],32:[2,37],33:[2,37],34:[2,37],35:[2,37],36:[2,37],40:[2,37],42:[2,37]},{14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],25:[2,17]},{5:[2,20],14:[2,20],15:[2,20],16:[2,20],19:[2,20],20:[2,20],22:[2,20],23:[2,20],25:[2,20]},{5:[2,21],14:[2,21],15:[2,21],16:[2,21],19:[2,21],20:[2,21],22:[2,21],23:[2,21],25:[2,21]},{18:[1,66]},{18:[2,42]},{18:[1,67]},{8:17,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],25:[1,15]},{18:[2,24],24:[2,24],36:[2,24]},{18:[2,44],24:[2,44],32:[2,44],33:[2,44],34:[2,44],35:[2,44],36:[2,44],40:[2,44],42:[2,44]},{18:[2,46],24:[2,46],36:[2,46]},{18:[2,26],24:[2,26],32:[2,26],33:[2,26],34:[2,26],35:[2,26],36:[2,26],40:[2,26],42:[2,26]},{18:[2,27],24:[2,27],32:[2,27],33:[2,27],34:[2,27],35:[2,27],36:[2,27],40:[2,27],42:[2,27]},{18:[2,28],24:[2,28],32:[2,28],33:[2,28],34:[2,28],35:[2,28],36:[2,28],40:[2,28],42:[2,28]},{18:[2,29],24:[2,29],32:[2,29],33:[2,29],34:[2,29],35:[2,29],36:[2,29],40:[2,29],42:[2,29]},{18:[2,30],24:[2,30],32:[2,30],33:[2,30],34:[2,30],35:[2,30],36:[2,30],40:[2,30],42:[2,30]},{17:68,21:24,30:25,40:[1,28],42:[1,27],43:26},{18:[2,32],24:[2,32],36:[2,32],39:69,40:[1,70]},{18:[2,47],24:[2,47],36:[2,47],40:[2,47]},{18:[2,40],24:[2,40],32:[2,40],33:[2,40],34:[2,40],35:[2,40],36:[2,40],40:[2,40],41:[1,71],42:[2,40],44:[2,40]},{18:[2,39],24:[2,39],32:[2,39],33:[2,39],34:[2,39],35:[2,39],36:[2,39],40:[2,39],42:[2,39],44:[2,39]},{5:[2,22],14:[2,22],15:[2,22],16:[2,22],19:[2,22],20:[2,22],22:[2,22],23:[2,22],25:[2,22]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],25:[2,19]},{36:[1,72]},{18:[2,48],24:[2,48],36:[2,48],40:[2,48]},{41:[1,71]},{21:56,30:60,31:73,32:[1,57],33:[1,58],34:[1,59],35:[1,61],40:[1,28],42:[1,27],43:26},{18:[2,31],24:[2,31],32:[2,31],33:[2,31],34:[2,31],35:[2,31],36:[2,31],40:[2,31],42:[2,31]},{18:[2,33],24:[2,33],36:[2,33],40:[2,33]}],defaultActions:{3:[2,2],16:[2,1],50:[2,42]},parseError:function(str){throw new Error(str)
},parse:function(input){function lex(){var token;return token=self.lexer.lex()||1,"number"!=typeof token&&(token=self.symbols_[token]||token),token}var self=this,stack=[0],vstack=[null],lstack=[],table=this.table,yytext="",yylineno=0,yyleng=0,recovering=0;this.lexer.setInput(input),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var yyloc=this.lexer.yylloc;lstack.push(yyloc);var ranges=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var symbol,preErrorSymbol,state,action,r,p,len,newState,expected,yyval={};;){if(state=stack[stack.length-1],this.defaultActions[state]?action=this.defaultActions[state]:((null===symbol||"undefined"==typeof symbol)&&(symbol=lex()),action=table[state]&&table[state][symbol]),"undefined"==typeof action||!action.length||!action[0]){var errStr="";
if(!recovering){expected=[];for(p in table[state])this.terminals_[p]&&p>2&&expected.push("'"+this.terminals_[p]+"'");errStr=this.lexer.showPosition?"Parse error on line "+(yylineno+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+expected.join(", ")+", got '"+(this.terminals_[symbol]||symbol)+"'":"Parse error on line "+(yylineno+1)+": Unexpected "+(1==symbol?"end of input":"'"+(this.terminals_[symbol]||symbol)+"'"),this.parseError(errStr,{text:this.lexer.match,token:this.terminals_[symbol]||symbol,line:this.lexer.yylineno,loc:yyloc,expected:expected})}}if(action[0]instanceof Array&&action.length>1)throw new Error("Parse Error: multiple actions possible at state: "+state+", token: "+symbol);
switch(action[0]){case 1:stack.push(symbol),vstack.push(this.lexer.yytext),lstack.push(this.lexer.yylloc),stack.push(action[1]),symbol=null,preErrorSymbol?(symbol=preErrorSymbol,preErrorSymbol=null):(yyleng=this.lexer.yyleng,yytext=this.lexer.yytext,yylineno=this.lexer.yylineno,yyloc=this.lexer.yylloc,recovering>0&&recovering--);break;case 2:if(len=this.productions_[action[1]][1],yyval.$=vstack[vstack.length-len],yyval._$={first_line:lstack[lstack.length-(len||1)].first_line,last_line:lstack[lstack.length-1].last_line,first_column:lstack[lstack.length-(len||1)].first_column,last_column:lstack[lstack.length-1].last_column},ranges&&(yyval._$.range=[lstack[lstack.length-(len||1)].range[0],lstack[lstack.length-1].range[1]]),r=this.performAction.call(yyval,yytext,yyleng,yylineno,this.yy,action[1],vstack,lstack),"undefined"!=typeof r)return r;
len&&(stack=stack.slice(0,-1*len*2),vstack=vstack.slice(0,-1*len),lstack=lstack.slice(0,-1*len)),stack.push(this.productions_[action[1]][0]),vstack.push(yyval.$),lstack.push(yyval._$),newState=table[stack[stack.length-2]][stack[stack.length-1]],stack.push(newState);break;case 3:return!0}}return!0}},lexer=function(){var lexer={EOF:1,parseError:function(str,hash){if(!this.yy.parser)throw new Error(str);this.yy.parser.parseError(str,hash)},setInput:function(input){return this._input=input,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this
},input:function(){var ch=this._input[0];this.yytext+=ch,this.yyleng++,this.offset++,this.match+=ch,this.matched+=ch;var lines=ch.match(/(?:\r\n?|\n).*/g);return lines?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),ch},unput:function(ch){var len=ch.length,lines=ch.split(/(?:\r\n?|\n)/g);this._input=ch+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-len-1),this.offset-=len;var oldLines=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),lines.length-1&&(this.yylineno-=lines.length-1);
var r=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:lines?(lines.length===oldLines.length?this.yylloc.first_column:0)+oldLines[oldLines.length-lines.length].length-lines[0].length:this.yylloc.first_column-len},this.options.ranges&&(this.yylloc.range=[r[0],r[0]+this.yyleng-len]),this},more:function(){return this._more=!0,this},less:function(n){this.unput(this.match.slice(n))},pastInput:function(){var past=this.matched.substr(0,this.matched.length-this.match.length);return(past.length>20?"...":"")+past.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var next=this.match;
return next.length<20&&(next+=this._input.substr(0,20-next.length)),(next.substr(0,20)+(next.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var pre=this.pastInput(),c=new Array(pre.length+1).join("-");return pre+this.upcomingInput()+"\n"+c+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var token,match,tempMatch,index,lines;this._more||(this.yytext="",this.match="");for(var rules=this._currentRules(),i=0;i<rules.length&&(tempMatch=this._input.match(this.rules[rules[i]]),!tempMatch||match&&!(tempMatch[0].length>match[0].length)||(match=tempMatch,index=i,this.options.flex));i++);return match?(lines=match[0].match(/(?:\r\n?|\n).*/g),lines&&(this.yylineno+=lines.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:lines?lines[lines.length-1].length-lines[lines.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+match[0].length},this.yytext+=match[0],this.match+=match[0],this.matches=match,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(match[0].length),this.matched+=match[0],token=this.performAction.call(this,this.yy,this,rules[index],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),token?token:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})
},lex:function(){var r=this.next();return"undefined"!=typeof r?r:this.lex()},begin:function(condition){this.conditionStack.push(condition)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(condition){this.begin(condition)}};return lexer.options={},lexer.performAction=function(yy,yy_,$avoiding_name_collisions,YY_START){function strip(start,end){return yy_.yytext=yy_.yytext.substr(start,yy_.yyleng-end)}switch($avoiding_name_collisions){case 0:if("\\\\"===yy_.yytext.slice(-2)?(strip(0,1),this.begin("mu")):"\\"===yy_.yytext.slice(-1)?(strip(0,1),this.begin("emu")):this.begin("mu"),yy_.yytext)return 14;
break;case 1:return 14;case 2:return this.popState(),14;case 3:return strip(0,4),this.popState(),15;case 4:return 35;case 5:return 36;case 6:return 25;case 7:return 16;case 8:return 20;case 9:return 19;case 10:return 19;case 11:return 23;case 12:return 22;case 13:this.popState(),this.begin("com");break;case 14:return strip(3,5),this.popState(),15;case 15:return 22;case 16:return 41;case 17:return 40;case 18:return 40;case 19:return 44;case 20:break;case 21:return this.popState(),24;case 22:return this.popState(),18;case 23:return yy_.yytext=strip(1,2).replace(/\\"/g,'"'),32;case 24:return yy_.yytext=strip(1,2).replace(/\\'/g,"'"),32;case 25:return 42;case 26:return 34;
case 27:return 34;case 28:return 33;case 29:return 40;case 30:return yy_.yytext=strip(1,2),40;case 31:return"INVALID";case 32:return 5}},lexer.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],lexer.conditions={mu:{rules:[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[3],inclusive:!1},INITIAL:{rules:[0,1,32],inclusive:!0}},lexer
}();return parser.lexer=lexer,Parser.prototype=parser,parser.Parser=Parser,new Parser}();return __exports__=handlebars}(),__module8__=function(__dependency1__,__dependency2__){function parse(input){return input.constructor===AST.ProgramNode?input:(parser.yy=AST,parser.parse(input))}var __exports__={},parser=__dependency1__,AST=__dependency2__;return __exports__.parser=parser,__exports__.parse=parse,__exports__}(__module9__,__module7__),__module10__=function(__dependency1__){function Compiler(){}function precompile(input,options,env){if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+input);
options=options||{},"data"in options||(options.data=!0);var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options);return(new env.JavaScriptCompiler).compile(environment,options)}function compile(input,options,env){function compileInput(){var ast=env.parse(input),environment=(new env.Compiler).compile(ast,options),templateSpec=(new env.JavaScriptCompiler).compile(environment,options,void 0,!0);return env.template(templateSpec)}if(null==input||"string"!=typeof input&&input.constructor!==env.AST.ProgramNode)throw new Exception("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+input);options=options||{},"data"in options||(options.data=!0);
var compiled;return function(context,options){return compiled||(compiled=compileInput()),compiled.call(this,context,options)}}var __exports__={},Exception=__dependency1__;return __exports__.Compiler=Compiler,Compiler.prototype={compiler:Compiler,disassemble:function(){for(var opcode,params,param,opcodes=this.opcodes,out=[],i=0,l=opcodes.length;l>i;i++)if(opcode=opcodes[i],"DECLARE"===opcode.opcode)out.push("DECLARE "+opcode.name+"="+opcode.value);else{params=[];for(var j=0;j<opcode.args.length;j++)param=opcode.args[j],"string"==typeof param&&(param='"'+param.replace("\n","\\n")+'"'),params.push(param);out.push(opcode.opcode+" "+params.join(" "))}return out.join("\n")
},equals:function(other){var len=this.opcodes.length;if(other.opcodes.length!==len)return!1;for(var i=0;len>i;i++){var opcode=this.opcodes[i],otherOpcode=other.opcodes[i];if(opcode.opcode!==otherOpcode.opcode||opcode.args.length!==otherOpcode.args.length)return!1;for(var j=0;j<opcode.args.length;j++)if(opcode.args[j]!==otherOpcode.args[j])return!1}if(len=this.children.length,other.children.length!==len)return!1;for(i=0;len>i;i++)if(!this.children[i].equals(other.children[i]))return!1;return!0},guid:0,compile:function(program,options){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=options;var knownHelpers=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},knownHelpers)for(var name in knownHelpers)this.options.knownHelpers[name]=knownHelpers[name];
return this.accept(program)},accept:function(node){var ret,strip=node.strip||{};return strip.left&&this.opcode("strip"),ret=this[node.type](node),strip.right&&this.opcode("strip"),ret},program:function(program){for(var statements=program.statements,i=0,l=statements.length;l>i;i++)this.accept(statements[i]);return this.isSimple=1===l,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(program){var depth,result=(new this.compiler).compile(program,this.options),guid=this.guid++;this.usePartial=this.usePartial||result.usePartial,this.children[guid]=result;for(var i=0,l=result.depths.list.length;l>i;i++)depth=result.depths.list[i],2>depth||this.addDepth(depth-1);
return guid},block:function(block){var mustache=block.mustache,program=block.program,inverse=block.inverse;program&&(program=this.compileProgram(program)),inverse&&(inverse=this.compileProgram(inverse));var sexpr=mustache.sexpr,type=this.classifySexpr(sexpr);"helper"===type?this.helperSexpr(sexpr,program,inverse):"simple"===type?(this.simpleSexpr(sexpr),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("blockValue")):(this.ambiguousSexpr(sexpr,program,inverse),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")
},hash:function(hash){var pair,val,pairs=hash.pairs;this.opcode("pushHash");for(var i=0,l=pairs.length;l>i;i++)pair=pairs[i],val=pair[1],this.options.stringParams?(val.depth&&this.addDepth(val.depth),this.opcode("getContext",val.depth||0),this.opcode("pushStringParam",val.stringModeValue,val.type),"sexpr"===val.type&&this.sexpr(val)):this.accept(val),this.opcode("assignToHash",pair[0]);this.opcode("popHash")},partial:function(partial){var partialName=partial.partialName;this.usePartial=!0,partial.context?this.ID(partial.context):this.opcode("push","depth0"),this.opcode("invokePartial",partialName.name),this.opcode("append")},content:function(content){this.opcode("appendContent",content.string)
},mustache:function(mustache){this.sexpr(mustache.sexpr),this.opcode(mustache.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(sexpr,program,inverse){var id=sexpr.id,name=id.parts[0],isBlock=null!=program||null!=inverse;this.opcode("getContext",id.depth),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),this.opcode("invokeAmbiguous",name,isBlock)},simpleSexpr:function(sexpr){var id=sexpr.id;"DATA"===id.type?this.DATA(id):id.parts.length?this.ID(id):(this.addDepth(id.depth),this.opcode("getContext",id.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(sexpr,program,inverse){var params=this.setupFullMustacheParams(sexpr,program,inverse),name=sexpr.id.parts[0];
if(this.options.knownHelpers[name])this.opcode("invokeKnownHelper",params.length,name);else{if(this.options.knownHelpersOnly)throw new Exception("You specified knownHelpersOnly, but used the unknown helper "+name,sexpr);this.opcode("invokeHelper",params.length,name,sexpr.isRoot)}},sexpr:function(sexpr){var type=this.classifySexpr(sexpr);"simple"===type?this.simpleSexpr(sexpr):"helper"===type?this.helperSexpr(sexpr):this.ambiguousSexpr(sexpr)},ID:function(id){this.addDepth(id.depth),this.opcode("getContext",id.depth);var name=id.parts[0];name?this.opcode("lookupOnContext",id.parts[0]):this.opcode("pushContext");for(var i=1,l=id.parts.length;l>i;i++)this.opcode("lookup",id.parts[i])
},DATA:function(data){if(this.options.data=!0,data.id.isScoped||data.id.depth)throw new Exception("Scoped data references are not supported: "+data.original,data);this.opcode("lookupData");for(var parts=data.id.parts,i=0,l=parts.length;l>i;i++)this.opcode("lookup",parts[i])},STRING:function(string){this.opcode("pushString",string.string)},INTEGER:function(integer){this.opcode("pushLiteral",integer.integer)},BOOLEAN:function(bool){this.opcode("pushLiteral",bool.bool)},comment:function(){},opcode:function(name){this.opcodes.push({opcode:name,args:[].slice.call(arguments,1)})},declare:function(name,value){this.opcodes.push({opcode:"DECLARE",name:name,value:value})
},addDepth:function(depth){0!==depth&&(this.depths[depth]||(this.depths[depth]=!0,this.depths.list.push(depth)))},classifySexpr:function(sexpr){var isHelper=sexpr.isHelper,isEligible=sexpr.eligibleHelper,options=this.options;if(isEligible&&!isHelper){var name=sexpr.id.parts[0];options.knownHelpers[name]?isHelper=!0:options.knownHelpersOnly&&(isEligible=!1)}return isHelper?"helper":isEligible?"ambiguous":"simple"},pushParams:function(params){for(var param,i=params.length;i--;)param=params[i],this.options.stringParams?(param.depth&&this.addDepth(param.depth),this.opcode("getContext",param.depth||0),this.opcode("pushStringParam",param.stringModeValue,param.type),"sexpr"===param.type&&this.sexpr(param)):this[param.type](param)
},setupFullMustacheParams:function(sexpr,program,inverse){var params=sexpr.params;return this.pushParams(params),this.opcode("pushProgram",program),this.opcode("pushProgram",inverse),sexpr.hash?this.hash(sexpr.hash):this.opcode("emptyHash"),params}},__exports__.precompile=precompile,__exports__.compile=compile,__exports__}(__module5__),__module11__=function(__dependency1__,__dependency2__){function Literal(value){this.value=value}function JavaScriptCompiler(){}var __exports__,COMPILER_REVISION=__dependency1__.COMPILER_REVISION,REVISION_CHANGES=__dependency1__.REVISION_CHANGES,log=__dependency1__.log,Exception=__dependency2__;JavaScriptCompiler.prototype={nameLookup:function(parent,name){var wrap,ret;
return 0===parent.indexOf("depth")&&(wrap=!0),ret=/^[0-9]+$/.test(name)?parent+"["+name+"]":JavaScriptCompiler.isValidJavaScriptVariableName(name)?parent+"."+name:parent+"['"+name+"']",wrap?"("+parent+" && "+ret+")":ret},compilerInfo:function(){var revision=COMPILER_REVISION,versions=REVISION_CHANGES[revision];return"this.compilerInfo = ["+revision+",'"+versions+"'];\n"},appendToBuffer:function(string){return this.environment.isSimple?"return "+string+";":{appendToBuffer:!0,content:string,toString:function(){return"buffer += "+string+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(environment,options,context,asObject){this.environment=environment,this.options=options||{},log("debug",this.environment.disassemble()+"\n\n"),this.name=this.environment.name,this.isChild=!!context,this.context=context||{programs:[],environments:[],aliases:{}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(environment,options);
var opcode,opcodes=environment.opcodes;this.i=0;for(var l=opcodes.length;this.i<l;this.i++)opcode=opcodes[this.i],"DECLARE"===opcode.opcode?this[opcode.name]=opcode.value:this[opcode.opcode].apply(this,opcode.args),opcode.opcode!==this.stripNext&&(this.stripNext=!1);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new Exception("Compile completed with content left on stack");return this.createFunctionContext(asObject)},preamble:function(){var out=[];if(this.isChild)out.push("");else{var namespace=this.namespace,copies="helpers = this.merge(helpers, "+namespace+".helpers);";this.environment.usePartial&&(copies=copies+" partials = this.merge(partials, "+namespace+".partials);"),this.options.data&&(copies+=" data = data || {};"),out.push(copies)
}out.push(this.environment.isSimple?"":", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=out},createFunctionContext:function(asObject){var locals=this.stackVars.concat(this.registers.list);if(locals.length>0&&(this.source[1]=this.source[1]+", "+locals.join(", ")),!this.isChild)for(var alias in this.context.aliases)this.context.aliases.hasOwnProperty(alias)&&(this.source[1]=this.source[1]+", "+alias+"="+this.context.aliases[alias]);this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.pushSource("return buffer;");for(var params=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],i=0,l=this.environment.depths.list.length;l>i;i++)params.push("depth"+this.environment.depths.list[i]);
var source=this.mergeSource();if(this.isChild||(source=this.compilerInfo()+source),asObject)return params.push(source),Function.apply(this,params);var functionSource="function "+(this.name||"")+"("+params.join(",")+") {\n  "+source+"}";return log("debug",functionSource+"\n\n"),functionSource},mergeSource:function(){for(var buffer,source="",i=0,len=this.source.length;len>i;i++){var line=this.source[i];line.appendToBuffer?buffer=buffer?buffer+"\n    + "+line.content:line.content:(buffer&&(source+="buffer += "+buffer+";\n  ",buffer=void 0),source+=line+"\n  ")}return source},blockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";
var params=["depth0"];this.setupParams(0,params),this.replaceStack(function(current){return params.splice(1,0,current),"blockHelperMissing.call("+params.join(", ")+")"})},ambiguousBlockValue:function(){this.context.aliases.blockHelperMissing="helpers.blockHelperMissing";var params=["depth0"];this.setupParams(0,params);var current=this.topStack();params.splice(1,0,current),this.pushSource("if (!"+this.lastHelper+") { "+current+" = blockHelperMissing.call("+params.join(", ")+"); }")},appendContent:function(content){this.pendingContent&&(content=this.pendingContent+content),this.stripNext&&(content=content.replace(/^\s+/,"")),this.pendingContent=content},strip:function(){this.pendingContent&&(this.pendingContent=this.pendingContent.replace(/\s+$/,"")),this.stripNext="strip"
},append:function(){this.flushInline();var local=this.popStack();this.pushSource("if("+local+" || "+local+" === 0) { "+this.appendToBuffer(local)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.context.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(depth){this.lastContext!==depth&&(this.lastContext=depth)},lookupOnContext:function(name){this.push(this.nameLookup("depth"+this.lastContext,name,"context"))},pushContext:function(){this.pushStackLiteral("depth"+this.lastContext)},resolvePossibleLambda:function(){this.context.aliases.functionType='"function"',this.replaceStack(function(current){return"typeof "+current+" === functionType ? "+current+".apply(depth0) : "+current
})},lookup:function(name){this.replaceStack(function(current){return current+" == null || "+current+" === false ? "+current+" : "+this.nameLookup(current,name,"context")})},lookupData:function(){this.pushStackLiteral("data")},pushStringParam:function(string,type){this.pushStackLiteral("depth"+this.lastContext),this.pushString(type),"sexpr"!==type&&("string"==typeof string?this.pushString(string):this.pushStackLiteral(string))},emptyHash:function(){this.pushStackLiteral("{}"),this.options.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[]}},popHash:function(){var hash=this.hash;
this.hash=this.hashes.pop(),this.options.stringParams&&(this.push("{"+hash.contexts.join(",")+"}"),this.push("{"+hash.types.join(",")+"}")),this.push("{\n    "+hash.values.join(",\n    ")+"\n  }")},pushString:function(string){this.pushStackLiteral(this.quotedString(string))},push:function(expr){return this.inlineStack.push(expr),expr},pushLiteral:function(value){this.pushStackLiteral(value)},pushProgram:function(guid){this.pushStackLiteral(null!=guid?this.programExpression(guid):null)},invokeHelper:function(paramSize,name,isRoot){this.context.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var helper=this.lastHelper=this.setupHelper(paramSize,name,!0),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),lookup="helper = "+helper.name+" || "+nonHelper;
helper.paramsInit&&(lookup+=","+helper.paramsInit),this.push("("+lookup+",helper ? helper.call("+helper.callParams+") : helperMissing.call("+helper.helperMissingParams+"))"),isRoot||this.flushInline()},invokeKnownHelper:function(paramSize,name){var helper=this.setupHelper(paramSize,name);this.push(helper.name+".call("+helper.callParams+")")},invokeAmbiguous:function(name,helperCall){this.context.aliases.functionType='"function"',this.useRegister("helper"),this.emptyHash();var helper=this.setupHelper(0,name,helperCall),helperName=this.lastHelper=this.nameLookup("helpers",name,"helper"),nonHelper=this.nameLookup("depth"+this.lastContext,name,"context"),nextStack=this.nextStack();
helper.paramsInit&&this.pushSource(helper.paramsInit),this.pushSource("if (helper = "+helperName+") { "+nextStack+" = helper.call("+helper.callParams+"); }"),this.pushSource("else { helper = "+nonHelper+"; "+nextStack+" = typeof helper === functionType ? helper.call("+helper.callParams+") : helper; }")},invokePartial:function(name){var params=[this.nameLookup("partials",name,"partial"),"'"+name+"'",this.popStack(),"helpers","partials"];this.options.data&&params.push("data"),this.context.aliases.self="this",this.push("self.invokePartial("+params.join(", ")+")")},assignToHash:function(key){var context,type,value=this.popStack();this.options.stringParams&&(type=this.popStack(),context=this.popStack());
var hash=this.hash;context&&hash.contexts.push("'"+key+"': "+context),type&&hash.types.push("'"+key+"': "+type),hash.values.push("'"+key+"': ("+value+")")},compiler:JavaScriptCompiler,compileChildren:function(environment,options){for(var child,compiler,children=environment.children,i=0,l=children.length;l>i;i++){child=children[i],compiler=new this.compiler;var index=this.matchExistingProgram(child);null==index?(this.context.programs.push(""),index=this.context.programs.length,child.index=index,child.name="program"+index,this.context.programs[index]=compiler.compile(child,options,this.context),this.context.environments[index]=child):(child.index=index,child.name="program"+index)
}},matchExistingProgram:function(child){for(var i=0,len=this.context.environments.length;len>i;i++){var environment=this.context.environments[i];if(environment&&environment.equals(child))return i}},programExpression:function(guid){if(this.context.aliases.self="this",null==guid)return"self.noop";for(var depth,child=this.environment.children[guid],depths=child.depths.list,programParams=[child.index,child.name,"data"],i=0,l=depths.length;l>i;i++)depth=depths[i],programParams.push(1===depth?"depth0":"depth"+(depth-1));return(0===depths.length?"self.program(":"self.programWithDepth(")+programParams.join(", ")+")"},register:function(name,val){this.useRegister(name),this.pushSource(name+" = "+val+";")
},useRegister:function(name){this.registers[name]||(this.registers[name]=!0,this.registers.list.push(name))},pushStackLiteral:function(item){return this.push(new Literal(item))},pushSource:function(source){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),source&&this.source.push(source)},pushStack:function(item){this.flushInline();var stack=this.incrStack();return item&&this.pushSource(stack+" = "+item+";"),this.compileStack.push(stack),stack},replaceStack:function(callback){var stack,createdStack,usedLiteral,prefix="",inline=this.isInline();if(inline){var top=this.popStack(!0);if(top instanceof Literal)stack=top.value,usedLiteral=!0;
else{createdStack=!this.stackSlot;var name=createdStack?this.incrStack():this.topStackName();prefix="("+this.push(name)+" = "+top+"),",stack=this.topStack()}}else stack=this.topStack();var item=callback.call(this,stack);return inline?(usedLiteral||this.popStack(),createdStack&&this.stackSlot--,this.push("("+prefix+item+")")):(/^stack/.test(stack)||(stack=this.nextStack()),this.pushSource(stack+" = ("+prefix+item+");")),stack},nextStack:function(){return this.pushStack()},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot
},flushInline:function(){var inlineStack=this.inlineStack;if(inlineStack.length){this.inlineStack=[];for(var i=0,len=inlineStack.length;len>i;i++){var entry=inlineStack[i];entry instanceof Literal?this.compileStack.push(entry):this.pushStack(entry)}}},isInline:function(){return this.inlineStack.length},popStack:function(wrapped){var inline=this.isInline(),item=(inline?this.inlineStack:this.compileStack).pop();if(!wrapped&&item instanceof Literal)return item.value;if(!inline){if(!this.stackSlot)throw new Exception("Invalid stack pop");this.stackSlot--}return item},topStack:function(wrapped){var stack=this.isInline()?this.inlineStack:this.compileStack,item=stack[stack.length-1];
return!wrapped&&item instanceof Literal?item.value:item},quotedString:function(str){return'"'+str.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},setupHelper:function(paramSize,name,missingParams){var params=[],paramsInit=this.setupParams(paramSize,params,missingParams),foundHelper=this.nameLookup("helpers",name,"helper");return{params:params,paramsInit:paramsInit,name:foundHelper,callParams:["depth0"].concat(params).join(", "),helperMissingParams:missingParams&&["depth0",this.quotedString(name)].concat(params).join(", ")}},setupOptions:function(paramSize,params){var param,inverse,program,options=[],contexts=[],types=[];
options.push("hash:"+this.popStack()),this.options.stringParams&&(options.push("hashTypes:"+this.popStack()),options.push("hashContexts:"+this.popStack())),inverse=this.popStack(),program=this.popStack(),(program||inverse)&&(program||(this.context.aliases.self="this",program="self.noop"),inverse||(this.context.aliases.self="this",inverse="self.noop"),options.push("inverse:"+inverse),options.push("fn:"+program));for(var i=0;paramSize>i;i++)param=this.popStack(),params.push(param),this.options.stringParams&&(types.push(this.popStack()),contexts.push(this.popStack()));return this.options.stringParams&&(options.push("contexts:["+contexts.join(",")+"]"),options.push("types:["+types.join(",")+"]")),this.options.data&&options.push("data:data"),options
},setupParams:function(paramSize,params,useRegister){var options="{"+this.setupOptions(paramSize,params).join(",")+"}";return useRegister?(this.useRegister("options"),params.push("options"),"options="+options):(params.push(options),"")}};for(var reservedWords="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),compilerWords=JavaScriptCompiler.RESERVED_WORDS={},i=0,l=reservedWords.length;l>i;i++)compilerWords[reservedWords[i]]=!0;
return JavaScriptCompiler.isValidJavaScriptVariableName=function(name){return!JavaScriptCompiler.RESERVED_WORDS[name]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(name)?!0:!1},__exports__=JavaScriptCompiler}(__module2__,__module5__),__module0__=function(__dependency1__,__dependency2__,__dependency3__,__dependency4__,__dependency5__){var __exports__,Handlebars=__dependency1__,AST=__dependency2__,Parser=__dependency3__.parser,parse=__dependency3__.parse,Compiler=__dependency4__.Compiler,compile=__dependency4__.compile,precompile=__dependency4__.precompile,JavaScriptCompiler=__dependency5__,_create=Handlebars.create,create=function(){var hb=_create();return hb.compile=function(input,options){return compile(input,options,hb)
},hb.precompile=function(input,options){return precompile(input,options,hb)},hb.AST=AST,hb.Compiler=Compiler,hb.JavaScriptCompiler=JavaScriptCompiler,hb.Parser=Parser,hb.parse=parse,hb};return Handlebars=create(),Handlebars.create=create,__exports__=Handlebars}(__module1__,__module7__,__module8__,__module10__,__module11__);return __module0__}();define("handlebars",function(global){return function(){var ret;return ret||global.Handlebars}}(this)),define("taoQtiItem/qtiItem/helper/interactionHelper",["lodash","taoQtiItem/qtiItem/core/Element"],function(_,Element){return{convertChoices:function(choices,outputType){var ret=[],_this=this;return _.each(choices,function(c){if(Element.isA(c,"choice"))switch(outputType){case"serial":ret.push(c.getSerial());
break;case"identifier":ret.push(c.id());break;default:ret.push(c)}else _.isArray(c)&&ret.push(_this.convertChoices(c,outputType))}),ret},findChoices:function(interaction,choices,inputType){var ret=[],_this=this;return _.each(choices,function(c){var choice;_.isString(c)?"serial"===inputType?(choice=interaction.getChoice(c),choice&&ret.push(choice)):"identifier"===inputType?(choice=interaction.getChoiceByIdentifier(c),choice&&ret.push(choice)):ret.push(c):ret.push(_.isArray(c)?_this.findChoices(interaction,c,inputType):c)}),ret},shuffleChoices:function(choices){var r=[],f={},j=0;for(var i in choices){if(!Element.isA(choices[i],"choice"))throw"invalid element in array: is not a qti choice";
var choice=choices[i];choice.attr("fixed")&&(f[j]=choice),r.push(choice),j++}for(var n=0;n<r.length-1;n++)if(!f[n]){var k=-1;do k=n+Math.floor(Math.random()*(r.length-n));while(f[k]);var tmp=r[k];r[k]=r[n],r[n]=tmp}return r},serialToIdentifier:function(interaction,choiceSerial){var choice=interaction.getChoice(choiceSerial);return choice?choice.id():""}}}),define("taoQtiItem/qtiRunner/core/Renderer",["lodash","jquery","handlebars","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/interactionHelper"],function(_,$,Handlebars,Element,interactionHelper){function getDocumentBaseUrl(){return window.location.protocol+"//"+window.location.host+window.location.pathname.replace(/([^\/]*)$/,"")
}var _isValidRenderer=function(renderer){var valid=!0;if("object"!=typeof renderer)return!1;var classCorrect=!1;if(renderer.qtiClass)if(_.indexOf(_renderableClasses,renderer.qtiClass)>=0)classCorrect=!0;else{var pos=renderer.qtiClass.indexOf(".");if(pos>0){var qtiClass=renderer.qtiClass.slice(0,pos),subClass=renderer.qtiClass.slice(pos+1);_renderableSubclasses[qtiClass]&&_.indexOf(_renderableSubclasses[qtiClass],subClass)>=0&&(classCorrect=!0)}}if(!classCorrect)throw valid=!1,new Error("invalid qti class name in renderer declaration : "+renderer.qtiClass);if(!renderer.template)throw valid=!1,new Error("missing template in renderer declaration : "+renderer.qtiClass);
return valid},_renderableClasses=["_container","assessmentItem","stylesheet","responseDeclaration","outcomeDeclaration","responseProcessing","_simpleFeedbackRule","img","math","object","modalFeedback","rubricBlock","associateInteraction","choiceInteraction","extendedTextInteraction","gapMatchInteraction","graphicAssociateInteraction","graphicGapMatchInteraction","graphicOrderInteraction","hotspotInteraction","hottextInteraction","inlineChoiceInteraction","matchInteraction","mediaInteraction","orderInteraction","selectPointInteraction","sliderInteraction","textEntryInteraction","uploadInteraction","endAttemptInteraction","customInteraction","prompt","associableHotspot","gap","gapImg","gapText","hotspotChoice","hottext","inlineChoice","simpleAssociableChoice","simpleChoice","infoControl"],_dependencies={assessmentItem:["stylesheet","_container","prompt","modalFeedback"],rubricBlock:["_container"],associateInteraction:["simpleAssociableChoice"],choiceInteraction:["simpleChoice"],gapMatchInteraction:["gap","gapText"],graphicAssociateInteraction:["associableHotspot"],graphicGapMatchInteraction:["associableHotspot","gapImg"],graphicOrderInteraction:["hotspotChoice"],hotspotInteraction:["hotspotChoice"],hottextInteraction:["hottext"],inlineChoiceInteraction:["inlineChoice"],matchInteraction:["simpleAssociableChoice"],orderInteraction:["simpleChoice"]},_renderableSubclasses={simpleAssociableChoice:["associateInteraction","matchInteraction"],simpleChoice:["choiceInteraction","orderInteraction"]},Renderer=function(options){options=options||{},this.isRenderer=!0,this.name="",this.shuffleChoices=void 0!==options.shuffleChoices?options.shuffleChoices:!0,this.shuffledChoices=[];
var _locations={},_renderers={},_getClassRenderer=function(qtiClass){var ret=null;if(_renderers[qtiClass])ret=_renderers[qtiClass];else{var pos=qtiClass.indexOf(".");pos>0&&(qtiClass=qtiClass.slice(0,pos),_renderers[qtiClass]&&(ret=_renderers[qtiClass]))}return ret};this.setOption=function(key,value){return"string"==typeof key&&(options[key]=value),this},this.setOptions=function(opts){return _.extend(options,opts),this},this.getOption=function(key){return"string"==typeof key&&options[key]?options[key]:null},this.renderTpl=function(element,data,qtiSubclass){var ret="",tplFound=!1,qtiClass=qtiSubclass||element.qtiClass,renderer=_getClassRenderer(qtiClass);if(renderer&&"function"==typeof renderer.template&&(ret=renderer.template(data),tplFound=!0),!tplFound)throw new Error("no renderer template loaded under the class name : "+qtiClass);
return ret},this.getData=function(element,data,qtiSubclass){var ret=data,qtiClass=qtiSubclass||element.qtiClass,renderer=_getClassRenderer(qtiClass);return renderer&&"function"==typeof renderer.getData&&(ret=renderer.getData.call(this,element,data)),ret},this.renderDirect=function(tpl,data){return Handlebars.compile(tpl)(data)},this.getContainer=function(qtiElement,$scope,qtiSubclass){var ret=null,qtiClass=qtiSubclass||qtiElement.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer found for the class : "+qtiElement.qtiClass;return ret=renderer.getContainer(qtiElement,$scope)},this.postRender=function(qtiElement,data,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiElement.qtiClass,renderer=_getClassRenderer(qtiClass);
return renderer&&"function"==typeof renderer.render&&(ret=renderer.render.call(this,qtiElement,data)),ret},this.setResponse=function(qtiInteraction,response,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer registered under the name : "+qtiClass;if("function"==typeof renderer.setResponse){ret=renderer.setResponse.call(this,qtiInteraction,response);var $container=renderer.getContainer.call(this,qtiInteraction);$container instanceof $&&$container.length&&$container.trigger("responseSet",[qtiInteraction,response])}return ret},this.getResponse=function(qtiInteraction,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);
if(!renderer)throw"no renderer registered under the name : "+qtiClass;return"function"==typeof renderer.getResponse&&(ret=renderer.getResponse.call(this,qtiInteraction)),ret},this.resetResponse=function(qtiInteraction,qtiSubclass){var ret=!1,qtiClass=qtiSubclass||qtiInteraction.qtiClass,renderer=_getClassRenderer(qtiClass);if(!renderer)throw"no renderer registered under the name : "+qtiClass;return"function"==typeof renderer.resetResponse&&(ret=renderer.resetResponse.call(this,qtiInteraction)),ret},this.getLoadedRenderers=function(){return _renderers},this.register=function(renderersLocations){_.extend(_locations,renderersLocations)},this.load=function(callback,requiredClasses){var required=[];
if(requiredClasses){if(!_.isArray(requiredClasses))throw new Error('invalid argument type: expected array for arg "requireClasses"');requiredClasses=_.intersection(requiredClasses,_renderableClasses),_.each(requiredClasses,function(reqClass){var deps=_dependencies[reqClass];deps&&(requiredClasses=_.union(requiredClasses,deps))});for(var i in requiredClasses){var qtiClass=requiredClasses[i];if(_renderableSubclasses[qtiClass]){var requiredSubClasses=_.intersection(requiredClasses,_renderableSubclasses[qtiClass]);_.each(requiredSubClasses,function(subclass){if(_locations[qtiClass+"."+subclass])required.push(_locations[qtiClass+"."+subclass]);else{if(!_locations[qtiClass])throw new Error(this.name+" : missing qti class location declaration: "+qtiClass+", subclass: "+subclass);
required.push(_locations[qtiClass])}})}else if(_locations[qtiClass]===!1)_renderers[qtiClass]=!1;else{if(!_locations[qtiClass])throw new Error(this.name+" : missing qti class location declaration: "+qtiClass);required.push(_locations[qtiClass])}}}else required=_.values(_locations);var _this=this;return require(required,function(){_.each(arguments,function(clazz){_isValidRenderer(clazz)&&(_renderers[clazz.qtiClass]=clazz)}),"function"==typeof callback&&callback.call(_this,_renderers)}),this},this.setShuffledChoices=function(interaction,choices,identificationType){Element.isA(interaction,"interaction")&&(this.shuffledChoices[interaction.getSerial()]=interactionHelper.findChoices(interaction,choices,identificationType))
},this.getShuffledChoices=function(interaction,reshuffle,returnedType){var tmp,ret=[];if(Element.isA(interaction,"interaction")){var serial=interaction.getSerial();if(!this.shuffledChoices[serial]||reshuffle)if(Element.isA(interaction,"matchInteraction")){this.shuffledChoices[serial]=[];for(var i=0;2>i;i++)this.shuffledChoices[serial].push(interactionHelper.shuffleChoices(interaction.getChoices(i)))}else this.shuffledChoices[serial]=interactionHelper.shuffleChoices(interaction.getChoices());tmp=this.shuffledChoices[serial],ret="serial"===returnedType||"identifier"===returnedType?interactionHelper.convertChoices(tmp,returnedType):_.clone(tmp)}return ret},this.getRenderers=function(){return _renderers
},this.getLocations=function(){return _locations},this.getAbsoluteUrl=function(relUrl){if(this.getOption("userRelativeUrl"))return relUrl.replace(/^\.?\//,"");if(/^http(s)?:\/\//i.test(relUrl))return relUrl;var absUrl="",runtimeLocations=this.getOption("runtimeLocations");if(runtimeLocations&&_.size(runtimeLocations)&&_.forIn(runtimeLocations,function(runtimeLocation,typeIdentifier){return 0===relUrl.indexOf(typeIdentifier)?(absUrl=relUrl.replace(typeIdentifier,runtimeLocation),!1):void 0}),absUrl)return absUrl;var baseUrl=this.getOption("baseUrl")||getDocumentBaseUrl();return baseUrl+relUrl}};return{build:function(renderersLocations,name,defaultOptions){var NewRenderer=function(){Renderer.apply(this,arguments),this.register(renderersLocations),this.name=name||"",defaultOptions&&this.setOptions(defaultOptions)
};return NewRenderer.prototype=Renderer.prototype,NewRenderer}}}),define("taoQtiItem/qtiDefaultRenderer/renderers/config",[],function(){return{name:"defaultRenderer",locations:{_container:"taoQtiItem/qtiDefaultRenderer/renderers/Container",assessmentItem:"taoQtiItem/qtiDefaultRenderer/renderers/Item",stylesheet:"taoQtiItem/qtiDefaultRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiDefaultRenderer/renderers/ResponseProcessing",math:"taoQtiItem/qtiDefaultRenderer/renderers/Math",object:"taoQtiItem/qtiDefaultRenderer/renderers/Object",modalFeedback:"taoQtiItem/qtiDefaultRenderer/renderers/ModalFeedback",rubricBlock:"taoQtiItem/qtiDefaultRenderer/renderers/RubricBlock",associateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/AssociateInteraction",choiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/ExtendedTextInteraction",gapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GapMatchInteraction",graphicAssociateInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicAssociateInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicGapMatchInteraction",graphicOrderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/GraphicOrderInteraction",hotspotInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HotspotInteraction",hottextInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/HottextInteraction",inlineChoiceInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/InlineChoiceInteraction",matchInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MatchInteraction",mediaInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/MediaInteraction",orderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/OrderInteraction",selectPointInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SelectPointInteraction",sliderInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/SliderInteraction",textEntryInteraction:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/TextEntryInteraction",prompt:"taoQtiItem/qtiDefaultRenderer/renderers/interactions/Prompt",associableHotspot:"taoQtiItem/qtiDefaultRenderer/renderers/choices/AssociableHotspot",gap:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Gap",gapImg:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapImg",gapText:"taoQtiItem/qtiDefaultRenderer/renderers/choices/GapText",hotspotChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/HotspotChoice",hottext:"taoQtiItem/qtiDefaultRenderer/renderers/choices/Hottext",inlineChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/InlineChoice",simpleAssociableChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleAssociableChoice",simpleChoice:"taoQtiItem/qtiDefaultRenderer/renderers/choices/SimpleChoice"}}
}),define("taoQtiItem/qtiCommonRenderer/renderers/config",["lodash","taoQtiItem/qtiDefaultRenderer/renderers/config"],function(_,defaultRenderConfig){var locations=_.extend(_.clone(defaultRenderConfig.locations),{assessmentItem:"taoQtiItem/qtiCommonRenderer/renderers/Item",_container:"taoQtiItem/qtiCommonRenderer/renderers/Container",_simpleFeedbackRule:!1,stylesheet:"taoQtiItem/qtiCommonRenderer/renderers/Stylesheet",outcomeDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration",responseDeclaration:"taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration",responseProcessing:"taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing",img:"taoQtiItem/qtiCommonRenderer/renderers/Img",math:"taoQtiItem/qtiCommonRenderer/renderers/Math",object:"taoQtiItem/qtiCommonRenderer/renderers/Object",rubricBlock:"taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",modalFeedback:"taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",prompt:"taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt",choiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",extendedTextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",orderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",associateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",matchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",textEntryInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",sliderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",inlineChoiceInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction","simpleChoice.choiceInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction","simpleChoice.orderInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",hottext:"taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",gap:"taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",gapText:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapText","simpleAssociableChoice.matchInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction","simpleAssociableChoice.associateInteraction":"taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",inlineChoice:"taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice",hottextInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",hotspotInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",gapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",selectPointInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",graphicOrderInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",mediaInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",uploadInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",graphicGapMatchInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",gapImg:"taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg",graphicAssociateInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction",customInteraction:"taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction",infoControl:"taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl"});
return{name:"commonRenderer",locations:locations}}),define("normalize",[],function(){function convertURIBase(uri,fromBase,toBase){if(uri.match(absUrlRegEx)||uri.match(protocolRegEx))return uri;uri=removeDoubleSlashes(uri);var toBaseProtocol=toBase.match(protocolRegEx),fromBaseProtocol=fromBase.match(protocolRegEx);return!fromBaseProtocol||toBaseProtocol&&toBaseProtocol[1]==fromBaseProtocol[1]&&toBaseProtocol[2]==fromBaseProtocol[2]?relativeURI(absoluteURI(uri,fromBase),toBase):absoluteURI(uri,fromBase)}function absoluteURI(uri,base){if("./"==uri.substr(0,2)&&(uri=uri.substr(2)),uri.match(absUrlRegEx)||uri.match(protocolRegEx))return uri;var baseParts=base.split("/"),uriParts=uri.split("/");
for(baseParts.pop();curPart=uriParts.shift();)".."==curPart?baseParts.pop():baseParts.push(curPart);return baseParts.join("/")}function relativeURI(uri,base){var baseParts=base.split("/");for(baseParts.pop(),base=baseParts.join("/")+"/",i=0;base.substr(i,1)==uri.substr(i,1);)i++;for(;"/"!=base.substr(i,1);)i--;base=base.substr(i+1),uri=uri.substr(i+1),baseParts=base.split("/");var uriParts=uri.split("/");for(out="";baseParts.shift();)out+="../";for(;curPart=uriParts.shift();)out+=curPart+"/";return out.substr(0,out.length-1)}var slashes=/([^:])\/+/g,removeDoubleSlashes=function(uri){return uri.replace(slashes,"$1/")},protocolRegEx=/[^\:\/]*:\/\/([^\/])*/,absUrlRegEx=/^(\/|data:)/,normalizeCSS=function(source,fromBase,toBase){fromBase=removeDoubleSlashes(fromBase),toBase=removeDoubleSlashes(toBase);
for(var result,url,source,urlRegEx=/@import\s*("([^"]*)"|'([^']*)')|url\s*\(\s*(\s*"([^"]*)"|'([^']*)'|[^\)]*\s*)\s*\)/gi;result=urlRegEx.exec(source);){url=result[3]||result[2]||result[5]||result[6]||result[4];var newUrl;newUrl=convertURIBase(url,fromBase,toBase);var quoteLen=result[5]||result[6]?1:0;source=source.substr(0,urlRegEx.lastIndex-url.length-quoteLen-1)+newUrl+source.substr(urlRegEx.lastIndex-quoteLen-1),urlRegEx.lastIndex=urlRegEx.lastIndex+(newUrl.length-url.length)}return source};return normalizeCSS.convertURIBase=convertURIBase,normalizeCSS.absoluteURI=absoluteURI,normalizeCSS.relativeURI=relativeURI,normalizeCSS}),define("css",[],function(){if("undefined"==typeof window)return{load:function(n,r,load){load()
}};var head=document.getElementsByTagName("head")[0],engine=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,useImportLoad=!1,useOnload=!0;engine[1]||engine[7]?useImportLoad=parseInt(engine[1])<6||parseInt(engine[7])<=9:engine[2]?useOnload=!1:engine[4]&&(useImportLoad=parseInt(engine[4])<18);var cssAPI={};cssAPI.pluginBuilder="./css-builder";var curStyle,curSheet,ieCurCallback,createStyle=function(){curStyle=document.createElement("style"),head.appendChild(curStyle),curSheet=curStyle.styleSheet||curStyle.sheet},ieCnt=0,ieLoads=[],createIeLoad=function(url){ieCnt++,32==ieCnt&&(createStyle(),ieCnt=0),curSheet.addImport(url),curStyle.onload=processIeLoad
},processIeLoad=function(){ieCurCallback();var nextLoad=ieLoads.shift();return nextLoad?(ieCurCallback=nextLoad[1],void createIeLoad(nextLoad[0])):void(ieCurCallback=null)},importLoad=function(url,callback){if(curSheet&&curSheet.addImport||createStyle(),curSheet&&curSheet.addImport)ieCurCallback?ieLoads.push([url,callback]):(createIeLoad(url),ieCurCallback=callback);else{curStyle.textContent='@import "'+url+'";';var loadInterval=setInterval(function(){try{curStyle.sheet.cssRules,clearInterval(loadInterval),callback()}catch(e){}},10)}},linkLoad=function(url,callback){var link=document.createElement("link");if(link.type="text/css",link.rel="stylesheet",useOnload)link.onload=function(){link.onload=function(){},setTimeout(callback,7)
};else var loadInterval=setInterval(function(){for(var i=0;i<document.styleSheets.length;i++){var sheet=document.styleSheets[i];if(sheet.href==link.href)return clearInterval(loadInterval),callback()}},10);link.href=url,head.appendChild(link)};return cssAPI.normalize=function(name,normalize){return".css"==name.substr(name.length-4,4)&&(name=name.substr(0,name.length-4)),normalize(name)},cssAPI.load=function(cssId,req,load){(useImportLoad?importLoad:linkLoad)(req.toUrl(cssId+".css"),load)},cssAPI}),define("css!taoQtiItemCss/qti",[],function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/Renderer",["taoQtiItem/qtiRunner/core/Renderer","taoQtiItem/qtiCommonRenderer/renderers/config","css!taoQtiItemCss/qti"],function(Renderer,config){return Renderer.build(config.locations,config.name)
}),define("iframeNotifier",["jquery","lodash"],function($,_){function hasAccess(windowElt){return!(!window.__knownParent__||!windowElt||windowElt===window)}var xDomMessaging={parent:function(eventName,args){_.defer(function(){if(hasAccess(window.parent)&&window.parent.$){var _$=window.parent.$;_$(window.parent.document).trigger(eventName,args||[])}})},top:function(eventName,args){_.defer(function(){if(hasAccess(window.top)&&window.top.$){var _$=window.top.$;_$(window.top.document).trigger(eventName,args||[])}})}};return xDomMessaging}),define("core/history",["jquery"],function($){var ns="history",history={fixBrokenBrowsers:function(){var enabledSelector=["input","textarea","[contenteditable=true]"].join(","),preventBackSpace=function(e){return 8!==e.keyCode
},preventBackSpacePropag=function(e){return 8!==e.keyCode||e.target.readonly||e.target.disbaled||e.stopPropagation(),!0};$(document).off("."+ns),$(document).off("."+ns,enabledSelector),$(document).on("keydown."+ns,preventBackSpace),$(document).on("keypress."+ns,preventBackSpace),$(document).on("keydown."+ns,enabledSelector,preventBackSpacePropag),$(document).on("keypress."+ns,enabledSelector,preventBackSpacePropag)}};return history}),define("taoQtiItem/runtime/qtiBootstrap.min",["jquery","lodash","taoQtiItem/qtiRunner/core/QtiRunner","taoQtiItem/qtiCommonRenderer/renderers/Renderer","iframeNotifier","core/history"],function($,_,QtiRunner,Renderer,iframeNotifier,history){return history.fixBrokenBrowsers(),function(runnerContext){window.onItemApiReady=function(itemApi){var qtiRunner=new QtiRunner,coreItemData=runnerContext.itemData,variableElementsData=_.merge(runnerContext.variableElements,itemApi.params.contentVariables||{});
window.qtiRunner=qtiRunner,qtiRunner.setItemApi(itemApi),qtiRunner.setRenderer(new Renderer({baseUrl:""})),qtiRunner.loadItemData(coreItemData,function(){qtiRunner.loadElements(variableElementsData,function(){qtiRunner.renderItem(void 0,function(){_.isArray(runnerContext.userScripts)&&require(runnerContext.userScripts,function(){_.forEach(arguments,function(dependency){_.isFunction(dependency.exec)&&dependency.exec.call(null,runnerContext.userVars)})}),iframeNotifier.parent("itemloaded"),_.defer(function(){window.focus()})})})})},_.defer(function(){iframeNotifier.parent("itemready")})}}),define("taoQtiItem/qtiItem/core/Img",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(Element,_,rendererConfig){var Img=Element.extend({qtiClass:"img",render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={};
return defaultData.attributes={src:renderer.getAbsoluteUrl(this.attr("src"))},this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},isEmpty:function(){return!this.attr("src")}});return Img}),define("taoQtiItem/qtiItem/mixin/ContainerItemBody",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/mixin/Container","lodash"],function(Mixin,Container,_){var methods={};return _.extend(methods,Container.methods),_.extend(methods,{initContainer:function(body){Container.methods.initContainer.call(this,body),this.bdy.contentModel="itemBody"}}),{augment:function(targetClass){Mixin.augment(targetClass,methods)},methods:methods}}),define("taoQtiItem/qtiItem/core/Item",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/core/IdentifiedElement","taoQtiItem/qtiItem/mixin/ContainerItemBody","lodash","jquery","taoQtiItem/qtiItem/helper/util"],function(Element,IdentifiedElement,Container,_,$,util){var Item=IdentifiedElement.extend({qtiClass:"assessmentItem",init:function(serial,attributes){this._super(serial,attributes),this.relatedItem=this,this.stylesheets={},this.responses={},this.outcomes={},this.modalFeedbacks={},this.namespaces={},this.responseProcessing=null
},getInteractions:function(){var interactions=[],elts=this.getComposingElements();for(var serial in elts)Element.isA(elts[serial],"interaction")&&interactions.push(elts[serial]);return interactions},addResponseDeclaration:function(response){if(!Element.isA(response,"responseDeclaration"))throw"is not a qti response declaration";return response.setRelatedItem(this),this.responses[response.getSerial()]=response,this},getResponseDeclaration:function(identifier){for(var i in this.responses)if(this.responses[i].attr("identifier")===identifier)return this.responses[i];return null},addOutcomeDeclaration:function(outcome){if(!Element.isA(outcome,"outcomeDeclaration"))throw"is not a qti outcome declaration";
return outcome.setRelatedItem(this),this.outcomes[outcome.getSerial()]=outcome,this},addModalFeedback:function(feedback){if(!Element.isA(feedback,"modalFeedback"))throw"is not a qti modal feedback";return feedback.setRelatedItem(this),this.modalFeedbacks[feedback.getSerial()]=feedback,this},getComposingElements:function(){var elts=this._super(),_this=this;return _.each(["responses","outcomes","modalFeedbacks","stylesheets"],function(elementCollection){for(var i in _this[elementCollection]){var elt=_this[elementCollection][i];elts[i]=elt,elts=_.extend(elts,elt.getComposingElements())}}),this.responseProcessing instanceof Element&&(elts[this.responseProcessing.getSerial()]=this.responseProcessing),elts
},find:function(serial){var found=this._super(serial);return found||(found=util.findInCollection(this,["responses","outcomes","modalFeedbacks","stylesheets"],serial)),found},getResponses:function(){return _.clone(this.responses)},getRelatedItem:function(){return this},addNamespace:function(name,uri){this.namespaces[name]=uri},setNamespaces:function(namespaces){this.namespaces=namespaces},getNamespaces:function(){return _.clone(this.namespaces)},addStylesheet:function(stylesheet){if(!Element.isA(stylesheet,"stylesheet"))throw"is not a qti stylesheet declaration";return stylesheet.setRelatedItem(this),this.stylesheets[stylesheet.getSerial()]=stylesheet,this},removeStyleSheet:function(stylesheet){return delete this.stylesheets[stylesheet.getSerial()],this
},stylesheetExists:function(href){var exists=!1;return _.each(this.stylesheets,function(stylesheet){return stylesheet.attr("href")===href?(exists=!0,!1):void 0}),exists},setResponseProcessing:function(rp){if(!Element.isA(rp,"responseProcessing"))throw"is not a response processing";return rp.setRelatedItem(this),this.responseProcessing=rp,this},toArray:function(){var arr=this._super();arr.outcomes={};for(var i in this.outcomes)arr.outcomes[i]=this.outcomes[i].toArray();arr.responses={};for(var i in this.responses)arr.responses[i]=this.responses[i].toArray();arr.stylesheets={};for(var i in this.stylesheets)arr.stylesheets[i]=this.stylesheets[i].toArray();return arr.namespaces=this.namespaces,arr
},isEmpty:function(){var body=this.body().trim();if(body){var $dummy=$("<div>").html(body),$children=$dummy.children();return 1===$children.length&&$children.hasClass("empty")?!0:!1}return!0}});return Container.augment(Item),Item}),define("taoQtiItem/qtiItem/core/Math",["lodash","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/helper/rendererConfig"],function(_,Element,rendererConfig){var _stripMathTags=function(mathML,nsName){var regex=new RegExp("<(/)?"+(nsName?nsName+":":"")+"math[^>]*>","g");return mathML.replace(regex,"").replace(/^\s*[\r\n]/gm,"").replace(/\s*[\r\n]$/gm,"")},_stripNamespace=function(mathML,nsName){var regex=new RegExp("<(/)?"+(nsName?nsName+":":""),"g");
return mathML.replace(regex,"<$1")},Math=Element.extend({qtiClass:"math",defaultNsName:"m",defaultNsUri:"http://www.w3.org/1998/Math/MathML",init:function(serial,attributes){this._super(serial,attributes),this.ns=null,this.mathML="",this.annotations={}},getNamespace:function(){if(this.ns&&this.ns.name&&this.ns.uri)return _.clone(this.ns);var relatedItem=this.getRelatedItem();if(relatedItem){var namespaces=relatedItem.getNamespaces();for(ns in namespaces)if(namespaces[ns].indexOf("MathML")>0)return{name:ns,uri:namespaces[ns]};return relatedItem.namespaces[this.defaultNsName]=this.defaultNsUri,{name:this.defaultNsName,uri:this.defaultNsUri}}return{}},setNamespace:function(name,uri){this.ns={name:name,uri:uri}
},setAnnotation:function(encoding,value){this.annotations[encoding]=value},getAnnotation:function(encoding){return this.annotations[encoding]},removeAnnotation:function(encoding){delete this.annotations[encoding]},setMathML:function(mathML){var ns=this.getNamespace(),nsName=ns.name&&ns.uri?ns.name:"";mathML=_stripMathTags(mathML,nsName),ns&&(mathML=_stripNamespace(mathML,nsName)),this.mathML=mathML},getMathML:function(){return this.mathML},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),tag=this.qtiClass,raw=this.mathML,body=raw,ns=this.getNamespace(),annotations="";for(var encoding in this.annotations)annotations+='<annotation encoding="'+encoding+'">'+this.annotations[encoding]+"</annotation>";
annotations&&(raw=raw.indexOf("</semantics>")>0?raw.replace("</semantics>",annotations+"</semantics>"):"<semantics>"+raw+annotations+"</semantics>"),ns&&ns.name&&(body=raw.replace(/<(\/)?([^!])/g,"<$1"+ns.name+":$2"),tag=ns.name+":"+tag);var defaultData={block:"block"===this.attr("display")?!0:!1,body:body,raw:raw,tag:tag,ns:ns};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},isEmpty:function(){return _isEmptyMathML(this.mathML)&&(!this.annotations.latex||!this.annotations.latex.trim())}}),_isEmptyMathML=function(mathStr){var hasContent=!1;if(mathStr&&mathStr.trim()){var $math=$(mathStr);hasContent=!!$math.text()}return!hasContent
};return Math}),define("taoQtiItem/qtiItem/core/Object",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(Element,_,rendererConfig){var QtiObject=Element.extend({qtiClass:"object",getMediaType:function(){var type="undefined",mimetype=this.attr("type");return mimetype&&(type=0===mimetype.indexOf("video")?"video":0===mimetype.indexOf("audio")?"audio":0===mimetype.indexOf("image")?"image":0===mimetype.indexOf("text/html")?"html":"object"),type},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={};switch(this.getMediaType()){case"video":defaultData.video=!0;
break;case"audio":defaultData.audio=!0;break;case"html":defaultData.html=!0;break;case"image":default:defaultData.object=!0}return defaultData.attributes={data:renderer.getAbsoluteUrl(this.attr("data"))},defaultData.body=this._alt,this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},isEmpty:function(){return!this.attr("data")}});return QtiObject}),define("taoQtiItem/qtiItem/mixin/CustomElement",["taoQtiItem/qtiItem/mixin/Mixin","lodash"],function(Mixin,_){var methods={prop:function(name,value){if(name)if(void 0!==value)this.properties[name]=value;else if("object"==typeof name)for(var prop in name)this.prop(prop,name[prop]);else if("string"==typeof name)return void 0===this.properties[name]?void 0:this.properties[name];
return this},removeProp:function(propNames){var _this=this;return"string"==typeof propNames&&(propNames=[propNames]),_.each(propNames,function(propName){delete _this.attributes[propName]}),this},getNamespace:function(){if(this.ns&&this.ns.name&&this.ns.uri)return _.clone(this.ns);var relatedItem=this.getRelatedItem();if(relatedItem){var namespaces=relatedItem.getNamespaces();for(ns in namespaces)if(namespaces[ns].indexOf(this.defaultNsUri)>=0)return{name:ns,uri:namespaces[ns]};return relatedItem.namespaces[this.defaultNsName]=this.defaultNsUri,{name:this.defaultNsName,uri:this.defaultNsUri}}return{}},setNamespace:function(name,uri){this.ns={name:name,uri:uri}
},getMarkupNamespace:function(){if(this.markupNs&&this.markupNs.name&&this.markupNs.uri)return _.clone(this.markupNs);var relatedItem=this.getRelatedItem();return relatedItem?(relatedItem.namespaces[this.defaultMarkupNsName]=this.defaultMarkupNsUri,{name:this.defaultMarkupNsName,uri:this.defaultMarkupNsUri}):{}},setMarkupNamespace:function(name,uri){this.markupNs={name:name,uri:uri}}};return{augment:function(targetClass){Mixin.augment(targetClass,methods)},methods:methods}}),define("taoQtiItem/qtiItem/core/PortableInfoControl",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/mixin/CustomElement","taoQtiItem/qtiItem/helper/rendererConfig","lodash"],function(Element,CustomElement,rendererConfig,_){var PortableInfoControl=Element.extend({qtiClass:"infoControl",defaultNsName:"pic",defaultNsUri:"http://www.imsglobal.org/xsd/portableInfoControl",defaultMarkupNsName:"html5",defaultMarkupNsUri:"html5",init:function(serial,attributes){this._super(serial,attributes),this.typeIdentifier="",this.markup="",this.properties={},this.libraries=[],this.entryPoint="",this.markupNs={}
},is:function(qtiClass){return"infoControl"===qtiClass||this._super(qtiClass)},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={typeIdentifier:this.typeIdentifier,markup:this.markup,properties:this.properties,libraries:this.libraries,entryPoint:this.entryPoint,ns:{pic:this.getNamespace().name+":"}};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},toArray:function(){var arr=this._super();return arr.markup=this.markup,arr.properties=this.properties,arr}});return CustomElement.augment(PortableInfoControl),PortableInfoControl}),define("taoQtiItem/qtiItem/core/ResponseProcessing",["taoQtiItem/qtiItem/core/Element","lodash"],function(Element){var ResponseProcessing=Element.extend({qtiClass:"responseProcessing",processingType:"",xml:""});
return ResponseProcessing}),define("taoQtiItem/qtiItem/core/RubricBlock",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/mixin/Container"],function(Element,Container){var RubricBlock=Element.extend({qtiClass:"rubricBlock"});return Container.augment(RubricBlock),RubricBlock}),define("taoQtiItem/qtiItem/core/Stylesheet",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(Element,_,rendererConfig){var Stylesheet=Element.extend({qtiClass:"stylesheet",render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={};return defaultData.attributes={href:renderer.getAbsoluteUrl(this.attr("href"))},this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)
}});return Stylesheet}),define("taoQtiItem/qtiItem/core/choices/Choice",["taoQtiItem/qtiItem/core/IdentifiedElement"],function(IdentifiedElement){var Choice=IdentifiedElement.extend({init:function(serial,attributes){this._super(serial,attributes)},is:function(qtiClass){return"choice"===qtiClass||this._super(qtiClass)},getInteraction:function(){var found,ret=null,item=this.getRelatedItem();return item&&(found=item.find(this.serial),found&&(ret=found.parent)),ret}});return Choice}),define("taoQtiItem/qtiItem/core/choices/Hotspot",["taoQtiItem/qtiItem/core/choices/Choice"],function(QtiChoice){var QtiHotspot=QtiChoice.extend({});return QtiHotspot}),define("taoQtiItem/qtiItem/core/choices/AssociableHotspot",["taoQtiItem/qtiItem/core/choices/Hotspot"],function(QtiHotspot){var QtiAssociableHotspot=QtiHotspot.extend({qtiClass:"associableHotspot"});
return QtiAssociableHotspot}),define("taoQtiItem/qtiItem/core/choices/ContainerChoice",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/mixin/Container"],function(Choice,Container){var ContainerChoice=Choice.extend({init:function(serial,attributes){this._super(serial,attributes)},is:function(qtiClass){return"containerChoice"===qtiClass||this._super(qtiClass)}});return Container.augment(ContainerChoice),ContainerChoice}),define("taoQtiItem/qtiItem/core/choices/Gap",["taoQtiItem/qtiItem/core/choices/Choice"],function(QtiChoice){var QtiGap=QtiChoice.extend({qtiClass:"gap"});return QtiGap}),define("taoQtiItem/qtiItem/core/choices/GapImg",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/core/Object"],function(QtiChoice,QtiObject){var QtiGapImg=QtiChoice.extend({qtiClass:"gapImg",initObject:function(object){this.object=object||new QtiObject
},getObject:function(){return this.object}});return QtiGapImg}),define("taoQtiItem/qtiItem/core/choices/TextVariableChoice",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/helper/rendererConfig"],function(QtiChoice,rendererConfig){var QtiTextVariableChoice=QtiChoice.extend({init:function(serial,attributes,text){this._super(serial,attributes),this.val(text||"")},is:function(qtiClass){return"textVariableChoice"===qtiClass||this._super(qtiClass)},val:function(text){if("undefined"==typeof text)return this.text;if("string"!=typeof text)throw"text must be a string";return this.text=text,$(document).trigger("choiceTextChange",{choice:this,text:text}),this
},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={body:this.text};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)}});return QtiTextVariableChoice}),define("taoQtiItem/qtiItem/core/choices/GapText",["taoQtiItem/qtiItem/core/choices/TextVariableChoice"],function(QtiTextVariableChoice){var QtiGapText=QtiTextVariableChoice.extend({qtiClass:"gapText"});return QtiGapText}),define("taoQtiItem/qtiItem/core/choices/HotspotChoice",["taoQtiItem/qtiItem/core/choices/Hotspot"],function(QtiHotspot){var QtiHotspotChoice=QtiHotspot.extend({qtiClass:"hotspotChoice"});
return QtiHotspotChoice}),define("taoQtiItem/qtiItem/mixin/ContainerInline",["taoQtiItem/qtiItem/mixin/Mixin","taoQtiItem/qtiItem/mixin/Container","lodash"],function(Mixin,Container,_){var methods={};return _.extend(methods,Container.methods),_.extend(methods,{initContainer:function(body){Container.methods.initContainer.call(this,body),this.bdy.contentModel="inlineStatic"}}),{augment:function(targetClass){Mixin.augment(targetClass,methods)},methods:methods}}),define("taoQtiItem/qtiItem/core/choices/Hottext",["taoQtiItem/qtiItem/core/choices/Choice","taoQtiItem/qtiItem/mixin/ContainerInline"],function(Choice,Container){var Hottext=Choice.extend({qtiClass:"hottext"});
return Container.augment(Hottext),Hottext}),define("taoQtiItem/qtiItem/core/choices/InlineChoice",["taoQtiItem/qtiItem/core/choices/TextVariableChoice"],function(QtiTextVariableChoice){var QtiInlineChoice=QtiTextVariableChoice.extend({qtiClass:"inlineChoice"});return QtiInlineChoice}),define("taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice",["taoQtiItem/qtiItem/core/choices/ContainerChoice"],function(QtiContainerChoice){var QtiSimpleAssociableChoice=QtiContainerChoice.extend({qtiClass:"simpleAssociableChoice"});return QtiSimpleAssociableChoice}),define("taoQtiItem/qtiItem/core/choices/SimpleChoice",["taoQtiItem/qtiItem/core/choices/ContainerChoice"],function(QtiContainerChoice){var QtiSimpleChoice=QtiContainerChoice.extend({qtiClass:"simpleChoice"});
return QtiSimpleChoice}),define("taoQtiItem/qtiItem/core/choices/TextEntry",["taoQtiItem/qtiItem/core/choices/TextVariableChoice"],function(QtiTextVariableChoice){var QtiTextEntry=QtiTextVariableChoice.extend({qtiClass:"textEntry"});return QtiTextEntry}),define("taoQtiItem/qtiItem/core/feedbacks/Feedback",["taoQtiItem/qtiItem/core/IdentifiedElement"],function(IdentifiedElement){var Feedback=IdentifiedElement.extend({is:function(qtiClass){return"feedback"===qtiClass||this._super(qtiClass)}});return Feedback}),define("taoQtiItem/qtiItem/core/feedbacks/FeedbackBlock",["taoQtiItem/qtiItem/core/feedbacks/Feedback"],function(Feedback){var FeedbackBlock=Feedback.extend({});
return FeedbackBlock}),define("taoQtiItem/qtiItem/core/feedbacks/FeedbackInline",["taoQtiItem/qtiItem/core/feedbacks/Feedback"],function(Feedback){var FeedbackInline=Feedback.extend({});return FeedbackInline}),define("taoQtiItem/qtiItem/core/interactions/Interaction",["taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(Element,_,rendererConfig,util){var QtiInteraction=Element.extend({init:function(serial,attributes){this._super(serial,attributes),this.choices={}},is:function(qtiClass){return"interaction"===qtiClass||this._super(qtiClass)},addChoice:function(choice){return choice.setRelatedItem(this.getRelatedItem()||null),this.choices[choice.getSerial()]=choice,this
},getChoices:function(){var choices={};for(var i in this.choices)choices[i]=this.choices[i];return choices},getChoice:function(serial){var ret=null;return this.choices[serial]&&(ret=this.choices[serial]),ret},getChoiceByIdentifier:function(identifier){for(var i in this.choices)if(this.choices[i].id()===identifier)return this.choices[i];return null},getComposingElements:function(){var elts=this._super();for(var serial in this.choices)Element.isA(this.choices[serial],"choice")&&(elts[serial]=this.choices[serial],elts=_.extend(elts,this.choices[serial].getComposingElements()));return elts},find:function(serial){var found=this._super(serial);return found||(found=util.findInCollection(this,"choices",serial)),found
},getResponseDeclaration:function(){var response=null,responseId=this.attr("responseIdentifier");if(responseId){var item=this.getRelatedItem();if(!item)throw"cannot get response of an interaction out of its item context";response=item.getResponseDeclaration(responseId)}return response},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={_type:this.qtiClass.replace(/([A-Z])/g,function($1){return"_"+$1.toLowerCase()}),choices:[],choiceShuffle:!0};if(!renderer)throw"no renderer found for the interaction "+this.qtiClass;var choices=this.attr("shuffle")&&renderer.shuffleChoices?renderer.getShuffledChoices(this):this.getChoices(),interactionData={interaction:{serial:this.serial,attributes:this.attributes}},_this=this;
_.each(choices,function(choice){if(Element.isA(choice,"choice"))try{var renderedChoice=choice.render(_.clone(interactionData,!0),null,choice.qtiClass+"."+_this.qtiClass,renderer);defaultData.choices.push(renderedChoice)}catch(e){}});var tplName=args.subclass?this.qtiClass+"."+args.subclass:this.qtiClass;return this._super(_.merge(defaultData,args.data),args.placeholder,tplName,renderer)},postRender:function(data,altClassName,renderer){renderer=renderer||this.getRenderer();var choices=this.getChoices();for(var i in choices){var c=choices[i];Element.isA(c,"choice")&&c.postRender({},c.qtiClass+"."+this.qtiClass,renderer)}return this._super(data,altClassName,renderer)
},setResponse:function(values){var ret=null,renderer=this.getRenderer();if(!renderer)throw"no renderer found for the interaction "+this.qtiClass;return ret=renderer.setResponse(this,values)},getResponse:function(){var ret=null,renderer=this.getRenderer();if(!renderer)throw"no renderer found for the interaction "+this.qtiClass;return ret=renderer.getResponse(this)},resetResponse:function(){var ret=null,renderer=this.getRenderer();if(!renderer)throw"no renderer found for the interaction "+this.qtiClass;return ret=renderer.resetResponse(this)},toArray:function(){var arr=this._super();arr.choices={};for(var serial in this.choices)Element.isA(this.choices[serial],"choice")&&(arr.choices[serial]=this.choices[serial].toArray());
return arr}});return QtiInteraction}),define("taoQtiItem/qtiItem/core/interactions/Prompt",["taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiItem/mixin/ContainerInline"],function(Element,Container){var Prompt=Element.extend({qtiClass:"prompt"});return Container.augment(Prompt),Prompt}),define("taoQtiItem/qtiItem/core/interactions/BlockInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction","taoQtiItem/qtiItem/core/interactions/Prompt","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(Interaction,Prompt,_,rendererConfig){var BlockInteraction=Interaction.extend({init:function(serial,attributes){this._super(serial,attributes),this.prompt=new Prompt("")
},is:function(qtiClass){return"blockInteraction"===qtiClass||this._super(qtiClass)},getComposingElements:function(){var elts=this._super();return elts=_.extend(elts,this.prompt.getComposingElements()),elts[this.prompt.getSerial()]=this.prompt,elts},find:function(serial){return this._super(serial)||this.prompt.find(serial)},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={prompt:this.prompt.render(renderer)};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},postRender:function(data,altClassName,renderer){return renderer=renderer||this.getRenderer(),this.prompt.postRender({},"",renderer),this._super(data,altClassName,renderer)
},toArray:function(){var arr=this._super();return arr.prompt=this.prompt.toArray(),arr}});return BlockInteraction}),define("taoQtiItem/qtiItem/core/interactions/AssociateInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(BlockInteraction){var AssociateInteraction=BlockInteraction.extend({qtiClass:"associateInteraction"});return AssociateInteraction}),define("taoQtiItem/qtiItem/core/interactions/ChoiceInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(BlockInteraction){var ChoiceInteraction=BlockInteraction.extend({qtiClass:"choiceInteraction"});return ChoiceInteraction}),define("taoQtiItem/qtiItem/core/interactions/ContainerInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/mixin/Container"],function(BlockInteraction,Container){var ContainerInteraction=BlockInteraction.extend({});
return Container.augment(ContainerInteraction),ContainerInteraction}),define("taoQtiItem/qtiItem/core/interactions/CustomInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(Interaction,_,rendererConfig){var CustomInteraction=Interaction.extend({qtiClass:"customInteraction",defaultNsName:"pci",defaultNsUri:"http://www.imsglobal.org/xsd/portableCustomInteraction",defaultMarkupNsName:"html5",defaultMarkupNsUri:"html5",init:function(serial,attributes){this._super(serial,attributes),this.typeIdentifier="",this.markup="",this.properties={},this.libraries=[],this.entryPoint="",this.markupNs={},this.pciReadyCallbacks=[]
},is:function(qtiClass){return"customInteraction"===qtiClass||this._super(qtiClass)},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={typeIdentifier:this.typeIdentifier,markup:this.markup,properties:this.properties,libraries:this.libraries,entryPoint:this.entryPoint,ns:{pci:this.getNamespace().name+":"}};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},toArray:function(){var arr=this._super();return arr.markup=this.markup,arr.properties=this.properties,arr},prop:function(name,value){if(name)if(void 0!==value)this.properties[name]=value;
else if("object"==typeof name)for(var prop in name)this.prop(prop,name[prop]);else if("string"==typeof name)return void 0===this.properties[name]?void 0:this.properties[name];return this},removeProp:function(propNames){var _this=this;return"string"==typeof propNames&&(propNames=[propNames]),_.each(propNames,function(propName){delete _this.properties[propName]}),this},getProperties:function(){return _.clone(this.properties)},getNamespace:function(){if(this.ns&&this.ns.name&&this.ns.uri)return _.clone(this.ns);var relatedItem=this.getRelatedItem();if(relatedItem){var namespaces=relatedItem.getNamespaces();for(ns in namespaces)if(namespaces[ns].indexOf("portableCustomInteraction")>0)return{name:ns,uri:namespaces[ns]};
return relatedItem.namespaces[this.defaultNsName]=this.defaultNsUri,{name:this.defaultNsName,uri:this.defaultNsUri}}return{}},setNamespace:function(name,uri){this.ns={name:name,uri:uri}},getMarkupNamespace:function(){if(this.markupNs&&this.markupNs.name&&this.markupNs.uri)return _.clone(this.markupNs);var relatedItem=this.getRelatedItem();return relatedItem?(relatedItem.namespaces[this.defaultMarkupNsName]=this.defaultMarkupNsUri,{name:this.defaultMarkupNsName,uri:this.defaultMarkupNsUri}):{}},setMarkupNamespace:function(name,uri){this.markupNs={name:name,uri:uri}},onPciReady:function(callback){this.pciReadyCallbacks.push(callback),this.data("pci")&&this.triggerPciReady()
},triggerPciReady:function(){var _this=this,pci=this.data("pci");if(!pci)throw"cannot trigger pci ready when no pci is actually attached to the interaction";_.each(this.pciReadyCallbacks,function(fn){fn.call(_this,pci)}),this.pciReadyCallbacks=[]},onPci:function(event,callback){return this.onPciReady(function(pci){if(!_.isFunction(pci.on))throw"the pci does not implement on() function";pci.on(event,callback)}),this},offPci:function(event){return this.onPciReady(function(pci){if(!_.isFunction(pci.off))throw"the pci does not implement off() function";pci.off(event)}),this},triggerPci:function(event,args){return this.onPciReady(function(pci){if(!_.isFunction(pci.off))throw"the pci does not implement off() function";
pci.trigger(event,args)}),this}});return CustomInteraction}),define("taoQtiItem/qtiItem/core/interactions/InlineInteraction",["taoQtiItem/qtiItem/core/interactions/Interaction"],function(Interaction){return Interaction.extend({})}),define("taoQtiItem/qtiItem/core/interactions/EndAttemptInteraction",["taoQtiItem/qtiItem/core/interactions/InlineInteraction"],function(InlineInteraction){return InlineInteraction.extend({qtiClass:"endAttemptInteraction"})}),define("taoQtiItem/qtiItem/core/interactions/ExtendedTextInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(BlockInteraction,_,rendererConfig){var ExtendedTextInteraction=BlockInteraction.extend({qtiClass:"extendedTextInteraction",render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={multiple:!1,maxStringLoop:[]},response=this.getResponseDeclaration();
if(this.attr("maxStrings")&&("multiple"===response.attr("cardinality")||"ordered"===response.attr("cardinality"))){defaultData.multiple=!0;for(var i=0;i<this.attr("maxStrings");i++)defaultData.maxStringLoop.push(i+"")}return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)}});return ExtendedTextInteraction}),define("taoQtiItem/qtiItem/core/interactions/GapMatchInteraction",["taoQtiItem/qtiItem/core/interactions/ContainerInteraction"],function(ContainerInteraction){var GapMatchInteraction=ContainerInteraction.extend({qtiClass:"gapMatchInteraction",getGaps:function(){return this.getBody().getElements("gap")}});return GapMatchInteraction
}),define("taoQtiItem/qtiItem/core/interactions/ObjectInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/core/Object"],function(QtiBlockInteraction,QtiObject){var QtiObjectInteraction=QtiBlockInteraction.extend({initObject:function(object){this.object=object||new QtiObject},getObject:function(){return this.object}});return QtiObjectInteraction}),define("taoQtiItem/qtiItem/core/interactions/GraphicInteraction",["taoQtiItem/qtiItem/core/interactions/ObjectInteraction","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(QtiObjectInteraction,_,rendererConfig){var QtiGraphicInteraction=QtiObjectInteraction.extend({render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={backgroundImage:this.object.getAttributes(),object:this.object.render(renderer)};
return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)}});return QtiGraphicInteraction}),define("taoQtiItem/qtiItem/core/interactions/GraphicAssociateInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(GraphicInteraction){var GraphicAssociateInteraction=GraphicInteraction.extend({qtiClass:"graphicAssociateInteraction"});return GraphicAssociateInteraction}),define("taoQtiItem/qtiItem/core/interactions/GraphicGapMatchInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction","taoQtiItem/qtiItem/core/Element","lodash","taoQtiItem/qtiItem/helper/rendererConfig"],function(GraphicInteraction,Element,_,rendererConfig){var GraphicGapMatchInteraction=GraphicInteraction.extend({qtiClass:"graphicGapMatchInteraction",init:function(serial,attributes){this._super(serial,attributes),this.gapImgs={}
},addGapImg:function(gapImg){Element.isA(gapImg,"gapImg")&&(gapImg.setRelatedItem(this.getRelatedItem()||null),this.gapImgs[gapImg.getSerial()]=gapImg)},removeGapImg:function(gapImg){var serial="";return"string"==typeof gapImg?serial=gapImg:Element.isA(gapImg,"gapImg")&&(serial=gapImg.getSerial()),delete this.gapImgs[serial],this},getGapImgs:function(){return _.clone(this.gapImgs)},getGapImg:function(serial){return this.gapImgs[serial]},getComposingElements:function(){var elts=this._super();for(var serial in this.gapImgs)elts[serial]=this.gapImgs[serial],elts=_.extend(elts,this.gapImgs[serial].getComposingElements());return elts},find:function(serial){var found=this._super(serial);
return found||this.gapImgs[serial]&&(found={parent:this,element:this.gapImgs[serial]}),found},render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={gapImgs:[]},gapImgs=this.getGapImgs();for(var serial in gapImgs)Element.isA(gapImgs[serial],"choice")&&defaultData.gapImgs.push(gapImgs[serial].render({},null,"",renderer));return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},toArray:function(){var arr=this._super();arr.gapImgs={};var gapImgs=this.getGapImgs();for(var serial in gapImgs)arr.gapImgs[serial]=gapImgs[serial].toArray();return arr}});return GraphicGapMatchInteraction
}),define("taoQtiItem/qtiItem/core/interactions/GraphicOrderInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(GraphicInteraction){var GraphicOrderInteraction=GraphicInteraction.extend({qtiClass:"graphicOrderInteraction"});return GraphicOrderInteraction}),define("taoQtiItem/qtiItem/core/interactions/HotspotInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(GraphicInteraction){var HotspotInteraction=GraphicInteraction.extend({qtiClass:"hotspotInteraction"});return HotspotInteraction}),define("taoQtiItem/qtiItem/core/interactions/HottextInteraction",["taoQtiItem/qtiItem/core/interactions/ContainerInteraction","taoQtiItem/qtiItem/core/Element"],function(ContainerInteraction,Element){var HottextInteraction=ContainerInteraction.extend({qtiClass:"hottextInteraction",getChoices:function(){return this.getBody().getElements("hottext")
},getChoice:function(serial){var element=this.getBody().getElement(serial);return Element.isA(element,"choice")?element:null}});return HottextInteraction}),define("taoQtiItem/qtiItem/core/interactions/InlineChoiceInteraction",["taoQtiItem/qtiItem/core/interactions/InlineInteraction"],function(InlineInteraction){var InlineChoiceInteraction=InlineInteraction.extend({qtiClass:"inlineChoiceInteraction"});return InlineChoiceInteraction}),define("taoQtiItem/qtiItem/core/interactions/MatchInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction","taoQtiItem/qtiItem/core/choices/SimpleAssociableChoice","lodash","taoQtiItem/qtiItem/helper/rendererConfig","taoQtiItem/qtiItem/helper/util"],function(BlockInteraction,SimpleAssociableChoice,_,rendererConfig,util){var MatchInteraction=BlockInteraction.extend({qtiClass:"matchInteraction",init:function(serial,attributes){this._super(serial,attributes),this.choices=[{},{}]
},addChoice:function(choice,matchSet){matchSet=parseInt(matchSet),this.choices[matchSet]&&(choice.setRelatedItem(this.getRelatedItem()||null),this.choices[matchSet][choice.getSerial()]=choice)},getChoices:function(matchSet){return matchSet=parseInt(matchSet),_.clone(this.choices[matchSet]?this.choices[matchSet]:this.choices)},getChoice:function(serial){return this.choices[0][serial]||this.choices[1][serial]||null},getComposingElements:function(){for(var elts=this._super(),i=0;2>i;i++){var matchSet=this.getChoices(i);for(var serial in matchSet)matchSet[serial]instanceof SimpleAssociableChoice&&(elts[serial]=matchSet[serial],elts=_.extend(elts,matchSet[serial].getComposingElements()))
}return elts},find:function(serial){var found=this._super(serial);return found||(found=util.findInCollection(this,["choices.0","choices.1"],serial)),found},render:function(){var choices,args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={matchSet1:[],matchSet2:[]},interactionData={interaction:{serial:this.serial,attributes:this.attributes}};if(!renderer)throw"no renderer found for the interaction "+this.qtiClass;choices=this.attr("shuffle")&&renderer.shuffleChoices?renderer.getShuffledChoices(this):this.getChoices();for(var i=0;2>i;i++){var matchSet=choices[i];for(var serial in matchSet)matchSet[serial]instanceof SimpleAssociableChoice&&defaultData["matchSet"+(i+1)].push(matchSet[serial].render(_.clone(interactionData,!0),null,"simpleAssociableChoice.matchInteraction",renderer))
}return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)},postRender:function(data,altClassName,renderer){renderer=renderer||this.getRenderer();for(var choices=this.getChoices(),i=0;2>i;i++)_.forIn(choices[i],function(c){c instanceof SimpleAssociableChoice&&c.postRender({},"simpleAssociableChoice.matchInteraction",renderer)});return this._super(data,altClassName,renderer)},toArray:function(){var arr=this._super();arr.choices={0:{},1:{}};for(var i=0;2>i;i++){var matchSet=this.getChoices(i);for(var serial in matchSet)matchSet[serial]instanceof SimpleAssociableChoice&&(arr.choices[i][serial]=matchSet[serial].toArray())}return arr
}});return MatchInteraction}),define("taoQtiItem/qtiItem/core/interactions/MediaInteraction",["taoQtiItem/qtiItem/core/interactions/ObjectInteraction","taoQtiItem/qtiItem/helper/rendererConfig"],function(ObjectInteraction,rendererConfig){var MediaInteraction=ObjectInteraction.extend({qtiClass:"mediaInteraction",render:function(){var args=rendererConfig.getOptionsFromArguments(arguments),renderer=args.renderer||this.getRenderer(),defaultData={media:this.object.render({},null,"",renderer)};return this._super(_.merge(defaultData,args.data),args.placeholder,args.subclass,renderer)}});return MediaInteraction}),define("taoQtiItem/qtiItem/core/interactions/OrderInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(BlockInteraction){var OrderInteraction=BlockInteraction.extend({qtiClass:"orderInteraction"});
return OrderInteraction}),define("taoQtiItem/qtiItem/core/interactions/SelectPointInteraction",["taoQtiItem/qtiItem/core/interactions/GraphicInteraction"],function(GraphicInteraction){var SelectPointInteraction=GraphicInteraction.extend({qtiClass:"selectPointInteraction"});return SelectPointInteraction}),define("taoQtiItem/qtiItem/core/interactions/SliderInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(BlockInteraction){var SliderInteraction=BlockInteraction.extend({qtiClass:"sliderInteraction"});return SliderInteraction}),define("taoQtiItem/qtiItem/core/interactions/TextEntryInteraction",["taoQtiItem/qtiItem/core/interactions/InlineInteraction"],function(InlineInteraction){var TextEntryInteraction=InlineInteraction.extend({qtiClass:"textEntryInteraction"});
return TextEntryInteraction}),define("taoQtiItem/qtiItem/core/interactions/UploadInteraction",["taoQtiItem/qtiItem/core/interactions/BlockInteraction"],function(InlineInteraction){var UploadInteraction=InlineInteraction.extend({qtiClass:"uploadInteraction"});return UploadInteraction}),define("taoQtiItem/qtiItem/core/response/SimpleFeedbackRule",["taoQtiItem/qtiItem/core/Element"],function(Element){var SimpleFeedbackRule=Element.extend({qtiClass:"_simpleFeedbackRule",serial:"",relatedItem:null,init:function(serial,feedbackOutcome,feedbackThen,feedbackElse){this._super(serial,{}),this.condition="correct",this.comparedOutcome=null,this.comparedValue=0,this.feedbackOutcome=feedbackOutcome,this.feedbackThen=Element.isA(feedbackThen,"feedback")?feedbackThen:null,this.feedbackElse=Element.isA(feedbackElse,"feedback")?feedbackThen:null
},setCondition:function(comparedOutcome,condition,comparedValue){if(!Element.isA(comparedOutcome,"variableDeclaration"))throw"invalid outcome type: must be a variableDeclaration";switch(condition){case"correct":case"incorrect":if(!Element.isA(comparedOutcome,"responseDeclaration"))throw"invalid outcome type: must be a responseDeclaration";this.comparedOutcome=comparedOutcome,this.condition=condition;break;case"lt":case"lte":case"equal":case"gte":case"gt":if(null===comparedValue||void 0===comparedValue)throw"compared value must not be null";this.comparedOutcome=comparedOutcome,this.condition=condition,this.comparedValue=comparedValue;break;default:throw"unknown condition type : ".condition
}return this},setFeedbackElse:function(feedback){Element.isA(feedback,"feedback")&&(this.feedbackElse=feedback)}});return SimpleFeedbackRule}),define("taoQtiItem/qtiItem/core/variables/VariableDeclaration",["taoQtiItem/qtiItem/core/IdentifiedElement"],function(IdentifiedElement){var VariableDeclaration=IdentifiedElement.extend({init:function(serial,attributes){this._super(serial,attributes),this.defaultValue=null},is:function(qtiClass){return"variableDeclaration"===qtiClass||this._super(qtiClass)},toArray:function(){var arr=this._super();return arr.defaultValue=this.defaultValue,arr}});return VariableDeclaration}),define("taoQtiItem/qtiItem/core/variables/OutcomeDeclaration",["taoQtiItem/qtiItem/core/variables/VariableDeclaration"],function(VariableDeclaration){return VariableDeclaration.extend({qtiClass:"outcomeDeclaration"})
}),define("taoQtiItem/qtiItem/core/variables/ResponseDeclaration",["taoQtiItem/qtiItem/core/variables/VariableDeclaration","lodash"],function(VariableDeclaration,_){var ResponseDeclaration=VariableDeclaration.extend({qtiClass:"responseDeclaration",init:function(serial,attributes){this._super(serial,attributes),this.template="",this.mappingAttributes={},this.mapEntries={},this.correctResponse=null,this.feedbackRules={}},getFeedbackRules:function(){return[]},getComposingElements:function(){var elts=this._super();return elts=_.extend(elts,this.getFeedbackRules())},toArray:function(){var arr=this._super();return arr.howMatch=this.template,arr.correctResponses=this.correctResponse,arr.mapping=this.mapEntries,arr.mappingAttributes=this.mappingAttributes,arr
}});return ResponseDeclaration}),define("context",["module"],function(module){return module.config()}),define("core/format",["lodash"],function(_){var pattern=/(%[sdj])/g;return function(message){var replacements=Array.prototype.slice.call(arguments,1);return _.reduce(message.match(pattern),function(acc,match,index){var replacement="";if(replacements[index]){switch(match){case"%d":replacement=Number(replacements[index]);break;case"%j":try{replacement=JSON.stringify(replacements[index]).replace(/"/g,"")}catch(e){}break;default:replacement=replacements[index]}message=message.replace(match,replacement)}return message},message)}}),define("i18n",["lodash","json!i18ntr/messages.json","context","core/format"],function(_,i18nTr,context,format){var translations=i18nTr.translations,__=function(message){var localized=translations[message]?translations[message]:message;
return arguments.length>1&&(localized=format.apply(null,arguments)),localized};return __}),define("tpl",["handlebars","i18n","lodash"],function(Handlebars,__,_){var buildMap={},extension=".tpl";return Handlebars.registerHelper("__",function(key){return __(key)}),Handlebars.registerHelper("join",function(arr,glue,delimiter,wrapper){var ret="";return glue="string"==typeof glue?glue:"=",delimiter="string"==typeof delimiter?delimiter:" ",wrapper="string"==typeof wrapper?wrapper:'"',_.forIn(arr,function(value,key){null!==value||void 0!==value?"boolean"==typeof value?value=value?"true":"false":"object"==typeof value&&(value=_.values(value).join(" ")):value="",ret+=key+glue+wrapper+value+wrapper+delimiter
}),ret&&ret.substring(0,ret.length-1),ret}),Handlebars.registerHelper("for",function(startIndex,stopIndex,increment,options){var ret="";startIndex=parseInt(startIndex),stopIndex=parseInt(stopIndex),increment=parseInt(increment);for(var i=startIndex;stopIndex>i;i+=increment)ret+=options.fn(_.extend({},this,{i:i}));return ret}),Handlebars.registerHelper("equal",function(var1,var2,options){return var1==var2?options.fn(this):options.inverse(this)}),{load:function(name,req,onload,config){extension=extension||config.extension,config.isBuild?(buildMap[name]=fs.readFileSync(req.toUrl(name+extension)).toString(),onload()):req(["text!"+name+extension],function(raw){onload(Handlebars.compile(raw))
})},write:function(pluginName,moduleName,write){if(moduleName in buildMap){var compiled=Handlebars.precompile(buildMap[moduleName]);write("define('tpl!"+moduleName+"', ['handlebars'], function(Handlebars){ \nreturn Handlebars.template("+compiled.toString()+");\n});\n")}}}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/container",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";return buffer+='<div class="qti-block">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>"
}function program3(depth0,data){var stack1,helper,buffer="";return(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,functionType="function",self=this,helperMissing=helpers.helperMissing;return helper=helpers.equal||depth0&&depth0.equal,options={hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data},stack1=helper?helper.call(depth0,depth0&&depth0.contentModel,"blockStatic",options):helperMissing.call(depth0,"equal",depth0&&depth0.contentModel,"blockStatic",options),stack1||0===stack1?stack1:""
})}),define("taoQtiItem/qtiCommonRenderer/renderers/Container",["tpl!taoQtiItem/qtiCommonRenderer/tpl/container"],function(tpl){return{qtiClass:"_container",template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/img",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var stack1,buffer="";return buffer+='id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'}function program3(depth0){var stack1,buffer="";return buffer+='class="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'
}function program5(depth0){var stack1,buffer="";return buffer+='height="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.height,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" '}function program7(depth0){var stack1,buffer="";return buffer+='width="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.width,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" '}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;
return buffer+='<img \n    data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" \n    data-qti-class="img" \n    src="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.src,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" \n    alt="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.alt,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" \n    ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    />"
})}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div id="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" class="small feedback-info item-instruction">\n    <span class="icon-info icon"></span><span class="instruction-message">',(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</span>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/helpers/Instruction",["lodash","taoQtiItem/qtiItem/helper/util","tpl!taoQtiItem/qtiCommonRenderer/tpl/instruction"],function(_,util,instructionTpl){var _notificationLevels=["info","warning","error","success"],Instruction=function(interaction,message,callback){this.interaction=interaction,this.defaultMessage=message||"",this.currentMessage="",this.level="info",this.serial=util.buildSerial("instruction_"),this.callback=callback,this.$dom=null,this.state=!1};return Instruction.isValidLevel=function(level){return _.indexOf(_notificationLevels,level)>=0},Instruction.prototype.setState=function(state){this.state=state},Instruction.prototype.checkState=function(state){return this.state===state
},Instruction.prototype.getId=function(){return this.serial},Instruction.prototype.create=function($container){$container.append(instructionTpl({message:this.defaultMessage,serial:this.serial})),this.$dom=$container.find("#"+this.serial)},Instruction.prototype.update=function(options){var level=options&&options.level?options.level:"",message=options&&options.message?options.message:"",timeout=options&&options.timeout?options.timeout:0,start=options&&"function"==typeof options.start?options.start:null,stop=options&&"function"==typeof options.stop?options.stop:null;if(level&&Instruction.isValidLevel(level)&&(this.$dom.removeClass("feedback-"+this.level).addClass("feedback-"+level),this.$dom.find(".icon").removeClass("icon-"+this.level).addClass("icon-"+level),this.level=level),message&&(this.$dom.find(".instruction-message").html(message),this.currentMessage=message),timeout){var _this=this;
start&&start.call(_this),_this.timer=setTimeout(function(){stop&&stop.call(_this),_this.timer=null},timeout)}},Instruction.prototype.setLevel=function(level,timeout){var options={level:level};timeout&&(options.timeout=parseInt(timeout),options.stop=function(){this.setLevel("info")}),this.update(options)},Instruction.prototype.getLevel=function(){return this.level},Instruction.prototype.setMessage=function(message,timeout){this.update({message:message,timeout:timeout})},Instruction.prototype.reset=function(){this.update({level:"info",message:this.defaultMessage}),this.state=!1},Instruction.prototype.validate=function(data){"function"==typeof this.callback&&this.callback.call(this,data)
},Instruction}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/notification",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,helperMissing=helpers.helperMissing;return buffer+='<div class="small feedback-',(helper=helpers.level)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.level,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+' item-notification">\n    <span class="icon-',(helper=helpers.level)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.level,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'"></span><span class="feedback-message">',(helper=helpers.message)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.message,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'</span>\n    <span title="'+escapeExpression((helper=helpers.__||depth0&&depth0.__,options={hash:{},data:data},helper?helper.call(depth0,"Remove Message",options):helperMissing.call(depth0,"__","Remove Message",options)))+'" class="icon-close close-trigger"></span>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/helpers/Helper",["lodash","jquery","i18n","taoQtiItem/qtiItem/core/Element","taoQtiItem/qtiCommonRenderer/helpers/Instruction","tpl!taoQtiItem/qtiCommonRenderer/tpl/notification"],function(_,$,__,Element,Instruction,notifTpl){var _containers={},_instructions={},_$containerContext=$(),_getSelector=function(element){var serial=element.getSerial(),selector="[data-serial="+serial+"]";return Element.isA(element,"choice")?selector=".qti-choice"+selector:Element.isA(element,"interaction")&&(selector=".qti-interaction"+selector),selector};return{setContext:function($scope){_$containerContext=$scope},getContainer:function(element,$scope){var serial=element.getSerial();
return $scope instanceof $&&$scope.length?$scope.find(_getSelector(element)):_$containerContext instanceof $&&_$containerContext.length?_$containerContext.find(_getSelector(element)):((!_containers[serial]||_containers[serial].length)&&(_containers[serial]=$(_getSelector(element))),_containers[serial])},validateInstructions:function(element,data){var serial=element.getSerial();_instructions[serial]&&_.each(_instructions[serial],function(instruction){instruction.validate(data)})},appendInstruction:function(element,message,validateCallback){var serial=element.getSerial(),instruction=new Instruction(element,message,validateCallback);return _instructions[serial]||(_instructions[serial]={}),_instructions[serial][instruction.getId()]=instruction,instruction.create(this.getContainer(element).find(".instruction-container")),instruction
},removeInstructions:function(element){_instructions[element.getSerial()]={},this.getContainer(element).find(".instruction-container").empty()},resetInstructions:function(element){var serial=element.getSerial();_instructions[serial]&&_.each(_instructions[serial],function(instruction){instruction.reset()})},minMaxChoiceInstructions:function(interaction,options){var msg,self=this,min=options.min||0,max=options.max||0,getResponse=options.getResponse,onError=options.onError||_.noop(),choiceCount=options.choiceCount===!1?!1:_.size(interaction.getChoices()),minInstructionSet=!1;if(!_.isFunction(getResponse))throw"invalid parameter getResponse";max>0&&(choiceCount===!1||choiceCount>max)&&(max===min?(minInstructionSet=!0,msg=1>=max?__("You must select exactly %d choice",max):__("You must select exactly %d choices",max),self.appendInstruction(interaction,msg,function(data){getResponse(interaction).length>=max?(this.setLevel("success"),this.checkState("fulfilled")&&this.update({level:"warning",message:__("Maximum choices reached"),timeout:2e3,start:function(){onError(data)
},stop:function(){this.update({level:"success",message:msg})}}),this.setState("fulfilled")):this.reset()})):max>min&&(msg=1>=max?__("You can select maximum %d choice",max):__("You can select maximum %d choices",max),self.appendInstruction(interaction,msg,function(data){getResponse(interaction).length>=max?(this.setLevel("success"),this.setMessage(__("Maximum choices reached")),this.checkState("fulfilled")&&this.update({level:"warning",timeout:2e3,start:function(){onError(data)},stop:function(){this.setLevel("info")}}),this.setState("fulfilled")):this.reset()}))),!minInstructionSet&&min>0&&(choiceCount===!1||choiceCount>min)&&(msg=1>=min?__("You must at least %d choice",min):__("You must select at least %d choices",max),self.appendInstruction(interaction,msg,function(){getResponse(interaction).length>=min?this.setLevel("success"):this.reset()
}))},appendNotification:function(element,message,level){if(level=level||"info",Instruction.isValidLevel(level)){var $container=this.getContainer(element);$container.find(".notification-container").prepend(notifTpl({level:level,message:message}));var $notif=$container.find(".item-notification:first"),_remove=function(){$notif.fadeOut()};return $notif.find(".close-trigger").on("click",_remove),setTimeout(_remove,2e3),$notif}},removeNotifications:function(element){this.getContainer(element).find(".item-notification").remove()},triggerResponseChangeEvent:function(interaction,extraData){this.getContainer(interaction).trigger("responseChange",[{interaction:interaction,response:interaction.getResponse()},extraData])
},targetBlank:function($container){$container.on("click","a",function(e){e.preventDefault();var href=$(this).attr("href");href&&href.match(/^http/i)&&window.open(href,"_blank")})}}}),define("taoQtiItem/qtiCommonRenderer/renderers/Img",["tpl!taoQtiItem/qtiCommonRenderer/tpl/img","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"img",template:tpl,getContainer:Helper.getContainer}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/item",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(){return" attributes.id"}function program3(){return" attributes.class"
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-item tao-scope runtime" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n    <div',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' class="qti-itemBody',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+='</div>\n    <div id="modalFeedbacks"></div>\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler",["jquery","lodash"],function($,_){var itemStylesheetHandler=function(){var informLoaded=_.throttle(function(){$(document).trigger("customcssloaded.styleeditor")},10,{leading:!1}),attach=function(stylesheets){var $head=$("head");$("body").addClass("tao-scope"),_(stylesheets).forEach(function(stylesheet){var $link=$(stylesheet.render()),href=$link.attr("href"),sep=href.indexOf("?")>-1?"&":"?";0===href.indexOf("/")&&(href=href.slice(1)),href+=sep+(new Date).getTime().toString(),$link.removeAttr("href").appendTo($head).attr("href",href),_.delay(informLoaded,10)})};return{attach:attach}}();return itemStylesheetHandler
}),define("taoQtiItem/qtiCommonRenderer/renderers/Item",["tpl!taoQtiItem/qtiCommonRenderer/tpl/item","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/itemStylesheetHandler"],function(tpl,Helper,itemStylesheetHandler){return{qtiClass:"assessmentItem",template:tpl,getContainer:Helper.getContainer,render:function(item){Helper.targetBlank(Helper.getContainer(item)),itemStylesheetHandler.attach(item.stylesheets)}}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/math",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper,buffer="";
return buffer+='\n<span data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="math">\n    <math display = "block">',(helper=helpers.raw)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.raw,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</math>\n</span>\n"}function program3(depth0,data){var stack1,helper,buffer="";return buffer+='\n<span data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="math">\n    <math>',(helper=helpers.raw)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.raw,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</math>\n</span>   \n"
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,functionType="function",escapeExpression=this.escapeExpression,self=this;return stack1=helpers["if"].call(depth0,depth0&&depth0.block,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),stack1||0===stack1?stack1:""})}),define("taoQtiItem/qtiCommonRenderer/renderers/Math",["tpl!taoQtiItem/qtiCommonRenderer/tpl/math","taoQtiItem/qtiCommonRenderer/helpers/Helper","mathJax","lodash"],function(tpl,Helper,MathJax,_){return{qtiClass:"math",template:tpl,getContainer:Helper.getContainer,render:function(math){"undefined"!=typeof MathJax&&MathJax&&_.delay(function(){MathJax.Hub.Queue(["Typeset",MathJax.Hub,Helper.getContainer(math).parent()[0]])
},60)}}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div id="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="modal qti-modalFeedback">\n    <h1 class="qti-title modal-title">'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.title,typeof stack1===functionType?stack1.apply(depth0):stack1))+'</h1>\n    <div class="modal-body">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/helpers/sizeFinder",["jquery"],function($){var _show=function($elements){var $element;$elements.each(function(){$element=$(this),$element.data("originalProperties",{display:$element.css("display"),position:$element.css("position"),left:$element.css("left"),width:$element.css("width"),height:$element.css("height")}),$element.css({position:"relative",left:"-10000px",width:"auto",height:"auto",display:"inline-block"})})},_hide=function($elements){var $element;$elements.each(function(){$element=$(this),$element.css($elements.data("originalProperties")),$element.removeData("originalProperties")})},_measure=function($element){return{width:$element.outerWidth(),height:$element.outerHeight()}
},measure=function($container,callback){var size;return $container&&$container.length&&(_show($container),size=_measure($container),_hide($container),callback.call($container[0],size),$container.trigger("measured.sizeFinder",size)),size};return{measure:measure}}),define("core/pluginifier",["jquery","lodash"],function($,_){var basePlugin={options:function(dataNs,ns,options){return this.each(function(){var $elt=$(this),currentOptions=$elt.data(dataNs);currentOptions&&$elt.data(dataNs,_.merge(currentOptions,options))})},disable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.addClass(options.disableClass||"disabled").trigger("disable."+ns)
})},enable:function(dataNs,ns){return this.each(function(){var $elt=$(this),options=$elt.data(dataNs);options&&$elt.removeClass(options.disableClass||"disabled").trigger("enable."+ns)})}},Pluginifier={register:function(pluginName,plugin,config){config=config||{};var ns=config.ns||pluginName.toLowerCase(),dataNs=config.dataNs||"ui."+ns,expose=config.expose||[];return _.isFunction($.fn[pluginName])?$.error("A plugin named "+pluginName+" is already registered"):_.isPlainObject(plugin)&&_.isFunction(plugin.init)?(_.assign(plugin,_.transform(basePlugin,function(result,prop,key){_.isFunction(prop)&&(result[key]=_.partial(basePlugin[key],dataNs,ns))})),_.forEach(expose,function(toExposeName){var privateMethod=toExposeName,publicMethod=toExposeName;
/^_/.test(expose)?publicMethod=publicMethod.replace(/^_/,""):privateMethod="_"+privateMethod,_.isFunction(plugin[privateMethod])&&!_.isFunction(plugin[publicMethod])&&(plugin[publicMethod]=function(){var returnValue,args=Array.prototype.slice.call(arguments,0);return this.each(function(){returnValue=plugin[privateMethod].apply(plugin,[$(this)].concat(args))}),returnValue||this})}),void($.fn[pluginName]=function(method){if(plugin[method]){if(!/^_/.test(method))return plugin[method].apply(this,Array.prototype.slice.call(arguments,1));$.error("Trying to call a private method `"+method+"`")}else if("object"==typeof method||!method)return plugin.init.apply(this,arguments);
$.error("Method "+method+" does not exist on plugin")})):$.error("The object to register as a jQuery plugin must be a plain object with an `init` method.")}};return Pluginifier}),define("core/dataattrhandler",["jquery","lodash"],function($,_){var defaults={container:!1,listenerEvent:"click",useTarget:!0,bubbled:!1},letDefaultOn=[":radio",":checkbox"],shouldPreventDefault=function($elt){return!$elt.is(letDefaultOn.join(","))},DataAttrHandler=function(attrName,options){var self=this;this.options=_.defaults(options,defaults);var selector="[data-"+attrName+"]";return _.has(this.options,"namespace")&&_.isString(this.options.namespace)?(this.options.container&&this.options.container.selector&&(selector=this.options.container.selector+" "+selector),this.options.inner&&(selector+=" "+this.options.inner),void $(document).off(this.options.listenerEvent,selector).on(this.options.listenerEvent,selector,function(e){var $elt=$(e.target);
if(self.options.bubbled===!0||$elt.is(selector)){var $target,$outer;void 0===$elt.data(attrName)&&(self.options.inner||self.options.bubbled)&&($outer=$elt,$elt=$elt.parents("[data-"+attrName+"]")),$target=self.options.useTarget===!0?DataAttrHandler.getTarget(attrName,$elt):self.options.inner?$outer:void 0,$elt.data(self.options.namespace)||("function"==typeof self.createPlugin&&self.createPlugin($elt,$target),$elt.is(":radio")&&$elt.attr("name")&&$(':radio[name="'+$elt.attr("name")+'"]').not($elt).on(self.options.listenerEvent,function(e){"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()
})),"function"==typeof self.callPluginMethod&&self.callPluginMethod($elt,$target),shouldPreventDefault($elt)&&e.preventDefault()}})):$.error("The plugin data namespace option is required")};return DataAttrHandler.prototype.init=function(cb){return this.createPlugin=cb,this},DataAttrHandler.prototype.trigger=function(cb){return this.callPluginMethod=cb,this},DataAttrHandler.getTarget=function(attrName,$elt){var relativeRegex=/^(\+|>|~|:parent|<)/,$target=[],targetSelector=$elt.attr("data-"+attrName)||$elt.attr("href")||$elt.attr("attrName");if(!_.isEmpty(targetSelector)){var matches=relativeRegex.exec(targetSelector);if(null!==matches){var selector=targetSelector.replace(relativeRegex,"");
$target=":parent"===matches[0]||"<"===matches[0]?$elt.parents(selector):"~"===matches[0]?$elt.siblings(selector):"+"===matches[0]?$elt.next(selector):$(selector,$elt)}else $target=$(targetSelector)}return $target},DataAttrHandler}),define("ui/modal",["jquery","core/pluginifier","core/dataattrhandler"],function($,Pluginifier,DataAttrHandler){var pluginName="modal",dataNs="ui."+pluginName,defaults={modalCloseClass:"modal-close",modalOverlayClass:"modal-bg",startClosed:!1,disableClosing:!1,width:"responsive",minWidth:!1,vCenter:!0},Modal={init:function(options){return options=$.extend(!0,{},defaults,options),$(this).each(function(){var $modal=$(this);options.modalOverlay="__modal-bg-"+($modal.attr("id")||(new Date).getTime()),$modal.data(dataNs,options),0===$("#"+options.modalOverlay).length&&$("<div/>").attr({id:options.modalOverlay,"class":options.modalOverlayClass}).insertAfter($modal),0!==$("."+options.modalCloseClass,$modal).length||options.disableClosing||$('<div class="'+options.modalCloseClass+'"><span class="icon-close"></span></div>').appendTo($modal),options.startClosed||Modal._open($modal),$modal.trigger("create."+pluginName)
})},_bindEvents:function($element){var options=$element.data(dataNs);"responsive"===options.width&&$(window).on("resize."+pluginName,function(e){e.preventDefault(),Modal._resize($element)}),options.disableClosing||($("."+options.modalCloseClass,$element).on("click."+pluginName,function(e){e.preventDefault(),Modal._close($element)}),$("#"+options.modalOverlay).on("click."+pluginName,function(e){e.preventDefault(),Modal._close($element)}),$(document).on("keydown."+pluginName,function(e){27===e.keyCode&&(e.preventDefault(),Modal._close($element))}))},_unBindEvents:function($element){var options=$element.data(dataNs);"responsive"===options.width&&$(window).off("resize."+pluginName),$element.off("click."+pluginName),options.disableClosing||($("."+options.modalCloseClass,$element).off("click."+pluginName),$("#"+options.modalOverlay).off("click."+pluginName),$(document).off("keydown."+pluginName))
},_open:function($element){var modalHeight=$element.outerHeight(),windowHeight=$(window).height(),options=$element.data(dataNs);if("undefined"!=typeof options){var topOffset=options.vCenter||modalHeight>windowHeight?40:(windowHeight-modalHeight)/2;Modal._resize($element),$element.css({top:"-"+modalHeight+"px",display:"block"}),$("#"+options.modalOverlay).fadeIn(300),$element.animate({opacity:"1",top:topOffset+"px"}),$element.addClass("opened"),Modal._bindEvents($element),$element.trigger("opened."+pluginName)}},_close:function($element){var options=$element.data(dataNs);Modal._unBindEvents($element),$("#"+options.modalOverlay).fadeOut(300),$element.animate({opacity:"0",top:"-1000px"},500,function(){$element.css("display","none")
}),$element.removeClass("opened"),$element.trigger("closed."+pluginName)},_resize:function($element){var options=$element.data(dataNs),windowWidth=parseInt($(window).width(),10),modalWidth="responsive"===options.width?.7*windowWidth:parseInt(options.width,10);options.minWidth&&modalWidth<options.minWidth&&(modalWidth=options.minWidth),$element.css({width:modalWidth+"px"})}};return Pluginifier.register(pluginName,Modal,{expose:["open","close"]}),function($container){new DataAttrHandler("modal",{container:$container,listenerEvent:"click",namespace:dataNs}).init(function($elt,$target){$target.modal()})}}),define("taoQtiItem/qtiCommonRenderer/renderers/ModalFeedback",["jquery","lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/modalFeedback","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/sizeFinder","ui/modal"],function($,_,tpl,Helper,sizeFinder){var modalFeedbackRenderer={qtiClass:"modalFeedback",template:tpl,getContainer:Helper.getContainer,minWidth:400,maxWidth:800,render:function(modalFeedback,data){data=data||{};
var $modal=$("#"+modalFeedback.getSerial());sizeFinder.measure($modal,function(size){$modal.modal({startClosed:!1,width:Math.max(Math.min(size.width,modalFeedbackRenderer.maxWidth),modalFeedbackRenderer.minWidth)}),$modal.on("closed.modal",function(){_.isFunction(data.callback)&&data.callback.call(this)})})}};return modalFeedbackRenderer}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/object",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,buffer="";return buffer+="<video ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' src="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.data,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" type="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.type,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='" controls="controls" preload="none"></video>'
}function program2(depth0){var stack1,buffer="";return buffer+='id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.id,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'}function program4(depth0){var stack1,buffer="";return buffer+='width="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.width,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'}function program6(depth0){var stack1,buffer="";return buffer+='height="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.height,typeof stack1===functionType?stack1.apply(depth0):stack1))
}function program8(depth0,data){var stack1,buffer="";return buffer+="<audio ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' src="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.data,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" type="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.type,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"></audio>'}function program10(depth0,data){var stack1,buffer="";
return buffer+="<object ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' data="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.data,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" type="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.type,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">"+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.alt,typeof stack1===functionType?stack1.apply(depth0):stack1))+"</object>"
}function program11(depth0){var stack1,buffer="";return buffer+='height="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.height,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'}function program13(depth0,data){var stack1,buffer="";return buffer+="<iframe ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.id),{hash:{},inverse:self.noop,fn:self.program(2,program2,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' src="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.data,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.width),{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=" ",stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.height),{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=">"+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.alt,typeof stack1===functionType?stack1.apply(depth0):stack1))+"</iframe>"
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-object-container" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" >\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.video,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.audio,{hash:{},inverse:self.noop,fn:self.program(8,program8,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.object,{hash:{},inverse:self.noop,fn:self.program(10,program10,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    ",stack1=helpers["if"].call(depth0,depth0&&depth0.html,{hash:{},inverse:self.noop,fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"
})}),define("taoQtiItem/qtiDefaultRenderer/widgets/Object",["jquery","class","mediaElement"],function($,Class,MediaElementPlayer){var QtiObject=Class.extend({init:function(obj,context){if(this.playCounter=0,this.mediaType=obj.getMediaType(),"video"===this.mediaType||"audio"===this.mediaType){var _this=this;this.playerOptions={loop:!1,maxPlays:0,autostart:!1,pauseOtherPlayers:!1,features:["playpause","current","duration","progress","volume"],pluginPath:MediaElementPlayer.pluginPath,audioWidth:300};var width=parseInt(obj.attr("width"));width>10&&("video"===this.mediaType?this.playerOptions.videoWidth=width:this.playerOptions.audioWidth=width);var height=parseInt(obj.attr("height"));
if(height>10&&("video"===this.mediaType?this.playerOptions.videoHeight=height:this.playerOptions.audioHeight=height),this.id=obj.getSerial(),this.media=null,context&&(this.pluginPath=context.pluginPath||"",this.pluginPath&&(this.playerOptions.pluginPath=this.pluginPath),"object"==typeof context.playerOptions)){this.playerOptions=$.extend(this.playerOptions,context.playerOptions);var successCallback="function"==typeof context.playerOptions.success?context.playerOptions.success:function(){};this.playerOptions.success=function(mediaElement,domObject){setTimeout(function(){var controlMaxPlays=function(){_this.playerOptions.maxPlays&&_this.playCounter>=_this.playerOptions.maxPlays&&_this.stop()
};mediaElement.addEventListener("ended",function(){_this.playCounter++,controlMaxPlays()},!1),mediaElement.addEventListener("play",controlMaxPlays),mediaElement.addEventListener("pause",function(){}),_this.playerOptions.autostart&&(mediaElement.play(),setTimeout(function(){$(domObject).parent("div.mejs-mediaelement").siblings("div.mejs-layers").find("div.mejs-overlay-button").click().mousedown()},1e3)),successCallback(mediaElement,domObject)},300)}}}},render:function(){("video"===this.mediaType||"audio"===this.mediaType)&&(this.media=new MediaElementPlayer("#"+this.id,this.playerOptions))},playCount:function(count){return isNaN(count)?this.playCounter:void(this.playCounter=count)
},pause:function(){this.media.pause()},stop:function(){this.pause(),$("#"+this.id).parent("div.mejs-mediaelement").siblings("div.mejs-layers").find("div.mejs-overlay-button").hide()}});return QtiObject}),define("taoQtiItem/qtiCommonRenderer/renderers/Object",["tpl!taoQtiItem/qtiCommonRenderer/tpl/object","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiDefaultRenderer/widgets/Object"],function(tpl,Helper,DefaultRendererObject){return{qtiClass:"object",template:tpl,getContainer:Helper.getContainer,render:function(obj){var media=new DefaultRendererObject(obj);media.render()}}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/empty",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var buffer="";return buffer})}),define("taoQtiItem/qtiCommonRenderer/renderers/OutcomeDeclaration",["tpl!taoQtiItem/qtiCommonRenderer/tpl/empty"],function(tpl){return{qtiClass:"outcomeDeclaration",template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="qti-infoControl" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',(helper=helpers.markup)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.markup,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/helpers/PortableElement",["context","lodash","jquery","taoQtiItem/qtiItem/helper/util"],function(context,_,$,util){function getDocumentBaseUrl(){return window.location.protocol+"//"+window.location.host+window.location.pathname.replace(/([^\/]*)$/,"")}function getSharedLibrariesPaths(){var sharedLibrariesUrl=context.root_url+"taoQtiItem/views/js/portableSharedLibraries/";return{IMSGlobal:sharedLibrariesUrl+"IMSGlobal",OAT:sharedLibrariesUrl+"OAT"}}function getCommonLibraries(){return{css:context.root_url+"tao/views/js/lib/require-css/css",mathJax:context.root_url+"taoQtiItem/views/js/mathjax/MathJax.js?config=TeX-AMS-MML_HTMLorMML-full"}
}function replaceMarkupMediaSource(markupStr,baseUrl){var $markup=$("<div>",{"class":"wrapper"}).html(markupStr);return $markup.find("img").each(function(){var $img=$(this),src=$img.attr("src"),fullPath=util.fullpath(src,baseUrl);$img.attr("src",fullPath)}),$markup.html()}function getLocalRequire(typeIdentifier,baseUrl,libs,config){config=config||{};var runtimeLocation=config.runtimeLocation?config.runtimeLocation:baseUrl+typeIdentifier;if(config.useExtensionAlias){var urlTokens=baseUrl.split("/"),extension=urlTokens[0],requireConfig=window.require.s.contexts._.config,fullpath=requireConfig.baseUrl+requireConfig.paths[extension];baseUrl=baseUrl.replace(extension,fullpath),config.runtimeLocation&&(runtimeLocation=config.runtimeLocation.replace(extension,fullpath))
}return libs=libs||{},libs=_.defaults(libs,getCommonLibraries()),libs=_.defaults(libs,getSharedLibrariesPaths()),libs[typeIdentifier]=runtimeLocation,window.require.config({context:typeIdentifier,baseUrl:baseUrl,paths:libs||{},shim:{mathJax:{exports:"MathJax",init:function(){return window.MathJax?(MathJax.Hub.Config({showMathMenu:!1,showMathMenuMSIE:!1}),MathJax.Hub.Startup.onload(),MathJax):void 0}}}})}function getCachedLocalRequire(typeIdentifier,baseUrl,libs,config){return _localRequires[typeIdentifier]=_localRequires[typeIdentifier]||{},_localRequires[typeIdentifier][baseUrl]||(_localRequires[typeIdentifier][baseUrl]=getLocalRequire(typeIdentifier,baseUrl,libs,config)),_localRequires[typeIdentifier][baseUrl]
}var _localRequires={};return{getSharedLibrariesPaths:getSharedLibrariesPaths,getCommonLibraries:getCommonLibraries,replaceMarkupMediaSource:replaceMarkupMediaSource,getDocumentBaseUrl:getDocumentBaseUrl,getLocalRequire:getLocalRequire,getCachedLocalRequire:getCachedLocalRequire}}),define("taoQtiItem/runtime/qtiInfoControlContext",[],function(){window._picHooks=window._picHooks||{};var taoQtiInfoControlContext={register:function(picHook){window._picHooks[picHook.getTypeIdentifier()]=picHook},notifyReady:function(){},createPciInstance:function(typeIdentifier){if(window._picHooks[typeIdentifier]){var instance={},proto=window._picHooks[typeIdentifier];for(var name in proto)instance[name]="function"==typeof proto[name]?proto[name]:null!==proto[name]&&"object"==typeof proto[name]?proto[name].constructor():proto[name];
return instance}throw"no portable info control hook found with the id "+typeIdentifier}};return taoQtiInfoControlContext}),define("taoQtiItem/qtiCommonRenderer/renderers/PortableInfoControl",["tpl!taoQtiItem/qtiCommonRenderer/tpl/infoControl","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PortableElement","taoQtiItem/runtime/qtiInfoControlContext","taoQtiItem/qtiItem/helper/util","context"],function(tpl,Helper,PortableElement,qtiInfoControlContext,util,context){var _getPic=function(infoControl){var typeIdentifier,pic=infoControl.data("pic")||void 0;if(!pic){if(typeIdentifier=infoControl.typeIdentifier,pic=qtiInfoControlContext.createPciInstance(typeIdentifier),!pic)throw"no custom infoControl hook found for the type "+typeIdentifier;
infoControl.data("pic",pic),pic._taoInfoControl=infoControl}return pic},render=function(infoControl,options){options=options||{};var id=infoControl.attr("id"),typeIdentifier=infoControl.typeIdentifier,baseUrl=this.getOption("baseUrl")||PortableElement.getDocumentBaseUrl(),config=infoControl.properties,entryPoint=util.fullpath(infoControl.entryPoint,baseUrl),$dom=Helper.getContainer(infoControl).children(),state={},localRequire=PortableElement.getCachedLocalRequire(typeIdentifier,baseUrl,{qtiInfoControlContext:context.root_url+"taoQtiItem/views/js/runtime/qtiInfoControlContext"});localRequire([entryPoint],function(){var pci=_getPic(infoControl);pci&&(pci.initialize(id,$dom[0],config),pci.setSerializedState(state))
})},destroy=function(infoControl){_getPic(infoControl).destroy()},setSerializedState=function(infoControl,serializedState){_getPic(infoControl).setSerializedState(serializedState)},getSerializedState=function(infoControl){return _getPic(infoControl).getSerializedState()};return{qtiClass:"infoControl",template:tpl,getData:function(infoControl,data){return data.markup=PortableElement.replaceMarkupMediaSource(data.markup,this.getOption("baseUrl")),data},render:render,getContainer:Helper.getContainer,destroy:destroy,getSerializedState:getSerializedState,setSerializedState:setSerializedState}}),define("taoQtiItem/qtiCommonRenderer/renderers/ResponseDeclaration",["tpl!taoQtiItem/qtiCommonRenderer/tpl/empty"],function(tpl){return{qtiClass:"responseDeclaration",template:tpl}
}),define("taoQtiItem/qtiCommonRenderer/renderers/ResponseProcessing",["tpl!taoQtiItem/qtiCommonRenderer/tpl/empty"],function(tpl){return{qtiClass:"responseProcessing",template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="grid-row qti-rubricBlock" data-use="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.use,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="rubricBlock">\n    <div class="col-12">\n        <div class="qti-rubricBlock-body">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n    </div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/RubricBlock",["tpl!taoQtiItem/qtiCommonRenderer/tpl/rubricBlock","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"rubricBlock",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/stylesheet",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var stack1,buffer="";return buffer+='media="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.media,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"'
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<link \n    href="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.href,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" \n    type="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.type,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" \n    rel="stylesheet" \n    data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" \n    ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.media),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    />"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/Stylesheet",["tpl!taoQtiItem/qtiCommonRenderer/tpl/stylesheet","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"stylesheet",template:tpl,getContainer:Helper.getContainer}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<span class="qti-choice qti-gap" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\r\n    <span data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="gapmatch-content">&nbsp;</span>\r\n</span>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/Gap",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gap","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"gap",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var stack1,buffer="";return buffer+='alt="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.objetLabel,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" '
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<li class="qti-choice qti-gapImg selectable" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    <img src="'+escapeExpression((stack1=depth0&&depth0.object,stack1=null==stack1||stack1===!1?stack1:stack1.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.data,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" \n         width="'+escapeExpression((stack1=depth0&&depth0.object,stack1=null==stack1||stack1===!1?stack1:stack1.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.width,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"\n         height="'+escapeExpression((stack1=depth0&&depth0.object,stack1=null==stack1||stack1===!1?stack1:stack1.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.height,typeof stack1===functionType?stack1.apply(depth0):stack1))+'"\n         ',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1.objectLabel),{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n    />\n</li>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/GapImg",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/gapImg","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"gapImg",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<li class="qti-choice" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</li>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/GapText",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"gapText",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<span class="qti-choice qti-hottext hottext" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\r\n    <label class="hottext-checkmark">\r\n        <input type="checkbox" value="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\r\n        <span class="icon-checkbox small"></span>\r\n    </label>\r\n    <span class="hottext-content">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</span>\r\n</span>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/Hottext",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/hottext","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"hottext",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/inlineChoice",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<option data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" value="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+"</option>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/InlineChoice",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/inlineChoice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"inlineChoice",getContainer:Helper.getContainer,template:tpl}}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.AssociateInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"simpleAssociableChoice.associateInteraction",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<th class="qti-choice qti-associableChoice qti-simpleAssociableChoice" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</th>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleAssociableChoice.MatchInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleAssociableChoice.matchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"simpleAssociableChoice.matchInteraction",getContainer:Helper.getContainer,template:tpl}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var stack1,buffer="";return buffer+='\n            <input type="radio" name="response-'+escapeExpression((stack1=depth0&&depth0.interaction,stack1=null==stack1||stack1===!1?stack1:stack1.serial,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" value="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n            <span class="icon-radio"></span>\n            '
}function program3(depth0){var stack1,buffer="";return buffer+='\n            <input type="checkbox" name="response-'+escapeExpression((stack1=depth0&&depth0.interaction,stack1=null==stack1||stack1===!1?stack1:stack1.serial,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" value="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\n            <span class="icon-checkbox"></span>\n            '}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;
return buffer+='<li class="qti-choice qti-simpleChoice" data-identifier="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    <div class="pseudo-label-box">\n        <label class="real-label">\n            ',stack1=helpers["if"].call(depth0,depth0&&depth0.unique,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n        </label>\n        <div class="label-box">\n            <div class="label-content clear" contenteditable="false">\n                ',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n            </div>\n        </div>\n    </div>\n</li>\n"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.ChoiceInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/simpleChoice.choiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"simpleChoice.choiceInteraction",getContainer:Helper.getContainer,getData:function(choice,data){return data.unique=1===parseInt(data.interaction.attributes.maxChoices),data},template:tpl}}),define("taoQtiItem/qtiCommonRenderer/renderers/choices/SimpleChoice.OrderInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/choices/choice","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"simpleChoice.orderInteraction",getContainer:Helper.getContainer,template:tpl}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program3(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-associateInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="associateInteraction">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <ul class="choice-area clearfix  none block-listing solid horizontal source" data-eyecatcher=">li">\n        ',options={hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    </ul>\n    <ul class="result-area none target clearfix">\n    </ul>\n    <div class="notification-container"></div>\n</div>'
})}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(){return"incomplete-pair"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,buffer="",self=this;return buffer+='<li class="',stack1=helpers["if"].call(depth0,depth0&&depth0.empty,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n    <div class="target lft"></div>\n    <div class="target rgt"></div>\n</li>\n'})}),define("taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint",["lodash"],function(_){var _formatters={"boolean":function(value){return value?"true":"false"
},integer:function(value){return value},"float":function(value){return value},string:function(value){return""===value?"NULL":'"'+value+'"'},point:function(value){return"["+value[0]+", "+value[1]+"]"},pair:function(value){return"["+value[0]+", "+value[1]+"]"},directedPair:function(value){return"["+value[0]+", "+value[1]+"]"},duration:function(value){return value},file:function(){return"binary data"},uri:function(value){return value},intOrIdentifier:function(value){return value},identifier:function(value){return value}},_prettyPrintBase=function(value,withType){var print="",base=value.base;return withType="undefined"!=typeof withType?withType:!0,base?(_.forIn(_formatters,function(formatter,baseType){return void 0!==base[baseType]?(print+=withType?"("+baseType+") ":"",print+=formatter(base[baseType]),!1):void 0
}),print):void 0},_prettyPrintList=function(value,withType){var print="",list=value.list;return withType="undefined"!=typeof withType?withType:!0,list?(_.forIn(_formatters,function(formatter,baseType){return void 0!==list[baseType]?(print+=withType?"("+baseType+") ":"",print+="[",_.each(list[baseType],function(value){print+=formatter(value)+", "}),_.size(list[baseType])&&(print=print.substring(0,print.length-2)),print+="]",!1):void 0}),print):void 0};return{printBase:_prettyPrintBase,printList:_prettyPrintList}}),define("taoQtiItem/qtiCommonRenderer/helpers/PciResponse",["lodash","taoQtiItem/qtiCommonRenderer/helpers/PciPrettyPrint"],function(_,pciPrettyPrint){var _qtiModelPciResponseCardinalities={single:"base",multiple:"list",ordered:"list",record:"record"};
return{unserialize:function(response,interaction){var mappedCardinality,ret=[],responseDeclaration=interaction.getResponseDeclaration(),baseType=responseDeclaration.attr("baseType"),cardinality=responseDeclaration.attr("cardinality");if(!_qtiModelPciResponseCardinalities[cardinality])throw"unknown cardinality in the responseDeclaration of the interaction";mappedCardinality=_qtiModelPciResponseCardinalities[cardinality];var responseValues=response[mappedCardinality];if(null===responseValues)ret=[];else{if(!_.isObject(responseValues))throw"invalid response cardinality, expected "+cardinality+" ("+mappedCardinality+")";if(void 0===responseValues[baseType])throw"invalid response baseType";
ret=responseValues[baseType],ret=_.isArray(ret)?ret:[ret]}return ret},serialize:function(responseValues,interaction){if(!_.isArray(responseValues))throw"invalid argument : responseValues must be an Array";var mappedCardinality,response={},responseDeclaration=interaction.getResponseDeclaration(),baseType=responseDeclaration.attr("baseType"),cardinality=responseDeclaration.attr("cardinality");if(!_qtiModelPciResponseCardinalities[cardinality])throw"unknown cardinality in the responseDeclaration of the interaction";return mappedCardinality=_qtiModelPciResponseCardinalities[cardinality],"base"===mappedCardinality?0===responseValues.length?response.base=null:(response.base={},response.base[baseType]=responseValues[0]):(response[mappedCardinality]={},response[mappedCardinality][baseType]=responseValues),response
},isEmpty:function(response){return null===response||_.isEmpty(response)||null===response.base||_.isArray(response.list)&&_.isEmpty(response.list)||_.isArray(response.record)&&_.isEmpty(response.record)},prettyPrint:function(response){var print="";if("undefined"!=typeof response.base)print+=pciPrettyPrint.printBase(response,!0);else if("undefined"!=typeof response.list)print+=pciPrettyPrint.printList(response,!0);else if("undefined"==typeof response.record)throw"Not a valid PCI JSON Response";return print}}}),define("taoQtiItem/qtiCreator/helper/adaptSize",["jquery"],function($){"use strict";function ucfirst(str){return str.charAt(0).toUpperCase()+str.substr(1)
}var adaptSize=function(){var height=function(elements){_resize(elements,{height:0})},width=function(elements){_resize(elements,{width:0})},both=function(elements){_resize(elements,{height:0,width:0})},_resize=function(elements,dimensions){var dimension;elements instanceof $||(elements=$(elements)),elements.each(function(){var element=$(this);for(dimension in dimensions)element[dimension]("auto")}),elements.each(function(){var element=$(this);for(dimension in dimensions)dimensions[dimension]=Math.max(dimensions[dimension],element["outer"+ucfirst(dimension)]())}),elements.css(dimensions)};return{width:width,height:height,both:both}}();return adaptSize}),define("eyecatcher",["jquery"],function($){"use strict";
var getCurrentEyeCatchers=function(){var offset,left,top,tmpCatchers=$("[data-eyecatcher]").filter(":visible"),tmpLength=tmpCatchers.length,win=$(window),winLeft=win.scrollLeft(),winTop=win.scrollTop(),winHeight=win.height(),winWidth=win.width(),eyeCatchers=$(),visibleCatchers=$();return tmpCatchers.each(function(){var elem=$(this),data=elem.data("eyecatcher");return!1===data?!0:void(""===data||data===!0?eyeCatchers=eyeCatchers.add(elem):"string"===$.type(data)&&(eyeCatchers=eyeCatchers.add(elem.find(data))))}),eyeCatchers.length?eyeCatchers.length===tmpLength?null:(eyeCatchers.each(function(){var elem=$(this);offset=elem.offset(),left=offset.left,top=offset.top,top+elem.height()>=winTop&&winTop+winHeight>=top&&left+elem.width()>=winLeft&&winLeft+winWidth>=left&&(visibleCatchers=visibleCatchers.add(elem))
}),visibleCatchers):!1},eyeCatcher=function(){for(var type="info",eyeCatchers=null,i=arguments.length;i--;)"string"==typeof arguments[i]&&arguments[i]?type=arguments[i]:arguments[i]instanceof $&&(eyeCatchers=arguments[i]);type=type||"info";var check=setInterval(function(){return eyeCatchers=eyeCatchers||getCurrentEyeCatchers(),null===eyeCatchers?(clearInterval(check),!1):!1===eyeCatchers?!1:void eyeCatchers.animate({boxShadow:"0 0 4px #3e7da7"},500,function(){eyeCatchers.data("eyecatcher",!1),setTimeout(function(){eyeCatchers.animate({boxShadow:"0 0 0 0"},1e3)},500)})},1e3)};return eyeCatcher}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/AssociateInteraction",["lodash","i18n","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/associateInteraction.pair","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCreator/helper/adaptSize","eyecatcher"],function(_,__,$,tpl,pairTpl,Helper,pciResponse,adaptSize){var _choiceUsages={},setChoice=function(interaction,$choice,$target){var choiceSerial=$choice.data("serial"),choice=interaction.getChoice(choiceSerial);
if(!choiceSerial)throw"empty choice serial";_choiceUsages[choiceSerial]||(_choiceUsages[choiceSerial]=0),_choiceUsages[choiceSerial]++;var _setChoice=function(){$target.data("serial",choiceSerial).html($choice.html()).addClass("filled"),!interaction.responseMappingMode&&choice.attr("matchMax")&&_choiceUsages[choiceSerial]>=choice.attr("matchMax")&&$choice.addClass("deactivated")};if($target.siblings("div").hasClass("filled")){var $resultArea=Helper.getContainer(interaction).find(".result-area"),$pair=$target.parent(),thisPairSerial=[$target.siblings("div").data("serial"),choiceSerial],$otherRepeatedPair=$();$resultArea.children().not($pair).each(function(){var $otherPair=$(this).children(".filled");
if(2===$otherPair.length){var otherPairSerial=[$($otherPair[0]).data("serial"),$($otherPair[1]).data("serial")];if(2===_.intersection(thisPairSerial,otherPairSerial).length)return $otherRepeatedPair=$otherPair,!1}}),0===$otherRepeatedPair.length?(_setChoice(),Helper.triggerResponseChangeEvent(interaction,{type:"added",$pair:$pair,choices:thisPairSerial}),Helper.validateInstructions(interaction,{choice:$choice,target:$target}),(interaction.responseMappingMode||0===parseInt(interaction.attr("maxAssociations")))&&($pair.removeClass("incomplete-pair"),$resultArea.children(".incomplete-pair").length||($resultArea.append(pairTpl({empty:!0})),$resultArea.children(".incomplete-pair").fadeIn(600,function(){$(this).show()
})))):($otherRepeatedPair.css("border","1px solid orange"),$target.html(__("identical pair already exists")).css({color:"orange",border:"1px solid orange"}),setTimeout(function(){$otherRepeatedPair.removeAttr("style"),$target.empty().css({color:"",border:""})},2e3))}else _setChoice()},unsetChoice=function(interaction,$choice,animate){var serial=$choice.data("serial"),$container=Helper.getContainer(interaction);if($container.find(".choice-area [data-serial="+serial+"]").removeClass("deactivated"),_choiceUsages[serial]--,$choice.removeClass("filled").removeData("serial").empty(),!interaction.swapping&&(Helper.triggerResponseChangeEvent(interaction,{type:"removed",$pair:$choice.parent()}),Helper.validateInstructions(interaction,{choice:$choice}),!$choice.siblings("div").hasClass("filled")&&(0===parseInt(interaction.attr("maxAssociations"))||interaction.responseMappingMode))){var $parent=$choice.parent();
$parent.hasClass("incomplete-pair")||(animate?$parent.addClass("removing").fadeOut(500,function(){$(this).remove()}):$parent.remove())}},getChoice=function(interaction,identifier){var choice=interaction.getChoiceByIdentifier(identifier);if(!choice)throw new Error("cannot find a choice with the identifier : "+identifier);return Helper.getContainer(interaction).find(".choice-area [data-serial="+choice.getSerial()+"]")},renderEmptyPairs=function(interaction){var max=parseInt(interaction.attr("maxAssociations")),$resultArea=Helper.getContainer(interaction).find(".result-area");if(interaction.responseMappingMode||0===max)$resultArea.append(pairTpl({empty:!0})),$resultArea.children(".incomplete-pair").show();
else for(var i=0;max>i;i++)$resultArea.append(pairTpl())},_adaptSize=function(interaction){_.delay(function(){adaptSize.height(Helper.getContainer(interaction).find(".result-area .target, .choice-area .qti-choice"))},200)},render=function(interaction){renderEmptyPairs(interaction);var $container=Helper.getContainer(interaction),$choiceArea=$container.find(".choice-area"),$resultArea=$container.find(".result-area"),$activeChoice=null,_getChoice=function(serial){return $choiceArea.find("[data-serial="+serial+"]")},_setChoice=function($choice,$target){setChoice(interaction,$choice,$target),_adaptSize(interaction)},_resetSelection=function(){$activeChoice&&($resultArea.find(".remove-choice").remove(),$activeChoice.removeClass("active"),$container.find(".empty").removeClass("empty"),$activeChoice=null)
},_unsetChoice=function($choice){unsetChoice(interaction,$choice,!0),_adaptSize(interaction)},_isInsertionMode=function(){return $activeChoice&&$activeChoice.data("identifier")},_isModeEditing=function(){return $activeChoice&&!$activeChoice.data("identifier")};$container.on("mousedown.commonRenderer",function(){_resetSelection()}),$choiceArea.on("mousedown.commonRenderer",">li",function(e){return e.stopPropagation(),$(this).hasClass("deactivated")?void e.preventDefault():void(_isModeEditing()?(interaction.swapping=!0,_unsetChoice($activeChoice),_setChoice($(this),$activeChoice),_resetSelection(),interaction.swapping=!1):$(this).hasClass("active")?_resetSelection():(_resetSelection(),$activeChoice=$(this),$(this).addClass("active"),$resultArea.find(">li>.target").addClass("empty")))
}),$resultArea.on("mousedown.commonRenderer",">li>div",function(e){if(e.stopPropagation(),_isInsertionMode()){var $target=$(this),choiceSerial=$activeChoice.data("serial"),targetSerial=$target.data("serial");targetSerial!==choiceSerial&&($target.hasClass("filled")&&(interaction.swapping=!0),targetSerial&&_unsetChoice($target),_setChoice($activeChoice,$target),interaction.swapping=!1),_resetSelection()}else if(_isModeEditing()){var $target=$(this),targetSerial=$target.data("serial"),choiceSerial=$activeChoice.data("serial");targetSerial!==choiceSerial&&(($target.hasClass("filled")||$activeChoice.siblings("div")[0]===$target[0])&&(interaction.swapping=!0),_unsetChoice($activeChoice),targetSerial&&(_unsetChoice($target),_setChoice(_getChoice(targetSerial),$activeChoice)),_setChoice(_getChoice(choiceSerial),$target),interaction.swapping=!1),_resetSelection()
}else if($(this).data("serial")){var serial=$(this).data("serial");$activeChoice=$(this),$activeChoice.addClass("active"),$resultArea.find(">li>.target").filter(function(){return $(this).data("serial")!==serial}).addClass("empty"),$choiceArea.find(">li:not(.deactivated)").filter(function(){return $(this).data("serial")!==serial}).addClass("empty");var $bin=$("<span>",{"class":"icon-undo remove-choice",title:__("remove")});$bin.on("mousedown",function(e){e.stopPropagation(),_unsetChoice($activeChoice),_resetSelection()}),$(this).append($bin)}}),interaction.responseMappingMode||_setInstructions(interaction),_adaptSize(interaction)},_setInstructions=function(interaction){var min=parseInt(interaction.attr("minAssociations")),max=parseInt(interaction.attr("maxAssociations"));
if(0===min)0===max&&Helper.appendInstruction(interaction,__("You may make as many association pairs as you want."));else{0===max&&Helper.appendInstruction(interaction,__("The maximum number of association is unlimited."));var msg=__("You need to make")+" ";msg+=min>1?__("at least")+" "+min+" "+__("association pairs"):__("one association pair"),Helper.appendInstruction(interaction,msg,function(){_getRawResponse(interaction).length>=min?this.setLevel("success"):this.reset()})}},resetResponse=function(interaction){Helper.getContainer(interaction).find(".result-area>li>div").each(function(){unsetChoice(interaction,$(this))})},_setPairs=function(interaction,pairs){var addedPairs=0,$emptyPair=Helper.getContainer(interaction).find(".result-area>li:first");
return pairs&&"single"===interaction.getResponseDeclaration().attr("cardinality")&&pairs.length&&(pairs=[pairs]),_.each(pairs,function(pair){if(!$emptyPair.length)return!1;var $divs=$emptyPair.children("div");setChoice(interaction,getChoice(interaction,pair[0]),$($divs[0])),setChoice(interaction,getChoice(interaction,pair[1]),$($divs[1])),addedPairs++,$emptyPair=$emptyPair.next("li")}),addedPairs},setResponse=function(interaction,response){_setPairs(interaction,pciResponse.unserialize(response,interaction))},_getRawResponse=function(interaction){var response=[];return Helper.getContainer(interaction).find(".result-area>li").each(function(){var pair=[];$(this).find("div").each(function(){var serial=$(this).data("serial");
serial&&pair.push(interaction.getChoice(serial).id())}),2===pair.length&&response.push(pair)}),response},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)},destroy=function(interaction){var $container=Helper.getContainer(interaction);$container.find(".result-area .active").mousedown(),$(document).off(".commonRenderer"),$container.find(".choice-area, .result-area").andSelf().off(".commonRenderer"),resetResponse(interaction),Helper.removeInstructions(interaction),Helper.getContainer(interaction).find(".result-area").empty()};return{qtiClass:"associateInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy,renderEmptyPairs:renderEmptyPairs}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program3(){return" horizontal"}function program5(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-choiceInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="choiceInteraction">\n  ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n  <div class="instruction-container"></div>\n  <ol class="plain block-listing solid choice-area',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n      ',options={hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n  </ol>\n  <div class="notification-container"></div>\n</div>'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/ChoiceInteraction",["lodash","jquery","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/choiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse"],function(_,$,__,tpl,Helper,pciResponse){var pseudoLabel=function(interaction){var $container=Helper.getContainer(interaction);$container.off(".commonRenderer"),$container.on("click.commonRenderer",".qti-choice",function(e){e.preventDefault(),e.stopPropagation();var $box=$(this),$radios=$box.find("input:radio").not("[disabled]").not(".disabled"),$checkboxes=$box.find("input:checkbox").not("[disabled]").not(".disabled");
$radios.length&&($radios.not(":checked").prop("checked",!0),$radios.trigger("change")),$checkboxes.length&&($checkboxes.prop("checked",!$checkboxes.prop("checked")),$checkboxes.trigger("change")),Helper.validateInstructions(interaction,{choice:$box}),Helper.triggerResponseChangeEvent(interaction)})},render=function(interaction){pseudoLabel(interaction),_setInstructions(interaction)},_setInstructions=function(interaction){var min=interaction.attr("minChoices"),max=interaction.attr("maxChoices"),choiceCount=_.size(interaction.getChoices()),minInstructionSet=!1;if(max>1&&choiceCount>max){var highlightInvalidInput=function($choice){var $input=$choice.find(".real-label > input"),$li=$choice.css("color","#BA122B"),$icon=$choice.find(".real-label > span").css("color","#BA122B").addClass("cross error");
setTimeout(function(){$input.prop("checked",!1),$li.removeAttr("style"),$icon.removeAttr("style").removeClass("cross"),Helper.triggerResponseChangeEvent(interaction)},150)};if(max===min){minInstructionSet=!0;var msg=__("You must select exactly")+" "+max+" "+__("choices");Helper.appendInstruction(interaction,msg,function(data){_getRawResponse(interaction).length>=max?(this.setLevel("success"),this.checkState("fulfilled")&&this.update({level:"warning",message:__("Maximum choices reached"),timeout:2e3,start:function(){highlightInvalidInput(data.choice)},stop:function(){this.update({level:"success",message:msg})}}),this.setState("fulfilled")):this.reset()})}else max>min&&Helper.appendInstruction(interaction,__("You can select maximum")+" "+max+" "+__("choices"),function(data){_getRawResponse(interaction).length>=max?(this.setMessage(__("Maximum choices reached")),this.checkState("fulfilled")&&this.update({level:"warning",timeout:2e3,start:function(){highlightInvalidInput(data.choice)
},stop:function(){this.setLevel("info")}}),this.setState("fulfilled")):this.reset()})}!minInstructionSet&&min>0&&choiceCount>min&&Helper.appendInstruction(interaction,__("You must select at least")+" "+min+" "+__("choices"),function(){_getRawResponse(interaction).length>=min?this.setLevel("success"):this.reset()})},resetResponse=function(interaction){Helper.getContainer(interaction).find(".real-label > input").prop("checked",!1)},setResponse=function(interaction,response){var $container=Helper.getContainer(interaction);try{_.each(pciResponse.unserialize(response,interaction),function(identifier){$container.find(".real-label > input[value="+identifier+"]").prop("checked",!0)
}),Helper.validateInstructions(interaction)}catch(e){throw new Error("wrong response format in argument : "+e)}},_getRawResponse=function(interaction){var values=[];return Helper.getContainer(interaction).find(".real-label > input[name=response-"+interaction.getSerial()+"]:checked").each(function(){values.push($(this).val())}),values},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)},getCustomData=function(interaction,data){return _.merge(data||{},{horizontal:"horizontal"===interaction.attr("orientation")})},destroy=function(interaction){$(document).off(".commonRenderer"),Helper.getContainer(interaction).off(".commonRenderer"),resetResponse(interaction),Helper.removeInstructions(interaction)
};return{qtiClass:"choiceInteraction",template:tpl,getData:getCustomData,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""
}function program3(depth0,data){var stack1,helper,options,buffer="";return buffer+='\r\n    <div id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'">\r\n        ',options={hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data},(helper=helpers.maxStringLoop)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.maxStringLoop,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.maxStringLoop||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(4,program4,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\r\n    </div>\r\n    "
}function program4(depth0){var stack1,buffer="";return buffer+='<input id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+"_"+escapeExpression(typeof depth0===functionType?depth0.apply(depth0):depth0)+'" name="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+"_"+escapeExpression(typeof depth0===functionType?depth0.apply(depth0):depth0)+'"/><br />'}function program6(depth0,data){var stack1,buffer="";return buffer+='\r\n        <div id="text-container">\r\n            <textarea id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="solid',stack1=helpers["if"].call(depth0,(stack1=depth0&&depth0.attributes,null==stack1||stack1===!1?stack1:stack1["class"]),{hash:{},inverse:self.noop,fn:self.program(7,program7,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='" cols="72"></textarea>\r\n        </div>\r\n    '
}function program7(){return" attributes.class"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-extendedTextInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="extendedTextInteraction">\r\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\r\n    <div class="instruction-container"></div>\r\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.multiple,{hash:{},inverse:self.program(6,program6,data),fn:self.program(3,program3,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\r\n</div>"
})}),function(){window.CKEDITOR&&window.CKEDITOR.dom||(window.CKEDITOR||(window.CKEDITOR=function(){var d={timestamp:"E2VD",version:"4.3.4 DEV",revision:"0",rnd:Math.floor(900*Math.random())+100,_:{pending:[]},status:"unloaded",basePath:function(){var a=window.CKEDITOR_BASEPATH||"";if(!a)for(var b=document.getElementsByTagName("script"),c=0;c<b.length;c++){var d=b[c].src.match(/(^|.*[\\\/])ckeditor(?:_basic)?(?:_source)?.js(?:\?.*)?$/i);if(d){a=d[1];break}}if(-1==a.indexOf(":/")&&"//"!=a.slice(0,2)&&(a=0===a.indexOf("/")?location.href.match(/^.*?:\/\/[^\/]*/)[0]+a:location.href.match(/^[^\?]*\/(?:)/)[0]+a),!a)throw'The CKEditor installation path could not be automatically detected. Please set the global variable "CKEDITOR_BASEPATH" before creating editor instances.';
return a}(),getUrl:function(a){return-1==a.indexOf(":/")&&0!==a.indexOf("/")&&(a=this.basePath+a),this.timestamp&&"/"!=a.charAt(a.length-1)&&!/[&?]t=/.test(a)&&(a+=(0<=a.indexOf("?")?"&":"?")+"t="+this.timestamp),a},domReady:function(){function a(){try{document.addEventListener?(document.removeEventListener("DOMContentLoaded",a,!1),b()):document.attachEvent&&"complete"===document.readyState&&(document.detachEvent("onreadystatechange",a),b())}catch(c){}}function b(){for(var b;b=c.shift();)b()}var c=[];return function(b){if(c.push(b),"complete"===document.readyState&&setTimeout(a,1),1==c.length)if(document.addEventListener)document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1);
else if(document.attachEvent){document.attachEvent("onreadystatechange",a),window.attachEvent("onload",a),b=!1;try{b=!window.frameElement}catch(d){}if(document.documentElement.doScroll&&b){var g=function(){try{document.documentElement.doScroll("left")}catch(b){return void setTimeout(g,1)}a()};g()}}}}()},e=window.CKEDITOR_GETURL;if(e){var c=d.getUrl;d.getUrl=function(a){return e.call(d,a)||c.call(d,a)}}return d}()),CKEDITOR.event||(CKEDITOR.event=function(){},CKEDITOR.event.implementOn=function(d){var c,e=CKEDITOR.event.prototype;for(c in e)void 0==d[c]&&(d[c]=e[c])},CKEDITOR.event.prototype=function(){function d(a){var b=e(this);return b[a]||(b[a]=new c(a))}var e=function(a){return a=a.getPrivate&&a.getPrivate()||a._||(a._={}),a.events||(a.events={})
},c=function(a){this.name=a,this.listeners=[]};return c.prototype={getListenerIndex:function(a){for(var b=0,c=this.listeners;b<c.length;b++)if(c[b].fn==a)return b;return-1}},{define:function(a,b){var c=d.call(this,a);CKEDITOR.tools.extend(c,b,!0)},on:function(a,b,c,f,i){function g(d,k,l,i){return d={name:a,sender:this,editor:d,data:k,listenerData:f,stop:l,cancel:i,removeListener:j},b.call(c,d)===!1?!1:d.data}function j(){e.removeListener(a,b)}var l=d.call(this,a);if(l.getListenerIndex(b)<0){l=l.listeners,c||(c=this),isNaN(i)&&(i=10);var e=this;g.fn=b,g.priority=i;for(var o=l.length-1;o>=0;o--)if(l[o].priority<=i)return l.splice(o+1,0,g),{removeListener:j};l.unshift(g)
}return{removeListener:j}},once:function(){var a=arguments[1];return arguments[1]=function(b){return b.removeListener(),a.apply(this,arguments)},this.on.apply(this,arguments)},capture:function(){CKEDITOR.event.useCapture=1;var a=this.on.apply(this,arguments);return CKEDITOR.event.useCapture=0,a},fire:function(){var a=0,b=function(){a=1},c=0,d=function(){c=1};return function(i,g,j){var l=e(this)[i],i=a,m=c;if(a=c=0,l){var o=l.listeners;if(o.length)for(var p,o=o.slice(0),k=0;k<o.length;k++){if(l.errorProof)try{p=o[k].call(this,j,g,b,d)}catch(n){}else p=o[k].call(this,j,g,b,d);if(p===!1?c=1:"undefined"!=typeof p&&(g=p),a||c)break}}return g=c?!1:"undefined"==typeof g?!0:g,a=i,c=m,g
}}(),fireOnce:function(a,b,c){return b=this.fire(a,b,c),delete e(this)[a],b},removeListener:function(a,b){var c=e(this)[a];if(c){var d=c.getListenerIndex(b);d>=0&&c.listeners.splice(d,1)}},removeAllListeners:function(){var b,a=e(this);for(b in a)delete a[b]},hasListeners:function(a){return(a=e(this)[a])&&a.listeners.length>0}}}()),CKEDITOR.editor||(CKEDITOR.editor=function(){CKEDITOR._.pending.push([this,arguments]),CKEDITOR.event.call(this)},CKEDITOR.editor.prototype.fire=function(d,e){return d in{instanceReady:1,loaded:1}&&(this[d]=!0),CKEDITOR.event.prototype.fire.call(this,d,e,this)},CKEDITOR.editor.prototype.fireOnce=function(d,e){return d in{instanceReady:1,loaded:1}&&(this[d]=!0),CKEDITOR.event.prototype.fireOnce.call(this,d,e,this)
},CKEDITOR.event.implementOn(CKEDITOR.editor.prototype)),CKEDITOR.env||(CKEDITOR.env=function(){var d=navigator.userAgent.toLowerCase(),e=window.opera,c={ie:d.indexOf("trident/")>-1,opera:!!e&&e.version,webkit:d.indexOf(" applewebkit/")>-1,air:d.indexOf(" adobeair/")>-1,mac:d.indexOf("macintosh")>-1,quirks:"BackCompat"==document.compatMode&&(!document.documentMode||document.documentMode<10),mobile:d.indexOf("mobile")>-1,iOS:/(ipad|iphone|ipod)/.test(d),isCustomDomain:function(){if(!this.ie)return!1;var b=document.domain,a=window.location.hostname;return b!=a&&b!="["+a+"]"},secure:"https:"==location.protocol};c.gecko="Gecko"==navigator.product&&!c.webkit&&!c.opera&&!c.ie,c.webkit&&(d.indexOf("chrome")>-1?c.chrome=!0:c.safari=!0);
var a=0;if(c.ie&&(a=c.quirks||!document.documentMode?parseFloat(d.match(/msie (\d+)/)[1]):document.documentMode,c.ie9Compat=9==a,c.ie8Compat=8==a,c.ie7Compat=7==a,c.ie6Compat=7>a||c.quirks),c.gecko){var b=d.match(/rv:([\d\.]+)/);b&&(b=b[1].split("."),a=1e4*b[0]+100*(b[1]||0)+1*(b[2]||0))}return c.opera&&(a=parseFloat(e.version())),c.air&&(a=parseFloat(d.match(/ adobeair\/(\d+)/)[1])),c.webkit&&(a=parseFloat(d.match(/ applewebkit\/(\d+)/)[1])),c.version=a,c.isCompatible=c.iOS&&a>=534||!c.mobile&&(c.ie&&a>6||c.gecko&&a>=10801||c.opera&&a>=9.5||c.air&&a>=1||c.webkit&&a>=522||!1),c.hidpi=window.devicePixelRatio>=2,c.needsBrFiller=c.gecko||c.webkit||c.ie&&a>10,c.needsNbspFiller=c.ie&&11>a,c.cssClass="cke_browser_"+(c.ie?"ie":c.gecko?"gecko":c.opera?"opera":c.webkit?"webkit":"unknown"),c.quirks&&(c.cssClass=c.cssClass+" cke_browser_quirks"),c.ie&&(c.cssClass=c.cssClass+(" cke_browser_ie"+(c.quirks||c.version<7?"6":c.version)),c.quirks&&(c.cssClass=c.cssClass+" cke_browser_iequirks")),c.gecko&&(10900>a?c.cssClass=c.cssClass+" cke_browser_gecko18":11e3>=a&&(c.cssClass=c.cssClass+" cke_browser_gecko19")),c.air&&(c.cssClass=c.cssClass+" cke_browser_air"),c.iOS&&(c.cssClass=c.cssClass+" cke_browser_ios"),c.hidpi&&(c.cssClass=c.cssClass+" cke_hidpi"),c
}()),"unloaded"==CKEDITOR.status&&function(){CKEDITOR.event.implementOn(CKEDITOR),CKEDITOR.loadFullCore=function(){if("basic_ready"!=CKEDITOR.status)CKEDITOR.loadFullCore._load=1;else{delete CKEDITOR.loadFullCore;var d=document.createElement("script");d.type="text/javascript",d.src=CKEDITOR.basePath+"ckeditor.js",document.getElementsByTagName("head")[0].appendChild(d)}},CKEDITOR.loadFullCoreTimeout=0,CKEDITOR.add=function(d){(this._.pending||(this._.pending=[])).push(d)},function(){CKEDITOR.domReady(function(){var d=CKEDITOR.loadFullCore,e=CKEDITOR.loadFullCoreTimeout;d&&(CKEDITOR.status="basic_ready",d&&d._load?d():e&&setTimeout(function(){CKEDITOR.loadFullCore&&CKEDITOR.loadFullCore()
},1e3*e))})}(),CKEDITOR.status="basic_loaded"}(),CKEDITOR.dom={},function(){var d=[],e=CKEDITOR.env.gecko?"-moz-":CKEDITOR.env.webkit?"-webkit-":CKEDITOR.env.opera?"-o-":CKEDITOR.env.ie?"-ms-":"";CKEDITOR.on("reset",function(){d=[]}),CKEDITOR.tools={arrayCompare:function(c,a){if(!c&&!a)return!0;if(!c||!a||c.length!=a.length)return!1;for(var b=0;b<c.length;b++)if(c[b]!=a[b])return!1;return!0},clone:function(c){var a;if(c&&c instanceof Array){a=[];for(var b=0;b<c.length;b++)a[b]=CKEDITOR.tools.clone(c[b]);return a}if(null===c||"object"!=typeof c||c instanceof String||c instanceof Number||c instanceof Boolean||c instanceof Date||c instanceof RegExp)return c;a=new c.constructor;
for(b in c)a[b]=CKEDITOR.tools.clone(c[b]);return a},capitalize:function(c,a){return c.charAt(0).toUpperCase()+(a?c.slice(1):c.slice(1).toLowerCase())},extend:function(c){var b,d,a=arguments.length;"boolean"==typeof(b=arguments[a-1])?a--:"boolean"==typeof(b=arguments[a-2])&&(d=arguments[a-1],a-=2);for(var f=1;a>f;f++){var g,i=arguments[f];for(g in i)(b===!0||void 0==c[g])&&(!d||g in d)&&(c[g]=i[g])}return c},prototypedCopy:function(c){var a=function(){};return a.prototype=c,new a},copy:function(c){var b,a={};for(b in c)a[b]=c[b];return a},isArray:function(c){return"[object Array]"==Object.prototype.toString.call(c)},isEmpty:function(c){for(var a in c)if(c.hasOwnProperty(a))return!1;
return!0},cssVendorPrefix:function(c,a,b){return b?e+c+":"+a+";"+c+":"+a:(b={},b[c]=a,b[e+c]=a,b)},cssStyleToDomStyle:function(){var c=document.createElement("div").style,a="undefined"!=typeof c.cssFloat?"cssFloat":"undefined"!=typeof c.styleFloat?"styleFloat":"float";return function(b){return"float"==b?a:b.replace(/-./g,function(b){return b.substr(1).toUpperCase()})}}(),buildStyleHtml:function(c){for(var a,c=[].concat(c),b=[],d=0;d<c.length;d++)(a=c[d])&&b.push(/@import|[{}]/.test(a)?"<style>"+a+"</style>":'<link type="text/css" rel=stylesheet href="'+a+'">');return b.join("")},htmlEncode:function(c){return(""+c).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;")
},htmlEncodeAttr:function(c){return c.replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},htmlDecodeAttr:function(c){return c.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},getNextNumber:function(){var c=0;return function(){return++c}}(),getNextId:function(){return"cke_"+this.getNextNumber()},override:function(c,a){var b=a(c);return b.prototype=c.prototype,b},setTimeout:function(c,a,b,d,f){return f||(f=window),b||(b=f),f.setTimeout(function(){d?c.apply(b,[].concat(d)):c.apply(b)},a||0)},trim:function(){var c=/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g;return function(a){return a.replace(c,"")}}(),ltrim:function(){var c=/^[ \t\n\r]+/g;return function(a){return a.replace(c,"")
}}(),rtrim:function(){var c=/[ \t\n\r]+$/g;return function(a){return a.replace(c,"")}}(),indexOf:function(c,a){if("function"==typeof a){for(var b=0,d=c.length;d>b;b++)if(a(c[b]))return b}else{if(c.indexOf)return c.indexOf(a);for(b=0,d=c.length;d>b;b++)if(c[b]===a)return b}return-1},search:function(c,a){var b=CKEDITOR.tools.indexOf(c,a);return b>=0?c[b]:null},bind:function(c,a){return function(){return c.apply(a,arguments)}},createClass:function(c){var a=c.$,b=c.base,d=c.privates||c._,f=c.proto,c=c.statics;if(!a&&(a=function(){b&&this.base.apply(this,arguments)}),d)var i=a,a=function(){var a,b=this._||(this._={});for(a in d){var c=d[a];b[a]="function"==typeof c?CKEDITOR.tools.bind(c,this):c
}i.apply(this,arguments)};return b&&(a.prototype=this.prototypedCopy(b.prototype),a.prototype.constructor=a,a.base=b,a.baseProto=b.prototype,a.prototype.base=function(){this.base=b.prototype.base,b.apply(this,arguments),this.base=arguments.callee}),f&&this.extend(a.prototype,f,!0),c&&this.extend(a,c,!0),a},addFunction:function(c,a){return d.push(function(){return c.apply(a||this,arguments)})-1},removeFunction:function(c){d[c]=null},callFunction:function(c){var a=d[c];return a&&a.apply(window,Array.prototype.slice.call(arguments,1))},cssLength:function(){var a,c=/^-?\d+\.?\d*px$/;return function(b){return a=CKEDITOR.tools.trim(b+"")+"px",c.test(a)?a:b||""}}(),convertToPx:function(){var c;
return function(a){return c||(c=CKEDITOR.dom.element.createFromHtml('<div style="position:absolute;left:-9999px;top:-9999px;margin:0px;padding:0px;border:0px;"></div>',CKEDITOR.document),CKEDITOR.document.getBody().append(c)),/%$/.test(a)?a:(c.setStyle("width",a),c.$.clientWidth)}}(),repeat:function(c,a){return Array(a+1).join(c)},tryThese:function(){for(var c,a=0,b=arguments.length;b>a;a++){var d=arguments[a];try{c=d();break}catch(f){}}return c},genKey:function(){return Array.prototype.slice.call(arguments).join("-")},defer:function(c){return function(){var a=arguments,b=this;window.setTimeout(function(){c.apply(b,a)},0)}},normalizeCssText:function(c,a){var d,b=[],f=CKEDITOR.tools.parseCssText(c,!0,a);
for(d in f)b.push(d+":"+f[d]);return b.sort(),b.length?b.join(";")+";":""},convertRgbToHex:function(c){return c.replace(/(?:rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\))/gi,function(a,b,c,d){for(a=[b,c,d],b=0;3>b;b++)a[b]=("0"+parseInt(a[b],10).toString(16)).slice(-2);return"#"+a.join("")})},parseCssText:function(c,a,b){var d={};return b&&(b=new CKEDITOR.dom.element("span"),b.setAttribute("style",c),c=CKEDITOR.tools.convertRgbToHex(b.getAttribute("style")||"")),c&&";"!=c?(c.replace(/&quot;/g,'"').replace(/\s*([^:;\s]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(b,c,g){a&&(c=c.toLowerCase(),"font-family"==c&&(g=g.toLowerCase().replace(/["']/g,"").replace(/\s*,\s*/g,",")),g=CKEDITOR.tools.trim(g)),d[c]=g
}),d):d},writeCssText:function(c,a){var b,d=[];for(b in c)d.push(b+":"+c[b]);return a&&d.sort(),d.join("; ")},objectCompare:function(c,a,b){var d;if(!c&&!a)return!0;if(!c||!a)return!1;for(d in c)if(c[d]!=a[d])return!1;if(!b)for(d in a)if(c[d]!=a[d])return!1;return!0},objectKeys:function(c){var b,a=[];for(b in c)a.push(b);return a},convertArrayToObject:function(c,a){var b={};1==arguments.length&&(a=!0);for(var d=0,f=c.length;f>d;++d)b[c[d]]=a;return b},fixDomain:function(){for(var c;;)try{c=window.parent.document.domain;break}catch(a){if(c=c?c.replace(/.+?(?:\.|$)/,""):document.domain,!c)break;document.domain=c}return!!c},eventsBuffer:function(c,a){function b(){f=(new Date).getTime(),d=!1,a()
}var d,f=0;return{input:function(){if(!d){var a=(new Date).getTime()-f;c>a?d=setTimeout(b,c-a):b()}},reset:function(){d&&clearTimeout(d),d=f=0}}},enableHtml5Elements:function(c,a){for(var f,b=["abbr","article","aside","audio","bdi","canvas","data","datalist","details","figcaption","figure","footer","header","hgroup","mark","meter","nav","output","progress","section","summary","time","video"],d=b.length;d--;)f=c.createElement(b[d]),a&&c.appendChild(f)}}}(),CKEDITOR.dtd=function(){var d=CKEDITOR.tools.extend,e=function(b,a){for(var c=CKEDITOR.tools.clone(b),d=1;d<arguments.length;d++){var h,a=arguments[d];for(h in a)delete c[h]}return c},c={},a={},b={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},h={command:1,link:1,meta:1,noscript:1,script:1,style:1},f={},i={"#":1},g={center:1,dir:1,noframes:1};
return d(c,{a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},i,{acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1}),d(a,b,c,g),e={a:e(c,{a:1,button:1}),abbr:c,address:a,area:f,article:d({style:1},a),aside:d({style:1},a),audio:d({source:1,track:1},a),b:c,base:f,bdi:c,bdo:c,blockquote:a,body:a,br:f,button:e(c,{a:1,button:1}),canvas:c,caption:a,cite:c,code:c,col:f,colgroup:{col:1},command:f,datalist:d({option:1},c),dd:a,del:c,details:d({summary:1},a),dfn:c,div:d({style:1},a),dl:{dt:1,dd:1},dt:a,em:c,embed:f,fieldset:d({legend:1},a),figcaption:a,figure:d({figcaption:1},a),footer:a,form:a,h1:c,h2:c,h3:c,h4:c,h5:c,h6:c,head:d({title:1,base:1},h),header:a,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:f,html:d({head:1,body:1},a,h),i:c,iframe:i,img:f,input:f,ins:c,kbd:c,keygen:f,label:c,legend:c,li:a,link:f,map:a,mark:c,menu:d({li:1},a),meta:f,meter:e(c,{meter:1}),nav:a,noscript:d({link:1,meta:1,style:1},c),object:d({param:1},c),ol:{li:1},optgroup:{option:1},option:i,output:c,p:c,param:f,pre:c,progress:e(c,{progress:1}),q:c,rp:c,rt:c,ruby:d({rp:1,rt:1},c),s:c,samp:c,script:i,section:d({style:1},a),select:{optgroup:1,option:1},small:c,source:f,span:c,strong:c,style:i,sub:c,summary:c,sup:c,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:a,textarea:i,tfoot:{tr:1},th:a,thead:{tr:1},time:e(c,{time:1}),title:i,tr:{th:1,td:1},track:f,u:c,ul:{li:1},"var":c,video:d({source:1,track:1},a),wbr:f,acronym:c,applet:d({param:1},a),basefont:f,big:c,center:a,dialog:f,dir:{li:1},font:c,isindex:f,noframes:a,strike:c,tt:c},d(e,{$block:d({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},b,g),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:c,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:d({body:1,head:1,html:1},e.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),e
}(),CKEDITOR.dom.event=function(d){this.$=d},CKEDITOR.dom.event.prototype={getKey:function(){return this.$.keyCode||this.$.which},getKeystroke:function(){var d=this.getKey();return(this.$.ctrlKey||this.$.metaKey)&&(d+=CKEDITOR.CTRL),this.$.shiftKey&&(d+=CKEDITOR.SHIFT),this.$.altKey&&(d+=CKEDITOR.ALT),d},preventDefault:function(d){var e=this.$;e.preventDefault?e.preventDefault():e.returnValue=!1,d&&this.stopPropagation()},stopPropagation:function(){var d=this.$;d.stopPropagation?d.stopPropagation():d.cancelBubble=!0},getTarget:function(){var d=this.$.target||this.$.srcElement;return d?new CKEDITOR.dom.node(d):null},getPhase:function(){return this.$.eventPhase||2
},getPageOffset:function(){var d=this.getTarget().getDocument().$;return{x:this.$.pageX||this.$.clientX+(d.documentElement.scrollLeft||d.body.scrollLeft),y:this.$.pageY||this.$.clientY+(d.documentElement.scrollTop||d.body.scrollTop)}}},CKEDITOR.CTRL=1114112,CKEDITOR.SHIFT=2228224,CKEDITOR.ALT=4456448,CKEDITOR.EVENT_PHASE_CAPTURING=1,CKEDITOR.EVENT_PHASE_AT_TARGET=2,CKEDITOR.EVENT_PHASE_BUBBLING=3,CKEDITOR.dom.domObject=function(d){d&&(this.$=d)},CKEDITOR.dom.domObject.prototype=function(){var d=function(d,c){return function(a){"undefined"!=typeof CKEDITOR&&d.fire(c,new CKEDITOR.dom.event(a))}};return{getPrivate:function(){var d;return(d=this.getCustomData("_"))||this.setCustomData("_",d={}),d
},on:function(e){var c=this.getCustomData("_cke_nativeListeners");return c||(c={},this.setCustomData("_cke_nativeListeners",c)),c[e]||(c=c[e]=d(this,e),this.$.addEventListener?this.$.addEventListener(e,c,!!CKEDITOR.event.useCapture):this.$.attachEvent&&this.$.attachEvent("on"+e,c)),CKEDITOR.event.prototype.on.apply(this,arguments)},removeListener:function(d){if(CKEDITOR.event.prototype.removeListener.apply(this,arguments),!this.hasListeners(d)){var c=this.getCustomData("_cke_nativeListeners"),a=c&&c[d];a&&(this.$.removeEventListener?this.$.removeEventListener(d,a,!1):this.$.detachEvent&&this.$.detachEvent("on"+d,a),delete c[d])}},removeAllListeners:function(){var c,d=this.getCustomData("_cke_nativeListeners");
for(c in d){var a=d[c];this.$.detachEvent?this.$.detachEvent("on"+c,a):this.$.removeEventListener&&this.$.removeEventListener(c,a,!1),delete d[c]}CKEDITOR.event.prototype.removeAllListeners.call(this)}}}(),function(d){var e={};CKEDITOR.on("reset",function(){e={}}),d.equals=function(c){try{return c&&c.$===this.$}catch(a){return!1}},d.setCustomData=function(c,a){var b=this.getUniqueId();return(e[b]||(e[b]={}))[c]=a,this},d.getCustomData=function(c){var a=this.$["data-cke-expando"];return(a=a&&e[a])&&c in a?a[c]:null},d.removeCustomData=function(c){var b,d,a=this.$["data-cke-expando"],a=a&&e[a];return a&&(b=a[c],d=c in a,delete a[c]),d?b:null},d.clearCustomData=function(){this.removeAllListeners();
var c=this.$["data-cke-expando"];c&&delete e[c]},d.getUniqueId=function(){return this.$["data-cke-expando"]||(this.$["data-cke-expando"]=CKEDITOR.tools.getNextNumber())},CKEDITOR.event.implementOn(d)}(CKEDITOR.dom.domObject.prototype),CKEDITOR.dom.node=function(d){return d?new CKEDITOR.dom[d.nodeType==CKEDITOR.NODE_DOCUMENT?"document":d.nodeType==CKEDITOR.NODE_ELEMENT?"element":d.nodeType==CKEDITOR.NODE_TEXT?"text":d.nodeType==CKEDITOR.NODE_COMMENT?"comment":d.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT?"documentFragment":"domObject"](d):this},CKEDITOR.dom.node.prototype=new CKEDITOR.dom.domObject,CKEDITOR.NODE_ELEMENT=1,CKEDITOR.NODE_DOCUMENT=9,CKEDITOR.NODE_TEXT=3,CKEDITOR.NODE_COMMENT=8,CKEDITOR.NODE_DOCUMENT_FRAGMENT=11,CKEDITOR.POSITION_IDENTICAL=0,CKEDITOR.POSITION_DISCONNECTED=1,CKEDITOR.POSITION_FOLLOWING=2,CKEDITOR.POSITION_PRECEDING=4,CKEDITOR.POSITION_IS_CONTAINED=8,CKEDITOR.POSITION_CONTAINS=16,CKEDITOR.tools.extend(CKEDITOR.dom.node.prototype,{appendTo:function(d,e){return d.append(this,e),d
},clone:function(d,e){var c=this.$.cloneNode(d),a=function(b){if(b["data-cke-expando"]&&(b["data-cke-expando"]=!1),b.nodeType==CKEDITOR.NODE_ELEMENT&&(e||b.removeAttribute("id",!1),d))for(var b=b.childNodes,c=0;c<b.length;c++)a(b[c])};return a(c),new CKEDITOR.dom.node(c)},hasPrevious:function(){return!!this.$.previousSibling},hasNext:function(){return!!this.$.nextSibling},insertAfter:function(d){return d.$.parentNode.insertBefore(this.$,d.$.nextSibling),d},insertBefore:function(d){return d.$.parentNode.insertBefore(this.$,d.$),d},insertBeforeMe:function(d){return this.$.parentNode.insertBefore(d.$,this.$),d},getAddress:function(d){for(var e=[],c=this.getDocument().$.documentElement,a=this.$;a&&a!=c;){var b=a.parentNode;
b&&e.unshift(this.getIndex.call({$:a},d)),a=b}return e},getDocument:function(){return new CKEDITOR.dom.document(this.$.ownerDocument||this.$.parentNode.ownerDocument)},getIndex:function(d){var a,e=this.$,c=-1;if(!this.$.parentNode)return c;do(!d||e==this.$||e.nodeType!=CKEDITOR.NODE_TEXT||!a&&e.nodeValue)&&(c++,a=e.nodeType==CKEDITOR.NODE_TEXT);while(e=e.previousSibling);return c},getNextSourceNode:function(d,e,c){if(c&&!c.call)var a=c,c=function(b){return!b.equals(a)};var b,d=!d&&this.getFirst&&this.getFirst();if(!d){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,!0)===!1)return null;d=this.getNext()}for(;!d&&(b=(b||this).getParent());){if(c&&c(b,!0)===!1)return null;
d=b.getNext()}return!d||c&&c(d)===!1?null:e&&e!=d.type?d.getNextSourceNode(!1,e,c):d},getPreviousSourceNode:function(d,e,c){if(c&&!c.call)var a=c,c=function(b){return!b.equals(a)};var b,d=!d&&this.getLast&&this.getLast();if(!d){if(this.type==CKEDITOR.NODE_ELEMENT&&c&&c(this,!0)===!1)return null;d=this.getPrevious()}for(;!d&&(b=(b||this).getParent());){if(c&&c(b,!0)===!1)return null;d=b.getPrevious()}return!d||c&&c(d)===!1?null:e&&d.type!=e?d.getPreviousSourceNode(!1,e,c):d},getPrevious:function(d){var c,e=this.$;do c=(e=e.previousSibling)&&10!=e.nodeType&&new CKEDITOR.dom.node(e);while(c&&d&&!d(c));return c},getNext:function(d){var c,e=this.$;do c=(e=e.nextSibling)&&new CKEDITOR.dom.node(e);
while(c&&d&&!d(c));return c},getParent:function(d){var e=this.$.parentNode;return e&&(e.nodeType==CKEDITOR.NODE_ELEMENT||d&&e.nodeType==CKEDITOR.NODE_DOCUMENT_FRAGMENT)?new CKEDITOR.dom.node(e):null},getParents:function(d){var e=this,c=[];do c[d?"push":"unshift"](e);while(e=e.getParent());return c},getCommonAncestor:function(d){if(d.equals(this))return this;if(d.contains&&d.contains(this))return d;var e=this.contains?this:this.getParent();do if(e.contains(d))return e;while(e=e.getParent());return null},getPosition:function(d){var e=this.$,c=d.$;if(e.compareDocumentPosition)return e.compareDocumentPosition(c);if(e==c)return CKEDITOR.POSITION_IDENTICAL;if(this.type==CKEDITOR.NODE_ELEMENT&&d.type==CKEDITOR.NODE_ELEMENT){if(e.contains){if(e.contains(c))return CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING;
if(c.contains(e))return CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING}if("sourceIndex"in e)return e.sourceIndex<0||c.sourceIndex<0?CKEDITOR.POSITION_DISCONNECTED:e.sourceIndex<c.sourceIndex?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING}for(var e=this.getAddress(),d=d.getAddress(),c=Math.min(e.length,d.length),a=0;c-1>=a;a++)if(e[a]!=d[a]){if(c>a)return e[a]<d[a]?CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_FOLLOWING;break}return e.length<d.length?CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_PRECEDING:CKEDITOR.POSITION_IS_CONTAINED+CKEDITOR.POSITION_FOLLOWING},getAscendant:function(d,e){var a,c=this.$;for(e||(c=c.parentNode);c;){if(c.nodeName&&(a=c.nodeName.toLowerCase(),"string"==typeof d?a==d:a in d))return new CKEDITOR.dom.node(c);
try{c=c.parentNode}catch(b){c=null}}return null},hasAscendant:function(d,e){var c=this.$;for(e||(c=c.parentNode);c;){if(c.nodeName&&c.nodeName.toLowerCase()==d)return!0;c=c.parentNode}return!1},move:function(d,e){d.append(this.remove(),e)},remove:function(d){var e=this.$,c=e.parentNode;if(c){if(d)for(;d=e.firstChild;)c.insertBefore(e.removeChild(d),e);c.removeChild(e)}return this},replace:function(d){this.insertBefore(d),d.remove()},trim:function(){this.ltrim(),this.rtrim()},ltrim:function(){for(var d;this.getFirst&&(d=this.getFirst());){if(d.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.ltrim(d.getText()),c=d.getLength();if(!e){d.remove();continue}e.length<c&&(d.split(c-e.length),this.$.removeChild(this.$.firstChild))
}break}},rtrim:function(){for(var d;this.getLast&&(d=this.getLast());){if(d.type==CKEDITOR.NODE_TEXT){var e=CKEDITOR.tools.rtrim(d.getText()),c=d.getLength();if(!e){d.remove();continue}e.length<c&&(d.split(e.length),this.$.lastChild.parentNode.removeChild(this.$.lastChild))}break}CKEDITOR.env.needsBrFiller&&(d=this.$.lastChild)&&1==d.type&&"br"==d.nodeName.toLowerCase()&&d.parentNode.removeChild(d)},isReadOnly:function(){var d=this;if(this.type!=CKEDITOR.NODE_ELEMENT&&(d=this.getParent()),d&&"undefined"!=typeof d.$.isContentEditable)return!(d.$.isContentEditable||d.data("cke-editable"));for(;d&&!d.data("cke-editable");){if("false"==d.getAttribute("contentEditable"))return!0;
if("true"==d.getAttribute("contentEditable"))break;d=d.getParent()}return!d}}),CKEDITOR.dom.window=function(d){CKEDITOR.dom.domObject.call(this,d)},CKEDITOR.dom.window.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.window.prototype,{focus:function(){this.$.focus()},getViewPaneSize:function(){var d=this.$.document,e="CSS1Compat"==d.compatMode;return{width:(e?d.documentElement.clientWidth:d.body.clientWidth)||0,height:(e?d.documentElement.clientHeight:d.body.clientHeight)||0}},getScrollPosition:function(){var d=this.$;return"pageXOffset"in d?{x:d.pageXOffset||0,y:d.pageYOffset||0}:(d=d.document,{x:d.documentElement.scrollLeft||d.body.scrollLeft||0,y:d.documentElement.scrollTop||d.body.scrollTop||0})
},getFrame:function(){var d=this.$.frameElement;return d?new CKEDITOR.dom.element.get(d):null}}),CKEDITOR.dom.document=function(d){CKEDITOR.dom.domObject.call(this,d)},CKEDITOR.dom.document.prototype=new CKEDITOR.dom.domObject,CKEDITOR.tools.extend(CKEDITOR.dom.document.prototype,{type:CKEDITOR.NODE_DOCUMENT,appendStyleSheet:function(d){if(this.$.createStyleSheet)this.$.createStyleSheet(d);else{var e=new CKEDITOR.dom.element("link");e.setAttributes({rel:"stylesheet",type:"text/css",href:d}),this.getHead().append(e)}},appendStyleText:function(d){if(this.$.createStyleSheet){var e=this.$.createStyleSheet("");e.cssText=d}else{var c=new CKEDITOR.dom.element("style",this);
c.append(new CKEDITOR.dom.text(d,this)),this.getHead().append(c)}return e||c.$.sheet},createElement:function(d,e){var c=new CKEDITOR.dom.element(d,this);return e&&(e.attributes&&c.setAttributes(e.attributes),e.styles&&c.setStyles(e.styles)),c},createText:function(d){return new CKEDITOR.dom.text(d,this)},focus:function(){this.getWindow().focus()},getActive:function(){return new CKEDITOR.dom.element(this.$.activeElement)},getById:function(d){return(d=this.$.getElementById(d))?new CKEDITOR.dom.element(d):null},getByAddress:function(d,e){for(var c=this.$.documentElement,a=0;c&&a<d.length;a++){var b=d[a];if(e)for(var h=-1,f=0;f<c.childNodes.length;f++){var i=c.childNodes[f];
if((e!==!0||3!=i.nodeType||!i.previousSibling||3!=i.previousSibling.nodeType)&&(h++,h==b)){c=i;break}}else c=c.childNodes[b]}return c?new CKEDITOR.dom.node(c):null},getElementsByTag:function(d,e){return(!CKEDITOR.env.ie||document.documentMode>8)&&e&&(d=e+":"+d),new CKEDITOR.dom.nodeList(this.$.getElementsByTagName(d))},getHead:function(){var d=this.$.getElementsByTagName("head")[0];return d=d?new CKEDITOR.dom.element(d):this.getDocumentElement().append(new CKEDITOR.dom.element("head"),!0)},getBody:function(){return new CKEDITOR.dom.element(this.$.body)},getDocumentElement:function(){return new CKEDITOR.dom.element(this.$.documentElement)},getWindow:function(){return new CKEDITOR.dom.window(this.$.parentWindow||this.$.defaultView)
},write:function(d){this.$.open("text/html","replace"),CKEDITOR.env.ie&&(d=d.replace(/(?:^\s*<!DOCTYPE[^>]*?>)|^/i,'$&\n<script data-cke-temp="1">('+CKEDITOR.tools.fixDomain+")();</script>")),this.$.write(d),this.$.close()},find:function(d){return new CKEDITOR.dom.nodeList(this.$.querySelectorAll(d))},findOne:function(d){return(d=this.$.querySelector(d))?new CKEDITOR.dom.element(d):null},_getHtml5ShivFrag:function(){var d=this.getCustomData("html5ShivFrag");return d||(d=this.$.createDocumentFragment(),CKEDITOR.tools.enableHtml5Elements(d,!0),this.setCustomData("html5ShivFrag",d)),d}}),CKEDITOR.dom.nodeList=function(d){this.$=d},CKEDITOR.dom.nodeList.prototype={count:function(){return this.$.length
},getItem:function(d){return 0>d||d>=this.$.length?null:(d=this.$[d])?new CKEDITOR.dom.node(d):null}},CKEDITOR.dom.element=function(d,e){"string"==typeof d&&(d=(e?e.$:document).createElement(d)),CKEDITOR.dom.domObject.call(this,d)},CKEDITOR.dom.element.get=function(d){return(d="string"==typeof d?document.getElementById(d)||document.getElementsByName(d)[0]:d)&&(d.$?d:new CKEDITOR.dom.element(d))},CKEDITOR.dom.element.prototype=new CKEDITOR.dom.node,CKEDITOR.dom.element.createFromHtml=function(d,e){var c=new CKEDITOR.dom.element("div",e);return c.setHtml(d),c.getFirst().remove()},CKEDITOR.dom.element.setMarker=function(d,e,c,a){var b=e.getCustomData("list_marker_id")||e.setCustomData("list_marker_id",CKEDITOR.tools.getNextNumber()).getCustomData("list_marker_id"),h=e.getCustomData("list_marker_names")||e.setCustomData("list_marker_names",{}).getCustomData("list_marker_names");
return d[b]=e,h[c]=1,e.setCustomData(c,a)},CKEDITOR.dom.element.clearAllMarkers=function(d){for(var e in d)CKEDITOR.dom.element.clearMarkers(d,d[e],1)},CKEDITOR.dom.element.clearMarkers=function(d,e,c){var h,a=e.getCustomData("list_marker_names"),b=e.getCustomData("list_marker_id");for(h in a)e.removeCustomData(h);e.removeCustomData("list_marker_names"),c&&(e.removeCustomData("list_marker_id"),delete d[b])},function(){function d(b){var a=!0;return b.$.id||(b.$.id="cke_tmp_"+CKEDITOR.tools.getNextNumber(),a=!1),function(){a||b.removeAttribute("id")}}function e(b,a){return"#"+b.$.id+" "+a.split(/,\s*/).join(", #"+b.$.id+" ")}function c(b){for(var c=0,d=0,i=a[b].length;i>d;d++)c+=parseInt(this.getComputedStyle(a[b][d])||0,10)||0;
return c}CKEDITOR.tools.extend(CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_ELEMENT,addClass:function(b){var a=this.$.className;a&&(RegExp("(?:^|\\s)"+b+"(?:\\s|$)","").test(a)||(a+=" "+b)),this.$.className=a||b},removeClass:function(b){var a=this.getAttribute("class");return a&&(b=RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","i"),b.test(a)&&((a=a.replace(b,"").replace(/^\s+/,""))?this.setAttribute("class",a):this.removeAttribute("class"))),this},hasClass:function(b){return RegExp("(?:^|\\s+)"+b+"(?=\\s|$)","").test(this.getAttribute("class"))},append:function(b,a){return"string"==typeof b&&(b=this.getDocument().createElement(b)),a?this.$.insertBefore(b.$,this.$.firstChild):this.$.appendChild(b.$),b
},appendHtml:function(b){if(this.$.childNodes.length){var a=new CKEDITOR.dom.element("div",this.getDocument());a.setHtml(b),a.moveChildren(this)}else this.setHtml(b)},appendText:function(b){void 0!=this.$.text?this.$.text=this.$.text+b:this.append(new CKEDITOR.dom.text(b))},appendBogus:function(b){if(b||CKEDITOR.env.needsBrFiller||CKEDITOR.env.opera){for(b=this.getLast();b&&b.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.rtrim(b.getText());)b=b.getPrevious();b&&b.is&&b.is("br")||(b=CKEDITOR.env.opera?this.getDocument().createText(""):this.getDocument().createElement("br"),CKEDITOR.env.gecko&&b.setAttribute("type","_moz"),this.append(b))}},breakParent:function(b){var a=new CKEDITOR.dom.range(this.getDocument());
a.setStartAfter(this),a.setEndAfter(b),b=a.extractContents(),a.insertNode(this.remove()),b.insertAfterNode(this)},contains:CKEDITOR.env.ie||CKEDITOR.env.webkit?function(b){var a=this.$;return b.type!=CKEDITOR.NODE_ELEMENT?a.contains(b.getParent().$):a!=b.$&&a.contains(b.$)}:function(b){return!!(16&this.$.compareDocumentPosition(b.$))},focus:function(){function b(){try{this.$.focus()}catch(b){}}return function(a){a?CKEDITOR.tools.setTimeout(b,100,this):b.call(this)}}(),getHtml:function(){var b=this.$.innerHTML;return CKEDITOR.env.ie?b.replace(/<\?[^>]*>/g,""):b},getOuterHtml:function(){if(this.$.outerHTML)return this.$.outerHTML.replace(/<\?[^>]*>/,"");var b=this.$.ownerDocument.createElement("div");
return b.appendChild(this.$.cloneNode(!0)),b.innerHTML},getClientRect:function(){var b=CKEDITOR.tools.extend({},this.$.getBoundingClientRect());return!b.width&&(b.width=b.right-b.left),!b.height&&(b.height=b.bottom-b.top),b},setHtml:CKEDITOR.env.ie&&CKEDITOR.env.version<9?function(b){try{var a=this.$;if(this.getParent())return a.innerHTML=b;var c=this.getDocument()._getHtml5ShivFrag();return c.appendChild(a),a.innerHTML=b,c.removeChild(a),b}catch(d){for(this.$.innerHTML="",a=new CKEDITOR.dom.element("body",this.getDocument()),a.$.innerHTML=b,a=a.getChildren();a.count();)this.append(a.getItem(0));return b}}:function(b){return this.$.innerHTML=b},setText:function(b){return CKEDITOR.dom.element.prototype.setText=void 0!=this.$.innerText?function(b){return this.$.innerText=b
}:function(b){return this.$.textContent=b},this.setText(b)},getAttribute:function(){var b=function(b){return this.$.getAttribute(b,2)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){switch(b){case"class":b="className";break;case"http-equiv":b="httpEquiv";break;case"name":return this.$.name;case"tabindex":return b=this.$.getAttribute(b,2),0!==b&&0===this.$.tabIndex&&(b=null),b;case"checked":return b=this.$.attributes.getNamedItem(b),(b.specified?b.nodeValue:this.$.checked)?"checked":null;case"hspace":case"value":return this.$[b];case"style":return this.$.style.cssText;case"contenteditable":case"contentEditable":return this.$.attributes.getNamedItem("contentEditable").specified?this.$.getAttribute("contentEditable"):null
}return this.$.getAttribute(b,2)}:b}(),getChildren:function(){return new CKEDITOR.dom.nodeList(this.$.childNodes)},getComputedStyle:CKEDITOR.env.ie?function(b){return this.$.currentStyle[CKEDITOR.tools.cssStyleToDomStyle(b)]}:function(b){var a=this.getWindow().$.getComputedStyle(this.$,null);return a?a.getPropertyValue(b):""},getDtd:function(){var b=CKEDITOR.dtd[this.getName()];return this.getDtd=function(){return b},b},getElementsByTag:CKEDITOR.dom.document.prototype.getElementsByTag,getTabIndex:CKEDITOR.env.ie?function(){var b=this.$.tabIndex;return 0===b&&!CKEDITOR.dtd.$tabIndex[this.getName()]&&0!==parseInt(this.getAttribute("tabindex"),10)&&(b=-1),b}:CKEDITOR.env.webkit?function(){var b=this.$.tabIndex;
return void 0==b&&(b=parseInt(this.getAttribute("tabindex"),10),isNaN(b)&&(b=-1)),b}:function(){return this.$.tabIndex},getText:function(){return this.$.textContent||this.$.innerText||""},getWindow:function(){return this.getDocument().getWindow()},getId:function(){return this.$.id||null},getNameAtt:function(){return this.$.name||null},getName:function(){var b=this.$.nodeName.toLowerCase();if(CKEDITOR.env.ie&&!(document.documentMode>8)){var a=this.$.scopeName;"HTML"!=a&&(b=a.toLowerCase()+":"+b)}return(this.getName=function(){return b})()},getValue:function(){return this.$.value},getFirst:function(b){var a=this.$.firstChild;return(a=a&&new CKEDITOR.dom.node(a))&&b&&!b(a)&&(a=a.getNext(b)),a
},getLast:function(b){var a=this.$.lastChild;return(a=a&&new CKEDITOR.dom.node(a))&&b&&!b(a)&&(a=a.getPrevious(b)),a},getStyle:function(b){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]},is:function(){var b=this.getName();if("object"==typeof arguments[0])return!!arguments[0][b];for(var a=0;a<arguments.length;a++)if(arguments[a]==b)return!0;return!1},isEditable:function(b){var a=this.getName();return this.isReadOnly()||"none"==this.getComputedStyle("display")||"hidden"==this.getComputedStyle("visibility")||CKEDITOR.dtd.$nonEditable[a]||CKEDITOR.dtd.$empty[a]||this.is("a")&&(this.data("cke-saved-name")||this.hasAttribute("name"))&&!this.getChildCount()?!1:b!==!1?(b=CKEDITOR.dtd[a]||CKEDITOR.dtd.span,!(!b||!b["#"])):!0
},isIdentical:function(b){var a=this.clone(0,1),b=b.clone(0,1);if(a.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),b.removeAttributes(["_moz_dirty","data-cke-expando","data-cke-saved-href","data-cke-saved-name"]),a.$.isEqualNode)return a.$.style.cssText=CKEDITOR.tools.normalizeCssText(a.$.style.cssText),b.$.style.cssText=CKEDITOR.tools.normalizeCssText(b.$.style.cssText),a.$.isEqualNode(b.$);if(a=a.getOuterHtml(),b=b.getOuterHtml(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&this.is("a")){var c=this.getParent();c.type==CKEDITOR.NODE_ELEMENT&&(c=c.clone(),c.setHtml(a),a=c.getHtml(),c.setHtml(b),b=c.getHtml())}return a==b
},isVisible:function(){var a,c,b=(this.$.offsetHeight||this.$.offsetWidth)&&"hidden"!=this.getComputedStyle("visibility");return b&&(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(a=this.getWindow(),!a.equals(CKEDITOR.document.getWindow())&&(c=a.$.frameElement)&&(b=new CKEDITOR.dom.element(c).isVisible())),!!b},isEmptyInlineRemoveable:function(){if(!CKEDITOR.dtd.$removeEmpty[this.getName()])return!1;for(var b=this.getChildren(),a=0,c=b.count();c>a;a++){var d=b.getItem(a);if((d.type!=CKEDITOR.NODE_ELEMENT||!d.data("cke-bookmark"))&&(d.type==CKEDITOR.NODE_ELEMENT&&!d.isEmptyInlineRemoveable()||d.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(d.getText())))return!1}return!0
},hasAttributes:CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(){for(var b=this.$.attributes,a=0;a<b.length;a++){var c=b[a];switch(c.nodeName){case"class":if(this.getAttribute("class"))return!0;case"data-cke-expando":continue;default:if(c.specified)return!0}}return!1}:function(){var b=this.$.attributes,a=b.length,c={"data-cke-expando":1,_moz_dirty:1};return a>0&&(a>2||!c[b[0].nodeName]||2==a&&!c[b[1].nodeName])},hasAttribute:function(){function b(b){return b=this.$.attributes.getNamedItem(b),!(!b||!b.specified)}return CKEDITOR.env.ie&&CKEDITOR.env.version<8?function(a){return"name"==a?!!this.$.name:b.call(this,a)}:b}(),hide:function(){this.setStyle("display","none")
},moveChildren:function(b,a){var c=this.$,b=b.$;if(c!=b){var d;if(a)for(;d=c.lastChild;)b.insertBefore(c.removeChild(d),b.firstChild);else for(;d=c.firstChild;)b.appendChild(c.removeChild(d))}},mergeSiblings:function(){function b(b,a,c){if(a&&a.type==CKEDITOR.NODE_ELEMENT){for(var d=[];a.data("cke-bookmark")||a.isEmptyInlineRemoveable();)if(d.push(a),a=c?a.getNext():a.getPrevious(),!a||a.type!=CKEDITOR.NODE_ELEMENT)return;if(b.isIdentical(a)){for(var j=c?b.getLast():b.getFirst();d.length;)d.shift().move(b,!c);a.moveChildren(b,!c),a.remove(),j&&j.type==CKEDITOR.NODE_ELEMENT&&j.mergeSiblings()}}}return function(a){(a===!1||CKEDITOR.dtd.$removeEmpty[this.getName()]||this.is("a"))&&(b(this,this.getNext(),!0),b(this,this.getPrevious()))
}}(),show:function(){this.setStyles({display:"",visibility:""})},setAttribute:function(){var b=function(b,a){return this.$.setAttribute(b,a),this};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(a,c){return"class"==a?this.$.className=c:"style"==a?this.$.style.cssText=c:"tabindex"==a?this.$.tabIndex=c:"checked"==a?this.$.checked=c:"contenteditable"==a?b.call(this,"contentEditable",c):b.apply(this,arguments),this}:CKEDITOR.env.ie8Compat&&CKEDITOR.env.secure?function(a,c){if("src"==a&&c.match(/^http:\/\//))try{b.apply(this,arguments)}catch(d){}else b.apply(this,arguments);return this}:b}(),setAttributes:function(b){for(var a in b)this.setAttribute(a,b[a]);
return this},setValue:function(b){return this.$.value=b,this},removeAttribute:function(){var b=function(b){this.$.removeAttribute(b)};return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)?function(b){"class"==b?b="className":"tabindex"==b?b="tabIndex":"contenteditable"==b&&(b="contentEditable"),this.$.removeAttribute(b)}:b}(),removeAttributes:function(b){if(CKEDITOR.tools.isArray(b))for(var a=0;a<b.length;a++)this.removeAttribute(b[a]);else for(a in b)b.hasOwnProperty(a)&&this.removeAttribute(a)},removeStyle:function(b){var a=this.$.style;if(a.removeProperty||"border"!=b&&"margin"!=b&&"padding"!=b)a.removeProperty?a.removeProperty(b):a.removeAttribute(CKEDITOR.tools.cssStyleToDomStyle(b)),this.$.style.cssText||this.removeAttribute("style");
else{var d,c=["top","left","right","bottom"];"border"==b&&(d=["color","style","width"]);for(var a=[],g=0;g<c.length;g++)if(d)for(var j=0;j<d.length;j++)a.push([b,c[g],d[j]].join("-"));else a.push([b,c[g]].join("-"));for(b=0;b<a.length;b++)this.removeStyle(a[b])}},setStyle:function(b,a){return this.$.style[CKEDITOR.tools.cssStyleToDomStyle(b)]=a,this},setStyles:function(b){for(var a in b)this.setStyle(a,b[a]);return this},setOpacity:function(b){CKEDITOR.env.ie&&CKEDITOR.env.version<9?(b=Math.round(100*b),this.setStyle("filter",b>=100?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+b+")")):this.setStyle("opacity",b)},unselectable:function(){if(this.setStyles(CKEDITOR.tools.cssVendorPrefix("user-select","none")),CKEDITOR.env.ie||CKEDITOR.env.opera){this.setAttribute("unselectable","on");
for(var b,a=this.getElementsByTag("*"),c=0,d=a.count();d>c;c++)b=a.getItem(c),b.setAttribute("unselectable","on")}},getPositionedAncestor:function(){for(var b=this;"html"!=b.getName();){if("static"!=b.getComputedStyle("position"))return b;b=b.getParent()}return null},getDocumentPosition:function(b){var a=0,c=0,d=this.getDocument(),g=d.getBody(),j="BackCompat"==d.$.compatMode;if(document.documentElement.getBoundingClientRect){var l=this.$.getBoundingClientRect(),e=d.$.documentElement,o=e.clientTop||g.$.clientTop||0,p=e.clientLeft||g.$.clientLeft||0,k=!0;CKEDITOR.env.ie&&(k=d.getDocumentElement().contains(this),d=d.getBody().contains(this),k=j&&d||!j&&k),k&&(a=l.left+(!j&&e.scrollLeft||g.$.scrollLeft),a-=p,c=l.top+(!j&&e.scrollTop||g.$.scrollTop),c-=o)
}else for(g=this,d=null;g&&"body"!=g.getName()&&"html"!=g.getName();){for(a+=g.$.offsetLeft-g.$.scrollLeft,c+=g.$.offsetTop-g.$.scrollTop,g.equals(this)||(a+=g.$.clientLeft||0,c+=g.$.clientTop||0);d&&!d.equals(g);)a-=d.$.scrollLeft,c-=d.$.scrollTop,d=d.getParent();d=g,g=(l=g.$.offsetParent)?new CKEDITOR.dom.element(l):null}return b&&(g=this.getWindow(),d=b.getWindow(),!g.equals(d)&&g.$.frameElement&&(b=new CKEDITOR.dom.element(g.$.frameElement).getDocumentPosition(b),a+=b.x,c+=b.y)),document.documentElement.getBoundingClientRect||!CKEDITOR.env.gecko||j||(a+=this.$.clientLeft?1:0,c+=this.$.clientTop?1:0),{x:a,y:c}},scrollIntoView:function(b){var a=this.getParent();
if(a)do if((a.$.clientWidth&&a.$.clientWidth<a.$.scrollWidth||a.$.clientHeight&&a.$.clientHeight<a.$.scrollHeight)&&!a.is("body")&&this.scrollIntoParent(a,b,1),a.is("html")){var c=a.getWindow();try{var d=c.$.frameElement;d&&(a=new CKEDITOR.dom.element(d))}catch(g){}}while(a=a.getParent())},scrollIntoParent:function(a,c,d){function e(c,d){/body|html/.test(a.getName())?a.getWindow().$.scrollBy(c,d):(a.$.scrollLeft=a.$.scrollLeft+c,a.$.scrollTop=a.$.scrollTop+d)}function o(a,b){var c={x:0,y:0};if(!a.is(k?"body":"html")){var d=a.$.getBoundingClientRect();c.x=d.left,c.y=d.top}return d=a.getWindow(),d.equals(b)||(d=o(CKEDITOR.dom.element.get(d.$.frameElement),b),c.x=c.x+d.x,c.y=c.y+d.y),c
}function p(a,b){return parseInt(a.getComputedStyle("margin-"+b)||0,10)||0}var i,g,j,l;!a&&(a=this.getWindow()),j=a.getDocument();var k="BackCompat"==j.$.compatMode;a instanceof CKEDITOR.dom.window&&(a=k?j.getBody():j.getDocumentElement()),j=a.getWindow(),g=o(this,j);var n=o(a,j),u=this.$.offsetHeight;i=this.$.offsetWidth;var v=a.$.clientHeight,s=a.$.clientWidth;j=g.x-p(this,"left")-n.x||0,l=g.y-p(this,"top")-n.y||0,i=g.x+i+p(this,"right")-(n.x+s)||0,g=g.y+u+p(this,"bottom")-(n.y+v)||0,(0>l||g>0)&&e(0,c===!0?l:c===!1?g:0>l?l:g),d&&(0>j||i>0)&&e(0>j?j:i,0)},setState:function(a,c,d){switch(c=c||"cke",a){case CKEDITOR.TRISTATE_ON:this.addClass(c+"_on"),this.removeClass(c+"_off"),this.removeClass(c+"_disabled"),d&&this.setAttribute("aria-pressed",!0),d&&this.removeAttribute("aria-disabled");
break;case CKEDITOR.TRISTATE_DISABLED:this.addClass(c+"_disabled"),this.removeClass(c+"_off"),this.removeClass(c+"_on"),d&&this.setAttribute("aria-disabled",!0),d&&this.removeAttribute("aria-pressed");break;default:this.addClass(c+"_off"),this.removeClass(c+"_on"),this.removeClass(c+"_disabled"),d&&this.removeAttribute("aria-pressed"),d&&this.removeAttribute("aria-disabled")}},getFrameDocument:function(){var a=this.$;try{a.contentWindow.document}catch(c){a.src=a.src}return a&&new CKEDITOR.dom.document(a.contentWindow.document)},copyAttributes:function(a,c){for(var d=this.$.attributes,c=c||{},i=0;i<d.length;i++){var l,g=d[i],j=g.nodeName.toLowerCase();j in c||("checked"==j&&(l=this.getAttribute(j))?a.setAttribute(j,l):(g.specified||CKEDITOR.env.ie&&g.nodeValue&&"value"==j)&&(l=this.getAttribute(j),null===l&&(l=g.nodeValue),a.setAttribute(j,l)))
}""!==this.$.style.cssText&&(a.$.style.cssText=this.$.style.cssText)},renameNode:function(a){if(this.getName()!=a){var c=this.getDocument(),a=new CKEDITOR.dom.element(a,c);this.copyAttributes(a),this.moveChildren(a),this.getParent()&&this.$.parentNode.replaceChild(a.$,this.$),a.$["data-cke-expando"]=this.$["data-cke-expando"],this.$=a.$,delete this.getName}},getChild:function(){function a(b,c){var d=b.childNodes;return c>=0&&c<d.length?d[c]:void 0}return function(c){var d=this.$;if(c.slice)for(;c.length>0&&d;)d=a(d,c.shift());else d=a(d,c);return d?new CKEDITOR.dom.node(d):null}}(),getChildCount:function(){return this.$.childNodes.length},disableContextMenu:function(){this.on("contextmenu",function(a){a.data.getTarget().hasClass("cke_enable_context_menu")||a.data.preventDefault()
})},getDirection:function(a){return a?this.getComputedStyle("direction")||this.getDirection()||this.getParent()&&this.getParent().getDirection(1)||this.getDocument().$.dir||"ltr":this.getStyle("direction")||this.getAttribute("dir")},data:function(a,c){return a="data-"+a,void 0===c?this.getAttribute(a):(c===!1?this.removeAttribute(a):this.setAttribute(a,c),null)},getEditor:function(){var c,d,a=CKEDITOR.instances;for(c in a)if(d=a[c],d.element.equals(this)&&d.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO)return d;return null},find:function(a){var c=d(this),a=new CKEDITOR.dom.nodeList(this.$.querySelectorAll(e(this,a)));return c(),a},findOne:function(a){var c=d(this),a=this.$.querySelector(e(this,a));
return c(),a?new CKEDITOR.dom.element(a):null},forEach:function(a,c,d){if(!(d||c&&this.type!=c))var i=a(this);if(i!==!1)for(var d=this.getChildren(),g=0;g<d.count();g++)i=d.getItem(g),i.type==CKEDITOR.NODE_ELEMENT?i.forEach(a,c):(!c||i.type==c)&&a(i)}});var a={width:["border-left-width","border-right-width","padding-left","padding-right"],height:["border-top-width","border-bottom-width","padding-top","padding-bottom"]};CKEDITOR.dom.element.prototype.setSize=function(a,d,f){"number"==typeof d&&(!f||CKEDITOR.env.ie&&CKEDITOR.env.quirks||(d-=c.call(this,a)),this.setStyle(a,d+"px"))},CKEDITOR.dom.element.prototype.getSize=function(a,d){var f=Math.max(this.$["offset"+CKEDITOR.tools.capitalize(a)],this.$["client"+CKEDITOR.tools.capitalize(a)])||0;
return d&&(f-=c.call(this,a)),f}}(),CKEDITOR.dom.documentFragment=function(d){d=d||CKEDITOR.document,this.$=d.type==CKEDITOR.NODE_DOCUMENT?d.$.createDocumentFragment():d},CKEDITOR.tools.extend(CKEDITOR.dom.documentFragment.prototype,CKEDITOR.dom.element.prototype,{type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,insertAfterNode:function(d){d=d.$,d.parentNode.insertBefore(this.$,d.nextSibling)}},!0,{append:1,appendBogus:1,getFirst:1,getLast:1,getParent:1,getNext:1,getPrevious:1,appendTo:1,moveChildren:1,insertBefore:1,insertAfterNode:1,replace:1,trim:1,type:1,ltrim:1,rtrim:1,getDocument:1,getChildCount:1,getChild:1,getChildren:1}),function(){function d(a,b){var c=this.range;
if(this._.end)return null;if(!this._.start){if(this._.start=1,c.collapsed)return this.end(),null;c.optimize()}var d,l=c.startContainer;d=c.endContainer;var i,g=c.startOffset,f=c.endOffset,j=this.guard,e=this.type,h=a?"getPreviousSourceNode":"getNextSourceNode";if(!a&&!this._.guardLTR){var x=d.type==CKEDITOR.NODE_ELEMENT?d:d.getParent(),q=d.type==CKEDITOR.NODE_ELEMENT?d.getChild(f):d.getNext();this._.guardLTR=function(a,b){return!(b&&x.equals(a)||q&&a.equals(q)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))}}if(a&&!this._.guardRTL){var w=l.type==CKEDITOR.NODE_ELEMENT?l:l.getParent(),y=l.type==CKEDITOR.NODE_ELEMENT?g?l.getChild(g-1):null:l.getPrevious();this._.guardRTL=function(a,b){return!(b&&w.equals(a)||y&&a.equals(y)||a.type==CKEDITOR.NODE_ELEMENT&&b&&a.equals(c.root))
}}var A=a?this._.guardRTL:this._.guardLTR;for(i=j?function(a,b){return A(a,b)===!1?!1:j(a,b)}:A,this.current?d=this.current[h](!1,e,i):(a?d.type==CKEDITOR.NODE_ELEMENT&&(d=f>0?d.getChild(f-1):i(d,!0)===!1?null:d.getPreviousSourceNode(!0,e,i)):(d=l,d.type!=CKEDITOR.NODE_ELEMENT||(d=d.getChild(g))||(d=i(l,!0)===!1?null:l.getNextSourceNode(!0,e,i))),d&&i(d)===!1&&(d=null));d&&!this._.end;){if(this.current=d,this.evaluator&&this.evaluator(d)===!1){if(b&&this.evaluator)return!1}else if(!b)return d;d=d[h](!1,e,i)}return this.end(),this.current=null}function e(a){for(var b,c=null;b=d.call(this,a);)c=b;return c}function c(a){if(j(a))return!1;if(a.type==CKEDITOR.NODE_TEXT)return!0;
if(a.type==CKEDITOR.NODE_ELEMENT){if(a.is(CKEDITOR.dtd.$inline)||"false"==a.getAttribute("contenteditable"))return!0;var b;if((b=!CKEDITOR.env.needsBrFiller)&&(b=a.is(l)))a:{b=0;for(var c=a.getChildCount();c>b;++b)if(!j(a.getChild(b))){b=!1;break a}b=!0}if(b)return!0}return!1}CKEDITOR.dom.walker=CKEDITOR.tools.createClass({$:function(a){this.range=a,this._={}},proto:{end:function(){this._.end=1},next:function(){return d.call(this)},previous:function(){return d.call(this,1)},checkForward:function(){return d.call(this,0,1)!==!1},checkBackward:function(){return d.call(this,1,1)!==!1},lastForward:function(){return e.call(this)},lastBackward:function(){return e.call(this,1)
},reset:function(){delete this.current,this._={}}}});var a={block:1,"list-item":1,table:1,"table-row-group":1,"table-header-group":1,"table-footer-group":1,"table-row":1,"table-column-group":1,"table-column":1,"table-cell":1,"table-caption":1},b={absolute:1,fixed:1};CKEDITOR.dom.element.prototype.isBlockBoundary=function(c){return"none"!=this.getComputedStyle("float")||this.getComputedStyle("position")in b||!a[this.getComputedStyle("display")]?!!(this.is(CKEDITOR.dtd.$block)||c&&this.is(c)):!0},CKEDITOR.dom.walker.blockBoundary=function(a){return function(b){return!(b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary(a))}},CKEDITOR.dom.walker.listItemBoundary=function(){return this.blockBoundary({br:1})
},CKEDITOR.dom.walker.bookmark=function(a,b){function c(a){return a&&a.getName&&"span"==a.getName()&&a.data("cke-bookmark")}return function(d){var l,g;return l=d&&d.type!=CKEDITOR.NODE_ELEMENT&&(g=d.getParent())&&c(g),l=a?l:l||c(d),!!(b^l)}},CKEDITOR.dom.walker.whitespaces=function(a){return function(b){var c;return b&&b.type==CKEDITOR.NODE_TEXT&&(c=!CKEDITOR.tools.trim(b.getText())||CKEDITOR.env.webkit&&"â"==b.getText()),!!(a^c)}},CKEDITOR.dom.walker.invisible=function(a){var b=CKEDITOR.dom.walker.whitespaces();return function(c){return b(c)?c=1:(c.type==CKEDITOR.NODE_TEXT&&(c=c.getParent()),c=!c.$.offsetHeight),!!(a^c)}},CKEDITOR.dom.walker.nodeType=function(a,b){return function(c){return!!(b^c.type==a)
}},CKEDITOR.dom.walker.bogus=function(a){function b(a){return!f(a)&&!i(a)}return function(c){var d=CKEDITOR.env.needsBrFiller?c.is&&c.is("br"):c.getText&&h.test(c.getText());return d&&(d=c.getParent(),c=c.getNext(b),d=d.isBlockBoundary()&&(!c||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary())),!!(a^d)}},CKEDITOR.dom.walker.temp=function(a){return function(b){return b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent()),b=b&&b.hasAttribute("data-cke-temp"),!!(a^b)}};var h=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,f=CKEDITOR.dom.walker.whitespaces(),i=CKEDITOR.dom.walker.bookmark(),g=CKEDITOR.dom.walker.temp();CKEDITOR.dom.walker.ignored=function(a){return function(b){return b=f(b)||i(b)||g(b),!!(a^b)
}};var j=CKEDITOR.dom.walker.ignored(),l=function(a){var c,b={};for(c in a)CKEDITOR.dtd[c]["#"]&&(b[c]=1);return b}(CKEDITOR.dtd.$block);CKEDITOR.dom.walker.editable=function(a){return function(b){return!!(a^c(b))}},CKEDITOR.dom.element.prototype.getBogus=function(){var a=this;do a=a.getPreviousSourceNode();while(i(a)||f(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.is(CKEDITOR.dtd.$inline)&&!a.is(CKEDITOR.dtd.$empty));return a&&(CKEDITOR.env.needsBrFiller?a.is&&a.is("br"):a.getText&&h.test(a.getText()))?a:!1}}(),CKEDITOR.dom.range=function(d){this.endOffset=this.endContainer=this.startOffset=this.startContainer=null,this.collapsed=!0;var e=d instanceof CKEDITOR.dom.document;
this.document=e?d:d.getDocument(),this.root=e?d.getBody():d},function(){function d(){var a=!1,b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!0),d=CKEDITOR.dom.walker.bogus();return function(k){return c(k)||b(k)?!0:d(k)&&!a?a=!0:k.type==CKEDITOR.NODE_TEXT&&(k.hasAscendant("pre")||CKEDITOR.tools.trim(k.getText()).length)||k.type==CKEDITOR.NODE_ELEMENT&&!k.is(h)?!1:!0}}function e(a){var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(1);return function(d){return c(d)||b(d)?!0:!a&&f(d)||d.type==CKEDITOR.NODE_ELEMENT&&d.is(CKEDITOR.dtd.$removeEmpty)}}function c(a){return function(){var b;return this[a?"getPreviousNode":"getNextNode"](function(a){return!b&&j(a)&&(b=a),g(a)&&!(f(a)&&a.equals(b))
})}}var a=function(a){a.collapsed=a.startContainer&&a.endContainer&&a.startContainer.equals(a.endContainer)&&a.startOffset==a.endOffset},b=function(a,b,c,d){a.optimizeBookmark();var j,e,k=a.startContainer,g=a.endContainer,f=a.startOffset,i=a.endOffset;g.type==CKEDITOR.NODE_TEXT?g=g.split(i):g.getChildCount()>0&&(i>=g.getChildCount()?(g=g.append(a.document.createText("")),e=!0):g=g.getChild(i)),k.type==CKEDITOR.NODE_TEXT?(k.split(f),k.equals(g)&&(g=k.getNext())):f?f>=k.getChildCount()?(k=k.append(a.document.createText("")),j=!0):k=k.getChild(f).getPrevious():(k=k.append(a.document.createText(""),1),j=!0);var h,z,x,f=k.getParents(),i=g.getParents();for(h=0;h<f.length&&(z=f[h],x=i[h],z.equals(x));h++);for(var w,y,A,q=c,D=h;D<f.length;D++){for(w=f[D],q&&!w.equals(k)&&(y=q.append(w.clone())),w=w.getNext();w&&(!w.equals(i[D])&&!w.equals(g));)A=w.getNext(),2==b?q.append(w.clone(!0)):(w.remove(),1==b&&q.append(w)),w=A;
q&&(q=y)}for(q=c,c=h;c<i.length;c++){if(w=i[c],b>0&&!w.equals(g)&&(y=q.append(w.clone())),!f[c]||w.$.parentNode!=f[c].$.parentNode)for(w=w.getPrevious();w&&(!w.equals(f[c])&&!w.equals(k));)A=w.getPrevious(),2==b?q.$.insertBefore(w.$.cloneNode(!0),q.$.firstChild):(w.remove(),1==b&&q.$.insertBefore(w.$,q.$.firstChild)),w=A;q&&(q=y)}2==b?(z=a.startContainer,z.type==CKEDITOR.NODE_TEXT&&(z.$.data=z.$.data+z.$.nextSibling.data,z.$.parentNode.removeChild(z.$.nextSibling)),a=a.endContainer,a.type==CKEDITOR.NODE_TEXT&&a.$.nextSibling&&(a.$.data=a.$.data+a.$.nextSibling.data,a.$.parentNode.removeChild(a.$.nextSibling))):(z&&x&&(k.$.parentNode!=z.$.parentNode||g.$.parentNode!=x.$.parentNode)&&(b=x.getIndex(),j&&x.$.parentNode==k.$.parentNode&&b--,d&&z.type==CKEDITOR.NODE_ELEMENT?(d=CKEDITOR.dom.element.createFromHtml('<span data-cke-bookmark="1" style="display:none">&nbsp;</span>',a.document),d.insertAfter(z),z.mergeSiblings(!1),a.moveToBookmark({startNode:d})):a.setStart(x.getParent(),b)),a.collapse(!0)),j&&k.remove(),e&&g.$.parentNode&&g.remove()
},h={abbr:1,acronym:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,"var":1},f=CKEDITOR.dom.walker.bogus(),i=/^[\t\r\n ]*(?:&nbsp;|\xa0)$/,g=CKEDITOR.dom.walker.editable(),j=CKEDITOR.dom.walker.ignored(!0);CKEDITOR.dom.range.prototype={clone:function(){var a=new CKEDITOR.dom.range(this.root);return a.startContainer=this.startContainer,a.startOffset=this.startOffset,a.endContainer=this.endContainer,a.endOffset=this.endOffset,a.collapsed=this.collapsed,a},collapse:function(a){a?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0
},cloneContents:function(){var a=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,2,a),a},deleteContents:function(a){this.collapsed||b(this,0,null,a)},extractContents:function(a){var c=new CKEDITOR.dom.documentFragment(this.document);return this.collapsed||b(this,1,c,a),c},createBookmark:function(a){var b,c,d,k,g=this.collapsed;return b=this.document.createElement("span"),b.data("cke-bookmark",1),b.setStyle("display","none"),b.setHtml("&nbsp;"),a&&(d="cke_bm_"+CKEDITOR.tools.getNextNumber(),b.setAttribute("id",d+(g?"C":"S"))),g||(c=b.clone(),c.setHtml("&nbsp;"),a&&c.setAttribute("id",d+"E"),k=this.clone(),k.collapse(),k.insertNode(c)),k=this.clone(),k.collapse(!0),k.insertNode(b),c?(this.setStartAfter(b),this.setEndBefore(c)):this.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),{startNode:a?d+(g?"C":"S"):b,endNode:a?d+"E":c,serializable:a,collapsed:g}
},createBookmark2:function(){function a(b){var k,c=b.container,d=b.offset;k=c;var l=d;if(k=k.type!=CKEDITOR.NODE_ELEMENT||0===l||l==k.getChildCount()?0:k.getChild(l-1).type==CKEDITOR.NODE_TEXT&&k.getChild(l).type==CKEDITOR.NODE_TEXT,k&&(c=c.getChild(d-1),d=c.getLength()),c.type==CKEDITOR.NODE_ELEMENT&&d>1&&(d=c.getChild(d-1).getIndex(!0)+1),c.type==CKEDITOR.NODE_TEXT){for(k=c,l=0;(k=k.getPrevious())&&k.type==CKEDITOR.NODE_TEXT;)l+=k.getLength();d+=l}b.container=c,b.offset=d}return function(b){var c=this.collapsed,d={container:this.startContainer,offset:this.startOffset},k={container:this.endContainer,offset:this.endOffset};return b&&(a(d),c||a(k)),{start:d.container.getAddress(b),end:c?null:k.container.getAddress(b),startOffset:d.offset,endOffset:k.offset,normalized:b,collapsed:c,is2:!0}
}}(),moveToBookmark:function(a){if(a.is2){var b=this.document.getByAddress(a.start,a.normalized),c=a.startOffset,d=a.end&&this.document.getByAddress(a.end,a.normalized),a=a.endOffset;this.setStart(b,c),d?this.setEnd(d,a):this.collapse(!0)}else b=(c=a.serializable)?this.document.getById(a.startNode):a.startNode,a=c?this.document.getById(a.endNode):a.endNode,this.setStartBefore(b),b.remove(),a?(this.setEndBefore(a),a.remove()):this.collapse(!0)},getBoundaryNodes:function(){var k,a=this.startContainer,b=this.endContainer,c=this.startOffset,d=this.endOffset;if(a.type==CKEDITOR.NODE_ELEMENT)if(k=a.getChildCount(),k>c)a=a.getChild(c);else if(1>k)a=a.getPreviousSourceNode();
else{for(a=a.$;a.lastChild;)a=a.lastChild;a=new CKEDITOR.dom.node(a),a=a.getNextSourceNode()||a}if(b.type==CKEDITOR.NODE_ELEMENT)if(k=b.getChildCount(),k>d)b=b.getChild(d).getPreviousSourceNode(!0);else if(1>k)b=b.getPreviousSourceNode();else{for(b=b.$;b.lastChild;)b=b.lastChild;b=new CKEDITOR.dom.node(b)}return a.getPosition(b)&CKEDITOR.POSITION_FOLLOWING&&(a=b),{startNode:a,endNode:b}},getCommonAncestor:function(a,b){var c=this.startContainer,d=this.endContainer,c=c.equals(d)?a&&c.type==CKEDITOR.NODE_ELEMENT&&this.startOffset==this.endOffset-1?c.getChild(this.startOffset):c:c.getCommonAncestor(d);return b&&!c.is?c.getParent():c},optimize:function(){var a=this.startContainer,b=this.startOffset;
a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setStartAfter(a):this.setStartBefore(a)),a=this.endContainer,b=this.endOffset,a.type!=CKEDITOR.NODE_ELEMENT&&(b?b>=a.getLength()&&this.setEndAfter(a):this.setEndBefore(a))},optimizeBookmark:function(){var a=this.startContainer,b=this.endContainer;a.is&&a.is("span")&&a.data("cke-bookmark")&&this.setStartAt(a,CKEDITOR.POSITION_BEFORE_START),b&&b.is&&b.is("span")&&b.data("cke-bookmark")&&this.setEndAt(b,CKEDITOR.POSITION_AFTER_END)},trim:function(a,b){var c=this.startContainer,d=this.startOffset,k=this.collapsed;if((!a||k)&&c&&c.type==CKEDITOR.NODE_TEXT){if(d)if(d>=c.getLength())d=c.getIndex()+1,c=c.getParent();
else{var g=c.split(d),d=c.getIndex()+1,c=c.getParent();this.startContainer.equals(this.endContainer)?this.setEnd(g,this.endOffset-this.startOffset):c.equals(this.endContainer)&&(this.endOffset=this.endOffset+1)}else d=c.getIndex(),c=c.getParent();if(this.setStart(c,d),k)return void this.collapse(!0)}c=this.endContainer,d=this.endOffset,b||k||!c||c.type!=CKEDITOR.NODE_TEXT||(d?(d>=c.getLength()||c.split(d),d=c.getIndex()+1):d=c.getIndex(),c=c.getParent(),this.setEnd(c,d))},enlarge:function(a,b){function c(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("contenteditable")?null:a}var d=RegExp(/[^\s\ufeff]/);switch(a){case CKEDITOR.ENLARGE_INLINE:var k=1;
case CKEDITOR.ENLARGE_ELEMENT:if(this.collapsed)break;var i,j,e,h,z,q,w,g=this.getCommonAncestor(),f=this.root,x=!1;q=this.startContainer;var y=this.startOffset;for(q.type==CKEDITOR.NODE_TEXT?(y&&(q=!CKEDITOR.tools.trim(q.substring(0,y)).length&&q,x=!!q),q&&!(h=q.getPrevious())&&(e=q.getParent())):(y&&(h=q.getChild(y-1)||q.getLast()),h||(e=q)),e=c(e);e||h;){if(e&&!h){if(!z&&e.equals(g)&&(z=!0),k?e.isBlockBoundary():!f.contains(e))break;x&&"inline"==e.getComputedStyle("display")||(x=!1,z?i=e:this.setStartBefore(e)),h=e.getPrevious()}for(;h;)if(q=!1,h.type==CKEDITOR.NODE_COMMENT)h=h.getPrevious();else{if(h.type==CKEDITOR.NODE_TEXT)w=h.getText(),d.test(w)&&(h=null),q=/[\s\ufeff]$/.test(w);
else if((h.$.offsetWidth>0||b&&h.is("br"))&&!h.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[h.getName()]){if(w=h.getText(),d.test(w))h=null;else for(var D,y=h.$.getElementsByTagName("*"),A=0;D=y[A++];)if(!CKEDITOR.dtd.$removeEmpty[D.nodeName.toLowerCase()]){h=null;break}h&&(q=!!w.length)}else h=null;if(q&&(x?z?i=e:e&&this.setStartBefore(e):x=!0),h){if(q=h.getPrevious(),!e&&!q){e=h,h=null;break}h=q}else e=null}e&&(e=c(e.getParent()))}q=this.endContainer,y=this.endOffset,e=h=null,z=x=!1;var G=function(a,b){var c=new CKEDITOR.dom.range(f);c.setStart(a,b),c.setEndAt(f,CKEDITOR.POSITION_BEFORE_END);var k,c=new CKEDITOR.dom.walker(c);for(c.guard=function(a){return!(a.type==CKEDITOR.NODE_ELEMENT&&a.isBlockBoundary())
};k=c.next();){if(k.type!=CKEDITOR.NODE_TEXT)return!1;if(w=k!=a?k.getText():k.substring(b),d.test(w))return!1}return!0};for(q.type==CKEDITOR.NODE_TEXT?CKEDITOR.tools.trim(q.substring(y)).length?x=!0:(x=!q.getLength(),y==q.getLength()?(h=q.getNext())||(e=q.getParent()):G(q,y)&&(e=q.getParent())):(h=q.getChild(y))||(e=q);e||h;){if(e&&!h){if(!z&&e.equals(g)&&(z=!0),k?e.isBlockBoundary():!f.contains(e))break;x&&"inline"==e.getComputedStyle("display")||(x=!1,z?j=e:e&&this.setEndAfter(e)),h=e.getNext()}for(;h;){if(q=!1,h.type==CKEDITOR.NODE_TEXT)w=h.getText(),G(h,0)||(h=null),q=/^[\s\ufeff]/.test(w);else if(h.type==CKEDITOR.NODE_ELEMENT){if((h.$.offsetWidth>0||b&&h.is("br"))&&!h.data("cke-bookmark"))if(x&&CKEDITOR.dtd.$removeEmpty[h.getName()]){if(w=h.getText(),d.test(w))h=null;
else for(y=h.$.getElementsByTagName("*"),A=0;D=y[A++];)if(!CKEDITOR.dtd.$removeEmpty[D.nodeName.toLowerCase()]){h=null;break}h&&(q=!!w.length)}else h=null}else q=1;if(q&&x&&(z?j=e:this.setEndAfter(e)),h){if(q=h.getNext(),!e&&!q){e=h,h=null;break}h=q}else e=null}e&&(e=c(e.getParent()))}i&&j&&(g=i.contains(j)?j:i,this.setStartBefore(g),this.setEndAfter(g));break;case CKEDITOR.ENLARGE_BLOCK_CONTENTS:case CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:e=new CKEDITOR.dom.range(this.root),f=this.root,e.setStartAt(f,CKEDITOR.POSITION_AFTER_START),e.setEnd(this.startContainer,this.startOffset),e=new CKEDITOR.dom.walker(e);var C,F,E=CKEDITOR.dom.walker.blockBoundary(a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?{br:1}:null),J=null,L=function(a){if(a.type==CKEDITOR.NODE_ELEMENT&&"false"==a.getAttribute("contenteditable"))if(J){if(J.equals(a))return void(J=null)
}else J=a;else if(J)return;var b=E(a);return b||(C=a),b},k=function(a){var b=L(a);return!b&&a.is&&a.is("br")&&(F=a),b};if(e.guard=L,e=e.lastBackward(),C=C||f,this.setStartAt(C,!C.is("br")&&(!e&&this.checkStartOfBlock()||e&&C.contains(e))?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_AFTER_END),a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS){e=this.clone(),e=new CKEDITOR.dom.walker(e);var H=CKEDITOR.dom.walker.whitespaces(),T=CKEDITOR.dom.walker.bookmark();if(e.evaluator=function(a){return!H(a)&&!T(a)},(e=e.previous())&&e.type==CKEDITOR.NODE_ELEMENT&&e.is("br"))break}e=this.clone(),e.collapse(),e.setEndAt(f,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.guard=a==CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS?k:L,C=null,e=e.lastForward(),C=C||f,this.setEndAt(C,!e&&this.checkEndOfBlock()||e&&C.contains(e)?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_BEFORE_START),F&&this.setEndAfter(F)
}},shrink:function(a,b,c){if(!this.collapsed){var a=a||CKEDITOR.SHRINK_TEXT,d=this.clone(),k=this.startContainer,g=this.endContainer,e=this.startOffset,f=this.endOffset,h=1,i=1;k&&k.type==CKEDITOR.NODE_TEXT&&(e?e>=k.getLength()?d.setStartAfter(k):(d.setStartBefore(k),h=0):d.setStartBefore(k)),g&&g.type==CKEDITOR.NODE_TEXT&&(f?f>=g.getLength()?d.setEndAfter(g):(d.setEndAfter(g),i=0):d.setEndBefore(g));var d=new CKEDITOR.dom.walker(d),j=CKEDITOR.dom.walker.bookmark();d.evaluator=function(b){return b.type==(a==CKEDITOR.SHRINK_ELEMENT?CKEDITOR.NODE_ELEMENT:CKEDITOR.NODE_TEXT)};var z;return d.guard=function(b,d){return j(b)?!0:a==CKEDITOR.SHRINK_ELEMENT&&b.type==CKEDITOR.NODE_TEXT||d&&b.equals(z)||c===!1&&b.type==CKEDITOR.NODE_ELEMENT&&b.isBlockBoundary()||b.type==CKEDITOR.NODE_ELEMENT&&b.hasAttribute("contenteditable")?!1:(!d&&b.type==CKEDITOR.NODE_ELEMENT&&(z=b),!0)
},h&&(k=d[a==CKEDITOR.SHRINK_ELEMENT?"lastForward":"next"]())&&this.setStartAt(k,b?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_START),i&&(d.reset(),(d=d[a==CKEDITOR.SHRINK_ELEMENT?"lastBackward":"previous"]())&&this.setEndAt(d,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_END)),!(!h&&!i)}},insertNode:function(a){this.optimizeBookmark(),this.trim(!1,!0);var b=this.startContainer,c=b.getChild(this.startOffset);c?a.insertBefore(c):b.append(a),a.getParent()&&a.getParent().equals(this.endContainer)&&this.endOffset++,this.setStartBefore(a)},moveToPosition:function(a,b){this.setStartAt(a,b),this.collapse(!0)},moveToRange:function(a){this.setStart(a.startContainer,a.startOffset),this.setEnd(a.endContainer,a.endOffset)
},selectNodeContents:function(a){this.setStart(a,0),this.setEnd(a,a.type==CKEDITOR.NODE_TEXT?a.getLength():a.getChildCount())},setStart:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex(),b=b.getParent()),this.startContainer=b,this.startOffset=c,this.endContainer||(this.endContainer=b,this.endOffset=c),a(this)},setEnd:function(b,c){b.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$empty[b.getName()]&&(c=b.getIndex()+1,b=b.getParent()),this.endContainer=b,this.endOffset=c,this.startContainer||(this.startContainer=b,this.startOffset=c),a(this)},setStartAfter:function(a){this.setStart(a.getParent(),a.getIndex()+1)},setStartBefore:function(a){this.setStart(a.getParent(),a.getIndex())
},setEndAfter:function(a){this.setEnd(a.getParent(),a.getIndex()+1)},setEndBefore:function(a){this.setEnd(a.getParent(),a.getIndex())},setStartAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setStart(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setStart(b,b.getLength()):this.setStart(b,b.getChildCount());break;case CKEDITOR.POSITION_BEFORE_START:this.setStartBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setStartAfter(b)}a(this)},setEndAt:function(b,c){switch(c){case CKEDITOR.POSITION_AFTER_START:this.setEnd(b,0);break;case CKEDITOR.POSITION_BEFORE_END:b.type==CKEDITOR.NODE_TEXT?this.setEnd(b,b.getLength()):this.setEnd(b,b.getChildCount());
break;case CKEDITOR.POSITION_BEFORE_START:this.setEndBefore(b);break;case CKEDITOR.POSITION_AFTER_END:this.setEndAfter(b)}a(this)},fixBlock:function(a,b){var c=this.createBookmark(),d=this.document.createElement(b);return this.collapse(a),this.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),this.extractContents().appendTo(d),d.trim(),d.appendBogus(),this.insertNode(d),this.moveToBookmark(c),d},splitBlock:function(a){var b=new CKEDITOR.dom.elementPath(this.startContainer,this.root),c=new CKEDITOR.dom.elementPath(this.endContainer,this.root),d=b.block,k=c.block,g=null;return b.blockLimit.equals(c.blockLimit)?("br"!=a&&(d||(d=this.fixBlock(!0,a),k=new CKEDITOR.dom.elementPath(this.endContainer,this.root).block),k||(k=this.fixBlock(!1,a))),a=d&&this.checkStartOfBlock(),b=k&&this.checkEndOfBlock(),this.deleteContents(),d&&d.equals(k)&&(b?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(k,CKEDITOR.POSITION_AFTER_END),k=null):a?(g=new CKEDITOR.dom.elementPath(this.startContainer,this.root),this.moveToPosition(d,CKEDITOR.POSITION_BEFORE_START),d=null):(k=this.splitElement(d),d.is("ul","ol")||d.appendBogus())),{previousBlock:d,nextBlock:k,wasStartOfBlock:a,wasEndOfBlock:b,elementPath:g}):null
},splitElement:function(a){if(!this.collapsed)return null;this.setEndAt(a,CKEDITOR.POSITION_BEFORE_END);var b=this.extractContents(),c=a.clone(!1);return b.appendTo(c),c.insertAfter(a),this.moveToPosition(a,CKEDITOR.POSITION_AFTER_END),c},removeEmptyBlocksAtEnd:function(){function a(d){return function(a){return b(a)||c(a)||a.type==CKEDITOR.NODE_ELEMENT&&a.isEmptyInlineRemoveable()||d.is("table")&&a.is("caption")?!1:!0}}var b=CKEDITOR.dom.walker.whitespaces(),c=CKEDITOR.dom.walker.bookmark(!1);return function(b){for(var e,c=this.createBookmark(),d=this[b?"endPath":"startPath"](),g=d.block||d.blockLimit;g&&!g.equals(d.root)&&!g.getFirst(a(g));)e=g.getParent(),this[b?"setEndAt":"setStartAt"](g,CKEDITOR.POSITION_AFTER_END),g.remove(1),g=e;
this.moveToBookmark(c)}}(),startPath:function(){return new CKEDITOR.dom.elementPath(this.startContainer,this.root)},endPath:function(){return new CKEDITOR.dom.elementPath(this.endContainer,this.root)},checkBoundaryOfElement:function(a,b){var c=b==CKEDITOR.START,d=this.clone();return d.collapse(c),d[c?"setStartAt":"setEndAt"](a,c?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END),d=new CKEDITOR.dom.walker(d),d.evaluator=e(c),d[c?"checkBackward":"checkForward"]()},checkStartOfBlock:function(){var a=this.startContainer,b=this.startOffset;return CKEDITOR.env.ie&&b&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.ltrim(a.substring(0,b)),i.test(a)&&this.trim(0,1)),this.trim(),a=new CKEDITOR.dom.elementPath(this.startContainer,this.root),b=this.clone(),b.collapse(!0),b.setStartAt(a.block||a.blockLimit,CKEDITOR.POSITION_AFTER_START),a=new CKEDITOR.dom.walker(b),a.evaluator=d(),a.checkBackward()
},checkEndOfBlock:function(){var a=this.endContainer,b=this.endOffset;return CKEDITOR.env.ie&&a.type==CKEDITOR.NODE_TEXT&&(a=CKEDITOR.tools.rtrim(a.substring(b)),i.test(a)&&this.trim(1,0)),this.trim(),a=new CKEDITOR.dom.elementPath(this.endContainer,this.root),b=this.clone(),b.collapse(!1),b.setEndAt(a.block||a.blockLimit,CKEDITOR.POSITION_BEFORE_END),a=new CKEDITOR.dom.walker(b),a.evaluator=d(),a.checkForward()},getPreviousNode:function(a,b,c){var d=this.clone();return d.collapse(1),d.setStartAt(c||this.root,CKEDITOR.POSITION_AFTER_START),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.previous()},getNextNode:function(a,b,c){var d=this.clone();return d.collapse(),d.setEndAt(c||this.root,CKEDITOR.POSITION_BEFORE_END),c=new CKEDITOR.dom.walker(d),c.evaluator=a,c.guard=b,c.next()
},checkReadOnly:function(){function a(b,c){for(;b;){if(b.type==CKEDITOR.NODE_ELEMENT){if("false"==b.getAttribute("contentEditable")&&!b.data("cke-editable"))return 0;if(b.is("html")||"true"==b.getAttribute("contentEditable")&&(b.contains(c)||b.equals(c)))break}b=b.getParent()}return 1}return function(){var b=this.startContainer,c=this.endContainer;return!(a(b,c)&&a(c,b))}}(),moveToElementEditablePosition:function(a,b){if(a.type==CKEDITOR.NODE_ELEMENT&&!a.isEditable(!1))return this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),!0;for(var c=0;a;){if(a.type==CKEDITOR.NODE_TEXT){b&&this.endContainer&&this.checkEndOfBlock()&&i.test(a.getText())?this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START):this.moveToPosition(a,b?CKEDITOR.POSITION_AFTER_END:CKEDITOR.POSITION_BEFORE_START),c=1;
break}if(a.type==CKEDITOR.NODE_ELEMENT)if(a.isEditable())this.moveToPosition(a,b?CKEDITOR.POSITION_BEFORE_END:CKEDITOR.POSITION_AFTER_START),c=1;else if(b&&a.is("br")&&this.endContainer&&this.checkEndOfBlock())this.moveToPosition(a,CKEDITOR.POSITION_BEFORE_START);else if("false"==a.getAttribute("contenteditable")&&a.is(CKEDITOR.dtd.$block))return this.setStartBefore(a),this.setEndAfter(a),!0;var d=a,k=c,g=void 0;d.type==CKEDITOR.NODE_ELEMENT&&d.isEditable(!1)&&(g=d[b?"getLast":"getFirst"](j)),!k&&!g&&(g=d[b?"getPrevious":"getNext"](j)),a=g}return!!c},moveToClosestEditablePosition:function(a,b){var k,c=new CKEDITOR.dom.range(this.root),d=0,g=[CKEDITOR.POSITION_AFTER_END,CKEDITOR.POSITION_BEFORE_START];
return c.moveToPosition(a,g[b?0:1]),a.is(CKEDITOR.dtd.$block)?(k=c[b?"getNextEditableNode":"getPreviousEditableNode"]())&&(d=1,k.type==CKEDITOR.NODE_ELEMENT&&k.is(CKEDITOR.dtd.$block)&&"false"==k.getAttribute("contenteditable")?(c.setStartAt(k,CKEDITOR.POSITION_BEFORE_START),c.setEndAt(k,CKEDITOR.POSITION_AFTER_END)):c.moveToPosition(k,g[b?1:0])):d=1,d&&this.moveToRange(c),!!d},moveToElementEditStart:function(a){return this.moveToElementEditablePosition(a)},moveToElementEditEnd:function(a){return this.moveToElementEditablePosition(a,!0)},getEnclosedNode:function(){var a=this.clone();if(a.optimize(),a.startContainer.type!=CKEDITOR.NODE_ELEMENT||a.endContainer.type!=CKEDITOR.NODE_ELEMENT)return null;
var a=new CKEDITOR.dom.walker(a),b=CKEDITOR.dom.walker.bookmark(!1,!0),c=CKEDITOR.dom.walker.whitespaces(!0);a.evaluator=function(a){return c(a)&&b(a)};var d=a.next();return a.reset(),d&&d.equals(a.previous())?d:null},getTouchedStartNode:function(){var a=this.startContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.startOffset)||a},getTouchedEndNode:function(){var a=this.endContainer;return this.collapsed||a.type!=CKEDITOR.NODE_ELEMENT?a:a.getChild(this.endOffset-1)||a},getNextEditableNode:c(),getPreviousEditableNode:c(1),scrollIntoView:function(){var b,c,d,a=new CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",this.document),k=this.clone();
k.optimize(),(d=k.startContainer.type==CKEDITOR.NODE_TEXT)?(c=k.startContainer.getText(),b=k.startContainer.split(k.startOffset),a.insertAfter(k.startContainer)):k.insertNode(a),a.scrollIntoView(),d&&(k.startContainer.setText(c),b.remove()),a.remove()}}}(),CKEDITOR.POSITION_AFTER_START=1,CKEDITOR.POSITION_BEFORE_END=2,CKEDITOR.POSITION_BEFORE_START=3,CKEDITOR.POSITION_AFTER_END=4,CKEDITOR.ENLARGE_ELEMENT=1,CKEDITOR.ENLARGE_BLOCK_CONTENTS=2,CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS=3,CKEDITOR.ENLARGE_INLINE=4,CKEDITOR.START=1,CKEDITOR.END=2,CKEDITOR.SHRINK_ELEMENT=1,CKEDITOR.SHRINK_TEXT=2,function(){function d(a){arguments.length<1||(this.range=a,this.forceBrBreak=0,this.enlargeBr=1,this.enforceRealBlocks=0,this._||(this._={}))
}function e(a,b,c){for(a=a.getNextSourceNode(b,null,c);!h(a);)a=a.getNextSourceNode(b,null,c);return a}function c(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function a(b,d,e,f){a:{void 0==f&&(f=c(e));for(var h;h=f.shift();)if(h.getDtd().p){f={element:h,remaining:f};break a}f=null}return f?(h=CKEDITOR.filter.instances[f.element.data("cke-filter")])&&!h.check(d)?a(b,d,e,f.remaining):(d=new CKEDITOR.dom.range(f.element),d.selectNodeContents(f.element),d=d.createIterator(),d.enlargeBr=b.enlargeBr,d.enforceRealBlocks=b.enforceRealBlocks,d.activeFilter=d.filter=h,b._.nestedEditable={element:f.element,container:e,remaining:f.remaining,iterator:d},1):0
}var b=/^[\r\n\t ]+$/,h=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.dom.walker.whitespaces(!0),i=function(a){return h(a)&&f(a)};d.prototype={getNextParagraph:function(c){var d,f,m,o,p,c=c||"p";if(this._.nestedEditable){if(d=this._.nestedEditable.iterator.getNextParagraph(c))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,d;if(this.activeFilter=this.filter,a(this,c,this._.nestedEditable.container,this._.nestedEditable.remaining))return this.activeFilter=this._.nestedEditable.iterator.activeFilter,this._.nestedEditable.iterator.getNextParagraph(c);this._.nestedEditable=null}if(!this.range.root.getDtd()[c])return null;if(!this._.started){var k=this.range.clone();
if(k.shrink(CKEDITOR.SHRINK_ELEMENT,!0),f=k.endContainer.hasAscendant("pre",!0)||k.startContainer.hasAscendant("pre",!0),k.enlarge(this.forceBrBreak&&!f||!this.enlargeBr?CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS:CKEDITOR.ENLARGE_BLOCK_CONTENTS),!k.collapsed){f=new CKEDITOR.dom.walker(k.clone());var n=CKEDITOR.dom.walker.bookmark(!0,!0);f.evaluator=n,this._.nextNode=f.next(),f=new CKEDITOR.dom.walker(k.clone()),f.evaluator=n,f=f.previous(),this._.lastNode=f.getNextSourceNode(!0),this._.lastNode&&this._.lastNode.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(this._.lastNode.getText())&&this._.lastNode.getParent().isBlockBoundary()&&(n=this.range.clone(),n.moveToPosition(this._.lastNode,CKEDITOR.POSITION_AFTER_END),n.checkEndOfBlock()&&(n=new CKEDITOR.dom.elementPath(n.endContainer,n.root),this._.lastNode=(n.block||n.blockLimit).getNextSourceNode(!0))),this._.lastNode&&k.root.contains(this._.lastNode)||(this._.lastNode=this._.docEndMarker=k.document.createText(""),this._.lastNode.insertAfter(f)),k=null
}this._.started=1,f=k}for(n=this._.nextNode,k=this._.lastNode,this._.nextNode=null;n;){var u=0,v=n.hasAscendant("pre"),s=n.type!=CKEDITOR.NODE_ELEMENT,r=0;if(s)n.type==CKEDITOR.NODE_TEXT&&b.test(n.getText())&&(s=0);else{var B=n.getName();if(CKEDITOR.dtd.$block[B]&&"false"==n.getAttribute("contenteditable")){d=n,a(this,c,d);break}if(n.isBlockBoundary(this.forceBrBreak&&!v&&{br:1})){if("br"==B)s=1;else if(!f&&!n.getChildCount()&&"hr"!=B){d=n,m=n.equals(k);break}f&&(f.setEndAt(n,CKEDITOR.POSITION_BEFORE_START),"br"!=B&&(this._.nextNode=n)),u=1}else{if(n.getFirst()){f||(f=this.range.clone(),f.setStartAt(n,CKEDITOR.POSITION_BEFORE_START)),n=n.getFirst();continue}s=1
}}if(s&&!f&&(f=this.range.clone(),f.setStartAt(n,CKEDITOR.POSITION_BEFORE_START)),m=(!u||s)&&n.equals(k),f&&!u)for(;!n.getNext(i)&&!m;){if(B=n.getParent(),B.isBlockBoundary(this.forceBrBreak&&!v&&{br:1})){u=1,s=0,m||B.equals(k),f.setEndAt(B,CKEDITOR.POSITION_BEFORE_END);break}n=B,s=1,m=n.equals(k),r=1}if(s&&f.setEndAt(n,CKEDITOR.POSITION_AFTER_END),n=e(n,r,k),(m=!n)||u&&f)break}if(!d){if(!f)return this._.docEndMarker&&this._.docEndMarker.remove(),this._.nextNode=null;d=new CKEDITOR.dom.elementPath(f.startContainer,f.root),n=d.blockLimit,u={div:1,th:1,td:1},d=d.block,!d&&n&&!this.enforceRealBlocks&&u[n.getName()]&&f.checkStartOfBlock()&&f.checkEndOfBlock()&&!n.equals(f.root)?d=n:!d||this.enforceRealBlocks&&"li"==d.getName()?(d=this.range.document.createElement(c),f.extractContents().appendTo(d),d.trim(),f.insertNode(d),o=p=!0):"li"!=d.getName()?f.checkStartOfBlock()&&f.checkEndOfBlock()||(d=d.clone(!1),f.extractContents().appendTo(d),d.trim(),p=f.splitBlock(),o=!p.wasStartOfBlock,p=!p.wasEndOfBlock,f.insertNode(d)):m||(this._.nextNode=d.equals(k)?null:e(f.getBoundaryNodes().endNode,1,k))
}return o&&(o=d.getPrevious())&&o.type==CKEDITOR.NODE_ELEMENT&&("br"==o.getName()?o.remove():o.getLast()&&"br"==o.getLast().$.nodeName.toLowerCase()&&o.getLast().remove()),p&&(o=d.getLast())&&o.type==CKEDITOR.NODE_ELEMENT&&"br"==o.getName()&&(!CKEDITOR.env.needsBrFiller||o.getPrevious(h)||o.getNext(h))&&o.remove(),this._.nextNode||(this._.nextNode=m||d.equals(k)||!k?null:e(d,1,k)),d}},CKEDITOR.dom.range.prototype.createIterator=function(){return new d(this)}}(),CKEDITOR.command=function(d,e){this.uiItems=[],this.exec=function(a){return this.state!=CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()?(this.editorFocus&&d.focus(),this.fire("exec")===!1?!0:e.exec.call(this,d,a)!==!1):!1
},this.refresh=function(a,b){return!this.readOnly&&a.readOnly?!0:this.context&&!b.isContextFor(this.context)?(this.disable(),!0):this.checkAllowed(!0)?(this.startDisabled||this.enable(),this.modes&&!this.modes[a.mode]&&this.disable(),this.fire("refresh",{editor:a,path:b})===!1?!0:e.refresh&&e.refresh.apply(this,arguments)!==!1):(this.disable(),!0)};var c;this.checkAllowed=function(a){return a||"boolean"!=typeof c?c=d.activeFilter.checkFeature(this):c},CKEDITOR.tools.extend(this,e,{modes:{wysiwyg:1},editorFocus:1,contextSensitive:!!e.context,state:CKEDITOR.TRISTATE_DISABLED}),CKEDITOR.event.call(this)},CKEDITOR.command.prototype={enable:function(){this.state==CKEDITOR.TRISTATE_DISABLED&&this.checkAllowed()&&this.setState(this.preserveState&&"undefined"!=typeof this.previousState?this.previousState:CKEDITOR.TRISTATE_OFF)
},disable:function(){this.setState(CKEDITOR.TRISTATE_DISABLED)},setState:function(d){return this.state==d||d!=CKEDITOR.TRISTATE_DISABLED&&!this.checkAllowed()?!1:(this.previousState=this.state,this.state=d,this.fire("state"),!0)},toggleState:function(){this.state==CKEDITOR.TRISTATE_OFF?this.setState(CKEDITOR.TRISTATE_ON):this.state==CKEDITOR.TRISTATE_ON&&this.setState(CKEDITOR.TRISTATE_OFF)}},CKEDITOR.event.implementOn(CKEDITOR.command.prototype),CKEDITOR.ENTER_P=1,CKEDITOR.ENTER_BR=2,CKEDITOR.ENTER_DIV=3,CKEDITOR.config={customConfig:"config.js",autoUpdateElement:!0,language:"",defaultLanguage:"en",contentsLangDirection:"",enterMode:CKEDITOR.ENTER_P,forceEnterMode:!1,shiftEnterMode:CKEDITOR.ENTER_BR,docType:"<!DOCTYPE html>",bodyId:"",bodyClass:"",fullPage:!1,height:200,extraPlugins:"",removePlugins:"",protectedSource:[],tabIndex:0,width:"",baseFloatZIndex:1e4,blockedKeystrokes:[CKEDITOR.CTRL+66,CKEDITOR.CTRL+73,CKEDITOR.CTRL+85,CKEDITOR.CTRL+89,CKEDITOR.CTRL+90,CKEDITOR.CTRL+CKEDITOR.SHIFT+90]},function(){function d(a,c,d,k,f){var g=c.name;
if((k||"function"!=typeof a.elements||a.elements(g))&&(!a.match||a.match(c))){if(k=!f){a:if(a.nothingRequired)k=!0;else{if(f=a.requiredClasses)for(g=c.classes,k=0;k<f.length;++k)if(-1==CKEDITOR.tools.indexOf(g,f[k])){k=!1;break a}k=b(c.styles,a.requiredStyles)&&b(c.attributes,a.requiredAttributes)}k=!k}if(!k&&(a.propertiesOnly||(d.valid=!0),d.allAttributes||(d.allAttributes=e(a.attributes,c.attributes,d.validAttributes)),d.allStyles||(d.allStyles=e(a.styles,c.styles,d.validStyles)),!d.allClasses)){if(a=a.classes,c=c.classes,k=d.validClasses,a)if(a===!0)c=!0;else{for(var h,f=0,g=c.length;g>f;++f)h=c[f],k[h]||(k[h]=a(h));c=!1}else c=!1;d.allClasses=c}}}function e(a,b,c){if(!a)return!1;
if(a===!0)return!0;for(var d in b)c[d]||(c[d]=a(d,b[d]));return!1}function c(a,b){if(!a)return!1;if(a===!0)return a;if("string"==typeof a)return a=x(a),"*"==a?!0:CKEDITOR.tools.convertArrayToObject(a.split(b));if(CKEDITOR.tools.isArray(a))return a.length?CKEDITOR.tools.convertArrayToObject(a):!1;var k,c={},d=0;for(k in a)c[k]=a[k],d++;return d?c:!1}function a(a){if(a._.filterFunction)return a._.filterFunction;var b=/^cke:(object|embed|param)$/,c=/^(object|embed|param)$/;return a._.filterFunction=function(k,f,e,h,i,r,s){var q,m=k.name,u=!1;if(i&&(k.name=m=m.replace(b,"$1")),e=e&&e[m]){for(g(k),m=0;m<e.length;++m)n(a,k,e[m]);j(k)}if(f){var m=k.name,e=f.elements[m],o=f.generic,f={valid:!1,validAttributes:{},validClasses:{},validStyles:{},allAttributes:!1,allClasses:!1,allStyles:!1};
if(!e&&!o)return h.push(k),!0;if(g(k),e)for(m=0,q=e.length;q>m;++m)d(e[m],k,f,!0,r);if(o)for(m=0,q=o.length;q>m;++m)d(o[m],k,f,!1,r);if(!f.valid)return h.push(k),!0;r=f.validAttributes,m=f.validStyles,e=f.validClasses,q=k.attributes;var B,v,o=k.styles,z=q["class"],t=q.style,y=[],x=[],p=/^data-cke-/,w=!1;if(delete q.style,delete q["class"],!f.allAttributes)for(B in q)r[B]||(p.test(B)?B==(v=B.replace(/^data-cke-saved-/,""))||r[v]||(delete q[B],w=!0):(delete q[B],w=!0));if(f.allStyles)t&&(q.style=t);else{for(B in o)m[B]?y.push(B+":"+o[B]):w=!0;y.length&&(q.style=y.sort().join("; "))}if(f.allClasses)z&&(q["class"]=z);else{for(B in e)e[B]&&x.push(B);x.length&&(q["class"]=x.sort().join(" ")),z&&x.length<z.split(/\s+/).length&&(w=!0)
}if(w&&(u=!0),!s&&!l(k))return h.push(k),!0}return i&&(k.name=k.name.replace(c,"cke:$1")),u}}function b(a,b){if(!b)return!0;for(var c=0;c<b.length;++c)if(!(b[c]in a))return!1;return!0}function h(a){if(!a)return{};for(var a=a.split(/\s*,\s*/).sort(),b={};a.length;)b[a.shift()]=q;return b}function f(a){for(var b,c,d,k,f={},g=1,a=x(a);b=a.match(D);)(c=b[2])?(d=i(c,"styles"),k=i(c,"attrs"),c=i(c,"classes")):d=k=c=null,f["$"+g++]={elements:b[1],classes:c,styles:d,attributes:k},a=a.slice(b[0].length);return f}function i(a,b){var c=a.match(G[b]);return c?x(c[1]):null}function g(a){a.styles||(a.styles=CKEDITOR.tools.parseCssText(a.attributes.style||"",1)),a.classes||(a.classes=a.attributes["class"]?a.attributes["class"].split(/\s+/):[])
}function j(a){var c,b=a.attributes;delete b.style,delete b["class"],(c=CKEDITOR.tools.writeCssText(a.styles,!0))&&(b.style=c),a.classes.length&&(b["class"]=a.classes.sort().join(" "))}function l(a){switch(a.name){case"a":if(!a.children.length&&!a.attributes.name)return!1;break;case"img":if(!a.attributes.src)return!1}return!0}function m(a){return a?a===!0?!0:function(b){return b in a}:!1}function o(){return new CKEDITOR.htmlParser.element("br")}function p(a){return a.type==CKEDITOR.NODE_ELEMENT&&("br"==a.name||B.$block[a.name])}function k(a,b,c){var d=a.name;if(B.$empty[d]||!a.children.length)"hr"==d&&"br"==b?a.replaceWith(o()):(a.parent&&c.push({check:"it",el:a.parent}),a.remove());
else if(B.$block[d]||"tr"==d)if("br"==b)a.previous&&!p(a.previous)&&(b=o(),b.insertBefore(a)),a.next&&!p(a.next)&&(b=o(),b.insertAfter(a)),a.replaceWithChildren();else{var k,d=a.children;b:{k=B[b];for(var e,f=0,g=d.length;g>f;++f)if(e=d[f],e.type==CKEDITOR.NODE_ELEMENT&&!k[e.name]){k=!1;break b}k=!0}if(k)a.name=b,a.attributes={},c.push({check:"parent-down",el:a});else{k=a.parent;for(var h,f=k.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT||"body"==k.name,g=d.length;g>0;)e=d[--g],f&&(e.type==CKEDITOR.NODE_TEXT||e.type==CKEDITOR.NODE_ELEMENT&&B.$inline[e.name])?(h||(h=new CKEDITOR.htmlParser.element(b),h.insertAfter(a),c.push({check:"parent-down",el:h})),h.add(e,0)):(h=null,e.insertAfter(a),k.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&e.type==CKEDITOR.NODE_ELEMENT&&!B[k.name][e.name]&&c.push({check:"el-up",el:e}));
a.remove()}}else"style"==d?a.remove():(a.parent&&c.push({check:"it",el:a.parent}),a.replaceWithChildren())}function n(a,b,c){var d,k;for(d=0;d<c.length;++d)if(k=c[d],!(k.check&&!a.check(k.check,!1)||k.left&&!k.left(b))){k.right(b,C);break}}function u(a,b){var f,e,g,h,c=b.getDefinition(),d=c.attributes,k=c.styles;if(a.name!=c.element)return!1;for(f in d)if("class"==f){for(c=d[f].split(/\s+/),g=a.classes.join("|");h=c.pop();)if(-1==g.indexOf(h))return!1}else if(a.attributes[f]!=d[f])return!1;for(e in k)if(a.styles[e]!=k[e])return!1;return!0}function v(a,b){var c,d;return"string"==typeof a?c=a:a instanceof CKEDITOR.style?d=a:(c=a[0],d=a[1]),[{element:c,left:d,right:function(a,c){c.transform(a,b)
}}]}function s(a){return function(b){return u(b,a)}}function r(a){return function(b,c){c[a](b)}}var B=CKEDITOR.dtd,z=CKEDITOR.tools.copy,x=CKEDITOR.tools.trim,q="cke-test",w=["","p","br","div"];CKEDITOR.filter=function(a){if(this.allowedContent=[],this.disabled=!1,this.editor=null,this.id=CKEDITOR.tools.getNextNumber(),this._={rules:{},transformations:{},cachedTests:{}},CKEDITOR.filter.instances[this.id]=this,a instanceof CKEDITOR.editor){a=this.editor=a,this.customConfig=!0;var b=a.config.allowedContent;b===!0?this.disabled=!0:(b||(this.customConfig=!1),this.allow(b,"config",1),this.allow(a.config.extraAllowedContent,"extra",1),this.allow(w[a.enterMode]+" "+w[a.shiftEnterMode],"default",1))
}else this.customConfig=!1,this.allow(a,"default",1)},CKEDITOR.filter.instances={},CKEDITOR.filter.prototype={allow:function(a,b,d){if(this.disabled||this.customConfig&&!d||!a)return!1;this._.cachedChecks={};var k,e;if("string"==typeof a)a=f(a);else if(a instanceof CKEDITOR.style)e=a.getDefinition(),d={},a=e.attributes,d[e.element]=e={styles:e.styles,requiredStyles:e.styles&&CKEDITOR.tools.objectKeys(e.styles)},a&&(a=z(a),e.classes=a["class"]?a["class"].split(/\s+/):null,e.requiredClasses=e.classes,delete a["class"],e.attributes=a,e.requiredAttributes=a&&CKEDITOR.tools.objectKeys(a)),a=d;else if(CKEDITOR.tools.isArray(a)){for(k=0;k<a.length;++k)e=this.allow(a[k],b,d);
return e}var g,d=[];for(g in a){e=a[g],e="boolean"==typeof e?{}:"function"==typeof e?{match:e}:z(e),"$"!=g.charAt(0)&&(e.elements=g),b&&(e.featureName=b.toLowerCase());var h=e;h.elements=c(h.elements,/\s+/)||null,h.propertiesOnly=h.propertiesOnly||h.elements===!0;var i=/\s*,\s*/,j=void 0;for(j in y){h[j]=c(h[j],i)||null;var l=h,n=A[j],r=c(h[A[j]],i),s=h[j],q=[],u=!0,t=void 0;r?u=!1:r={};for(t in s)"!"==t.charAt(0)&&(t=t.slice(1),q.push(t),r[t]=!0,u=!1);for(;t=q.pop();)s[t]=s["!"+t],delete s["!"+t];l[n]=(u?!1:r)||null}h.match=h.match||null,this.allowedContent.push(e),d.push(e)}for(b=this._.rules,g=b.elements||{},a=b.generic||[],e=0,h=d.length;h>e;++e){i=z(d[e]),j=i.classes===!0||i.styles===!0||i.attributes===!0,l=i,n=void 0;
for(n in y)l[n]=m(l[n]);r=!0;for(n in A)n=A[n],l[n]=CKEDITOR.tools.objectKeys(l[n]),l[n]&&(r=!1);if(l.nothingRequired=r,i.elements===!0||null===i.elements)i.elements=m(i.elements),a[j?"unshift":"push"](i);else{l=i.elements,delete i.elements;for(k in l)g[k]?g[k][j?"unshift":"push"](i):g[k]=[i]}}return b.elements=g,b.generic=a.length?a:null,!0},applyTo:function(b,c,d,f){if(this.disabled)return!1;var e=[],g=!d&&this._.rules,h=this._.transformations,i=a(this),j=this.editor&&this.editor.config.protectedSource,n=!1;b.forEach(function(a){if(a.type==CKEDITOR.NODE_ELEMENT){if("off"==a.attributes["data-cke-filter"])return!1;c&&"span"==a.name&&~CKEDITOR.tools.objectKeys(a.attributes).join("|").indexOf("data-cke-")||i(a,g,h,e,c)&&(n=!0)
}else if(a.type==CKEDITOR.NODE_COMMENT&&a.value.match(/^\{cke_protected\}(?!\{C\})/)){var b;a:{var d=decodeURIComponent(a.value.replace(/^\{cke_protected\}/,""));b=[];var k,f,l;if(j)for(f=0;f<j.length;++f)if((l=d.match(j[f]))&&l[0].length==d.length){b=!0;break a}d=CKEDITOR.htmlParser.fragment.fromHtml(d),1==d.children.length&&(k=d.children[0]).type==CKEDITOR.NODE_ELEMENT&&i(k,g,h,b,c),b=!b.length}b||e.push(a)}},null,!0),e.length&&(n=!0);for(var r,b=[],f=w[f||(this.editor?this.editor.enterMode:CKEDITOR.ENTER_P)];d=e.pop();)d.type==CKEDITOR.NODE_ELEMENT?k(d,f,b):d.remove();for(;r=b.pop();)if(d=r.el,d.parent)switch(r.check){case"it":B.$removeEmpty[d.name]&&!d.children.length?k(d,f,b):l(d)||k(d,f,b);
break;case"el-up":d.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!B[d.parent.name][d.name]&&k(d,f,b);break;case"parent-down":d.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT&&!B[d.parent.name][d.name]&&k(d.parent,f,b)}return n},checkFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),!a.requiredContent||this.check(a.requiredContent))},disable:function(){this.disabled=!0},addContentForms:function(a){if(!this.disabled&&a){var b,c,k,d=[];for(b=0;b<a.length&&!k;++b)c=a[b],("string"==typeof c||c instanceof CKEDITOR.style)&&this.check(c)&&(k=c);if(k){for(b=0;b<a.length;++b)d.push(v(a[b],k));this.addTransformations(d)}}},addFeature:function(a){return this.disabled||!a?!0:(a.toFeature&&(a=a.toFeature(this.editor)),this.allow(a.allowedContent,a.name),this.addTransformations(a.contentTransformations),this.addContentForms(a.contentForms),this.customConfig&&a.requiredContent?this.check(a.requiredContent):!0)
},addTransformations:function(a){var b,c;if(!this.disabled&&a){var k,d=this._.transformations;for(k=0;k<a.length;++k){b=a[k];var f=void 0,e=void 0,g=void 0,h=void 0,i=void 0,j=void 0;for(c=[],e=0;e<b.length;++e)g=b[e],"string"==typeof g?(g=g.split(/\s*:\s*/),h=g[0],i=null,j=g[1]):(h=g.check,i=g.left,j=g.right),f||(f=g,f=f.element?f.element:h?h.match(/^([a-z0-9]+)/i)[0]:f.left.getDefinition().element),i instanceof CKEDITOR.style&&(i=s(i)),c.push({check:h==f?null:h,left:i,right:"string"==typeof j?r(j):j});b=f,d[b]||(d[b]=[]),d[b].push(c)}}},check:function(b,c,d){if(this.disabled)return!0;if(CKEDITOR.tools.isArray(b)){for(var k=b.length;k--;)if(this.check(b[k],c,d))return!0;
return!1}var e,g;if("string"==typeof b){if(g=b+"<"+(c===!1?"0":"1")+(d?"1":"0")+">",g in this._.cachedChecks)return this._.cachedChecks[g];k=f(b).$1,e=k.styles;var i=k.classes;k.name=k.elements,k.classes=i=i?i.split(/\s*,\s*/):[],k.styles=h(e),k.attributes=h(k.attributes),k.children=[],i.length&&(k.attributes["class"]=i.join(" ")),e&&(k.attributes.style=CKEDITOR.tools.writeCssText(k.styles)),e=k}else k=b.getDefinition(),e=k.styles,i=k.attributes||{},e?(e=z(e),i.style=CKEDITOR.tools.writeCssText(e,!0)):e={},e={name:k.element,attributes:i,classes:i["class"]?i["class"].split(/\s+/):[],styles:e,children:[]};var r,i=CKEDITOR.tools.clone(e),l=[];if(c!==!1&&(r=this._.transformations[e.name])){for(k=0;k<r.length;++k)n(this,e,r[k]);
j(e)}return a(this)(i,this._.rules,c===!1?!1:this._.transformations,l,!1,!d,!d),c=l.length>0?!1:CKEDITOR.tools.objectCompare(e.attributes,i.attributes,!0)?!0:!1,"string"==typeof b&&(this._.cachedChecks[g]=c),c},getAllowedEnterMode:function(){var a=["p","div","br"],b={p:CKEDITOR.ENTER_P,div:CKEDITOR.ENTER_DIV,br:CKEDITOR.ENTER_BR};return function(c,d){var f,k=a.slice();if(this.check(w[c]))return c;for(d||(k=k.reverse());f=k.pop();)if(this.check(f))return b[f];return CKEDITOR.ENTER_BR}}()};var y={styles:1,attributes:1,classes:1},A={styles:"requiredStyles",attributes:"requiredAttributes",classes:"requiredClasses"},D=/^([a-z0-9*\s]+)((?:\s*\{[!\w\-,\s\*]+\}\s*|\s*\[[!\w\-,\s\*]+\]\s*|\s*\([!\w\-,\s\*]+\)\s*){0,3})(?:;\s*|$)/i,G={styles:/{([^}]+)}/,attrs:/\[([^\]]+)\]/,classes:/\(([^\)]+)\)/},C=CKEDITOR.filter.transformationsTools={sizeToStyle:function(a){this.lengthToStyle(a,"width"),this.lengthToStyle(a,"height")
},sizeToAttribute:function(a){this.lengthToAttribute(a,"width"),this.lengthToAttribute(a,"height")},lengthToStyle:function(a,b,c){if(c=c||b,!(c in a.styles)){var d=a.attributes[b];d&&(/^\d+$/.test(d)&&(d+="px"),a.styles[c]=d)}delete a.attributes[b]},lengthToAttribute:function(a,b,c){if(c=c||b,!(c in a.attributes)){var d=a.styles[b],k=d&&d.match(/^(\d+)(?:\.\d*)?px$/);k?a.attributes[c]=k[1]:d==q&&(a.attributes[c]=q)}delete a.styles[b]},alignmentToStyle:function(a){if(!("float"in a.styles)){var b=a.attributes.align;("left"==b||"right"==b)&&(a.styles["float"]=b)}delete a.attributes.align},alignmentToAttribute:function(a){if(!("align"in a.attributes)){var b=a.styles["float"];
("left"==b||"right"==b)&&(a.attributes.align=b)}delete a.styles["float"]},matchesStyle:u,transform:function(a,b){if("string"==typeof b)a.name=b;else{var f,e,g,h,c=b.getDefinition(),d=c.styles,k=c.attributes;a.name=c.element;for(f in k)if("class"==f)for(c=a.classes.join("|"),g=k[f].split(/\s+/);h=g.pop();)-1==c.indexOf(h)&&a.classes.push(h);else a.attributes[f]=k[f];for(e in d)a.styles[e]=d[e]}}}}(),function(){CKEDITOR.focusManager=function(d){return d.focusManager?d.focusManager:(this.hasFocus=!1,this.currentActive=null,this._={editor:d},this)},CKEDITOR.focusManager._={blurDelay:200},CKEDITOR.focusManager.prototype={focus:function(d){this._.timer&&clearTimeout(this._.timer),d&&(this.currentActive=d),this.hasFocus||this._.locked||((d=CKEDITOR.currentInstance)&&d.focusManager.blur(1),this.hasFocus=!0,(d=this._.editor.container)&&d.addClass("cke_focus"),this._.editor.fire("focus"))
},lock:function(){this._.locked=1},unlock:function(){delete this._.locked},blur:function(d){function e(){if(this.hasFocus){this.hasFocus=!1;var a=this._.editor.container;a&&a.removeClass("cke_focus"),this._.editor.fire("blur")}}if(!this._.locked){this._.timer&&clearTimeout(this._.timer);var c=CKEDITOR.focusManager._.blurDelay;d||!c?e.call(this):this._.timer=CKEDITOR.tools.setTimeout(function(){delete this._.timer,e.call(this)},c,this)}},add:function(d,e){var c=d.getCustomData("focusmanager");if(!c||c!=this){c&&c.remove(d);var c="focus",a="blur";e&&(CKEDITOR.env.ie?(c="focusin",a="focusout"):CKEDITOR.event.useCapture=1);var b={blur:function(){d.equals(this.currentActive)&&this.blur()
},focus:function(){this.focus(d)}};d.on(c,b.focus,this),d.on(a,b.blur,this),e&&(CKEDITOR.event.useCapture=0),d.setCustomData("focusmanager",this),d.setCustomData("focusmanager_handlers",b)}},remove:function(d){d.removeCustomData("focusmanager");var e=d.removeCustomData("focusmanager_handlers");d.removeListener("blur",e.blur),d.removeListener("focus",e.focus)}}}(),CKEDITOR.keystrokeHandler=function(d){return d.keystrokeHandler?d.keystrokeHandler:(this.keystrokes={},this.blockedKeystrokes={},this._={editor:d},this)},function(){var d,e=function(a){var a=a.data,b=a.getKeystroke(),c=this.keystrokes[b],f=this._.editor;return d=f.fire("key",{keyCode:b})===!1,d||(c&&(d=f.execCommand(c,{from:"keystrokeHandler"})!==!1),d||(d=!!this.blockedKeystrokes[b])),d&&a.preventDefault(!0),!d
},c=function(a){d&&(d=!1,a.data.preventDefault(!0))};CKEDITOR.keystrokeHandler.prototype={attach:function(a){a.on("keydown",e,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&a.on("keypress",c,this)}}}(),function(){CKEDITOR.lang={languages:{af:1,ar:1,bg:1,bn:1,bs:1,ca:1,cs:1,cy:1,da:1,de:1,el:1,"en-au":1,"en-ca":1,"en-gb":1,en:1,eo:1,es:1,et:1,eu:1,fa:1,fi:1,fo:1,"fr-ca":1,fr:1,gl:1,gu:1,he:1,hi:1,hr:1,hu:1,id:1,is:1,it:1,ja:1,ka:1,km:1,ko:1,ku:1,lt:1,lv:1,mk:1,mn:1,ms:1,nb:1,nl:1,no:1,pl:1,"pt-br":1,pt:1,ro:1,ru:1,si:1,sk:1,sl:1,sq:1,"sr-latn":1,sr:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,"zh-cn":1,zh:1},rtl:{ar:1,fa:1,he:1,ku:1,ug:1},load:function(d,e,c){d&&CKEDITOR.lang.languages[d]||(d=this.detect(e,d)),this[d]?c(d,this[d]):CKEDITOR.scriptLoader.load(CKEDITOR.getUrl("lang/"+d+".js"),function(){this[d].dir=this.rtl[d]?"rtl":"ltr",c(d,this[d])
},this)},detect:function(d,e){var c=this.languages,e=e||navigator.userLanguage||navigator.language||d,a=e.toLowerCase().match(/([a-z]+)(?:-([a-z]+))?/),b=a[1],a=a[2];return c[b+"-"+a]?b=b+"-"+a:c[b]||(b=null),CKEDITOR.lang.detect=b?function(){return b}:function(a){return a},b||d}}}(),CKEDITOR.scriptLoader=function(){var d={},e={};return{load:function(c,a,b,h){var f="string"==typeof c;f&&(c=[c]),b||(b=CKEDITOR);var i=c.length,g=[],j=[],l=function(c){a&&(f?a.call(b,c):a.call(b,g,j))};if(0===i)l(!0);else{var m=function(a,b){(b?g:j).push(a),--i<=0&&(h&&CKEDITOR.document.getDocumentElement().removeStyle("cursor"),l(b))},o=function(a,b){d[a]=1;var c=e[a];delete e[a];
for(var k=0;k<c.length;k++)c[k](a,b)},p=function(b){if(d[b])m(b,!0);else{var c=e[b]||(e[b]=[]);if(c.push(m),!(c.length>1)){var k=new CKEDITOR.dom.element("script");k.setAttributes({type:"text/javascript",src:b}),a&&(CKEDITOR.env.ie&&CKEDITOR.env.version<11?k.$.onreadystatechange=function(){("loaded"==k.$.readyState||"complete"==k.$.readyState)&&(k.$.onreadystatechange=null,o(b,!0))}:(k.$.onload=function(){setTimeout(function(){o(b,!0)},0)},k.$.onerror=function(){o(b,!1)})),k.appendTo(CKEDITOR.document.getHead())}}};h&&CKEDITOR.document.getDocumentElement().setStyle("cursor","wait");for(var k=0;i>k;k++)p(c[k])}},queue:function(){function c(){var b;(b=a[0])&&this.load(b.scriptUrl,b.callback,CKEDITOR,0)
}var a=[];return function(b,d){var f=this;a.push({scriptUrl:b,callback:function(){d&&d.apply(this,arguments),a.shift(),c.call(f)}}),1==a.length&&c.call(this)}}()}}(),CKEDITOR.resourceManager=function(d,e){this.basePath=d,this.fileName=e,this.registered={},this.loaded={},this.externals={},this._={waitingList:{}}},CKEDITOR.resourceManager.prototype={add:function(d,e){if(this.registered[d])throw'[CKEDITOR.resourceManager.add] The resource name "'+d+'" is already registered.';var c=this.registered[d]=e||{};return c.name=d,c.path=this.getPath(d),CKEDITOR.fire(d+CKEDITOR.tools.capitalize(this.fileName)+"Ready",c),this.get(d)},get:function(d){return this.registered[d]||null
},getPath:function(d){var e=this.externals[d];return CKEDITOR.getUrl(e&&e.dir||this.basePath+d+"/")},getFilePath:function(d){var e=this.externals[d];return CKEDITOR.getUrl(this.getPath(d)+(e?e.file:this.fileName+".js"))},addExternal:function(d,e,c){for(var d=d.split(","),a=0;a<d.length;a++){var b=d[a];c||(e=e.replace(/[^\/]+$/,function(a){return c=a,""})),this.externals[b]={dir:e,file:c||this.fileName+".js"}}},load:function(d,e,c){CKEDITOR.tools.isArray(d)||(d=d?[d]:[]);for(var a=this.loaded,b=this.registered,h=[],f={},i={},g=0;g<d.length;g++){var j=d[g];if(j)if(a[j]||b[j])i[j]=this.get(j);else{var l=this.getFilePath(j);h.push(l),l in f||(f[l]=[]),f[l].push(j)
}}CKEDITOR.scriptLoader.load(h,function(b,d){if(d.length)throw'[CKEDITOR.resourceManager.load] Resource name "'+f[d[0]].join(",")+'" was not found at "'+d[0]+'".';for(var g=0;g<b.length;g++)for(var k=f[b[g]],h=0;h<k.length;h++){var j=k[h];i[j]=this.get(j),a[j]=1}e.call(c,i)},this)}},CKEDITOR.plugins=new CKEDITOR.resourceManager("plugins/","plugin"),CKEDITOR.plugins.load=CKEDITOR.tools.override(CKEDITOR.plugins.load,function(d){var e={};return function(c,a,b){var h={},f=function(c){d.call(this,c,function(c){CKEDITOR.tools.extend(h,c);var i,d=[];for(i in c){var m=c[i],o=m&&m.requires;if(!e[i]){if(m.icons)for(var p=m.icons.split(","),k=p.length;k--;)CKEDITOR.skin.addIcon(p[k],m.path+"icons/"+(CKEDITOR.env.hidpi&&m.hidpi?"hidpi/":"")+p[k]+".png");
e[i]=1}if(o)for(o.split&&(o=o.split(",")),m=0;m<o.length;m++)h[o[m]]||d.push(o[m])}if(d.length)f.call(this,d);else{for(i in h)m=h[i],m.onLoad&&!m.onLoad._called&&(m.onLoad()===!1&&delete h[i],m.onLoad._called=1);a&&a.call(b||window,h)}},this)};f.call(this,c)}}),CKEDITOR.plugins.setLang=function(d,e,c){var a=this.get(d),d=a.langEntries||(a.langEntries={}),a=a.lang||(a.lang=[]);a.split&&(a=a.split(",")),-1==CKEDITOR.tools.indexOf(a,e)&&a.push(e),d[e]=c},CKEDITOR.ui=function(d){return d.ui?d.ui:(this.items={},this.instances={},this.editor=d,this._={handlers:{}},this)},CKEDITOR.ui.prototype={add:function(d,e,c){c.name=d.toLowerCase();var a=this.items[d]={type:e,command:c.command||null,args:Array.prototype.slice.call(arguments,2)};
CKEDITOR.tools.extend(a,c)},get:function(d){return this.instances[d]},create:function(d){var e=this.items[d],c=e&&this._.handlers[e.type],a=e&&e.command&&this.editor.getCommand(e.command),c=c&&c.create.apply(this,e.args);return this.instances[d]=c,a&&a.uiItems.push(c),c&&!c.type&&(c.type=e.type),c},addHandler:function(d,e){this._.handlers[d]=e},space:function(d){return CKEDITOR.document.getById(this.spaceId(d))},spaceId:function(d){return this.editor.id+"_"+d}},CKEDITOR.event.implementOn(CKEDITOR.ui),function(){function d(a,d,g){if(CKEDITOR.event.call(this),a=a&&CKEDITOR.tools.clone(a),void 0!==d){if(!(d instanceof CKEDITOR.dom.element))throw Error("Expect element of type CKEDITOR.dom.element.");
if(!g)throw Error("One of the element modes must be specified.");if(CKEDITOR.env.ie&&CKEDITOR.env.quirks&&g==CKEDITOR.ELEMENT_MODE_INLINE)throw Error("Inline element mode is not supported on IE quirks.");if(!(g==CKEDITOR.ELEMENT_MODE_INLINE?d.is(CKEDITOR.dtd.$editable)||d.is("textarea"):g==CKEDITOR.ELEMENT_MODE_REPLACE?!d.is(CKEDITOR.dtd.$nonBodyContent):1))throw Error('The specified element mode is not supported on element: "'+d.getName()+'".');this.element=d,this.elementMode=g,this.name=this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO&&(d.getId()||d.getNameAtt())}else this.elementMode=CKEDITOR.ELEMENT_MODE_NONE;this._={},this.commands={},this.templates={},this.name=this.name||e(),this.id=CKEDITOR.tools.getNextId(),this.status="unloaded",this.config=CKEDITOR.tools.prototypedCopy(CKEDITOR.config),this.ui=new CKEDITOR.ui(this),this.focusManager=new CKEDITOR.focusManager(this),this.keystrokeHandler=new CKEDITOR.keystrokeHandler(this),this.on("readOnly",c),this.on("selectionChange",function(a){b(this,a.data.path)
}),this.on("activeFilterChange",function(){b(this,this.elementPath(),!0)}),this.on("mode",c),this.on("instanceReady",function(){this.config.startupFocus&&this.focus()}),CKEDITOR.fire("instanceCreated",null,this),CKEDITOR.add(this),CKEDITOR.tools.setTimeout(function(){f(this,a)},0,this)}function e(){do var a="editor"+ ++o;while(CKEDITOR.instances[a]);return a}function c(){var c,b=this.commands;for(c in b)a(this,b[c])}function a(a,b){b[b.startDisabled?"disable":a.readOnly&&!b.readOnly?"disable":b.modes[a.mode]?"enable":"disable"]()}function b(a,b,c){if(b){var d,f,e=a.commands;for(f in e)d=e[f],(c||d.contextSensitive)&&d.refresh(a,b)}}function h(a){var b=a.config.customConfig;
if(!b)return!1;var b=CKEDITOR.getUrl(b),c=p[b]||(p[b]={});return c.fn?(c.fn.call(a,a.config),(CKEDITOR.getUrl(a.config.customConfig)==b||!h(a))&&a.fireOnce("customConfigLoaded")):CKEDITOR.scriptLoader.queue(b,function(){c.fn=CKEDITOR.editorConfig?CKEDITOR.editorConfig:function(){},h(a)}),!0}function f(a,b){a.on("customConfigLoaded",function(){if(b){if(b.on)for(var c in b.on)a.on(c,b.on[c]);CKEDITOR.tools.extend(a.config,b,!0),delete a.config.on}c=a.config,a.readOnly=!(!c.readOnly&&!(a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.is("textarea")?a.element.hasAttribute("disabled"):a.element.isReadOnly():a.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&a.element.hasAttribute("disabled"))),a.blockless=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?!(a.element.is("textarea")||CKEDITOR.dtd[a.element.getName()].p):!1,a.tabIndex=c.tabIndex||a.element&&a.element.getAttribute("tabindex")||0,a.activeEnterMode=a.enterMode=a.blockless?CKEDITOR.ENTER_BR:c.enterMode,a.activeShiftEnterMode=a.shiftEnterMode=a.blockless?CKEDITOR.ENTER_BR:c.shiftEnterMode,c.skin&&(CKEDITOR.skinName=c.skin),a.fireOnce("configLoaded"),a.dataProcessor=new CKEDITOR.htmlDataProcessor(a),a.filter=a.activeFilter=new CKEDITOR.filter(a),i(a)
}),b&&void 0!=b.customConfig&&(a.config.customConfig=b.customConfig),h(a)||a.fireOnce("customConfigLoaded")}function i(a){CKEDITOR.skin.loadPart("editor",function(){g(a)})}function g(a){CKEDITOR.lang.load(a.config.language,a.config.defaultLanguage,function(b,c){var d=a.config.title;a.langCode=b,a.lang=CKEDITOR.tools.prototypedCopy(c),a.title="string"==typeof d||d===!1?d:[a.lang.editor,a.name].join(", "),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&"rtl"==a.lang.dir&&(a.lang.dir="ltr"),a.config.contentsLangDirection||(a.config.contentsLangDirection=a.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?a.element.getDirection(1):a.lang.dir),a.fire("langLoaded"),j(a)})}function j(a){a.getStylesSet(function(b){a.once("loaded",function(){a.fire("stylesSet",{styles:b})
},null,null,1),l(a)})}function l(a){var b=a.config,c=b.plugins,d=b.extraPlugins,f=b.removePlugins;if(d)var e=RegExp("(?:^|,)(?:"+d.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(e,""),c=c+(","+d);if(f)var g=RegExp("(?:^|,)(?:"+f.replace(/\s*,\s*/g,"|")+")(?=,|$)","g"),c=c.replace(g,"");CKEDITOR.env.air&&(c+=",adobeair"),CKEDITOR.plugins.load(c.split(","),function(c){var d=[],f=[],e=[];a.plugins=c;for(var h in c){var s,i=c[h],j=i.lang,l=null,r=i.requires;if(CKEDITOR.tools.isArray(r)&&(r=r.join(",")),r&&(s=r.match(g)))for(;r=s.pop();)CKEDITOR.tools.setTimeout(function(a,b){throw Error('Plugin "'+a.replace(",","")+'" cannot be removed from the plugins list, because it\'s required by "'+b+'" plugin.')
},0,null,[r,h]);j&&!a.lang[h]&&(j.split&&(j=j.split(",")),CKEDITOR.tools.indexOf(j,a.langCode)>=0?l=a.langCode:(l=a.langCode.replace(/-.*/,""),l=l!=a.langCode&&CKEDITOR.tools.indexOf(j,l)>=0?l:CKEDITOR.tools.indexOf(j,"en")>=0?"en":j[0]),i.langEntries&&i.langEntries[l]?(a.lang[h]=i.langEntries[l],l=null):e.push(CKEDITOR.getUrl(i.path+"lang/"+l+".js"))),f.push(l),d.push(i)}CKEDITOR.scriptLoader.load(e,function(){for(var c=["beforeInit","init","afterInit"],e=0;e<c.length;e++)for(var g=0;g<d.length;g++){var h=d[g];0===e&&f[g]&&h.lang&&h.langEntries&&(a.lang[h.name]=h.langEntries[f[g]]),h[c[e]]&&h[c[e]](a)}for(a.fireOnce("pluginsLoaded"),b.keystrokes&&a.setKeystroke(a.config.keystrokes),g=0;g<a.config.blockedKeystrokes.length;g++)a.keystrokeHandler.blockedKeystrokes[a.config.blockedKeystrokes[g]]=1;
a.status="loaded",a.fireOnce("loaded"),CKEDITOR.fire("instanceLoaded",null,a)})})}function m(){var a=this.element;if(a&&this.elementMode!=CKEDITOR.ELEMENT_MODE_APPENDTO){var b=this.getData();return this.config.htmlEncodeOutput&&(b=CKEDITOR.tools.htmlEncode(b)),a.is("textarea")?a.setValue(b):a.setHtml(b),!0}return!1}d.prototype=CKEDITOR.editor.prototype,CKEDITOR.editor=d;var o=0,p={};CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{addCommand:function(b,c){c.name=b.toLowerCase();var d=new CKEDITOR.command(this,c);return this.mode&&a(this,d),this.commands[b]=d},_attachToForm:function(){var a=this,b=a.element,c=new CKEDITOR.dom.element(b.$.form);if(b.is("textarea")&&c){var d=function(c){a.updateElement(),a._.required&&!b.getValue()&&a.fire("required")===!1&&c.data.preventDefault()
};c.on("submit",d),c.$.submit&&c.$.submit.call&&c.$.submit.apply&&(c.$.submit=CKEDITOR.tools.override(c.$.submit,function(a){return function(){d(),a.apply?a.apply(this):a()}})),a.on("destroy",function(){c.removeListener("submit",d)})}},destroy:function(a){this.fire("beforeDestroy"),!a&&m.call(this),this.editable(null),this.status="destroyed",this.fire("destroy"),this.removeAllListeners(),CKEDITOR.remove(this),CKEDITOR.fire("instanceDestroyed",null,this)},elementPath:function(a){if(!a){if(a=this.getSelection(),!a)return null;a=a.getStartElement()}return a?new CKEDITOR.dom.elementPath(a,this.editable()):null},createRange:function(){var a=this.editable();return a?new CKEDITOR.dom.range(a):null
},execCommand:function(a,b){var c=this.getCommand(a),d={name:a,commandData:b,command:c};return c&&c.state!=CKEDITOR.TRISTATE_DISABLED&&this.fire("beforeCommandExec",d)!==!1&&(d.returnValue=c.exec(d.commandData),!c.async&&this.fire("afterCommandExec",d)!==!1)?d.returnValue:!1},getCommand:function(a){return this.commands[a]},getData:function(a){!a&&this.fire("beforeGetData");var b=this._.data;return"string"!=typeof b&&(b=(b=this.element)&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE?b.is("textarea")?b.getValue():b.getHtml():""),b={dataValue:b},!a&&this.fire("getData",b),b.dataValue},getSnapshot:function(){var a=this.fire("getSnapshot");if("string"!=typeof a){var b=this.element;
b&&this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(a=b.is("textarea")?b.getValue():b.getHtml())}return a},loadSnapshot:function(a){this.fire("loadSnapshot",a)},setData:function(a,b,c){b&&this.on("dataReady",function(a){a.removeListener(),b.call(a.editor)}),a={dataValue:a},!c&&this.fire("setData",a),this._.data=a.dataValue,!c&&this.fire("afterSetData",a)},setReadOnly:function(a){a=void 0==a||a,this.readOnly!=a&&(this.readOnly=a,this.keystrokeHandler.blockedKeystrokes[8]=+a,this.editable().setReadOnly(a),this.fire("readOnly"))},insertHtml:function(a,b){this.fire("insertHtml",{dataValue:a,mode:b})},insertText:function(a){this.fire("insertText",a)},insertElement:function(a){this.fire("insertElement",a)
},focus:function(){this.fire("beforeFocus")},checkDirty:function(){return"ready"==this.status&&this._.previousValue!==this.getSnapshot()},resetDirty:function(){this._.previousValue=this.getSnapshot()},updateElement:function(){return m.call(this)},setKeystroke:function(){for(var c,d,a=this.keystrokeHandler.keystrokes,b=CKEDITOR.tools.isArray(arguments[0])?arguments[0]:[[].slice.call(arguments,0)],f=b.length;f--;)c=b[f],d=0,CKEDITOR.tools.isArray(c)&&(d=c[1],c=c[0]),d?a[c]=d:delete a[c]},addFeature:function(a){return this.filter.addFeature(a)},setActiveFilter:function(a){a||(a=this.filter),this.activeFilter!==a&&(this.activeFilter=a,this.fire("activeFilterChange"),a===this.filter?this.setActiveEnterMode(null,null):this.setActiveEnterMode(a.getAllowedEnterMode(this.enterMode),a.getAllowedEnterMode(this.shiftEnterMode,!0)))
},setActiveEnterMode:function(a,b){a=a?this.blockless?CKEDITOR.ENTER_BR:a:this.enterMode,b=b?this.blockless?CKEDITOR.ENTER_BR:b:this.shiftEnterMode,(this.activeEnterMode!=a||this.activeShiftEnterMode!=b)&&(this.activeEnterMode=a,this.activeShiftEnterMode=b,this.fire("activeEnterModeChange"))}})}(),CKEDITOR.ELEMENT_MODE_NONE=0,CKEDITOR.ELEMENT_MODE_REPLACE=1,CKEDITOR.ELEMENT_MODE_APPENDTO=2,CKEDITOR.ELEMENT_MODE_INLINE=3,CKEDITOR.htmlParser=function(){this._={htmlPartsRegex:RegExp("<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'>])*)\\/?>))","g")}},function(){var d=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,e={checked:1,compact:1,declare:1,defer:1,disabled:1,ismap:1,multiple:1,nohref:1,noresize:1,noshade:1,nowrap:1,readonly:1,selected:1};
CKEDITOR.htmlParser.prototype={onTagOpen:function(){},onTagClose:function(){},onText:function(){},onCDATA:function(){},onComment:function(){},parse:function(c){for(var a,b,f,h=0;a=this._.htmlPartsRegex.exec(c);)if(b=a.index,b>h&&(h=c.substring(h,b),f?f.push(h):this.onText(h)),h=this._.htmlPartsRegex.lastIndex,!(b=a[1])||(b=b.toLowerCase(),f&&CKEDITOR.dtd.$cdata[b]&&(this.onCDATA(f.join("")),f=null),f))if(f)f.push(a[0]);else if(b=a[3]){if(b=b.toLowerCase(),!/="/.test(b)){var g,i={};a=a[4];var j=!(!a||"/"!=a.charAt(a.length-1));if(a)for(;g=d.exec(a);){var l=g[1].toLowerCase();g=g[2]||g[3]||g[4]||"",i[l]=!g&&e[l]?l:CKEDITOR.tools.htmlDecodeAttr(g)}this.onTagOpen(b,i,j),!f&&CKEDITOR.dtd.$cdata[b]&&(f=[])
}}else(b=a[2])&&this.onComment(b);else this.onTagClose(b);c.length>h&&this.onText(c.substring(h,c.length))}}}(),CKEDITOR.htmlParser.basicWriter=CKEDITOR.tools.createClass({$:function(){this._={output:[]}},proto:{openTag:function(d){this._.output.push("<",d)},openTagClose:function(d,e){this._.output.push(e?" />":">")},attribute:function(d,e){"string"==typeof e&&(e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",d,'="',e,'"')},closeTag:function(d){this._.output.push("</",d,">")},text:function(d){this._.output.push(d)},comment:function(d){this._.output.push("<!--",d,"-->")},write:function(d){this._.output.push(d)},reset:function(){this._.output=[],this._.indent=!1
},getHtml:function(d){var e=this._.output.join("");return d&&this.reset(),e}}}),function(){CKEDITOR.htmlParser.node=function(){},CKEDITOR.htmlParser.node.prototype={remove:function(){var d=this.parent.children,e=CKEDITOR.tools.indexOf(d,this),c=this.previous,a=this.next;c&&(c.next=a),a&&(a.previous=c),d.splice(e,1),this.parent=null},replaceWith:function(d){var e=this.parent.children,c=CKEDITOR.tools.indexOf(e,this),a=d.previous=this.previous,b=d.next=this.next;a&&(a.next=d),b&&(b.previous=d),e[c]=d,d.parent=this.parent,this.parent=null},insertAfter:function(d){var e=d.parent.children,c=CKEDITOR.tools.indexOf(e,d),a=d.next;e.splice(c+1,0,this),this.next=d.next,this.previous=d,d.next=this,a&&(a.previous=this),this.parent=d.parent
},insertBefore:function(d){var e=d.parent.children,c=CKEDITOR.tools.indexOf(e,d);e.splice(c,0,this),this.next=d,(this.previous=d.previous)&&(d.previous.next=this),d.previous=this,this.parent=d.parent},getAscendant:function(d){for(var e=("function"==typeof d?d:"string"==typeof d?function(a){return a.name==d}:function(a){return a.name in d}),c=this.parent;c&&c.type==CKEDITOR.NODE_ELEMENT;){if(e(c))return c;c=c.parent}return null},wrapWith:function(d){return this.replaceWith(d),d.add(this),d},getIndex:function(){return CKEDITOR.tools.indexOf(this.parent.children,this)},getFilterContext:function(d){return d||{}}}}(),CKEDITOR.htmlParser.comment=function(d){this.value=d,this._={isBlockLike:!1}
},CKEDITOR.htmlParser.comment.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_COMMENT,filter:function(d,e){var c=this.value;return(c=d.onComment(e,c,this))?"string"!=typeof c?(this.replaceWith(c),!1):(this.value=c,!0):(this.remove(),!1)},writeHtml:function(d,e){e&&this.filter(e),d.comment(this.value)}}),function(){CKEDITOR.htmlParser.text=function(d){this.value=d,this._={isBlockLike:!1}},CKEDITOR.htmlParser.text.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(d,e){return(this.value=d.onText(e,this.value,this))?void 0:(this.remove(),!1)},writeHtml:function(d,e){e&&this.filter(e),d.text(this.value)
}})}(),function(){CKEDITOR.htmlParser.cdata=function(d){this.value=d},CKEDITOR.htmlParser.cdata.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_TEXT,filter:function(){},writeHtml:function(d){d.write(this.value)}})}(),CKEDITOR.htmlParser.fragment=function(){this.children=[],this.parent=null,this._={isBlockLike:!0,hasInlineStarted:!1}},function(){function d(a){return a.attributes["data-cke-survive"]?!1:"a"==a.name&&a.attributes.href||CKEDITOR.dtd.$removeEmpty[a.name]}var e=CKEDITOR.tools.extend({table:1,ul:1,ol:1,dl:1},CKEDITOR.dtd.table,CKEDITOR.dtd.ul,CKEDITOR.dtd.ol,CKEDITOR.dtd.dl),c={ol:1,ul:1},a=CKEDITOR.tools.extend({},{html:1},CKEDITOR.dtd.html,CKEDITOR.dtd.body,CKEDITOR.dtd.head,{style:1,script:1}),b={ul:"li",ol:"li",dl:"dd",table:"tbody",tbody:"tr",thead:"tr",tfoot:"tr",tr:"td"};
CKEDITOR.htmlParser.fragment.fromHtml=function(h,f,i){function g(a){var b;if(u.length>0)for(var c=0;c<u.length;c++){var d=u[c],f=d.name,e=CKEDITOR.dtd[f],g=s.name&&CKEDITOR.dtd[s.name];g&&!g[f]||a&&e&&!e[a]&&CKEDITOR.dtd[a]?f==s.name&&(m(s,s.parent,1),c--):(b||(j(),b=1),d=d.clone(),d.parent=s,s=d,u.splice(c,1),c--)}}function j(){for(;v.length;)m(v.shift(),s)}function l(a){if(a._.isBlockLike&&"pre"!=a.name&&"textarea"!=a.name){var d,b=a.children.length,c=a.children[b-1];c&&c.type==CKEDITOR.NODE_TEXT&&((d=CKEDITOR.tools.rtrim(c.value))?c.value=d:a.children.length=b-1)}}function m(a,b,c){var b=b||s||n,f=s;void 0===a.previous&&(o(b,a)&&(s=b,k.onTagOpen(i,{}),a.returnPoint=b=s),l(a),(!d(a)||a.children.length)&&b.add(a),"pre"==a.name&&(B=!1),"textarea"==a.name&&(r=!1)),a.returnPoint?(s=a.returnPoint,delete a.returnPoint):s=c?b:f
}function o(a,b){if((a==n||"body"==a.name)&&i&&(!a.name||CKEDITOR.dtd[a.name][i])){var c,d;return(c=b.attributes&&(d=b.attributes["data-cke-real-element-type"])?d:b.name)&&c in CKEDITOR.dtd.$inline&&!(c in CKEDITOR.dtd.head)&&!b.isOrphan||b.type==CKEDITOR.NODE_TEXT}}function p(a,b){return a in CKEDITOR.dtd.$listItem||a in CKEDITOR.dtd.$tableContent?a==b||"dt"==a&&"dd"==b||"dd"==a&&"dt"==b:!1}var k=new CKEDITOR.htmlParser,n=f instanceof CKEDITOR.htmlParser.element?f:"string"==typeof f?new CKEDITOR.htmlParser.element(f):new CKEDITOR.htmlParser.fragment,u=[],v=[],s=n,r="textarea"==n.name,B="pre"==n.name;k.onTagOpen=function(b,f,h,i){if(f=new CKEDITOR.htmlParser.element(b,f),f.isUnknown&&h&&(f.isEmpty=!0),f.isOptionalClose=i,d(f))u.push(f);
else{if("pre"==b)B=!0;else{if("br"==b&&B)return void s.add(new CKEDITOR.htmlParser.text("\n"));"textarea"==b&&(r=!0)}if("br"==b)v.push(f);else{for(;i=(h=s.name)?CKEDITOR.dtd[h]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a,!(f.isUnknown||s.isUnknown||i[b]);)if(s.isOptionalClose)k.onTagClose(h);else if(b in c&&h in c)h=s.children,(h=h[h.length-1])&&"li"==h.name||m(h=new CKEDITOR.htmlParser.element("li"),s),!f.returnPoint&&(f.returnPoint=s),s=h;else if(b in CKEDITOR.dtd.$listItem&&!p(b,h))k.onTagOpen("li"==b?"ul":"dl",{},0,1);else if(h in e&&!p(b,h))!f.returnPoint&&(f.returnPoint=s),s=s.parent;else{if(h in CKEDITOR.dtd.$inline&&u.unshift(s),!s.parent){f.isOrphan=1;
break}m(s,s.parent,1)}g(b),j(),f.parent=s,f.isEmpty?m(f):s=f}}},k.onTagClose=function(a){for(var b=u.length-1;b>=0;b--)if(a==u[b].name)return void u.splice(b,1);for(var c=[],d=[],f=s;f!=n&&f.name!=a;)f._.isBlockLike||d.unshift(f),c.push(f),f=f.returnPoint||f.parent;if(f!=n){for(b=0;b<c.length;b++){var e=c[b];m(e,e.parent)}s=f,f._.isBlockLike&&j(),m(f,f.parent),f==s&&(s=s.parent),u=u.concat(d)}"body"==a&&(i=!1)},k.onText=function(c){if(s._.hasInlineStarted&&!v.length||B||r||(c=CKEDITOR.tools.ltrim(c),0!==c.length)){var d=s.name,f=d?CKEDITOR.dtd[d]||(s._.isBlockLike?CKEDITOR.dtd.div:CKEDITOR.dtd.span):a;!r&&!f["#"]&&d in e?(k.onTagOpen(b[d]||""),k.onText(c)):(j(),g(),!B&&!r&&(c=c.replace(/[\t\r\n ]{2,}|[\t\r\n]/g," ")),c=new CKEDITOR.htmlParser.text(c),o(s,c)&&this.onTagOpen(i,{},0,1),s.add(c))
}},k.onCDATA=function(a){s.add(new CKEDITOR.htmlParser.cdata(a))},k.onComment=function(a){j(),g(),s.add(new CKEDITOR.htmlParser.comment(a))},k.parse(h);for(j();s!=n;)m(s,s.parent,1);return l(n),n},CKEDITOR.htmlParser.fragment.prototype={type:CKEDITOR.NODE_DOCUMENT_FRAGMENT,add:function(a,b){isNaN(b)&&(b=this.children.length);var c=b>0?this.children[b-1]:null;if(c){if(a._.isBlockLike&&c.type==CKEDITOR.NODE_TEXT&&(c.value=CKEDITOR.tools.rtrim(c.value),0===c.value.length))return this.children.pop(),void this.add(a);c.next=a}a.previous=c,a.parent=this,this.children.splice(b,0,a),this._.hasInlineStarted||(this._.hasInlineStarted=a.type==CKEDITOR.NODE_TEXT||a.type==CKEDITOR.NODE_ELEMENT&&!a._.isBlockLike)
},filter:function(a,b){b=this.getFilterContext(b),a.onRoot(b,this),this.filterChildren(a,!1,b)},filterChildren:function(a,b,c){if(this.childrenFilteredBy!=a.id)for(c=this.getFilterContext(c),b&&!this.parent&&a.onRoot(c,this),this.childrenFilteredBy=a.id,b=0;b<this.children.length;b++)this.children[b].filter(a,c)===!1&&b--},writeHtml:function(a,b){b&&this.filter(b),this.writeChildrenHtml(a)},writeChildrenHtml:function(a,b,c){var d=this.getFilterContext();for(c&&!this.parent&&b&&b.onRoot(d,this),b&&this.filterChildren(b,!1,d),b=0,c=this.children,d=c.length;d>b;b++)c[b].writeHtml(a)},forEach:function(a,b,c){if(!(c||b&&this.type!=b))var d=a(this);if(d!==!1)for(var c=this.children,e=0;e<c.length;e++)d=c[e],d.type==CKEDITOR.NODE_ELEMENT?d.forEach(a,b):(!b||d.type==b)&&a(d)
},getFilterContext:function(a){return a||{}}}}(),function(){function d(){this.rules=[]}function e(c,a,b,e){var f,i;for(f in a)(i=c[f])||(i=c[f]=new d),i.add(a[f],b,e)}CKEDITOR.htmlParser.filter=CKEDITOR.tools.createClass({$:function(c){this.id=CKEDITOR.tools.getNextNumber(),this.elementNameRules=new d,this.attributeNameRules=new d,this.elementsRules={},this.attributesRules={},this.textRules=new d,this.commentRules=new d,this.rootRules=new d,c&&this.addRules(c,10)},proto:{addRules:function(c,a){var b;"number"==typeof a?b=a:a&&"priority"in a&&(b=a.priority),"number"!=typeof b&&(b=10),"object"!=typeof a&&(a={}),c.elementNames&&this.elementNameRules.addMany(c.elementNames,b,a),c.attributeNames&&this.attributeNameRules.addMany(c.attributeNames,b,a),c.elements&&e(this.elementsRules,c.elements,b,a),c.attributes&&e(this.attributesRules,c.attributes,b,a),c.text&&this.textRules.add(c.text,b,a),c.comment&&this.commentRules.add(c.comment,b,a),c.root&&this.rootRules.add(c.root,b,a)
},applyTo:function(c){c.filter(this)},onElementName:function(c,a){return this.elementNameRules.execOnName(c,a)},onAttributeName:function(c,a){return this.attributeNameRules.execOnName(c,a)},onText:function(c,a,b){return this.textRules.exec(c,a,b)},onComment:function(c,a,b){return this.commentRules.exec(c,a,b)},onRoot:function(c,a){return this.rootRules.exec(c,a)},onElement:function(c,a){for(var d,b=[this.elementsRules["^"],this.elementsRules[a.name],this.elementsRules.$],f=0;3>f;f++)if(d=b[f]){if(d=d.exec(c,a,this),d===!1)return null;if(d&&d!=a)return this.onNode(c,d);if(a.parent&&!a.name)break}return a},onNode:function(c,a){var b=a.type;return b==CKEDITOR.NODE_ELEMENT?this.onElement(c,a):b==CKEDITOR.NODE_TEXT?new CKEDITOR.htmlParser.text(this.onText(c,a.value)):b==CKEDITOR.NODE_COMMENT?new CKEDITOR.htmlParser.comment(this.onComment(c,a.value)):null
},onAttribute:function(c,a,b,d){return(b=this.attributesRules[b])?b.exec(c,d,a,this):d}}}),CKEDITOR.htmlParser.filterRulesGroup=d,d.prototype={add:function(c,a,b){this.rules.splice(this.findIndex(a),0,{value:c,priority:a,options:b})},addMany:function(c,a,b){for(var d=[this.findIndex(a),0],f=0,e=c.length;e>f;f++)d.push({value:c[f],priority:a,options:b});this.rules.splice.apply(this.rules,d)},findIndex:function(c){for(var a=this.rules,b=a.length-1;b>=0&&c<a[b].priority;)b--;return b+1},exec:function(c,a){var g,j,l,m,b=a instanceof CKEDITOR.htmlParser.node||a instanceof CKEDITOR.htmlParser.fragment,d=Array.prototype.slice.call(arguments,1),f=this.rules,e=f.length;
for(m=0;e>m;m++)if(b&&(g=a.type,j=a.name),l=f[m],!(c.nonEditable&&!l.options.applyToAll||c.nestedEditable&&l.options.excludeNestedEditable)){if(l=l.value.apply(null,d),l===!1||b&&l&&(l.name!=j||l.type!=g))return l;void 0!=l&&(d[0]=a=l)}return a},execOnName:function(c,a){for(var e,b=0,d=this.rules,f=d.length;a&&f>b;b++)e=d[b],!(c.nonEditable&&!e.options.applyToAll||c.nestedEditable&&e.options.excludeNestedEditable)&&(a=a.replace(e.value[0],e.value[1]));return a}}}(),function(){function d(d,e){function g(a){return a||CKEDITOR.env.needsNbspFiller?new CKEDITOR.htmlParser.text("Â "):new CKEDITOR.htmlParser.element("br",{"data-cke-bogus":1})}function k(b,d){return function(f){if(f.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var j,r,e=[],k=c(f);
if(k)for(i(k,1)&&e.push(k);k;)h(k)&&(j=a(k))&&i(j)&&((r=a(j))&&!h(r)?e.push(j):(g(l).insertAfter(j),j.remove())),k=k.previous;for(k=0;k<e.length;k++)e[k].remove();(e=CKEDITOR.env.opera&&!b||("function"==typeof d?d(f)!==!1:d))&&((l||CKEDITOR.env.needsBrFiller||f.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT)&&(l||CKEDITOR.env.needsBrFiller||!(document.documentMode>7||f.name in CKEDITOR.dtd.tr||f.name in CKEDITOR.dtd.$listItem))?(e=c(f),e=!e||"form"==f.name&&"input"==e.name):e=!1),e&&f.add(g(b))}}}function i(a,b){if((!l||CKEDITOR.env.needsBrFiller)&&a.type==CKEDITOR.NODE_ELEMENT&&"br"==a.name&&!a.attributes["data-cke-eol"])return!0;var c;if(a.type==CKEDITOR.NODE_TEXT&&(c=a.value.match(u))){if(c.index&&(new CKEDITOR.htmlParser.text(a.value.substring(0,c.index)).insertBefore(a),a.value=c[0]),!CKEDITOR.env.needsBrFiller&&l&&(!b||a.parent.name in r))return!0;
if(!l&&((c=a.previous)&&"br"==c.name||!c||h(c)))return!0}return!1}var E,j={elements:{}},l="html"==e,r=CKEDITOR.tools.extend({},B);for(E in r)"#"in s[E]||delete r[E];for(E in r)j.elements[E]=k(l,d.config.fillEmptyBlocks!==!1);return j.root=k(l),j.elements.br=function(c){return function(d){if(d.parent.type!=CKEDITOR.NODE_DOCUMENT_FRAGMENT){var e=d.attributes;if("data-cke-bogus"in e||"data-cke-eol"in e)delete e["data-cke-bogus"];else{for(e=d.next;e&&b(e);)e=e.next;var k=a(d);!e&&h(d.parent)?f(d.parent,g(c)):h(e)&&k&&!h(k)&&g(c).insertBefore(e)}}}}(l),j}function e(a,b){return a!=CKEDITOR.ENTER_BR&&b!==!1?a==CKEDITOR.ENTER_DIV?"div":"p":!1}function c(a){for(a=a.children[a.children.length-1];a&&b(a);)a=a.previous;
return a}function a(a){for(a=a.previous;a&&b(a);)a=a.previous;return a}function b(a){return a.type==CKEDITOR.NODE_TEXT&&!CKEDITOR.tools.trim(a.value)||a.type==CKEDITOR.NODE_ELEMENT&&a.attributes["data-cke-bookmark"]}function h(a){return a&&(a.type==CKEDITOR.NODE_ELEMENT&&a.name in B||a.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT)}function f(a,b){var c=a.children[a.children.length-1];a.children.push(b),b.parent=a,c&&(c.next=b,b.previous=c)}function i(a){a=a.attributes,"false"!=a.contenteditable&&(a["data-cke-editable"]=a.contenteditable?"true":1),a.contenteditable="false"}function g(a){switch(a=a.attributes,a["data-cke-editable"]){case"true":a.contenteditable="true";
break;case"1":delete a.contenteditable}}function j(a){return a.replace(y,function(a,b,c){return"<"+b+c.replace(A,function(a,b){return D.test(b)&&-1==c.indexOf("data-cke-saved-"+b)?" data-cke-saved-"+a+" data-cke-"+CKEDITOR.rnd+"-"+a:a})+">"})}function l(a,b){return a.replace(b,function(a,b,c){return 0===a.indexOf("<textarea")&&(a=b+p(c).replace(/</g,"&lt;").replace(/>/g,"&gt;")+"</textarea>"),"<cke:encoded>"+encodeURIComponent(a)+"</cke:encoded>"})}function m(a){return a.replace(F,function(a,b){return decodeURIComponent(b)})}function o(a){return a.replace(/<\!--(?!{cke_protected})[\s\S]+?--\>/g,function(a){return"<!--"+v+"{C}"+encodeURIComponent(a).replace(/--/g,"%2D%2D")+"-->"
})}function p(a){return a.replace(/<\!--\{cke_protected\}\{C\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)})}function k(a,b){var c=b._.dataStore;return a.replace(/<\!--\{cke_protected\}([\s\S]+?)--\>/g,function(a,b){return decodeURIComponent(b)}).replace(/\{cke_protected_(\d+)\}/g,function(a,b){return c&&c[b]||""})}function n(a,b){for(var c=[],d=b.config.protectedSource,e=b._.dataStore||(b._.dataStore={id:1}),f=/<\!--\{cke_temp(comment)?\}(\d*?)--\>/g,d=[/<script[\s\S]*?<\/script>/gi,/<noscript[\s\S]*?<\/noscript>/gi].concat(d),a=a.replace(/<\!--[\s\S]*?--\>/g,function(a){return"<!--{cke_tempcomment}"+(c.push(a)-1)+"-->"}),g=0;g<d.length;g++)a=a.replace(d[g],function(a){return a=a.replace(f,function(a,b,d){return c[d]
}),/cke_temp(comment)?/.test(a)?a:"<!--{cke_temp}"+(c.push(a)-1)+"-->"});return a=a.replace(f,function(a,b,d){return"<!--"+v+(b?"{C}":"")+encodeURIComponent(c[d]).replace(/--/g,"%2D%2D")+"-->"}),a.replace(/<\w([^'">]+|'[^']*'|"[^"]*")+>/g,function(a){return a.replace(/<\!--\{cke_protected\}([^>]*)--\>/g,function(a,b){return e[e.id]=decodeURIComponent(b),"{cke_protected_"+e.id++ +"}"})})}CKEDITOR.htmlDataProcessor=function(a){var b,c,f=this;this.editor=a,this.dataFilter=b=new CKEDITOR.htmlParser.filter,this.htmlFilter=c=new CKEDITOR.htmlParser.filter,this.writer=new CKEDITOR.htmlParser.basicWriter,b.addRules(z),b.addRules(x,{applyToAll:!0}),b.addRules(d(a,"data"),{applyToAll:!0}),c.addRules(q),c.addRules(w,{applyToAll:!0}),c.addRules(d(a,"html"),{applyToAll:!0}),a.on("toHtml",function(b){var f,b=b.data,c=b.dataValue,c=n(c,a),c=l(c,C),c=j(c),c=l(c,G),c=c.replace(E,"$1cke:$2"),c=c.replace(L,"<cke:$1$2></cke:$1>"),c=CKEDITOR.env.opera?c:c.replace(/(<pre\b[^>]*>)(\r\n|\n)/g,"$1$2$2"),c=c.replace(/([^a-z0-9<\-])(on\w{3,})(?!>)/gi,"$1data-cke-"+CKEDITOR.rnd+"-$2"),d=b.context||a.editable().getName();
CKEDITOR.env.ie&&CKEDITOR.env.version<9&&"pre"==d&&(d="div",c="<pre>"+c+"</pre>",f=1),d=a.document.createElement(d),d.setHtml("a"+c),c=d.getHtml().substr(1),c=c.replace(RegExp("data-cke-"+CKEDITOR.rnd+"-","ig"),""),f&&(c=c.replace(/^<pre>|<\/pre>$/gi,"")),c=c.replace(J,"$1$2"),c=m(c),c=p(c),b.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,b.context,b.fixForBody===!1?!1:e(b.enterMode,a.config.autoParagraph))},null,null,5),a.on("toHtml",function(b){b.data.filter.applyTo(b.data.dataValue,!0,b.data.dontFilter,b.data.enterMode)&&a.fire("dataFiltered")},null,null,6),a.on("toHtml",function(a){a.data.dataValue.filterChildren(f.dataFilter,!0)},null,null,10),a.on("toHtml",function(a){var a=a.data,b=a.dataValue,c=new CKEDITOR.htmlParser.basicWriter;
b.writeChildrenHtml(c),b=c.getHtml(!0),a.dataValue=o(b)},null,null,15),a.on("toDataFormat",function(b){var c=b.data.dataValue;b.data.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/^<br *\/?>/i,"")),b.data.dataValue=CKEDITOR.htmlParser.fragment.fromHtml(c,b.data.context,e(b.data.enterMode,a.config.autoParagraph))},null,null,5),a.on("toDataFormat",function(a){a.data.dataValue.filterChildren(f.htmlFilter,!0)},null,null,10),a.on("toDataFormat",function(a){a.data.filter.applyTo(a.data.dataValue,!1,!0)},null,null,11),a.on("toDataFormat",function(b){var c=b.data.dataValue,d=f.writer;d.reset(),c.writeChildrenHtml(d),c=d.getHtml(!0),c=p(c),c=k(c,a),b.data.dataValue=c},null,null,15)
},CKEDITOR.htmlDataProcessor.prototype={toHtml:function(a,b,c,d){var f,g,k,e=this.editor;return b&&"object"==typeof b?(f=b.context,c=b.fixForBody,d=b.dontFilter,g=b.filter,k=b.enterMode):f=b,!f&&null!==f&&(f=e.editable().getName()),e.fire("toHtml",{dataValue:a,context:f,fixForBody:c,dontFilter:d,filter:g||e.filter,enterMode:k||e.enterMode}).dataValue},toDataFormat:function(a,b){var c,d,e;return b&&(c=b.context,d=b.filter,e=b.enterMode),!c&&null!==c&&(c=this.editor.editable().getName()),this.editor.fire("toDataFormat",{dataValue:a,filter:d||this.editor.filter,context:c,enterMode:e||this.editor.enterMode}).dataValue}};var u=/(?:&nbsp;|\xa0)$/,v="{cke_protected}",s=CKEDITOR.dtd,r=["caption","colgroup","col","thead","tfoot","tbody"],B=CKEDITOR.tools.extend({},s.$blockLimit,s.$block),z={elements:{input:i,textarea:i}},x={attributeNames:[[/^on/,"data-cke-pa-on"],[/^data-cke-expando$/,""]]},q={elements:{embed:function(a){var b=a.parent;
if(b&&"object"==b.name){var c=b.attributes.width,b=b.attributes.height;c&&(a.attributes.width=c),b&&(a.attributes.height=b)}},a:function(a){return a.children.length||a.attributes.name||a.attributes["data-cke-saved-name"]?void 0:!1}}},w={elementNames:[[/^cke:/,""],[/^\?xml:namespace$/,""]],attributeNames:[[/^data-cke-(saved|pa)-/,""],[/^data-cke-.*/,""],["hidefocus",""]],elements:{$:function(a){var b=a.attributes;if(b){if(b["data-cke-temp"])return!1;for(var d,c=["name","href","src"],e=0;e<c.length;e++)d="data-cke-saved-"+c[e],d in b&&delete b[c[e]]}return a},table:function(a){a.children.slice(0).sort(function(a,b){var c,d;return a.type==CKEDITOR.NODE_ELEMENT&&b.type==a.type&&(c=CKEDITOR.tools.indexOf(r,a.name),d=CKEDITOR.tools.indexOf(r,b.name)),c>-1&&d>-1&&c!=d||(c=a.parent?a.getIndex():-1,d=b.parent?b.getIndex():-1),c>d?1:-1
})},param:function(a){return a.children=[],a.isEmpty=!0,a},span:function(a){"Apple-style-span"==a.attributes["class"]&&delete a.name},html:function(a){delete a.attributes.contenteditable,delete a.attributes["class"]},body:function(a){delete a.attributes.spellcheck,delete a.attributes.contenteditable},style:function(a){var b=a.children[0];b&&b.value&&(b.value=CKEDITOR.tools.trim(b.value)),a.attributes.type||(a.attributes.type="text/css")},title:function(a){var b=a.children[0];!b&&f(a,b=new CKEDITOR.htmlParser.text),b.value=a.attributes["data-cke-title"]||""},input:g,textarea:g},attributes:{"class":function(a){return CKEDITOR.tools.ltrim(a.replace(/(?:^|\s+)cke_[^\s]*/g,""))||!1
}}};CKEDITOR.env.ie&&(w.attributes.style=function(a){return a.replace(/(^|;)([^\:]+)/g,function(a){return a.toLowerCase()})});var y=/<(a|area|img|input|source)\b([^>]*)>/gi,A=/([\w-]+)\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|(?:[^ "'>]+))/gi,D=/^(href|src|name)$/i,G=/(?:<style(?=[ >])[^>]*>[\s\S]*?<\/style>)|(?:<(:?link|meta|base)[^>]*>)/gi,C=/(<textarea(?=[ >])[^>]*>)([\s\S]*?)(?:<\/textarea>)/gi,F=/<cke:encoded>([^<]*)<\/cke:encoded>/gi,E=/(<\/?)((?:object|embed|param|html|body|head|title)[^>]*>)/gi,J=/(<\/?)cke:((?:html|body|head|title)[^>]*>)/gi,L=/<cke:(param|embed)([^>]*?)\/?>(?!\s*<\/cke:\1)/gi}(),CKEDITOR.htmlParser.element=function(d,e){this.name=d,this.attributes=e||{},this.children=[];
var c=d||"",a=c.match(/^cke:(.*)/);a&&(c=a[1]),c=!!(CKEDITOR.dtd.$nonBodyContent[c]||CKEDITOR.dtd.$block[c]||CKEDITOR.dtd.$listItem[c]||CKEDITOR.dtd.$tableContent[c]||CKEDITOR.dtd.$nonEditable[c]||"br"==c),this.isEmpty=!!CKEDITOR.dtd.$empty[d],this.isUnknown=!CKEDITOR.dtd[d],this._={isBlockLike:c,hasInlineStarted:this.isEmpty||!c}},CKEDITOR.htmlParser.cssStyle=function(d){var e={};return((d instanceof CKEDITOR.htmlParser.element?d.attributes.style:d)||"").replace(/&quot;/g,'"').replace(/\s*([^ :;]+)\s*:\s*([^;]+)\s*(?=;|$)/g,function(c,a,b){"font-family"==a&&(b=b.replace(/["']/g,"")),e[a.toLowerCase()]=b}),{rules:e,populate:function(c){var a=this.toString();a&&(c instanceof CKEDITOR.dom.element?c.setAttribute("style",a):c instanceof CKEDITOR.htmlParser.element?c.attributes.style=a:c.style=a)
},toString:function(){var a,c=[];for(a in e)e[a]&&c.push(a,":",e[a],";");return c.join("")}}},function(){function d(a){return function(b){return b.type==CKEDITOR.NODE_ELEMENT&&("string"==typeof a?b.name==a:b.name in a)}}var e=function(a,b){return a=a[0],b=b[0],b>a?-1:a>b?1:0},c=CKEDITOR.htmlParser.fragment.prototype;CKEDITOR.htmlParser.element.prototype=CKEDITOR.tools.extend(new CKEDITOR.htmlParser.node,{type:CKEDITOR.NODE_ELEMENT,add:c.add,clone:function(){return new CKEDITOR.htmlParser.element(this.name,this.attributes)},filter:function(a,b){var d,e,c=this,b=c.getFilterContext(b);if(b.off)return!0;for(c.parent||a.onRoot(b,c);;){if(d=c.name,!(e=a.onElementName(b,d)))return this.remove(),!1;
if(c.name=e,!(c=a.onElement(b,c)))return this.remove(),!1;if(c!==this)return this.replaceWith(c),!1;if(c.name==d)break;if(c.type!=CKEDITOR.NODE_ELEMENT)return this.replaceWith(c),!1;if(!c.name)return this.replaceWithChildren(),!1}d=c.attributes;var g,j;for(g in d){for(j=g,e=d[g];;){if(!(j=a.onAttributeName(b,g))){delete d[g];break}if(j==g)break;delete d[g],g=j}j&&((e=a.onAttribute(b,c,j,e))===!1?delete d[j]:d[j]=e)}return c.isEmpty||this.filterChildren(a,!1,b),!0},filterChildren:c.filterChildren,writeHtml:function(a,b){b&&this.filter(b);var g,j,c=this.name,d=[],i=this.attributes;a.openTag(c,i);for(g in i)d.push([g,i[g]]);for(a.sortAttributes&&d.sort(e),g=0,j=d.length;j>g;g++)i=d[g],a.attribute(i[0],i[1]);
a.openTagClose(c,this.isEmpty),this.writeChildrenHtml(a),this.isEmpty||a.closeTag(c)},writeChildrenHtml:c.writeChildrenHtml,replaceWithChildren:function(){for(var a=this.children,b=a.length;b;)a[--b].insertAfter(this);this.remove()},forEach:c.forEach,getFirst:function(a){if(!a)return this.children.length?this.children[0]:null;"function"!=typeof a&&(a=d(a));for(var b=0,c=this.children.length;c>b;++b)if(a(this.children[b]))return this.children[b];return null},getHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeChildrenHtml(a),a.getHtml()},setHtml:function(a){for(var a=this.children=CKEDITOR.htmlParser.fragment.fromHtml(a).children,b=0,c=a.length;c>b;++b)a[b].parent=this
},getOuterHtml:function(){var a=new CKEDITOR.htmlParser.basicWriter;return this.writeHtml(a),a.getHtml()},split:function(a){for(var b=this.children.splice(a,this.children.length-a),c=this.clone(),d=0;d<b.length;++d)b[d].parent=c;return c.children=b,b[0]&&(b[0].previous=null),a>0&&(this.children[a-1].next=null),this.parent.add(c,this.getIndex()+1),c},removeClass:function(a){var b=this.attributes["class"];b&&((b=CKEDITOR.tools.trim(b.replace(RegExp("(?:\\s+|^)"+a+"(?:\\s+|$)")," ")))?this.attributes["class"]=b:delete this.attributes["class"])},hasClass:function(a){var b=this.attributes["class"];return b?RegExp("(?:^|\\s)"+a+"(?=\\s|$)").test(b):!1},getFilterContext:function(a){var b=[];
if(a||(a={off:!1,nonEditable:!1,nestedEditable:!1}),!a.off&&"off"==this.attributes["data-cke-processor"]&&b.push("off",!0),a.nonEditable||"false"!=this.attributes.contenteditable?"body"!=this.name&&!a.nestedEditable&&"true"==this.attributes.contenteditable&&b.push("nestedEditable",!0):b.push("nonEditable",!0),b.length)for(var a=CKEDITOR.tools.copy(a),c=0;c<b.length;c+=2)a[b[c]]=b[c+1];return a}},!0)}(),function(){var d={},e=/{([^}]+)}/g,c=/([\\'])/g,a=/\n/g,b=/\r/g;CKEDITOR.template=function(h){if(d[h])this.output=d[h];else{var f=h.replace(c,"\\$1").replace(a,"\\n").replace(b,"\\r").replace(e,function(a,b){return"',data['"+b+"']==undefined?'{"+b+"}':data['"+b+"'],'"
});this.output=d[h]=Function("data","buffer","return buffer?buffer.push('"+f+"'):['"+f+"'].join('');")}}}(),delete CKEDITOR.loadFullCore,CKEDITOR.instances={},CKEDITOR.document=new CKEDITOR.dom.document(document),CKEDITOR.add=function(d){CKEDITOR.instances[d.name]=d,d.on("focus",function(){CKEDITOR.currentInstance!=d&&(CKEDITOR.currentInstance=d,CKEDITOR.fire("currentInstance"))}),d.on("blur",function(){CKEDITOR.currentInstance==d&&(CKEDITOR.currentInstance=null,CKEDITOR.fire("currentInstance"))}),CKEDITOR.fire("instance",null,d)},CKEDITOR.remove=function(d){delete CKEDITOR.instances[d.name]},function(){var d={};CKEDITOR.addTemplate=function(e,c){var a=d[e];return a?a:(a={name:e,source:c},CKEDITOR.fire("template",a),d[e]=new CKEDITOR.template(a.source))
},CKEDITOR.getTemplate=function(e){return d[e]}}(),function(){var d=[];CKEDITOR.addCss=function(e){d.push(e)},CKEDITOR.getCss=function(){return d.join("\n")}}(),CKEDITOR.on("instanceDestroyed",function(){CKEDITOR.tools.isEmpty(this.instances)&&CKEDITOR.fire("reset")}),CKEDITOR.TRISTATE_ON=1,CKEDITOR.TRISTATE_OFF=2,CKEDITOR.TRISTATE_DISABLED=0,function(){CKEDITOR.inline=function(d,e){if(!CKEDITOR.env.isCompatible)return null;if(d=CKEDITOR.dom.element.get(d),d.getEditor())throw'The editor instance "'+d.getEditor().name+'" is already attached to the provided element.';var c=new CKEDITOR.editor(e,d,CKEDITOR.ELEMENT_MODE_INLINE),a=d.is("textarea")?d:null;return a?(c.setData(a.getValue(),null,!0),d=CKEDITOR.dom.element.createFromHtml('<div contenteditable="'+!!c.readOnly+'" class="cke_textarea_inline">'+a.getValue()+"</div>",CKEDITOR.document),d.insertAfter(a),a.hide(),a.$.form&&c._attachToForm()):c.setData(d.getHtml(),null,!0),c.on("loaded",function(){c.fire("uiReady"),c.editable(d),c.container=d,c.setData(c.getData(1)),c.resetDirty(),c.fire("contentDom"),c.mode="wysiwyg",c.fire("mode"),c.status="ready",c.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,c)
},null,null,1e4),c.on("destroy",function(){a&&(c.container.clearCustomData(),c.container.remove(),a.show()),c.element.clearCustomData(),delete c.element}),c},CKEDITOR.inlineAll=function(){var d,e,c;for(c in CKEDITOR.dtd.$editable)for(var a=CKEDITOR.document.getElementsByTag(c),b=0,h=a.count();h>b;b++)d=a.getItem(b),"true"==d.getAttribute("contenteditable")&&(e={element:d,config:{}},CKEDITOR.fire("inline",e)!==!1&&CKEDITOR.inline(d,e.config))},CKEDITOR.domReady(function(){!CKEDITOR.disableAutoInline&&CKEDITOR.inlineAll()})}(),CKEDITOR.replaceClass="ckeditor",function(){function d(a,d,f,i){if(!CKEDITOR.env.isCompatible)return null;if(a=CKEDITOR.dom.element.get(a),a.getEditor())throw'The editor instance "'+a.getEditor().name+'" is already attached to the provided element.';
var g=new CKEDITOR.editor(d,a,i);return i==CKEDITOR.ELEMENT_MODE_REPLACE&&(a.setStyle("visibility","hidden"),g._.required=a.hasAttribute("required"),a.removeAttribute("required")),f&&g.setData(f,null,!0),g.on("loaded",function(){c(g),i==CKEDITOR.ELEMENT_MODE_REPLACE&&g.config.autoUpdateElement&&a.$.form&&g._attachToForm(),g.setMode(g.config.startupMode,function(){g.resetDirty(),g.status="ready",g.fireOnce("instanceReady"),CKEDITOR.fire("instanceReady",null,g)})}),g.on("destroy",e),g}function e(){var a=this.container,c=this.element;a&&(a.clearCustomData(),a.remove()),c&&(c.clearCustomData(),this.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE&&(c.show(),this._.required&&c.setAttribute("required","required")),delete this.element)
}function c(b){var c=b.name,d=b.element,e=b.elementMode,g=b.fire("uiSpace",{space:"top",html:""}).html,j=b.fire("uiSpace",{space:"bottom",html:""}).html;a||(a=CKEDITOR.addTemplate("maincontainer",'<{outerEl} id="cke_{name}" class="{id} cke cke_reset cke_chrome cke_editor_{name} cke_{langDir} '+CKEDITOR.env.cssClass+'"  dir="{langDir}" lang="{langCode}" role="application" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><{outerEl} class="cke_inner cke_reset" role="presentation">{topHtml}<{outerEl} id="{contentId}" class="cke_contents cke_reset" role="presentation"></{outerEl}>{bottomHtml}</{outerEl}></{outerEl}>')),c=CKEDITOR.dom.element.createFromHtml(a.output({id:b.id,name:c,langDir:b.lang.dir,langCode:b.langCode,voiceLabel:[b.lang.editor,b.name].join(", "),topHtml:g?'<span id="'+b.ui.spaceId("top")+'" class="cke_top cke_reset_all" role="presentation" style="height:auto">'+g+"</span>":"",contentId:b.ui.spaceId("contents"),bottomHtml:j?'<span id="'+b.ui.spaceId("bottom")+'" class="cke_bottom cke_reset_all" role="presentation">'+j+"</span>":"",outerEl:CKEDITOR.env.ie?"span":"div"})),e==CKEDITOR.ELEMENT_MODE_REPLACE?(d.hide(),c.insertAfter(d)):d.append(c),b.container=c,g&&b.ui.space("top").unselectable(),j&&b.ui.space("bottom").unselectable(),d=b.config.width,e=b.config.height,d&&c.setStyle("width",CKEDITOR.tools.cssLength(d)),e&&b.ui.space("contents").setStyle("height",CKEDITOR.tools.cssLength(e)),c.disableContextMenu(),CKEDITOR.env.webkit&&c.on("focus",function(){b.focus()
}),b.fireOnce("uiReady")}CKEDITOR.replace=function(a,c){return d(a,c,null,CKEDITOR.ELEMENT_MODE_REPLACE)},CKEDITOR.appendTo=function(a,c,e){return d(a,c,e,CKEDITOR.ELEMENT_MODE_APPENDTO)},CKEDITOR.replaceAll=function(){for(var a=document.getElementsByTagName("textarea"),c=0;c<a.length;c++){var d=null,e=a[c];if(e.name||e.id){if("string"==typeof arguments[0]){if(!RegExp("(?:^|\\s)"+arguments[0]+"(?:$|\\s)").test(e.className))continue}else if("function"==typeof arguments[0]&&(d={},arguments[0](e,d)===!1))continue;this.replace(e,d)}}},CKEDITOR.editor.prototype.addMode=function(a,c){(this._.modes||(this._.modes={}))[a]=c},CKEDITOR.editor.prototype.setMode=function(a,c){var d=this,e=this._.modes;
if(a!=d.mode&&e&&e[a]){if(d.fire("beforeSetMode",a),d.mode){var g=d.checkDirty();d._.previousMode=d.mode,d.fire("beforeModeUnload"),d.editable(0),d.ui.space("contents").setHtml(""),d.mode=""}this._.modes[a](function(){d.mode=a,void 0!==g&&!g&&d.resetDirty(),setTimeout(function(){d.fire("mode"),c&&c.call(d)},0)})}},CKEDITOR.editor.prototype.resize=function(a,c,d,e){var g=this.container,j=this.ui.space("contents"),l=CKEDITOR.env.webkit&&this.document&&this.document.getWindow().$.frameElement,e=e?g.getChild(1):g;e.setSize("width",a,!0),l&&(l.style.width="1%"),j.setStyle("height",Math.max(c-(d?0:(e.$.offsetHeight||0)-(j.$.clientHeight||0)),0)+"px"),l&&(l.style.width="100%"),this.fire("resize")
},CKEDITOR.editor.prototype.getResizable=function(a){return a?this.ui.space("contents"):this.container};var a;CKEDITOR.domReady(function(){CKEDITOR.replaceClass&&CKEDITOR.replaceAll(CKEDITOR.replaceClass)})}(),CKEDITOR.config.startupMode="wysiwyg",function(){function d(b){var h,c=b.editor,d=b.data.path,f=d.blockLimit,g=b.data.selection,i=g.getRanges()[0];(CKEDITOR.env.gecko||CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller)&&(g=e(g,d))&&(g.appendBogus(),h=CKEDITOR.env.ie),c.config.autoParagraph!==!1&&c.activeEnterMode!=CKEDITOR.ENTER_BR&&c.editable().equals(f)&&!d.block&&i.collapsed&&!i.getCommonAncestor().isReadOnly()&&(d=i.clone(),d.enlarge(CKEDITOR.ENLARGE_BLOCK_CONTENTS),f=new CKEDITOR.dom.walker(d),f.guard=function(b){return!a(b)||b.type==CKEDITOR.NODE_COMMENT||b.isReadOnly()
},(!f.checkForward()||d.checkStartOfBlock()&&d.checkEndOfBlock())&&(c=i.fixBlock(!0,c.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p"),CKEDITOR.env.needsBrFiller||(c=c.getFirst(a))&&c.type==CKEDITOR.NODE_TEXT&&CKEDITOR.tools.trim(c.getText()).match(/^(?:&nbsp;|\xa0)$/)&&c.remove(),h=1,b.cancel())),h&&i.select()}function e(b,c){if(b.isFake)return 0;var d=c.block||c.blockLimit,e=d&&d.getLast(a);return!d||!d.isBlockBoundary()||e&&e.type==CKEDITOR.NODE_ELEMENT&&e.isBlockBoundary()||d.is("pre")||d.getBogus()?void 0:d}function c(a){var b=a.data.getTarget();b.is("input")&&(b=b.getAttribute("type"),("submit"==b||"reset"==b)&&a.data.preventDefault())}function a(a){return l(a)&&m(a)
}function b(a,b){return function(c){var d=CKEDITOR.dom.element.get(c.data.$.toElement||c.data.$.fromElement||c.data.$.relatedTarget);(!d||!b.equals(d)&&!b.contains(d))&&a.call(this,c)}}function h(b){var c,d=b.getRanges()[0],e=b.root,f={table:1,ul:1,ol:1,dl:1};if(d.startPath().contains(f)){var b=function(b){return function(d,e){return e&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(f)&&(c=d),e||!a(d)||b&&g(d)?void 0:!1}},i=d.clone();if(i.collapse(1),i.setStartAt(e,CKEDITOR.POSITION_AFTER_START),e=new CKEDITOR.dom.walker(i),e.guard=b(),e.checkBackward(),c)return i=d.clone(),i.collapse(),i.setEndAt(c,CKEDITOR.POSITION_AFTER_END),e=new CKEDITOR.dom.walker(i),e.guard=b(!0),c=!1,e.checkForward(),c
}return null}function f(a){a.editor.focus(),a.editor.fire("saveSnapshot")}function i(a,b){var c=a.editor;!b&&c.getSelection().scrollIntoView(),setTimeout(function(){c.fire("saveSnapshot")},0)}CKEDITOR.editable=CKEDITOR.tools.createClass({base:CKEDITOR.dom.element,$:function(a,b){this.base(b.$||b),this.editor=a,this.hasFocus=!1,this.setup()},proto:{focus:function(){var a;if(CKEDITOR.env.webkit&&!this.hasFocus&&(a=this.editor._.previousActive||this.getDocument().getActive(),this.contains(a)))return void a.focus();try{this.$[CKEDITOR.env.ie&&this.getDocument().equals(CKEDITOR.document)?"setActive":"focus"]()}catch(b){if(!CKEDITOR.env.ie)throw b}CKEDITOR.env.safari&&!this.isInline()&&(a=CKEDITOR.document.getActive(),a.equals(this.getWindow().getFrame())||this.getWindow().focus())
},on:function(a,c){var d=Array.prototype.slice.call(arguments,0);return CKEDITOR.env.ie&&/^focus|blur$/.exec(a)&&(a="focus"==a?"focusin":"focusout",c=b(c,this),d[0]=a,d[1]=c),CKEDITOR.dom.element.prototype.on.apply(this,d)},attachListener:function(a){!this._.listeners&&(this._.listeners=[]);var g=Array.prototype.slice.call(arguments,1),g=a.on.apply(a,g);return this._.listeners.push(g),g},clearListeners:function(){var a=this._.listeners;try{for(;a.length;)a.pop().removeListener()}catch(b){}},restoreAttrs:function(){var b,c,a=this._.attrChanges;for(c in a)a.hasOwnProperty(c)&&(b=a[c],null!==b?this.setAttribute(c,b):this.removeAttribute(c))},attachClass:function(a){var b=this.getCustomData("classes");
this.hasClass(a)||(!b&&(b=[]),b.push(a),this.setCustomData("classes",b),this.addClass(a))},changeAttr:function(a,b){var c=this.getAttribute(a);b!==c&&(!this._.attrChanges&&(this._.attrChanges={}),a in this._.attrChanges||(this._.attrChanges[a]=c),this.setAttribute(a,b))},insertHtml:function(a,b){f(this),o(this,b||"html",a)},insertText:function(a){f(this);var b=this.editor,c=b.getSelection().getStartElement().hasAscendant("pre",!0)?CKEDITOR.ENTER_BR:b.activeEnterMode,b=c==CKEDITOR.ENTER_BR,d=CKEDITOR.tools,a=d.htmlEncode(a.replace(/\r\n/g,"\n")),a=a.replace(/\t/g,"&nbsp;&nbsp; &nbsp;"),c=c==CKEDITOR.ENTER_P?"p":"div";if(!b){var e=/\n{2}/g;if(e.test(a))var g="<"+c+">",i="</"+c+">",a=g+a.replace(e,function(){return i+g
})+i}a=a.replace(/\n/g,"<br>"),b||(a=a.replace(RegExp("<br>(?=</"+c+">)"),function(a){return d.repeat(a,2)})),a=a.replace(/^ | $/g,"&nbsp;"),a=a.replace(/(>|\s) /g,function(a,b){return b+"&nbsp;"}).replace(/ (?=<)/g,"&nbsp;"),o(this,"text",a)},insertElement:function(a,b){b?this.insertElementIntoRange(a,b):this.insertElementIntoSelection(a)},insertElementIntoRange:function(a,b){var c=this.editor,d=c.config.enterMode,e=a.getName(),f=CKEDITOR.dtd.$block[e];if(b.checkReadOnly())return!1;b.deleteContents(1),b.startContainer.type==CKEDITOR.NODE_ELEMENT&&b.startContainer.is({tr:1,table:1,tbody:1,thead:1,tfoot:1})&&p(b);var g,i;if(f)for(;(g=b.getCommonAncestor(0,1))&&(i=CKEDITOR.dtd[g.getName()])&&(!i||!i[e]);)g.getName()in CKEDITOR.dtd.span?b.splitElement(g):b.checkStartOfBlock()&&b.checkEndOfBlock()?(b.setStartBefore(g),b.collapse(!0),g.remove()):b.splitBlock(d==CKEDITOR.ENTER_DIV?"div":"p",c.editable());
return b.insertNode(a),!0},insertElementIntoSelection:function(b){var c=this.editor,d=c.activeEnterMode,c=c.getSelection(),e=c.getRanges()[0],h=b.getName(),h=CKEDITOR.dtd.$block[h];f(this),this.insertElementIntoRange(b,e)&&(e.moveToPosition(b,CKEDITOR.POSITION_AFTER_END),h&&((h=b.getNext(function(b){return a(b)&&!g(b)}))&&h.type==CKEDITOR.NODE_ELEMENT&&h.is(CKEDITOR.dtd.$block)?h.getDtd()["#"]?e.moveToElementEditStart(h):e.moveToElementEditEnd(b):h||d==CKEDITOR.ENTER_BR||(h=e.fixBlock(!0,d==CKEDITOR.ENTER_DIV?"div":"p"),e.moveToElementEditStart(h)))),c.selectRanges([e]),i(this,CKEDITOR.env.opera)},setData:function(a,b){b||(a=this.editor.dataProcessor.toHtml(a)),this.setHtml(a),this.editor.fire("dataReady")
},getData:function(a){var b=this.getHtml();return a||(b=this.editor.dataProcessor.toDataFormat(b)),b},setReadOnly:function(a){this.setAttribute("contenteditable",!a)},detach:function(){this.removeClass("cke_editable");var a=this.editor;this._.detach(),delete a.document,delete a.window},isInline:function(){return this.getDocument().equals(CKEDITOR.document)},setup:function(){var b=this.editor;if(this.attachListener(b,"beforeGetData",function(){var a=this.getData();this.is("textarea")||b.config.ignoreEmptyParagraph!==!1&&(a=a.replace(j,function(a,b){return b})),b.setData(a,null,1)},this),this.attachListener(b,"getSnapshot",function(a){a.data=this.getData(1)},this),this.attachListener(b,"afterSetData",function(){this.setData(b.getData(1))
},this),this.attachListener(b,"loadSnapshot",function(a){this.setData(a.data,1)},this),this.attachListener(b,"beforeFocus",function(){var a=b.getSelection();(a=a&&a.getNative())&&"Control"==a.type||this.focus()},this),this.attachListener(b,"insertHtml",function(a){this.insertHtml(a.data.dataValue,a.data.mode)},this),this.attachListener(b,"insertElement",function(a){this.insertElement(a.data)},this),this.attachListener(b,"insertText",function(a){this.insertText(a.data)},this),this.setReadOnly(b.readOnly),this.attachClass("cke_editable"),this.attachClass(b.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"cke_editable_inline":b.elementMode==CKEDITOR.ELEMENT_MODE_REPLACE||b.elementMode==CKEDITOR.ELEMENT_MODE_APPENDTO?"cke_editable_themed":""),this.attachClass("cke_contents_"+b.config.contentsLangDirection),b.keystrokeHandler.blockedKeystrokes[8]=+b.readOnly,b.keystrokeHandler.attach(this),this.on("blur",function(a){CKEDITOR.env.opera&&CKEDITOR.document.getActive().equals(this.isInline()?this:this.getWindow().getFrame())?a.cancel():this.hasFocus=!1
},null,null,-1),this.on("focus",function(){this.hasFocus=!0},null,null,-1),b.focusManager.add(this),this.equals(CKEDITOR.document.getActive())&&(this.hasFocus=!0,b.once("contentDom",function(){b.focusManager.focus()})),this.isInline()&&this.changeAttr("tabindex",b.tabIndex),!this.is("textarea")){b.document=this.getDocument(),b.window=this.getWindow();var d=b.document;this.changeAttr("spellcheck",!b.config.disableNativeSpellChecker);var e=b.config.contentsLangDirection;this.getDirection(1)!=e&&this.changeAttr("dir",e);var f=CKEDITOR.getCss();f&&(e=d.getHead(),e.getCustomData("stylesheet")||(f=d.appendStyleText(f),f=new CKEDITOR.dom.element(f.ownerNode||f.owningElement),e.setCustomData("stylesheet",f),f.data("cke-temp",1))),e=d.getCustomData("stylesheet_ref")||0,d.setCustomData("stylesheet_ref",e+1),this.setCustomData("cke_includeReadonly",!b.config.disableReadonlyStyling),this.attachListener(this,"click",function(a){var a=a.data,b=new CKEDITOR.dom.elementPath(a.getTarget(),this).contains("a");
b&&2!=a.$.button&&b.isReadOnly()&&a.preventDefault()});var g={8:1,46:1};this.attachListener(b,"key",function(a){if(b.readOnly)return!0;var d,c=a.data.keyCode;if(c in g){var e,j,m,n,a=b.getSelection(),f=a.getRanges()[0],i=f.startPath(),c=8==c;CKEDITOR.env.ie&&CKEDITOR.env.version<11&&(e=a.getSelectedElement())||(e=h(a))?(b.fire("saveSnapshot"),f.moveToPosition(e,CKEDITOR.POSITION_BEFORE_START),e.remove(),f.select(),b.fire("saveSnapshot"),d=1):f.collapsed&&((j=i.block)&&(n=j[c?"getPrevious":"getNext"](l))&&n.type==CKEDITOR.NODE_ELEMENT&&n.is("table")&&f[c?"checkStartOfBlock":"checkEndOfBlock"]()?(b.fire("saveSnapshot"),f[c?"checkEndOfBlock":"checkStartOfBlock"]()&&j.remove(),f["moveToElementEdit"+(c?"End":"Start")](n),f.select(),b.fire("saveSnapshot"),d=1):i.blockLimit&&i.blockLimit.is("td")&&(m=i.blockLimit.getAscendant("table"))&&f.checkBoundaryOfElement(m,c?CKEDITOR.START:CKEDITOR.END)&&(n=m[c?"getPrevious":"getNext"](l))?(b.fire("saveSnapshot"),f["moveToElementEdit"+(c?"End":"Start")](n),f.checkStartOfBlock()&&f.checkEndOfBlock()?n.remove():f.select(),b.fire("saveSnapshot"),d=1):(m=i.contains(["td","th","caption"]))&&f.checkBoundaryOfElement(m,c?CKEDITOR.START:CKEDITOR.END)&&(d=1))
}return!d}),b.blockless&&CKEDITOR.env.ie&&CKEDITOR.env.needsBrFiller&&this.attachListener(this,"keyup",function(c){c.data.getKeystroke()in g&&!this.getFirst(a)&&(this.appendBogus(),c=b.createRange(),c.moveToPosition(this,CKEDITOR.POSITION_AFTER_START),c.select())}),this.attachListener(this,"dblclick",function(a){return b.readOnly?!1:(a={element:a.data.getTarget()},void b.fire("doubleclick",a))}),CKEDITOR.env.ie&&this.attachListener(this,"click",c),!CKEDITOR.env.ie&&!CKEDITOR.env.opera&&this.attachListener(this,"mousedown",function(a){var c=a.data.getTarget();c.is("img","hr","input","textarea","select")&&(b.getSelection().selectElement(c),c.is("input","textarea","select")&&a.data.preventDefault())
}),CKEDITOR.env.gecko&&this.attachListener(this,"mouseup",function(a){if(2==a.data.$.button&&(a=a.data.getTarget(),!a.getOuterHtml().replace(j,""))){var c=b.createRange();c.moveToElementEditStart(a),c.select(!0)}}),CKEDITOR.env.webkit&&(this.attachListener(this,"click",function(a){a.data.getTarget().is("input","select")&&a.data.preventDefault()}),this.attachListener(this,"mouseup",function(a){a.data.getTarget().is("input","textarea")&&a.data.preventDefault()}))}}},_:{detach:function(){this.editor.setData(this.editor.getData(),0,1),this.clearListeners(),this.restoreAttrs();var a;if(a=this.removeCustomData("classes"))for(;a.length;)this.removeClass(a.pop());if(!this.is("textarea")){a=this.getDocument();
var b=a.getHead();if(b.getCustomData("stylesheet")){var c=a.getCustomData("stylesheet_ref");--c?a.setCustomData("stylesheet_ref",c):(a.removeCustomData("stylesheet_ref"),b.removeCustomData("stylesheet").remove())}}this.editor.fire("contentDomUnload"),delete this.editor}}}),CKEDITOR.editor.prototype.editable=function(a){var b=this._.editable;return b&&a?0:(arguments.length&&(b=this._.editable=a?a instanceof CKEDITOR.editable?a:new CKEDITOR.editable(this,a):(b&&b.detach(),null)),b)};var g=CKEDITOR.dom.walker.bogus(),j=/(^|<body\b[^>]*>)\s*<(p|div|address|h\d|center|pre)[^>]*>\s*(?:<br[^>]*>|&nbsp;|\u00A0|&#160;)?\s*(:?<\/\2>)?\s*(?=$|<\/body>)/gi,l=CKEDITOR.dom.walker.whitespaces(!0),m=CKEDITOR.dom.walker.bookmark(!1,!0);
CKEDITOR.on("instanceLoaded",function(a){var b=a.editor;b.on("insertElement",function(a){a=a.data,a.type==CKEDITOR.NODE_ELEMENT&&(a.is("input")||a.is("textarea"))&&("false"!=a.getAttribute("contentEditable")&&a.data("cke-editable",a.hasAttribute("contenteditable")?"true":"1"),a.setAttribute("contentEditable",!1))}),b.on("selectionChange",function(a){if(!b.readOnly){var c=b.getSelection();c&&!c.isLocked&&(c=b.checkDirty(),b.fire("lockSnapshot"),d(a),b.fire("unlockSnapshot"),!c&&b.resetDirty())}})}),CKEDITOR.on("instanceCreated",function(a){var b=a.editor;b.on("mode",function(){var a=b.editable();if(a&&a.isInline()){var c=b.title;if(a.changeAttr("role","textbox"),a.changeAttr("aria-label",c),c&&a.changeAttr("title",c),c=this.ui.space(this.elementMode==CKEDITOR.ELEMENT_MODE_INLINE?"top":"contents")){var d=CKEDITOR.tools.getNextId(),e=CKEDITOR.dom.element.createFromHtml('<span id="'+d+'" class="cke_voice_label">'+this.lang.common.editorHelp+"</span>");
c.append(e),a.changeAttr("aria-describedby",d)}}})}),CKEDITOR.addCss(".cke_editable{cursor:text}.cke_editable img,.cke_editable input,.cke_editable textarea{cursor:default}");var o=function(){function b(a){return a.type==CKEDITOR.NODE_ELEMENT}function c(a,d){var e,f,g,i,j=[],l=d.range.startContainer;e=d.range.startPath();for(var l=h[l.getName()],m=0,r=a.getChildren(),s=r.count(),o=-1,q=-1,z=0,p=e.contains(h.$list);s>m;++m)e=r.getItem(m),b(e)?(g=e.getName(),p&&g in CKEDITOR.dtd.$list?j=j.concat(c(e,d)):(i=!!l[g],"br"!=g||!e.data("cke-eol")||m&&m!=s-1||(z=(f=m?j[m-1].node:r.getItem(m+1))&&(!b(f)||!f.is("br")),f=f&&b(f)&&h.$block[f.getName()]),-1==o&&!i&&(o=m),i||(q=m),j.push({isElement:1,isLineBreak:z,isBlock:e.isBlockBoundary(),hasBlockSibling:f,node:e,name:g,allowed:i}),f=z=0)):j.push({isElement:0,node:e,allowed:1});
return o>-1&&(j[o].firstNotAllowed=1),q>-1&&(j[q].lastNotAllowed=1),j}function d(a,c){var i,e=[],f=a.getChildren(),g=f.count(),j=0,l=h[c],m=!a.is(h.$inline)||a.is("br");for(m&&e.push(" ");g>j;j++)i=f.getItem(j),b(i)&&!i.is(l)?e=e.concat(d(i,c)):e.push(i);return m&&e.push(" "),e}function e(a){return a&&b(a)&&(a.is(h.$removeEmpty)||a.is("a")&&!a.isBlockBoundary())}function f(a,c,d,e){var i,h,g=a.clone();g.setEndAt(c,CKEDITOR.POSITION_BEFORE_END),(i=new CKEDITOR.dom.walker(g).next())&&b(i)&&j[i.getName()]&&(h=i.getPrevious())&&b(h)&&!h.getParent().equals(a.startContainer)&&d.contains(h)&&e.contains(i)&&i.isIdentical(h)&&(i.moveChildren(h),i.remove(),f(a,c,d,e))}function g(a,c){function d(a,c){return c.isBlock&&c.isElement&&!c.node.is("br")&&b(a)&&a.is("br")?(a.remove(),1):void 0
}var e=c.endContainer.getChild(c.endOffset),f=c.endContainer.getChild(c.endOffset-1);e&&d(e,a[a.length-1]),f&&d(f,a[0])&&(c.setEnd(c.endContainer,c.endOffset-1),c.collapse())}var h=CKEDITOR.dtd,j={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,li:1,pre:1,dl:1,blockquote:1},l={p:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},m=CKEDITOR.tools.extend({},h.$inline);return delete m.br,function(j,o,z){var p=j.editor;j.getDocument();var G=p.getSelection().getRanges()[0],C=!1;if("unfiltered_html"==o&&(o="html",C=!0),!G.checkReadOnly()){var E,J,L,H,F=new CKEDITOR.dom.elementPath(G.startContainer,G.root).blockLimit||G.root,o={type:o,dontFilter:C,editable:j,editor:p,range:G,blockLimit:F,mergeCandidates:[],zombies:[]},p=o.range,C=o.mergeCandidates;
if("text"==o.type&&p.shrink(CKEDITOR.SHRINK_ELEMENT,!0,!1)&&(E=CKEDITOR.dom.element.createFromHtml("<span>&nbsp;</span>",p.document),p.insertNode(E),p.setStartAfter(E)),J=new CKEDITOR.dom.elementPath(p.startContainer),o.endPath=L=new CKEDITOR.dom.elementPath(p.endContainer),!p.collapsed){var F=L.block||L.blockLimit,T=p.getCommonAncestor();F&&!F.equals(T)&&!F.contains(T)&&p.checkEndOfBlock()&&o.zombies.push(F),p.deleteContents()}for(;(H=b(p.startContainer)&&p.startContainer.getChild(p.startOffset-1))&&b(H)&&H.isBlockBoundary()&&J.contains(H);)p.moveToPosition(H,CKEDITOR.POSITION_BEFORE_END);for(f(p,o.blockLimit,J,L),E&&(p.setEndBefore(E),p.collapse(),E.remove()),E=p.startPath(),(F=E.contains(e,!1,1))&&(p.splitElement(F),o.inlineStylesRoot=F,o.inlineStylesPeak=E.lastElement),E=p.createBookmark(),(F=E.startNode.getPrevious(a))&&b(F)&&e(F)&&C.push(F),(F=E.startNode.getNext(a))&&b(F)&&e(F)&&C.push(F),F=E.startNode;(F=F.getParent())&&e(F);)C.push(F);
if(p.moveToBookmark(E),E=z){if(E=o.range,"text"==o.type&&o.inlineStylesRoot){for(H=o.inlineStylesPeak,p=H.getDocument().createText("{cke-peak}"),C=o.inlineStylesRoot.getParent();!H.equals(C);)p=p.appendTo(H.clone()),H=H.getParent();z=p.getOuterHtml().split("{cke-peak}").join(z)}if(H=o.blockLimit.getName(),/^\s+|\s+$/.test(z)&&"span"in CKEDITOR.dtd[H])var M='<span data-cke-marker="1">&nbsp;</span>',z=M+z+M;if(z=o.editor.dataProcessor.toHtml(z,{context:null,fixForBody:!1,dontFilter:o.dontFilter,filter:o.editor.activeFilter,enterMode:o.editor.activeEnterMode}),H=E.document.createElement("body"),H.setHtml(z),M&&(H.getFirst().remove(),H.getLast().remove()),(M=E.startPath().block)&&(1!=M.getChildCount()||!M.getBogus()))a:{var K;
if(1==H.getChildCount()&&b(K=H.getFirst())&&K.is(l)){for(M=K.getElementsByTag("*"),E=0,C=M.count();C>E;E++)if(p=M.getItem(E),!p.is(m))break a;K.moveChildren(K.getParent(1)),K.remove()}}o.dataWrapper=H,E=z}if(E){K=o.range;var I,M=K.document,z=o.blockLimit;E=0;var Q;H=[];var N,R,S,V,C=p=0;J=K.startContainer;var W,F=o.endPath.elements[0];for(L=F.getPosition(J),T=!(!F.getCommonAncestor(J)||L==CKEDITOR.POSITION_IDENTICAL||L&CKEDITOR.POSITION_CONTAINS+CKEDITOR.POSITION_IS_CONTAINED),J=c(o.dataWrapper,o),g(J,K);E<J.length;E++){if(L=J[E],I=L.isLineBreak){I=K,S=z;var t=void 0,O=void 0;L.hasBlockSibling?I=1:(t=I.startContainer.getAscendant(h.$block,1),t&&t.is({div:1,p:1})?(O=t.getPosition(S),O==CKEDITOR.POSITION_IDENTICAL||O==CKEDITOR.POSITION_CONTAINS?I=0:(S=I.splitElement(t),I.moveToPosition(S,CKEDITOR.POSITION_AFTER_START),I=1)):I=0)
}if(I)C=E>0;else{if(I=K.startPath(),!L.isBlock&&o.editor.config.autoParagraph!==!1&&o.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&o.editor.editable().equals(I.blockLimit)&&!I.block&&(R=o.editor.activeEnterMode!=CKEDITOR.ENTER_BR&&o.editor.config.autoParagraph!==!1?o.editor.activeEnterMode==CKEDITOR.ENTER_DIV?"div":"p":!1)&&(R=M.createElement(R),R.appendBogus(),K.insertNode(R),CKEDITOR.env.needsBrFiller&&(Q=R.getBogus())&&Q.remove(),K.moveToPosition(R,CKEDITOR.POSITION_BEFORE_END)),(I=K.startPath().block)&&!I.equals(N)&&((Q=I.getBogus())&&(Q.remove(),H.push(I)),N=I),L.firstNotAllowed&&(p=1),p&&L.isElement){for(I=K.startContainer,S=null;I&&!h[I.getName()][L.name];){if(I.equals(z)){I=null;
break}S=I,I=I.getParent()}if(I)S&&(V=K.splitElement(S),o.zombies.push(V),o.zombies.push(S));else{S=z.getName(),W=!E,I=E==J.length-1,S=d(L.node,S);for(var t=[],O=S.length,P=0,U=void 0,Z=0,aa=-1;O>P;P++)U=S[P]," "==U?(Z||W&&!P||(t.push(new CKEDITOR.dom.text(" ")),aa=t.length),Z=1):(t.push(U),Z=0);I&&aa==t.length&&t.pop(),W=t}}if(W){for(;I=W.pop();)K.insertNode(I);W=0}else K.insertNode(L.node);L.lastNotAllowed&&E<J.length-1&&((V=T?F:V)&&K.setEndAt(V,CKEDITOR.POSITION_AFTER_START),p=0),K.collapse()}}o.dontMoveCaret=C,o.bogusNeededBlocks=H}Q=o.range;var X;for(V=o.bogusNeededBlocks,W=Q.createBookmark();N=o.zombies.pop();)N.getParent()&&(R=Q.clone(),R.moveToElementEditStart(N),R.removeEmptyBlocksAtEnd());
if(V)for(;N=V.pop();)CKEDITOR.env.needsBrFiller?N.appendBogus():N.append(Q.document.createText("Â "));for(;N=o.mergeCandidates.pop();)N.mergeSiblings();if(Q.moveToBookmark(W),!o.dontMoveCaret){for(N=b(Q.startContainer)&&Q.startContainer.getChild(Q.startOffset-1);N&&b(N)&&!N.is(h.$empty);){if(N.isBlockBoundary())Q.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END);else{if(e(N)&&N.getHtml().match(/(\s|&nbsp;)$/g)){X=null;break}X=Q.clone(),X.moveToPosition(N,CKEDITOR.POSITION_BEFORE_END)}N=N.getLast(a)}X&&Q.moveToRange(X)}G.select(),i(j)}}}(),p=function(){function a(b){return b=new CKEDITOR.dom.walker(b),b.guard=function(a,b){return b?!1:a.type==CKEDITOR.NODE_ELEMENT?a.is(CKEDITOR.dtd.$tableContent):void 0
},b.evaluator=function(a){return a.type==CKEDITOR.NODE_ELEMENT},b}function b(a,c,d){return c=a.getDocument().createElement(c),a.append(c,d),c}function c(a){var d,b=a.count();for(b;b-->0;)d=a.getItem(b),CKEDITOR.tools.trim(d.getHtml())||(d.appendBogus(),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&d.getChildCount()&&d.getFirst().remove())}return function(d){var e=d.startContainer,f=e.getAscendant("table",1),g=!1;c(f.getElementsByTag("td")),c(f.getElementsByTag("th")),f=d.clone(),f.setStart(e,0),f=a(f).lastBackward(),f||(f=d.clone(),f.setEndAt(e,CKEDITOR.POSITION_BEFORE_END),f=a(f).lastForward(),g=!0),f||(f=e),f.is("table")?(d.setStartAt(f,CKEDITOR.POSITION_BEFORE_START),d.collapse(!0),f.remove()):(f.is({tbody:1,thead:1,tfoot:1})&&(f=b(f,"tr",g)),f.is("tr")&&(f=b(f,f.getParent().is("thead")?"th":"td",g)),(e=f.getBogus())&&e.remove(),d.moveToPosition(f,g?CKEDITOR.POSITION_AFTER_START:CKEDITOR.POSITION_BEFORE_END))
}}()}(),function(){function d(){var b,a=this._.fakeSelection;a&&(b=this.getSelection(1),b&&b.isHidden()||(a.reset(),a=0)),(a||(a=b||this.getSelection(1),a&&a.getType()!=CKEDITOR.SELECTION_NONE))&&(this.fire("selectionCheck",a),b=this.elementPath(),b.compare(this._.selectionPreviousPath)||(CKEDITOR.env.webkit&&(this._.previousActive=this.document.getActive()),this._.selectionPreviousPath=b,this.fire("selectionChange",{selection:a,path:b})))}function e(){o=!0,m||(c.call(this),m=CKEDITOR.tools.setTimeout(c,200,this))}function c(){m=null,o&&(CKEDITOR.tools.setTimeout(d,0,this),o=!1)}function a(a){function b(c,d){return c&&c.type!=CKEDITOR.NODE_TEXT?a.clone()["moveToElementEdit"+(d?"End":"Start")](c):!1
}if(!(a.root instanceof CKEDITOR.editable))return!1;var c=a.startContainer,d=a.getPreviousNode(p,null,c),e=a.getNextNode(p,null,c);return!b(d)&&!b(e,1)&&(d||e||c.type==CKEDITOR.NODE_ELEMENT&&c.isBlockBoundary()&&c.getBogus())?!1:!0}function b(a){return a.getCustomData("cke-fillingChar")}function h(a,b){var c=a&&a.removeCustomData("cke-fillingChar");if(c){if(b!==!1){var d,e=a.getDocument().getSelection().getNative(),g=e&&"None"!=e.type&&e.getRangeAt(0);if(c.getLength()>1&&g&&g.intersectsNode(c.$)){d=[e.anchorOffset,e.focusOffset],g=e.focusNode==c.$&&e.focusOffset>0,e.anchorNode==c.$&&e.anchorOffset>0&&d[0]--,g&&d[1]--;var i;g=e,g.isCollapsed||(i=g.getRangeAt(0),i.setStart(g.anchorNode,g.anchorOffset),i.setEnd(g.focusNode,g.focusOffset),i=i.collapsed),i&&d.unshift(d.pop())
}}c.setText(f(c.getText())),d&&(c=e.getRangeAt(0),c.setStart(c.startContainer,d[0]),c.setEnd(c.startContainer,d[1]),e.removeAllRanges(),e.addRange(c))}}function f(a){return a.replace(/\u200B( )?/g,function(a){return a[1]?"Â ":""})}function i(a,b,c){var d=a.on("focus",function(a){a.cancel()},null,null,-100);if(CKEDITOR.env.ie)var e=a.getDocument().on("selectionchange",function(a){a.cancel()},null,null,-100);else{var f=new CKEDITOR.dom.range(a);f.moveToElementEditStart(a);var g=a.getDocument().$.createRange();g.setStart(f.startContainer.$,f.startOffset),g.collapse(1),b.removeAllRanges(),b.addRange(g)}c&&a.focus(),d.removeListener(),e&&e.removeListener()}function g(a){var b=CKEDITOR.dom.element.createFromHtml('<div data-cke-hidden-sel="1" data-cke-temp="1" style="'+(CKEDITOR.env.ie?"display:none":"position:fixed;top:0;left:-1000px")+'">&nbsp;</div>',a.document);
a.fire("lockSnapshot"),a.editable().append(b);var c=a.getSelection(1),d=a.createRange(),e=c.root.on("selectionchange",function(a){a.cancel()},null,null,0);d.setStartAt(b,CKEDITOR.POSITION_AFTER_START),d.setEndAt(b,CKEDITOR.POSITION_BEFORE_END),c.selectRanges([d]),e.removeListener(),a.fire("unlockSnapshot"),a._.hiddenSelectionContainer=b}function j(a){var b={37:1,39:1,8:1,46:1};return function(c){var d=c.data.getKeystroke();if(b[d]){var e=a.getSelection().getRanges(),f=e[0];1==e.length&&f.collapsed&&(d=f[38>d?"getPreviousEditableNode":"getNextEditableNode"]())&&d.type==CKEDITOR.NODE_ELEMENT&&"false"==d.getAttribute("contenteditable")&&(a.getSelection().fake(d),c.data.preventDefault(),c.cancel())
}}}function l(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.getCommonAncestor().isReadOnly()&&a.splice(b,1),!c.collapsed){if(c.startContainer.isReadOnly())for(var e,d=c.startContainer;d&&!((e=d.type==CKEDITOR.NODE_ELEMENT)&&d.is("body")||!d.isReadOnly());)e&&"false"==d.getAttribute("contentEditable")&&c.setStartAfter(d),d=d.getParent();d=c.startContainer,e=c.endContainer;var f=c.startOffset,g=c.endOffset,i=c.clone();d&&d.type==CKEDITOR.NODE_TEXT&&(f>=d.getLength()?i.setStartAfter(d):i.setStartBefore(d)),e&&e.type==CKEDITOR.NODE_TEXT&&(g?i.setEndAfter(e):i.setEndBefore(e)),d=new CKEDITOR.dom.walker(i),d.evaluator=function(d){if(d.type==CKEDITOR.NODE_ELEMENT&&d.isReadOnly()){var e=c.clone();
return c.setEndBefore(d),c.collapsed&&a.splice(b--,1),d.getPosition(i.endContainer)&CKEDITOR.POSITION_CONTAINS||(e.setStartAfter(d),e.collapsed||a.splice(b+1,0,e)),!0}return!1},d.next()}}return a}var m,o,p=CKEDITOR.dom.walker.invisible(1),k=function(){function a(b){return function(a){var c=a.editor.createRange();return c.moveToClosestEditablePosition(a.selected,b)&&a.editor.getSelection().selectRanges([c]),!1}}function b(a){return function(b){var e,c=b.editor,d=c.createRange();return(e=d.moveToClosestEditablePosition(b.selected,a))||(e=d.moveToClosestEditablePosition(b.selected,!a)),e&&c.getSelection().selectRanges([d]),c.fire("saveSnapshot"),b.selected.remove(),e||(d.moveToElementEditablePosition(c.editable()),c.getSelection().selectRanges([d])),c.fire("saveSnapshot"),!1
}}var c=a(),d=a(1);return{37:c,38:c,39:d,40:d,8:b(),46:b(1)}}();CKEDITOR.on("instanceCreated",function(a){function b(){var a=c.getSelection();a&&a.removeAllRanges()}var c=a.editor;c.on("contentDom",function(){var l,m,a=c.document,b=CKEDITOR.document,f=c.editable(),g=a.getBody(),i=a.getDocumentElement(),k=f.isInline();if(CKEDITOR.env.gecko&&f.attachListener(f,"focus",function(a){a.removeListener(),0!==l&&(a=c.getSelection().getNative())&&a.isCollapsed&&a.anchorNode==f.$&&(a=c.createRange(),a.moveToElementEditStart(f),a.select())},null,null,-2),f.attachListener(f,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){l&&CKEDITOR.env.webkit&&(l=c._.previousActive&&c._.previousActive.equals(a.getActive())),c.unlockSelection(l),l=0
},null,null,-1),f.attachListener(f,"mousedown",function(){l=0}),CKEDITOR.env.ie||CKEDITOR.env.opera||k){var o=function(){m=new CKEDITOR.dom.selection(c.getSelection()),m.lock()};n?f.attachListener(f,"beforedeactivate",o,null,null,-1):f.attachListener(c,"selectionCheck",o,null,null,-1),f.attachListener(f,CKEDITOR.env.webkit?"DOMFocusOut":"blur",function(){c.lockSelection(m),l=1},null,null,-1),f.attachListener(f,"mousedown",function(){l=0})}if(CKEDITOR.env.ie&&!k){var r;if(f.attachListener(f,"mousedown",function(a){2==a.data.$.button&&(a=c.document.getSelection(),a&&a.getType()!=CKEDITOR.SELECTION_NONE||(r=c.window.getScrollPosition()))}),f.attachListener(f,"mouseup",function(a){2==a.data.$.button&&r&&(c.document.$.documentElement.scrollLeft=r.x,c.document.$.documentElement.scrollTop=r.y),r=null
}),"BackCompat"!=a.$.compatMode&&((CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&i.on("mousedown",function(a){function c(a){if(a=a.data.$,e){var b=g.$.createTextRange();try{b.moveToPoint(a.x,a.y)}catch(d){}e.setEndPoint(h.compareEndPoints("StartToStart",b)<0?"EndToEnd":"StartToStart",b),e.select()}}function d(){i.removeListener("mousemove",c),b.removeListener("mouseup",d),i.removeListener("mouseup",d),e.select()}if(a=a.data,a.getTarget().is("html")&&a.$.y<i.$.clientHeight&&a.$.x<i.$.clientWidth){var e=g.$.createTextRange();try{e.moveToPoint(a.$.x,a.$.y)}catch(f){}var h=e.duplicate();i.on("mousemove",c),b.on("mouseup",d),i.on("mouseup",d)}}),CKEDITOR.env.version>7&&CKEDITOR.env.version<11)){i.on("mousedown",function(a){a.data.getTarget().is("html")&&(b.on("mouseup",E),i.on("mouseup",E))
});var E=function(){b.removeListener("mouseup",E),i.removeListener("mouseup",E);var c=CKEDITOR.document.$.selection,d=c.createRange();"None"!=c.type&&d.parentElement().ownerDocument==a.$&&d.select()}}}if(f.attachListener(f,"selectionchange",d,c),f.attachListener(f,"keyup",e,c),f.attachListener(f,CKEDITOR.env.webkit?"DOMFocusIn":"focus",function(){c.forceNextSelectionCheck(),c.selectionChange(1)}),k?CKEDITOR.env.webkit||CKEDITOR.env.gecko:CKEDITOR.env.opera){var J;f.attachListener(f,"mousedown",function(){J=1}),f.attachListener(a.getDocumentElement(),"mouseup",function(){J&&e.call(c),J=0})}else f.attachListener(CKEDITOR.env.ie?f:a.getDocumentElement(),"mouseup",e,c);
CKEDITOR.env.webkit&&f.attachListener(a,"keydown",function(a){switch(a.data.getKey()){case 13:case 33:case 34:case 35:case 36:case 37:case 39:case 8:case 45:case 46:h(f)}},null,null,-1),f.attachListener(f,"keydown",j(c),null,null,-1)}),c.on("contentDomUnload",c.forceNextSelectionCheck,c),c.on("dataReady",function(){delete c._.fakeSelection,delete c._.hiddenSelectionContainer,c.selectionChange(1)}),c.on("loadSnapshot",function(){var a=c.editable().getLast(function(a){return a.type==CKEDITOR.NODE_ELEMENT});a&&a.hasAttribute("data-cke-hidden-sel")&&a.remove()},null,null,100),CKEDITOR.env.ie9Compat&&c.on("beforeDestroy",b,null,null,9),CKEDITOR.env.webkit&&c.on("setData",b),c.on("contentDomUnload",function(){c.unlockSelection()
}),c.on("key",function(a){if("wysiwyg"==c.mode){var b=c.getSelection();if(b.isFake){var d=k[a.data.keyCode];if(d)return d({editor:c,selected:b.getSelectedElement(),selection:b,keyEvent:a})}}})}),CKEDITOR.on("instanceReady",function(a){var c=a.editor;if(CKEDITOR.env.webkit){c.on("selectionChange",function(){var a=c.editable(),d=b(a);d&&(d.getCustomData("ready")?h(a):d.setCustomData("ready",1))},null,null,-1),c.on("beforeSetMode",function(){h(c.editable())},null,null,-1);var d,e,a=function(){var a=c.editable();if(a&&(a=b(a))){var g=c.document.$.defaultView.getSelection();"Caret"==g.type&&g.anchorNode==a.$&&(e=1),d=a.getText(),a.setText(f(d))}},g=function(){var a=c.editable();
a&&(a=b(a))&&(a.setText(d),e&&(c.document.$.defaultView.getSelection().setPosition(a.$,a.getLength()),e=0))};c.on("beforeUndoImage",a),c.on("afterUndoImage",g),c.on("beforeGetData",a,null,null,0),c.on("getData",g)}}),CKEDITOR.editor.prototype.selectionChange=function(a){(a?d:e).call(this)},CKEDITOR.editor.prototype.getSelection=function(a){return!this._.savedSelection&&!this._.fakeSelection||a?(a=this.editable())&&"wysiwyg"==this.mode?new CKEDITOR.dom.selection(a):null:this._.savedSelection||this._.fakeSelection},CKEDITOR.editor.prototype.lockSelection=function(a){return a=a||this.getSelection(1),a.getType()!=CKEDITOR.SELECTION_NONE?(!a.isLocked&&a.lock(),this._.savedSelection=a,!0):!1
},CKEDITOR.editor.prototype.unlockSelection=function(a){var b=this._.savedSelection;return b?(b.unlock(a),delete this._.savedSelection,!0):!1},CKEDITOR.editor.prototype.forceNextSelectionCheck=function(){delete this._.selectionPreviousPath},CKEDITOR.dom.document.prototype.getSelection=function(){return new CKEDITOR.dom.selection(this)},CKEDITOR.dom.range.prototype.select=function(){var a=this.root instanceof CKEDITOR.editable?this.root.editor.getSelection():new CKEDITOR.dom.selection(this.root);return a.selectRanges([this]),a},CKEDITOR.SELECTION_NONE=1,CKEDITOR.SELECTION_TEXT=2,CKEDITOR.SELECTION_ELEMENT=3;var n="function"!=typeof window.getSelection,u=1;CKEDITOR.dom.selection=function(a){if(a instanceof CKEDITOR.dom.selection)var b=a,a=a.root;
var c=a instanceof CKEDITOR.dom.element;if(this.rev=b?b.rev:u++,this.document=a instanceof CKEDITOR.dom.document?a:a.getDocument(),this.root=a=c?a:this.document.getBody(),this.isLocked=0,this._={cache:{}},b)return CKEDITOR.tools.extend(this._.cache,b._.cache),this.isFake=b.isFake,this.isLocked=b.isLocked,this;if(b=n?this.document.$.selection:this.document.getWindow().$.getSelection(),CKEDITOR.env.webkit)("None"==b.type&&this.document.getActive().equals(a)||"Caret"==b.type&&b.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT)&&i(a,b);else if(CKEDITOR.env.gecko)b&&this.document.getActive().equals(a)&&b.anchorNode&&b.anchorNode.nodeType==CKEDITOR.NODE_DOCUMENT&&i(a,b,!0);
else if(CKEDITOR.env.ie){var d;try{d=this.document.getActive()}catch(e){}n?"None"==b.type&&d&&d.equals(this.document.getDocumentElement())&&i(a,null,!0):((b=b&&b.anchorNode)&&(b=new CKEDITOR.dom.node(b)),d&&d.equals(this.document.getDocumentElement())&&b&&(a.equals(b)||a.contains(b))&&i(a,null,!0))}d=this.getNative();var f,g;if(d)if(d.getRangeAt)f=(g=d.rangeCount&&d.getRangeAt(0))&&new CKEDITOR.dom.node(g.commonAncestorContainer);else{try{g=d.createRange()}catch(h){}f=g&&CKEDITOR.dom.element.get(g.item&&g.item(0)||g.parentElement())}return(!f||f.type!=CKEDITOR.NODE_ELEMENT&&f.type!=CKEDITOR.NODE_TEXT||!this.root.equals(f)&&!this.root.contains(f))&&(this._.cache.type=CKEDITOR.SELECTION_NONE,this._.cache.startElement=null,this._.cache.selectedElement=null,this._.cache.selectedText="",this._.cache.ranges=new CKEDITOR.dom.rangeList),this
};var v={img:1,hr:1,li:1,table:1,tr:1,td:1,th:1,embed:1,object:1,ol:1,ul:1,a:1,input:1,form:1,select:1,textarea:1,button:1,fieldset:1,thead:1,tfoot:1};CKEDITOR.dom.selection.prototype={getNative:function(){return void 0!==this._.cache.nativeSel?this._.cache.nativeSel:this._.cache.nativeSel=n?this.document.$.selection:this.document.getWindow().$.getSelection()},getType:n?function(){var a=this._.cache;if(a.type)return a.type;var b=CKEDITOR.SELECTION_NONE;try{var c=this.getNative(),d=c.type;"Text"==d&&(b=CKEDITOR.SELECTION_TEXT),"Control"==d&&(b=CKEDITOR.SELECTION_ELEMENT),c.createRange().parentElement()&&(b=CKEDITOR.SELECTION_TEXT)}catch(e){}return a.type=b}:function(){var a=this._.cache;
if(a.type)return a.type;var b=CKEDITOR.SELECTION_TEXT,c=this.getNative();if(c&&c.rangeCount){if(1==c.rangeCount){var c=c.getRangeAt(0),d=c.startContainer;d==c.endContainer&&1==d.nodeType&&c.endOffset-c.startOffset==1&&v[d.childNodes[c.startOffset].nodeName.toLowerCase()]&&(b=CKEDITOR.SELECTION_ELEMENT)}}else b=CKEDITOR.SELECTION_NONE;return a.type=b},getRanges:function(){var a=n?function(){function a(b){return new CKEDITOR.dom.node(b).getIndex()}var b=function(b,c){b=b.duplicate(),b.collapse(c);var d=b.parentElement();if(!d.hasChildNodes())return{container:d,offset:0};for(var f,g,l,m,e=d.children,i=b.duplicate(),h=0,j=e.length-1,k=-1;j>=h;)if(k=Math.floor((h+j)/2),f=e[k],i.moveToElementText(f),l=i.compareEndPoints("StartToStart",b),l>0)j=k-1;
else{if(!(0>l))return{container:d,offset:a(f)};h=k+1}if(-1==k||k==e.length-1&&0>l){if(i.moveToElementText(d),i.setEndPoint("StartToStart",b),i=i.text.replace(/(\r\n|\r)/g,"\n").length,e=d.childNodes,!i)return f=e[e.length-1],f.nodeType!=CKEDITOR.NODE_TEXT?{container:d,offset:e.length}:{container:f,offset:f.nodeValue.length};for(d=e.length;i>0&&d>0;)g=e[--d],g.nodeType==CKEDITOR.NODE_TEXT&&(m=g,i-=g.nodeValue.length);return{container:m,offset:-i}}if(i.collapse(l>0?!0:!1),i.setEndPoint(l>0?"StartToStart":"EndToStart",b),i=i.text.replace(/(\r\n|\r)/g,"\n").length,!i)return{container:d,offset:a(f)+(l>0?0:1)};for(;i>0;)try{g=f[l>0?"previousSibling":"nextSibling"],g.nodeType==CKEDITOR.NODE_TEXT&&(i-=g.nodeValue.length,m=g),f=g
}catch(o){return{container:d,offset:a(f)}}return{container:m,offset:l>0?-i:m.nodeValue.length+i}};return function(){var a=this.getNative(),c=a&&a.createRange(),d=this.getType();if(!a)return[];if(d==CKEDITOR.SELECTION_TEXT)return a=new CKEDITOR.dom.range(this.root),d=b(c,!0),a.setStart(new CKEDITOR.dom.node(d.container),d.offset),d=b(c),a.setEnd(new CKEDITOR.dom.node(d.container),d.offset),a.endContainer.getPosition(a.startContainer)&CKEDITOR.POSITION_PRECEDING&&a.endOffset<=a.startContainer.getIndex()&&a.collapse(),[a];if(d==CKEDITOR.SELECTION_ELEMENT){for(var d=[],e=0;e<c.length;e++){for(var f=c.item(e),g=f.parentNode,i=0,a=new CKEDITOR.dom.range(this.root);i<g.childNodes.length&&g.childNodes[i]!=f;i++);a.setStart(new CKEDITOR.dom.node(g),i),a.setEnd(new CKEDITOR.dom.node(g),i+1),d.push(a)
}return d}return[]}}():function(){var b,a=[],c=this.getNative();if(!c)return a;for(var d=0;d<c.rangeCount;d++){var e=c.getRangeAt(d);b=new CKEDITOR.dom.range(this.root),b.setStart(new CKEDITOR.dom.node(e.startContainer),e.startOffset),b.setEnd(new CKEDITOR.dom.node(e.endContainer),e.endOffset),a.push(b)}return a};return function(b){var c=this._.cache,d=c.ranges;return d||(c.ranges=d=new CKEDITOR.dom.rangeList(a.call(this))),b?l(new CKEDITOR.dom.rangeList(d.slice())):d}}(),getStartElement:function(){var a=this._.cache;if(void 0!==a.startElement)return a.startElement;var b;switch(this.getType()){case CKEDITOR.SELECTION_ELEMENT:return this.getSelectedElement();case CKEDITOR.SELECTION_TEXT:var c=this.getRanges()[0];
if(c){if(c.collapsed)b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT&&(b=b.getParent());else{for(c.optimize();b=c.startContainer,c.startOffset==(b.getChildCount?b.getChildCount():b.getLength())&&!b.isBlockBoundary();)c.setStartAfter(b);if(b=c.startContainer,b.type!=CKEDITOR.NODE_ELEMENT)return b.getParent();if(b=b.getChild(c.startOffset),b&&b.type==CKEDITOR.NODE_ELEMENT)for(c=b.getFirst();c&&c.type==CKEDITOR.NODE_ELEMENT;)b=c,c=c.getFirst();else b=c.startContainer}b=b.$}}return a.startElement=b?new CKEDITOR.dom.element(b):null},getSelectedElement:function(){var a=this._.cache;if(void 0!==a.selectedElement)return a.selectedElement;var b=this,c=CKEDITOR.tools.tryThese(function(){return b.getNative().createRange().item(0)
},function(){for(var c,d,a=b.getRanges()[0].clone(),e=2;!(!e||(c=a.getEnclosedNode())&&c.type==CKEDITOR.NODE_ELEMENT&&v[c.getName()]&&(d=c));e--)a.shrink(CKEDITOR.SHRINK_ELEMENT);return d&&d.$});return a.selectedElement=c?new CKEDITOR.dom.element(c):null},getSelectedText:function(){var a=this._.cache;if(void 0!==a.selectedText)return a.selectedText;var b=this.getNative(),b=n?"Control"==b.type?"":b.createRange().text:b.toString();return a.selectedText=b},lock:function(){this.getRanges(),this.getStartElement(),this.getSelectedElement(),this.getSelectedText(),this._.cache.nativeSel=null,this.isLocked=1},unlock:function(a){if(this.isLocked){if(a)var b=this.getSelectedElement(),c=!b&&this.getRanges(),d=this.isFake;
this.isLocked=0,this.reset(),a&&(a=b||c[0]&&c[0].getCommonAncestor())&&a.getAscendant("body",1)&&(d?this.fake(b):b?this.selectElement(b):this.selectRanges(c))}},reset:function(){this._.cache={},this.isFake=0;var a=this.root.editor;if(a&&a._.fakeSelection&&this.rev==a._.fakeSelection.rev){delete a._.fakeSelection;var b=a._.hiddenSelectionContainer;b&&(a.fire("lockSnapshot"),b.remove(),a.fire("unlockSnapshot")),delete a._.hiddenSelectionContainer}this.rev=u++},selectElement:function(a){var b=new CKEDITOR.dom.range(this.root);b.setStartBefore(a),b.setEndAfter(a),this.selectRanges([b])},selectRanges:function(b){var c=this.root.editor,c=c&&c._.hiddenSelectionContainer;
if(this.reset(),c)for(var d,c=this.root,e=0;e<b.length;++e)d=b[e],d.endContainer.equals(c)&&(d.endOffset=Math.min(d.endOffset,c.getChildCount()));if(b.length)if(this.isLocked){var f=CKEDITOR.document.getActive();this.unlock(),this.selectRanges(b),this.lock(),!f.equals(this.root)&&f.focus()}else{var g,i,j;if((1!=b.length||(j=b[0]).collapsed||!(g=j.getEnclosedNode())||g.type!=CKEDITOR.NODE_ELEMENT||(j=j.clone(),j.shrink(CKEDITOR.SHRINK_ELEMENT,!0),(i=j.getEnclosedNode())&&i.type==CKEDITOR.NODE_ELEMENT&&(g=i),"false"!=g.getAttribute("contenteditable")))&&(g=void 0),g)this.fake(g);else{if(n){j=CKEDITOR.dom.walker.whitespaces(!0),i=/\ufeff|\u00a0/,c={table:1,tbody:1,tr:1},b.length>1&&(g=b[b.length-1],b[0].setEnd(g.endContainer,g.endOffset)),g=b[0];
var k,l,m,b=g.collapsed;if((d=g.getEnclosedNode())&&d.type==CKEDITOR.NODE_ELEMENT&&d.getName()in v&&(!d.is("a")||!d.getText()))try{return m=d.$.createControlRange(),m.addElement(d.$),void m.select()}catch(o){}(g.startContainer.type==CKEDITOR.NODE_ELEMENT&&g.startContainer.getName()in c||g.endContainer.type==CKEDITOR.NODE_ELEMENT&&g.endContainer.getName()in c)&&g.shrink(CKEDITOR.NODE_ELEMENT,!0),m=g.createBookmark(),c=m.startNode,b||(f=m.endNode),m=g.document.$.body.createTextRange(),m.moveToElementText(c.$),m.moveStart("character",1),f?(i=g.document.$.body.createTextRange(),i.moveToElementText(f.$),m.setEndPoint("EndToEnd",i),m.moveEnd("character",-1)):(k=c.getNext(j),l=c.hasAscendant("pre"),k=!(k&&k.getText&&k.getText().match(i))&&(l||!c.hasPrevious()||c.getPrevious().is&&c.getPrevious().is("br")),l=g.document.createElement("span"),l.setHtml("&#65279;"),l.insertBefore(c),k&&g.document.createText("").insertBefore(c)),g.setStartBefore(c),c.remove(),b?(k?(m.moveStart("character",-1),m.select(),g.document.$.selection.clear()):m.select(),g.moveToPosition(l,CKEDITOR.POSITION_BEFORE_START),l.remove()):(g.setEndBefore(f),f.remove(),m.select())
}else{if(f=this.getNative(),!f)return;for(CKEDITOR.env.opera&&(m=this.document.$.createRange(),m.selectNodeContents(this.root.$),f.addRange(m)),this.removeAllRanges(),m=0;m<b.length;m++)if(m<b.length-1&&(g=b[m],k=b[m+1],i=g.clone(),i.setStart(g.endContainer,g.endOffset),i.setEnd(k.startContainer,k.startOffset),!i.collapsed&&(i.shrink(CKEDITOR.NODE_ELEMENT,!0),l=i.getCommonAncestor(),i=i.getEnclosedNode(),l.isReadOnly()||i&&i.isReadOnly())))k.setStart(g.startContainer,g.startOffset),b.splice(m--,1);else{g=b[m],l=this.document.$.createRange(),k=g.startContainer,CKEDITOR.env.opera&&g.collapsed&&k.type==CKEDITOR.NODE_ELEMENT&&(i=k.getChild(g.startOffset-1),j=k.getChild(g.startOffset),(!i&&!j&&k.is(CKEDITOR.dtd.$removeEmpty)||i&&i.type==CKEDITOR.NODE_ELEMENT||j&&j.type==CKEDITOR.NODE_ELEMENT)&&(g.insertNode(this.document.createText("")),g.collapse(1))),g.collapsed&&CKEDITOR.env.webkit&&a(g)&&(k=this.root,h(k,!1),i=k.getDocument().createText("â"),k.setCustomData("cke-fillingChar",i),g.insertNode(i),(k=i.getNext())&&!i.getPrevious()&&k.type==CKEDITOR.NODE_ELEMENT&&"br"==k.getName()?(h(this.root),g.moveToPosition(k,CKEDITOR.POSITION_BEFORE_START)):g.moveToPosition(i,CKEDITOR.POSITION_AFTER_END)),l.setStart(g.startContainer.$,g.startOffset);
try{l.setEnd(g.endContainer.$,g.endOffset)}catch(p){if(!(p.toString().indexOf("NS_ERROR_ILLEGAL_VALUE")>=0))throw p;g.collapse(1),l.setEnd(g.endContainer.$,g.endOffset)}f.addRange(l)}}this.reset(),this.root.fire("selectionchange")}}},fake:function(a){var b=this.root.editor;this.reset(),g(b);var c=this._.cache,d=new CKEDITOR.dom.range(this.root);d.setStartBefore(a),d.setEndAfter(a),c.ranges=new CKEDITOR.dom.rangeList(d),c.selectedElement=c.startElement=a,c.type=CKEDITOR.SELECTION_ELEMENT,c.selectedText=c.nativeSel=null,this.isFake=1,this.rev=u++,b._.fakeSelection=this,this.root.fire("selectionchange")},isHidden:function(){var a=this.getCommonAncestor();return a&&a.type==CKEDITOR.NODE_TEXT&&(a=a.getParent()),!(!a||!a.data("cke-hidden-sel"))
},createBookmarks:function(a){return a=this.getRanges().createBookmarks(a),this.isFake&&(a.isFake=1),a},createBookmarks2:function(a){return a=this.getRanges().createBookmarks2(a),this.isFake&&(a.isFake=1),a},selectBookmarks:function(a){for(var b=[],c=0;c<a.length;c++){var d=new CKEDITOR.dom.range(this.root);d.moveToBookmark(a[c]),b.push(d)}return a.isFake?this.fake(b[0].getEnclosedNode()):this.selectRanges(b),this},getCommonAncestor:function(){var a=this.getRanges();return a.length?a[0].startContainer.getCommonAncestor(a[a.length-1].endContainer):null},scrollIntoView:function(){this.type!=CKEDITOR.SELECTION_NONE&&this.getRanges()[0].scrollIntoView()},removeAllRanges:function(){if(this.getType()!=CKEDITOR.SELECTION_NONE){var a=this.getNative();
try{a&&a[n?"empty":"removeAllRanges"]()}catch(b){}this.reset()}}}}(),CKEDITOR.editor.prototype.attachStyleStateChange=function(d,e){var c=this._.styleStateChangeCallbacks;c||(c=this._.styleStateChangeCallbacks=[],this.on("selectionChange",function(a){for(var b=0;b<c.length;b++){var d=c[b],e=d.style.checkActive(a.data.path)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF;d.fn.call(this,e)}})),c.push({style:d,fn:e})},CKEDITOR.STYLE_BLOCK=1,CKEDITOR.STYLE_INLINE=2,CKEDITOR.STYLE_OBJECT=3,function(){function d(a,b){for(var c,d;(a=a.getParent())&&!a.equals(b);)if(a.getAttribute("data-nostyle"))c=a;else if(!d){var e=a.getAttribute("contentEditable");"false"==e?c=a:"true"==e&&(d=1)
}return c}function e(b){var c=b.document;if(b.collapsed)c=u(this,c),b.insertNode(c),b.moveToPosition(c,CKEDITOR.POSITION_BEFORE_END);else{var i,f=this.element,g=this._.definition,j=g.ignoreReadonly,h=j||g.includeReadonly;void 0==h&&(h=b.root.getCustomData("cke_includeReadonly"));var k=CKEDITOR.dtd[f];k||(i=!0,k=CKEDITOR.dtd.span),b.enlarge(CKEDITOR.ENLARGE_INLINE,1),b.trim();var r,l=b.createBookmark(),m=l.startNode,o=l.endNode,n=m;if(!j){var s=b.getCommonAncestor(),j=d(m,s),s=d(o,s);j&&(n=j.getNextSourceNode(!0)),s&&(o=s)}for(n.getPosition(o)==CKEDITOR.POSITION_FOLLOWING&&(n=0);n;){if(j=!1,n.equals(o))n=null,j=!0;else{var v=n.type==CKEDITOR.NODE_ELEMENT?n.getName():null,s=v&&"false"==n.getAttribute("contentEditable"),t=v&&n.getAttribute("data-nostyle");
if(v&&n.data("cke-bookmark")){n=n.getNextSourceNode(!0);continue}if(s&&h&&CKEDITOR.dtd.$block[v])for(var O=n,P=a(O),U=void 0,q=P.length,y=0,O=q&&new CKEDITOR.dom.range(O.getDocument());q>y;++y){var U=P[y],z=CKEDITOR.filter.instances[U.data("cke-filter")];(z?z.check(this):1)&&(O.selectNodeContents(U),e.call(this,O))}if(P=v?!k[v]||t?0:s&&!h?0:(n.getPosition(o)|G)==G&&(!g.childRule||g.childRule(n)):1){if(!(P=n.getParent())||!(P.getDtd()||CKEDITOR.dtd.span)[f]&&!i||g.parentRule&&!g.parentRule(P))j=!0;else if(r||v&&CKEDITOR.dtd.$removeEmpty[v]&&(n.getPosition(o)|G)!=G||(r=b.clone(),r.setStartBefore(n)),v=n.type,v==CKEDITOR.NODE_TEXT||s||v==CKEDITOR.NODE_ELEMENT&&!n.getChildCount()){for(var Y,v=n;(j=!v.getNext(A))&&(Y=v.getParent(),k[Y.getName()])&&(Y.getPosition(m)|C)==C&&(!g.childRule||g.childRule(Y));)v=Y;
r.setEndAfter(v)}}else j=!0;n=n.getNextSourceNode(t||s)}if(j&&r&&!r.collapsed){for(var $,x,ba,j=u(this,c),s=j.hasAttributes(),t=r.getCommonAncestor(),v={},P={},U={},q={};j&&t;){if(t.getName()==f){for($ in g.attributes)!q[$]&&(ba=t.getAttribute(x))&&(j.getAttribute($)==ba?P[$]=1:q[$]=1);for(x in g.styles)!U[x]&&(ba=t.getStyle(x))&&(j.getStyle(x)==ba?v[x]=1:U[x]=1)}t=t.getParent()}for($ in P)j.removeAttribute($);for(x in v)j.removeStyle(x);s&&!j.hasAttributes()&&(j=null),j?(r.extractContents().appendTo(j),r.insertNode(j),p.call(this,j),j.mergeSiblings(),CKEDITOR.env.ie||j.$.normalize()):(j=new CKEDITOR.dom.element("span"),r.extractContents().appendTo(j),r.insertNode(j),p.call(this,j),j.remove(!0)),r=null
}}b.moveToBookmark(l),b.shrink(CKEDITOR.SHRINK_TEXT),b.shrink(CKEDITOR.NODE_ELEMENT,!0)}}function c(a){function b(){for(var a=new CKEDITOR.dom.elementPath(d.getParent()),c=new CKEDITOR.dom.elementPath(h.getParent()),e=null,f=null,g=0;g<a.elements.length;g++){var i=a.elements[g];if(i==a.block||i==a.blockLimit)break;l.checkElementRemovable(i)&&(e=i)}for(g=0;g<c.elements.length&&(i=c.elements[g],i!=c.block&&i!=c.blockLimit);g++)l.checkElementRemovable(i)&&(f=i);f&&h.breakParent(f),e&&d.breakParent(e)}a.enlarge(CKEDITOR.ENLARGE_INLINE,1);var c=a.createBookmark(),d=c.startNode;if(a.collapsed){for(var f,i,e=new CKEDITOR.dom.elementPath(d.getParent(),a.root),g=0;g<e.elements.length&&(i=e.elements[g])&&(i!=e.block&&i!=e.blockLimit);g++)if(this.checkElementRemovable(i)){var j;
a.collapsed&&(a.checkBoundaryOfElement(i,CKEDITOR.END)||(j=a.checkBoundaryOfElement(i,CKEDITOR.START)))?(f=i,f.match=j?"start":"end"):(i.mergeSiblings(),i.is(this.element)?o.call(this,i):k(i,r(this)[i.getName()]))}if(f){for(i=d,g=0;j=e.elements[g],!j.equals(f);g++)j.match||(j=j.clone(),j.append(i),i=j);i["start"==f.match?"insertBefore":"insertAfter"](f)}}else{var h=c.endNode,l=this;for(b(),e=d;!e.equals(h);)f=e.getNextSourceNode(),e.type==CKEDITOR.NODE_ELEMENT&&this.checkElementRemovable(e)&&(e.getName()==this.element?o.call(this,e):k(e,r(this)[e.getName()]),f.type==CKEDITOR.NODE_ELEMENT&&f.contains(d)&&(b(),f=d.getNext())),e=f}a.moveToBookmark(c),a.shrink(CKEDITOR.NODE_ELEMENT,!0)
}function a(a){var b=[];return a.forEach(function(a){return"true"==a.getAttribute("contenteditable")?(b.push(a),!1):void 0},CKEDITOR.NODE_ELEMENT,!0),b}function b(a){var b=a.getEnclosedNode()||a.getCommonAncestor(!1,!0);(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1))&&!a.isReadOnly()&&v(a,this)}function h(a){var b=a.getCommonAncestor(!0,!0);if(a=new CKEDITOR.dom.elementPath(b,a.root).contains(this.element,1)){var b=this._.definition,c=b.attributes;if(c)for(var d in c)a.removeAttribute(d,c[d]);if(b.styles)for(var e in b.styles)b.styles.hasOwnProperty(e)&&a.removeStyle(e)}}function f(a){var b=a.createBookmark(!0),c=a.createIterator();c.enforceRealBlocks=!0,this._.enterMode&&(c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR);
for(var d,f,e=a.document;d=c.getNextParagraph();)!d.isReadOnly()&&(c.activeFilter?c.activeFilter.check(this):1)&&(f=u(this,e,d),g(d,f));a.moveToBookmark(b)}function i(a){var b=a.createBookmark(1),c=a.createIterator();c.enforceRealBlocks=!0,c.enlargeBr=this._.enterMode!=CKEDITOR.ENTER_BR;for(var d,e;d=c.getNextParagraph();)this.checkElementRemovable(d)&&(d.is("pre")?((e=this._.enterMode==CKEDITOR.ENTER_BR?null:a.document.createElement(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))&&d.copyAttributes(e),g(d,e)):o.call(this,d));a.moveToBookmark(b)}function g(a,b){var c=!b;c&&(b=a.getDocument().createElement("div"),a.copyAttributes(b));var d=b&&b.is("pre"),e=a.is("pre"),f=!d&&e;
if(d&&!e){if(e=b,(f=a.getBogus())&&f.remove(),f=a.getHtml(),f=l(f,/(?:^[ \t\n\r]+)|(?:[ \t\n\r]+$)/g,""),f=f.replace(/[ \t\r\n]*(<br[^>]*>)[ \t\r\n]*/gi,"$1"),f=f.replace(/([ \t\n\r]+|&nbsp;)/g," "),f=f.replace(/<br\b[^>]*>/gi,"\n"),CKEDITOR.env.ie){var g=a.getDocument().createElement("div");g.append(e),e.$.outerHTML="<pre>"+f+"</pre>",e.copyAttributes(g.getFirst()),e=g.getFirst().remove()}else e.setHtml(f);b=e}else f?b=m(c?[a.getHtml()]:j(a),b):a.moveChildren(b);if(b.replace(a),d){var i,c=b;(i=c.getPrevious(D))&&i.type==CKEDITOR.NODE_ELEMENT&&i.is("pre")&&(d=l(i.getHtml(),/\n$/,"")+"\n\n"+l(c.getHtml(),/^\n/,""),CKEDITOR.env.ie?c.$.outerHTML="<pre>"+d+"</pre>":c.setHtml(d),i.remove())
}else c&&n(b)}function j(a){a.getName();var b=[];return l(a.getOuterHtml(),/(\S\s*)\n(?:\s|(<span[^>]+data-cke-bookmark.*?\/span>))*\n(?!$)/gi,function(a,b,c){return b+"</pre>"+c+"<pre>"}).replace(/<pre\b.*?>([\s\S]*?)<\/pre>/gi,function(a,c){b.push(c)}),b}function l(a,b,c){var d="",e="",a=a.replace(/(^<span[^>]+data-cke-bookmark.*?\/span>)|(<span[^>]+data-cke-bookmark.*?\/span>$)/gi,function(a,b,c){return b&&(d=b),c&&(e=c),""});return d+a.replace(b,c)+e}function m(a,b){var c;a.length>1&&(c=new CKEDITOR.dom.documentFragment(b.getDocument()));for(var d=0;d<a.length;d++){var e=a[d],e=e.replace(/(\r\n|\r)/g,"\n"),e=l(e,/^[ \t]*\n/,""),e=l(e,/\n$/,""),e=l(e,/^[ \t]+|[ \t]+$/g,function(a,b){return 1==a.length?"&nbsp;":b?" "+CKEDITOR.tools.repeat("&nbsp;",a.length-1):CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "
}),e=e.replace(/\n/g,"<br>"),e=e.replace(/[ \t]{2,}/g,function(a){return CKEDITOR.tools.repeat("&nbsp;",a.length-1)+" "});if(c){var f=b.clone();f.setHtml(e),c.append(f)}else b.setHtml(e)}return c||b}function o(a,b){var g,c=this._.definition,d=c.attributes,c=c.styles,e=r(this)[a.getName()],f=CKEDITOR.tools.isEmpty(d)&&CKEDITOR.tools.isEmpty(c);for(g in d)("class"==g||this._.definition.fullMatch)&&a.getAttribute(g)!=B(g,d[g])||b&&"data-"==g.slice(0,5)||(f=a.hasAttribute(g),a.removeAttribute(g));for(var i in c)this._.definition.fullMatch&&a.getStyle(i)!=B(i,c[i],!0)||(f=f||!!a.getStyle(i),a.removeStyle(i));k(a,e,x[a.getName()]),f&&(this._.definition.alwaysRemoveElement?n(a,1):!CKEDITOR.dtd.$block[a.getName()]||this._.enterMode==CKEDITOR.ENTER_BR&&!a.hasAttributes()?n(a):a.renameNode(this._.enterMode==CKEDITOR.ENTER_P?"p":"div"))
}function p(a){for(var d,b=r(this),c=a.getElementsByTag(this.element),e=c.count();--e>=0;)d=c.getItem(e),d.isReadOnly()||o.call(this,d,!0);for(var f in b)if(f!=this.element)for(c=a.getElementsByTag(f),e=c.count()-1;e>=0;e--)d=c.getItem(e),d.isReadOnly()||k(d,b[f])}function k(a,b,c){if(b=b&&b.attributes)for(var d=0;d<b.length;d++){var f,e=b[d][0];if(f=a.getAttribute(e)){var g=b[d][1];(null===g||g.test&&g.test(f)||"string"==typeof g&&f==g)&&a.removeAttribute(e)}}c||n(a)}function n(a,b){if(!a.hasAttributes()||b)if(CKEDITOR.dtd.$block[a.getName()]){var c=a.getPrevious(D),d=a.getNext(D);c&&(c.type==CKEDITOR.NODE_TEXT||!c.isBlockBoundary({br:1}))&&a.append("br",1),d&&(d.type==CKEDITOR.NODE_TEXT||!d.isBlockBoundary({br:1}))&&a.append("br"),a.remove(!0)
}else c=a.getFirst(),d=a.getLast(),a.remove(!0),c&&(c.type==CKEDITOR.NODE_ELEMENT&&c.mergeSiblings(),d&&!c.equals(d)&&d.type==CKEDITOR.NODE_ELEMENT&&d.mergeSiblings())}function u(a,b,c){var d;return d=a.element,"*"==d&&(d="span"),d=new CKEDITOR.dom.element(d,b),c&&c.copyAttributes(d),d=v(d,a),b.getCustomData("doc_processing_style")&&d.hasAttribute("id")?d.removeAttribute("id"):b.setCustomData("doc_processing_style",1),d}function v(a,b){var c=b._.definition,d=c.attributes,c=CKEDITOR.style.getStyleText(c);if(d)for(var e in d)a.setAttribute(e,d[e]);return c&&a.setAttribute("style",c),a}function s(a,b){for(var c in a)a[c]=a[c].replace(y,function(a,c){return b[c]})
}function r(a){if(a._.overrides)return a._.overrides;var b=a._.overrides={},c=a._.definition.overrides;if(c){CKEDITOR.tools.isArray(c)||(c=[c]);for(var d=0;d<c.length;d++){var f,g,e=c[d];if("string"==typeof e?f=e.toLowerCase():(f=e.element?e.element.toLowerCase():a.element,g=e.attributes),e=b[f]||(b[f]={}),g){var i,e=e.attributes=e.attributes||[];for(i in g)e.push([i.toLowerCase(),g[i]])}}}return b}function B(a,b,c){var d=new CKEDITOR.dom.element("span");return d[c?"setStyle":"setAttribute"](a,b),d[c?"getStyle":"getAttribute"](a)}function z(a,b){for(var f,c=a.document,d=a.getRanges(),e=b?this.removeFromRange:this.applyToRange,g=d.createIterator();f=g.getNextRange();)e.call(this,f);
a.selectRanges(d),c.removeCustomData("doc_processing_style")}var x={address:1,div:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,p:1,pre:1,section:1,header:1,footer:1,nav:1,article:1,aside:1,figure:1,dialog:1,hgroup:1,time:1,meter:1,menu:1,command:1,keygen:1,output:1,progress:1,details:1,datagrid:1,datalist:1},q={a:1,embed:1,hr:1,img:1,li:1,object:1,ol:1,table:1,td:1,tr:1,th:1,ul:1,dl:1,dt:1,dd:1,form:1,audio:1,video:1},w=/\s*(?:;\s*|$)/,y=/#\((.+?)\)/g,A=CKEDITOR.dom.walker.bookmark(0,1),D=CKEDITOR.dom.walker.whitespaces(1);CKEDITOR.style=function(a,b){var c=a.attributes;c&&c.style&&(a.styles=CKEDITOR.tools.extend({},a.styles,CKEDITOR.tools.parseCssText(c.style)),delete c.style),b&&(a=CKEDITOR.tools.clone(a),s(a.attributes,b),s(a.styles,b)),c=this.element=a.element?"string"==typeof a.element?a.element.toLowerCase():a.element:"*",this.type=a.type||(x[c]?CKEDITOR.STYLE_BLOCK:q[c]?CKEDITOR.STYLE_OBJECT:CKEDITOR.STYLE_INLINE),"object"==typeof this.element&&(this.type=CKEDITOR.STYLE_OBJECT),this._={definition:a}
},CKEDITOR.editor.prototype.applyStyle=function(a){a.checkApplicable(this.elementPath())&&z.call(a,this.getSelection())},CKEDITOR.editor.prototype.removeStyle=function(a){a.checkApplicable(this.elementPath())&&z.call(a,this.getSelection(),1)},CKEDITOR.style.prototype={apply:function(a){z.call(this,a.getSelection())},remove:function(a){z.call(this,a.getSelection(),1)},applyToRange:function(a){return(this.applyToRange=this.type==CKEDITOR.STYLE_INLINE?e:this.type==CKEDITOR.STYLE_BLOCK?f:this.type==CKEDITOR.STYLE_OBJECT?b:null).call(this,a)},removeFromRange:function(a){return(this.removeFromRange=this.type==CKEDITOR.STYLE_INLINE?c:this.type==CKEDITOR.STYLE_BLOCK?i:this.type==CKEDITOR.STYLE_OBJECT?h:null).call(this,a)
},applyToObject:function(a){v(a,this)},checkActive:function(a){switch(this.type){case CKEDITOR.STYLE_BLOCK:return this.checkElementRemovable(a.block||a.blockLimit,!0);case CKEDITOR.STYLE_OBJECT:case CKEDITOR.STYLE_INLINE:for(var d,b=a.elements,c=0;c<b.length;c++)if(d=b[c],this.type!=CKEDITOR.STYLE_INLINE||d!=a.block&&d!=a.blockLimit){if(this.type==CKEDITOR.STYLE_OBJECT){var e=d.getName();if(!("string"==typeof this.element?e==this.element:e in this.element))continue}if(this.checkElementRemovable(d,!0))return!0}}return!1},checkApplicable:function(a,b){if(b&&!b.check(this))return!1;switch(this.type){case CKEDITOR.STYLE_OBJECT:return!!a.contains(this.element);case CKEDITOR.STYLE_BLOCK:return!!a.blockLimit.getDtd()[this.element]
}return!0},checkElementMatch:function(a,b){var c=this._.definition;if(!a||!c.ignoreReadonly&&a.isReadOnly())return!1;var d=a.getName();if("string"==typeof this.element?d==this.element:d in this.element){if(!b&&!a.hasAttributes())return!0;if(d=c._AC)c=d;else{var d={},e=0,f=c.attributes;if(f)for(var g in f)e++,d[g]=f[g];(g=CKEDITOR.style.getStyleText(c))&&(d.style||e++,d.style=g),d._length=e,c=c._AC=d}if(!c._length)return!0;for(var i in c)if("_length"!=i){if(e=a.getAttribute(i)||"","style"==i)a:{d=c[i],"string"==typeof d&&(d=CKEDITOR.tools.parseCssText(d)),"string"==typeof e&&(e=CKEDITOR.tools.parseCssText(e,!0)),g=void 0;for(g in d)if(!(g in e)||e[g]!=d[g]&&"inherit"!=d[g]&&"inherit"!=e[g]){d=!1;
break a}d=!0}else d=c[i]==e;if(d){if(!b)return!0}else if(b)return!1}if(b)return!0}return!1},checkElementRemovable:function(a,b){if(this.checkElementMatch(a,b))return!0;var c=r(this)[a.getName()];if(c){var d;if(!(c=c.attributes))return!0;for(var e=0;e<c.length;e++)if(d=c[e][0],d=a.getAttribute(d)){var f=c[e][1];if(null===f||"string"==typeof f&&d==f||f.test(d))return!0}}return!1},buildPreview:function(a){var b=this._.definition,c=[],d=b.element;"bdo"==d&&(d="span");var c=["<",d],e=b.attributes;if(e)for(var f in e)c.push(" ",f,'="',e[f],'"');return(e=CKEDITOR.style.getStyleText(b))&&c.push(' style="',e,'"'),c.push(">",a||b.name,"</",d,">"),c.join("")},getDefinition:function(){return this._.definition
}},CKEDITOR.style.getStyleText=function(a){var b=a._ST;if(b)return b;var b=a.styles,c=a.attributes&&a.attributes.style||"",d="";c.length&&(c=c.replace(w,";"));for(var e in b){var f=b[e],g=(e+":"+f).replace(w,";");"inherit"==f?d+=g:c+=g}return c.length&&(c=CKEDITOR.tools.normalizeCssText(c,!0)),a._ST=c+d};var G=CKEDITOR.POSITION_PRECEDING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED,C=CKEDITOR.POSITION_FOLLOWING|CKEDITOR.POSITION_IDENTICAL|CKEDITOR.POSITION_IS_CONTAINED}(),CKEDITOR.styleCommand=function(d,e){this.requiredContent=this.allowedContent=this.style=d,CKEDITOR.tools.extend(this,e,!0)},CKEDITOR.styleCommand.prototype.exec=function(d){d.focus(),this.state==CKEDITOR.TRISTATE_OFF?d.applyStyle(this.style):this.state==CKEDITOR.TRISTATE_ON&&d.removeStyle(this.style)
},CKEDITOR.stylesSet=new CKEDITOR.resourceManager("","stylesSet"),CKEDITOR.addStylesSet=CKEDITOR.tools.bind(CKEDITOR.stylesSet.add,CKEDITOR.stylesSet),CKEDITOR.loadStylesSet=function(d,e,c){CKEDITOR.stylesSet.addExternal(d,e,""),CKEDITOR.stylesSet.load(d,c)},CKEDITOR.editor.prototype.getStylesSet=function(d){if(this._.stylesDefinitions)d(this._.stylesDefinitions);else{var e=this,c=e.config.stylesCombo_stylesSet||e.config.stylesSet;if(c===!1)d(null);else if(c instanceof Array)e._.stylesDefinitions=c,d(c);else{c||(c="default");var c=c.split(":"),a=c[0];CKEDITOR.stylesSet.addExternal(a,c[1]?c.slice(1).join(":"):CKEDITOR.getUrl("styles.js"),""),CKEDITOR.stylesSet.load(a,function(b){e._.stylesDefinitions=b[a],d(e._.stylesDefinitions)
})}}},CKEDITOR.dom.comment=function(d,e){"string"==typeof d&&(d=(e?e.$:document).createComment(d)),CKEDITOR.dom.domObject.call(this,d)},CKEDITOR.dom.comment.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.comment.prototype,{type:CKEDITOR.NODE_COMMENT,getOuterHtml:function(){return"<!--"+this.$.nodeValue+"-->"}}),function(){var c,d={},e={};for(c in CKEDITOR.dtd.$blockLimit)c in CKEDITOR.dtd.$list||(d[c]=1);for(c in CKEDITOR.dtd.$block)c in CKEDITOR.dtd.$blockLimit||c in CKEDITOR.dtd.$empty||(e[c]=1);CKEDITOR.dom.elementPath=function(a,b){var j,c=null,f=null,i=[],g=a,b=b||a.getDocument().getBody();do if(g.type==CKEDITOR.NODE_ELEMENT){if(i.push(g),!this.lastElement&&(this.lastElement=g,g.is(CKEDITOR.dtd.$object)||"false"==g.getAttribute("contenteditable")))continue;
if(g.equals(b))break;if(!f&&(j=g.getName(),"true"==g.getAttribute("contenteditable")?f=g:!c&&e[j]&&(c=g),d[j])){var l;if(l=!c){if(j="div"==j){a:{j=g.getChildren(),l=0;for(var m=j.count();m>l;l++){var o=j.getItem(l);if(o.type==CKEDITOR.NODE_ELEMENT&&CKEDITOR.dtd.$block[o.getName()]){j=!0;break a}}j=!1}j=!j}l=j}l?c=g:f=g}}while(g=g.getParent());f||(f=b),this.block=c,this.blockLimit=f,this.root=b,this.elements=i}}(),CKEDITOR.dom.elementPath.prototype={compare:function(d){var e=this.elements,d=d&&d.elements;if(!d||e.length!=d.length)return!1;for(var c=0;c<e.length;c++)if(!e[c].equals(d[c]))return!1;return!0},contains:function(d,e,c){var a;"string"==typeof d&&(a=function(a){return a.getName()==d
}),d instanceof CKEDITOR.dom.element?a=function(a){return a.equals(d)}:CKEDITOR.tools.isArray(d)?a=function(a){return CKEDITOR.tools.indexOf(d,a.getName())>-1}:"function"==typeof d?a=d:"object"==typeof d&&(a=function(a){return a.getName()in d});var b=this.elements,h=b.length;for(e&&h--,c&&(b=Array.prototype.slice.call(b,0),b.reverse()),e=0;h>e;e++)if(a(b[e]))return b[e];return null},isContextFor:function(d){var e;return d in CKEDITOR.dtd.$block?(e=this.contains(CKEDITOR.dtd.$intermediate)||this.root.equals(this.block)&&this.block||this.blockLimit,!!e.getDtd()[d]):!0},direction:function(){return(this.block||this.blockLimit||this.root).getDirection(1)}},CKEDITOR.dom.text=function(d,e){"string"==typeof d&&(d=(e?e.$:document).createTextNode(d)),this.$=d
},CKEDITOR.dom.text.prototype=new CKEDITOR.dom.node,CKEDITOR.tools.extend(CKEDITOR.dom.text.prototype,{type:CKEDITOR.NODE_TEXT,getLength:function(){return this.$.nodeValue.length},getText:function(){return this.$.nodeValue},setText:function(d){this.$.nodeValue=d},split:function(d){var e=this.$.parentNode,c=e.childNodes.length,a=this.getLength(),b=this.getDocument(),h=new CKEDITOR.dom.text(this.$.splitText(d),b);return e.childNodes.length==c&&(d>=a?(h=b.createText(""),h.insertAfter(this)):(d=b.createText(""),d.insertAfter(h),d.remove())),h},substring:function(d,e){return"number"!=typeof e?this.$.nodeValue.substr(d):this.$.nodeValue.substring(d,e)}}),function(){function d(c,a,b){var d=c.serializable,e=a[b?"endContainer":"startContainer"],i=b?"endOffset":"startOffset",g=d?a.document.getById(c.startNode):c.startNode,c=d?a.document.getById(c.endNode):c.endNode;
return e.equals(g.getPrevious())?(a.startOffset=a.startOffset-e.getLength()-c.getPrevious().getLength(),e=c.getNext()):e.equals(c.getPrevious())&&(a.startOffset=a.startOffset-e.getLength(),e=c.getNext()),e.equals(g.getParent())&&a[i]++,e.equals(c.getParent())&&a[i]++,a[b?"endContainer":"startContainer"]=e,a}CKEDITOR.dom.rangeList=function(c){return c instanceof CKEDITOR.dom.rangeList?c:(c?c instanceof CKEDITOR.dom.range&&(c=[c]):c=[],CKEDITOR.tools.extend(c,e))};var e={createIterator:function(){var d,c=this,a=CKEDITOR.dom.walker.bookmark(),b=[];return{getNextRange:function(e){d=void 0==d?0:d+1;var i=c[d];if(i&&c.length>1){if(!d)for(var g=c.length-1;g>=0;g--)b.unshift(c[g].createBookmark(!0));
if(e)for(var j=0;c[d+j+1];){for(var l=i.document,e=0,g=l.getById(b[j].endNode),l=l.getById(b[j+1].startNode);;){if(g=g.getNextSourceNode(!1),l.equals(g))e=1;else if(a(g)||g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary())continue;break}if(!e)break;j++}for(i.moveToBookmark(b.shift());j--;)g=c[++d],g.moveToBookmark(b.shift()),i.setEnd(g.endContainer,g.endOffset)}return i}}},createBookmarks:function(c){for(var b,a=[],e=0;e<this.length;e++){a.push(b=this[e].createBookmark(c,!0));for(var f=e+1;f<this.length;f++)this[f]=d(b,this[f]),this[f]=d(b,this[f],!0)}return a},createBookmarks2:function(c){for(var a=[],b=0;b<this.length;b++)a.push(this[b].createBookmark2(c));
return a},moveToBookmarks:function(c){for(var a=0;a<this.length;a++)this[a].moveToBookmark(c[a])}}}(),function(){function d(){return CKEDITOR.getUrl(CKEDITOR.skinName.split(",")[1]||"skins/"+CKEDITOR.skinName.split(",")[0]+"/")}function e(a){var b=CKEDITOR.skin["ua_"+a],c=CKEDITOR.env;if(b)for(var f,b=b.split(",").sort(function(a,b){return a>b?-1:1}),e=0;e<b.length;e++)if(f=b[e],c.ie&&(f.replace(/^ie/,"")==c.version||c.quirks&&"iequirks"==f)&&(f="ie"),c[f]){a+="_"+b[e];break}return CKEDITOR.getUrl(d()+a+".css")}function c(a,b){h[a]||(CKEDITOR.document.appendStyleSheet(e(a)),h[a]=1),b&&b()}function a(a){var b=a.getById(f);return b||(b=a.getHead().append("style"),b.setAttribute("id",f),b.setAttribute("type","text/css")),b
}function b(a,b,c){var d,e,f;if(CKEDITOR.env.webkit)for(b=b.split("}").slice(0,-1),e=0;e<b.length;e++)b[e]=b[e].split("{");for(var g=0;g<a.length;g++)if(CKEDITOR.env.webkit)for(e=0;e<b.length;e++){for(f=b[e][1],d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);a[g].$.sheet.addRule(b[e][0],f)}else{for(f=b,d=0;d<c.length;d++)f=f.replace(c[d][0],c[d][1]);CKEDITOR.env.ie&&CKEDITOR.env.version<11?a[g].$.styleSheet.cssText=a[g].$.styleSheet.cssText+f:a[g].$.innerHTML=a[g].$.innerHTML+f}}var h={};CKEDITOR.skin={path:d,loadPart:function(a,b){CKEDITOR.skin.name!=CKEDITOR.skinName.split(",")[0]?CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d()+"skin.js"),function(){c(a,b)}):c(a,b)
},getPath:function(a){return CKEDITOR.getUrl(e(a))},icons:{},addIcon:function(a,b,c,d){a=a.toLowerCase(),this.icons[a]||(this.icons[a]={path:b,offset:c||0,bgsize:d||"16px"})},getIconStyle:function(a,b,c,d,e){var f;return a&&(a=a.toLowerCase(),b&&(f=this.icons[a+"-rtl"]),f||(f=this.icons[a])),a=c||f&&f.path||"",d=d||f&&f.offset,e=e||f&&f.bgsize||"16px",a&&"background-image:url("+CKEDITOR.getUrl(a)+");background-position:0 "+d+"px;background-size:"+e+";"}},CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{getUiColor:function(){return this.uiColor},setUiColor:function(c){var d=a(CKEDITOR.document);return(this.setUiColor=function(a){var c=CKEDITOR.skin.chameleon,e=[[g,a]];
this.uiColor=a,b([d],c(this,"editor"),e),b(i,c(this,"panel"),e)}).call(this,c)}});var f="cke_ui_color",i=[],g=/\$color/g;CKEDITOR.on("instanceLoaded",function(c){if(!CKEDITOR.env.ie||!CKEDITOR.env.quirks){var d=c.editor,c=function(c){if(c=(c.data[0]||c.data).element.getElementsByTag("iframe").getItem(0).getFrameDocument(),!c.getById("cke_ui_color")){c=a(c),i.push(c);var e=d.getUiColor();e&&b([c],CKEDITOR.skin.chameleon(d,"panel"),[[g,e]])}};d.on("panelShow",c),d.on("menuShow",c),d.config.uiColor&&d.setUiColor(d.config.uiColor)}})}(),function(){if(CKEDITOR.env.webkit)CKEDITOR.env.hc=!1;else{var d=CKEDITOR.dom.element.createFromHtml('<div style="width:0;height:0;position:absolute;left:-10000px;border:1px solid;border-color:red blue"></div>',CKEDITOR.document);
d.appendTo(CKEDITOR.document.getHead());try{var e=d.getComputedStyle("border-top-color"),c=d.getComputedStyle("border-right-color");CKEDITOR.env.hc=!(!e||e!=c)}catch(a){CKEDITOR.env.hc=!1}d.remove()}if(CKEDITOR.env.hc&&(CKEDITOR.env.cssClass=CKEDITOR.env.cssClass+" cke_hc"),CKEDITOR.document.appendStyleText(".cke{visibility:hidden;}"),CKEDITOR.status="loaded",CKEDITOR.fireOnce("loaded"),d=CKEDITOR._.pending)for(delete CKEDITOR._.pending,e=0;e<d.length;e++)CKEDITOR.editor.prototype.constructor.apply(d[e][0],d[e][1]),CKEDITOR.add(d[e][0])}(),CKEDITOR.skin.name="moono",CKEDITOR.skin.ua_editor="ie,iequirks,ie7,ie8,gecko",CKEDITOR.skin.ua_dialog="ie,iequirks,ie7,ie8,opera",CKEDITOR.skin.chameleon=function(){var d=function(){return function(a,b){for(var c=a.match(/[^#]./g),d=0;3>d;d++){var j,e=c,g=d;
j=parseInt(c[d],16),j=("0"+(0>b?0|j*(1+b):0|j+(255-j)*b).toString(16)).slice(-2),e[g]=j}return"#"+c.join("")}}(),e=function(){var a=new CKEDITOR.template("background:#{to};background-image:-webkit-gradient(linear,lefttop,leftbottom,from({from}),to({to}));background-image:-moz-linear-gradient(top,{from},{to});background-image:-webkit-linear-gradient(top,{from},{to});background-image:-o-linear-gradient(top,{from},{to});background-image:-ms-linear-gradient(top,{from},{to});background-image:linear-gradient(top,{from},{to});filter:progid:DXImageTransform.Microsoft.gradient(gradientType=0,startColorstr='{from}',endColorstr='{to}');");return function(b,c){return a.output({from:b,to:c})
}}(),c={editor:new CKEDITOR.template("{id}.cke_chrome [border-color:{defaultBorder};] {id} .cke_top [ {defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_bottom [{defaultGradient}border-top-color:{defaultBorder};] {id} .cke_resizer [border-right-color:{ckeResizer}] {id} .cke_dialog_title [{defaultGradient}border-bottom-color:{defaultBorder};] {id} .cke_dialog_footer [{defaultGradient}outline-color:{defaultBorder};border-top-color:{defaultBorder};] {id} .cke_dialog_tab [{lightGradient}border-color:{defaultBorder};] {id} .cke_dialog_tab:hover [{mediumGradient}] {id} .cke_dialog_contents [border-top-color:{defaultBorder};] {id} .cke_dialog_tab_selected, {id} .cke_dialog_tab_selected:hover [background:{dialogTabSelected};border-bottom-color:{dialogTabSelectedBorder};] {id} .cke_dialog_body [background:{dialogBody};border-color:{defaultBorder};] {id} .cke_toolgroup [{lightGradient}border-color:{defaultBorder};] {id} a.cke_button_off:hover, {id} a.cke_button_off:focus, {id} a.cke_button_off:active [{mediumGradient}] {id} .cke_button_on [{ckeButtonOn}] {id} .cke_toolbar_separator [background-color: {ckeToolbarSeparator};] {id} .cke_combo_button [border-color:{defaultBorder};{lightGradient}] {id} a.cke_combo_button:hover, {id} a.cke_combo_button:focus, {id} .cke_combo_on a.cke_combo_button [border-color:{defaultBorder};{mediumGradient}] {id} .cke_path_item [color:{elementsPathColor};] {id} a.cke_path_item:hover, {id} a.cke_path_item:focus, {id} a.cke_path_item:active [background-color:{elementsPathBg};] {id}.cke_panel [border-color:{defaultBorder};] "),panel:new CKEDITOR.template(".cke_panel_grouptitle [{lightGradient}border-color:{defaultBorder};] .cke_menubutton_icon [background-color:{menubuttonIcon};] .cke_menubutton:hover .cke_menubutton_icon, .cke_menubutton:focus .cke_menubutton_icon, .cke_menubutton:active .cke_menubutton_icon [background-color:{menubuttonIconHover};] .cke_menuseparator [background-color:{menubuttonIcon};] a:hover.cke_colorbox, a:focus.cke_colorbox, a:active.cke_colorbox [border-color:{defaultBorder};] a:hover.cke_colorauto, a:hover.cke_colormore, a:focus.cke_colorauto, a:focus.cke_colormore, a:active.cke_colorauto, a:active.cke_colormore [background-color:{ckeColorauto};border-color:{defaultBorder};] ")};
return function(a,b){var h=a.uiColor,h={id:"."+a.id,defaultBorder:d(h,-.1),defaultGradient:e(d(h,.9),h),lightGradient:e(d(h,1),d(h,.7)),mediumGradient:e(d(h,.8),d(h,.5)),ckeButtonOn:e(d(h,.6),d(h,.7)),ckeResizer:d(h,-.4),ckeToolbarSeparator:d(h,.5),ckeColorauto:d(h,.8),dialogBody:d(h,.7),dialogTabSelected:e("#FFFFFF","#FFFFFF"),dialogTabSelectedBorder:"#FFF",elementsPathColor:d(h,-.6),elementsPathBg:h,menubuttonIcon:d(h,.5),menubuttonIconHover:d(h,.3)};return c[b].output(h).replace(/\[/g,"{").replace(/\]/g,"}")}}(),CKEDITOR.plugins.add("basicstyles",{init:function(d){var e=0,c=function(b,c,g,j){if(j){var j=new CKEDITOR.style(j),h=a[g];h.unshift(j),d.attachStyleStateChange(j,function(a){!d.readOnly&&d.getCommand(g).setState(a)
}),d.addCommand(g,new CKEDITOR.styleCommand(j,{contentForms:h})),d.ui.addButton&&d.ui.addButton(b,{label:c,command:g,toolbar:"basicstyles,"+(e+=10)})}},a={bold:["strong","b",["span",function(a){return a=a.styles["font-weight"],"bold"==a||+a>=700}]],italic:["em","i",["span",function(a){return"italic"==a.styles["font-style"]}]],underline:["u",["span",function(a){return"underline"==a.styles["text-decoration"]}]],strike:["s","strike",["span",function(a){return"line-through"==a.styles["text-decoration"]}]],subscript:["sub"],superscript:["sup"]},b=d.config,h=d.lang.basicstyles;c("Bold",h.bold,"bold",b.coreStyles_bold),c("Italic",h.italic,"italic",b.coreStyles_italic),c("Underline",h.underline,"underline",b.coreStyles_underline),c("Strike",h.strike,"strike",b.coreStyles_strike),c("Subscript",h.subscript,"subscript",b.coreStyles_subscript),c("Superscript",h.superscript,"superscript",b.coreStyles_superscript),d.setKeystroke([[CKEDITOR.CTRL+66,"bold"],[CKEDITOR.CTRL+73,"italic"],[CKEDITOR.CTRL+85,"underline"]])
}}),CKEDITOR.config.coreStyles_bold={element:"strong",overrides:"b"},CKEDITOR.config.coreStyles_italic={element:"em",overrides:"i"},CKEDITOR.config.coreStyles_underline={element:"u"},CKEDITOR.config.coreStyles_strike={element:"s",overrides:"strike"},CKEDITOR.config.coreStyles_subscript={element:"sub"},CKEDITOR.config.coreStyles_superscript={element:"sup"},function(){var d={exec:function(d){var c=d.getCommand("blockquote").state,a=d.getSelection(),b=a&&a.getRanges()[0];if(b){var h=a.createBookmarks();if(CKEDITOR.env.ie){var g,f=h[0].startNode,i=h[0].endNode;if(f&&"blockquote"==f.getParent().getName())for(g=f;g=g.getNext();)if(g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()){f.move(g,!0);
break}if(i&&"blockquote"==i.getParent().getName())for(g=i;g=g.getPrevious();)if(g.type==CKEDITOR.NODE_ELEMENT&&g.isBlockBoundary()){i.move(g);break}}var j=b.createIterator();if(j.enlargeBr=d.config.enterMode!=CKEDITOR.ENTER_BR,c==CKEDITOR.TRISTATE_OFF){for(f=[];c=j.getNextParagraph();)f.push(c);for(f.length<1&&(c=d.document.createElement(d.config.enterMode==CKEDITOR.ENTER_P?"p":"div"),i=h.shift(),b.insertNode(c),c.append(new CKEDITOR.dom.text("",d.document)),b.moveToBookmark(i),b.selectNodeContents(c),b.collapse(!0),i=b.createBookmark(),f.push(c),h.unshift(i)),g=f[0].getParent(),b=[],i=0;i<f.length;i++)c=f[i],g=g.getCommonAncestor(c.getParent());for(c={table:1,tbody:1,tr:1,ol:1,ul:1};c[g.getName()];)g=g.getParent();
for(i=null;f.length>0;){for(c=f.shift();!c.getParent().equals(g);)c=c.getParent();c.equals(i)||b.push(c),i=c}for(;b.length>0;)if(c=b.shift(),"blockquote"==c.getName()){for(i=new CKEDITOR.dom.documentFragment(d.document);c.getFirst();)i.append(c.getFirst().remove()),f.push(i.getLast());i.replace(c)}else f.push(c);for(b=d.document.createElement("blockquote"),b.insertBefore(f[0]);f.length>0;)c=f.shift(),b.append(c)}else if(c==CKEDITOR.TRISTATE_ON){for(i=[],g={};c=j.getNextParagraph();){for(f=b=null;c.getParent();){if("blockquote"==c.getParent().getName()){b=c.getParent(),f=c;break}c=c.getParent()}b&&f&&!f.getCustomData("blockquote_moveout")&&(i.push(f),CKEDITOR.dom.element.setMarker(g,f,"blockquote_moveout",!0))
}for(CKEDITOR.dom.element.clearAllMarkers(g),c=[],f=[],g={};i.length>0;)j=i.shift(),b=j.getParent(),j.getPrevious()?j.getNext()?(j.breakParent(j.getParent()),f.push(j.getNext())):j.remove().insertAfter(b):j.remove().insertBefore(b),b.getCustomData("blockquote_processed")||(f.push(b),CKEDITOR.dom.element.setMarker(g,b,"blockquote_processed",!0)),c.push(j);for(CKEDITOR.dom.element.clearAllMarkers(g),i=f.length-1;i>=0;i--){b=f[i];a:{g=b;for(var j=0,l=g.getChildCount(),m=void 0;l>j&&(m=g.getChild(j));j++)if(m.type==CKEDITOR.NODE_ELEMENT&&m.isBlockBoundary()){g=!1;break a}g=!0}g&&b.remove()}if(d.config.enterMode==CKEDITOR.ENTER_BR)for(b=!0;c.length;)if(j=c.shift(),"div"==j.getName()){for(i=new CKEDITOR.dom.documentFragment(d.document),b&&j.getPrevious()&&!(j.getPrevious().type==CKEDITOR.NODE_ELEMENT&&j.getPrevious().isBlockBoundary())&&i.append(d.document.createElement("br")),b=j.getNext()&&!(j.getNext().type==CKEDITOR.NODE_ELEMENT&&j.getNext().isBlockBoundary());j.getFirst();)j.getFirst().remove().appendTo(i);
b&&i.append(d.document.createElement("br")),i.replace(j),b=!1}}a.selectBookmarks(h),d.focus()}},refresh:function(d,c){this.setState(d.elementPath(c.block||c.blockLimit).contains("blockquote",1)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)},context:"blockquote",allowedContent:"blockquote",requiredContent:"blockquote"};CKEDITOR.plugins.add("blockquote",{init:function(e){e.blockless||(e.addCommand("blockquote",d),e.ui.addButton&&e.ui.addButton("Blockquote",{label:e.lang.blockquote.toolbar,command:"blockquote",toolbar:"blocks,10"}))}})}(),CKEDITOR.plugins.add("dialogui",{onLoad:function(){var d=function(a){this._||(this._={}),this._["default"]=this._.initValue=a["default"]||"",this._.required=a.required||!1;
for(var b=[this._],c=1;c<arguments.length;c++)b.push(arguments[c]);return b.push(!0),CKEDITOR.tools.extend.apply(CKEDITOR.tools,b),this._},e={build:function(a,b,c){return new CKEDITOR.ui.dialog.textInput(a,b,c)}},c={build:function(a,b,c){return new CKEDITOR.ui.dialog[b.type](a,b,c)}},a={isChanged:function(){return this.getValue()!=this.getInitValue()},reset:function(a){this.setValue(this.getInitValue(),a)},setInitValue:function(){this._.initValue=this.getValue()},resetInitValue:function(){this._.initValue=this._["default"]},getInitValue:function(){return this._.initValue}},b=CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onChange:function(a,b){this._.domOnChangeRegistered||(a.on("load",function(){this.getInputElement().on("change",function(){a.parts.dialog.isVisible()&&this.fire("change",{value:this.getValue()})
},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},!0),h=/^on([A-Z]\w+)/,f=function(a){for(var b in a)(h.test(b)||"title"==b||"type"==b)&&delete a[b];return a};CKEDITOR.tools.extend(CKEDITOR.ui.dialog,{labeledElement:function(a,b,c,e){if(!(arguments.length<4)){var f=d.call(this,b);f.labelId=CKEDITOR.tools.getNextId()+"_label",this._.children=[],CKEDITOR.ui.dialog.uiElement.call(this,a,b,c,"div",null,{role:"presentation"},function(){var c=[],d=b.required?" cke_required":"";return"horizontal"!=b.labelLayout?c.push('<label class="cke_dialog_ui_labeled_label'+d+'" ',' id="'+f.labelId+'"',f.inputId?' for="'+f.inputId+'"':"",(b.labelStyle?' style="'+b.labelStyle+'"':"")+">",b.label,"</label>",'<div class="cke_dialog_ui_labeled_content"',b.controlStyle?' style="'+b.controlStyle+'"':"",' role="radiogroup" aria-labelledby="'+f.labelId+'">',e.call(this,a,b),"</div>"):(d={type:"hbox",widths:b.widths,padding:0,children:[{type:"html",html:'<label class="cke_dialog_ui_labeled_label'+d+'" id="'+f.labelId+'" for="'+f.inputId+'"'+(b.labelStyle?' style="'+b.labelStyle+'"':"")+">"+CKEDITOR.tools.htmlEncode(b.label)+"</span>"},{type:"html",html:'<span class="cke_dialog_ui_labeled_content"'+(b.controlStyle?' style="'+b.controlStyle+'"':"")+">"+e.call(this,a,b)+"</span>"}]},CKEDITOR.dialog._.uiElementBuilders.hbox.build(a,d,c)),c.join("")
})}},textInput:function(a,b,c){if(!(arguments.length<3)){d.call(this,b);var e=this._.inputId=CKEDITOR.tools.getNextId()+"_textInput",f={"class":"cke_dialog_ui_input_"+b.type,id:e,type:b.type};b.validate&&(this.validate=b.validate),b.maxLength&&(f.maxlength=b.maxLength),b.size&&(f.size=b.size),b.inputStyle&&(f.style=b.inputStyle);var h=this,p=!1;a.on("load",function(){h.getInputElement().on("keydown",function(a){13==a.data.getKeystroke()&&(p=!0)}),h.getInputElement().on("keyup",function(b){13==b.data.getKeystroke()&&p&&(a.getButton("ok")&&setTimeout(function(){a.getButton("ok").click()},0),p=!1)},null,null,1e3)}),CKEDITOR.ui.dialog.labeledElement.call(this,a,b,c,function(){var a=['<div class="cke_dialog_ui_input_',b.type,'" role="presentation"'];
b.width&&a.push('style="width:'+b.width+'" '),a.push("><input "),f["aria-labelledby"]=this._.labelId,this._.required&&(f["aria-required"]=this._.required);for(var c in f)a.push(c+'="'+f[c]+'" ');return a.push(" /></div>"),a.join("")})}},textarea:function(a,b,c){if(!(arguments.length<3)){d.call(this,b);var e=this,f=this._.inputId=CKEDITOR.tools.getNextId()+"_textarea",h={};b.validate&&(this.validate=b.validate),h.rows=b.rows||5,h.cols=b.cols||20,h["class"]="cke_dialog_ui_input_textarea "+(b["class"]||""),"undefined"!=typeof b.inputStyle&&(h.style=b.inputStyle),b.dir&&(h.dir=b.dir),CKEDITOR.ui.dialog.labeledElement.call(this,a,b,c,function(){h["aria-labelledby"]=this._.labelId,this._.required&&(h["aria-required"]=this._.required);
var b,a=['<div class="cke_dialog_ui_input_textarea" role="presentation"><textarea id="',f,'" '];for(b in h)a.push(b+'="'+CKEDITOR.tools.htmlEncode(h[b])+'" ');return a.push(">",CKEDITOR.tools.htmlEncode(e._["default"]),"</textarea></div>"),a.join("")})}},checkbox:function(a,b,c){if(!(arguments.length<3)){var e=d.call(this,b,{"default":!!b["default"]});b.validate&&(this.validate=b.validate),CKEDITOR.ui.dialog.uiElement.call(this,a,b,c,"span",null,null,function(){var c=CKEDITOR.tools.extend({},b,{id:b.id?b.id+"_checkbox":CKEDITOR.tools.getNextId()+"_checkbox"},!0),d=[],h=CKEDITOR.tools.getNextId()+"_label",j={"class":"cke_dialog_ui_checkbox_input",type:"checkbox","aria-labelledby":h};
return f(c),b["default"]&&(j.checked="checked"),"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),e.checkbox=new CKEDITOR.ui.dialog.uiElement(a,c,d,"input",null,j),d.push(' <label id="',h,'" for="',j.id,'"'+(b.labelStyle?' style="'+b.labelStyle+'"':"")+">",CKEDITOR.tools.htmlEncode(b.label),"</label>"),d.join("")})}},radio:function(a,b,c){if(!(arguments.length<3)){d.call(this,b),this._["default"]||(this._["default"]=this._.initValue=b.items[0][1]),b.validate&&(this.validate=b.valdiate);var e=[],h=this;CKEDITOR.ui.dialog.labeledElement.call(this,a,b,c,function(){for(var c=[],d=[],j=(b.id?b.id:CKEDITOR.tools.getNextId())+"_radio",n=0;n<b.items.length;n++){var u=b.items[n],v=void 0!==u[2]?u[2]:u[0],s=void 0!==u[1]?u[1]:u[0],r=CKEDITOR.tools.getNextId()+"_radio_input",B=r+"_label",r=CKEDITOR.tools.extend({},b,{id:r,title:null,type:null},!0),v=CKEDITOR.tools.extend({},r,{title:v},!0),z={type:"radio","class":"cke_dialog_ui_radio_input",name:j,value:s,"aria-labelledby":B},x=[];
h._["default"]==s&&(z.checked="checked"),f(r),f(v),"undefined"!=typeof r.inputStyle&&(r.style=r.inputStyle),r.keyboardFocusable=!0,e.push(new CKEDITOR.ui.dialog.uiElement(a,r,x,"input",null,z)),x.push(" "),new CKEDITOR.ui.dialog.uiElement(a,v,x,"label",null,{id:B,"for":z.id},u[0]),c.push(x.join(""))}return new CKEDITOR.ui.dialog.hbox(a,e,c,d),d.join("")}),this._.children=e}},button:function(a,b,c){if(arguments.length){"function"==typeof b&&(b=b(a.getParentEditor())),d.call(this,b,{disabled:b.disabled||!1}),CKEDITOR.event.implementOn(this);var e=this;a.on("load",function(){var a=this.getElement();!function(){a.on("click",function(a){e.click(),a.data.preventDefault()
}),a.on("keydown",function(a){a.data.getKeystroke()in{32:1}&&(e.click(),a.data.preventDefault())})}(),a.unselectable()},this);var f=CKEDITOR.tools.extend({},b);delete f.style;var h=CKEDITOR.tools.getNextId()+"_label";CKEDITOR.ui.dialog.uiElement.call(this,a,f,c,"a",null,{style:b.style,href:"javascript:void(0)",title:b.label,hidefocus:"true","class":b["class"],role:"button","aria-labelledby":h},'<span id="'+h+'" class="cke_dialog_ui_button">'+CKEDITOR.tools.htmlEncode(b.label)+"</span>")}},select:function(a,b,c){if(!(arguments.length<3)){var e=d.call(this,b);b.validate&&(this.validate=b.validate),e.inputId=CKEDITOR.tools.getNextId()+"_select",CKEDITOR.ui.dialog.labeledElement.call(this,a,b,c,function(){var c=CKEDITOR.tools.extend({},b,{id:b.id?b.id+"_select":CKEDITOR.tools.getNextId()+"_select"},!0),d=[],h=[],j={id:e.inputId,"class":"cke_dialog_ui_input_select","aria-labelledby":this._.labelId};
d.push('<div class="cke_dialog_ui_input_',b.type,'" role="presentation"'),b.width&&d.push('style="width:'+b.width+'" '),d.push(">"),void 0!=b.size&&(j.size=b.size),void 0!=b.multiple&&(j.multiple=b.multiple),f(c);for(var u,n=0;n<b.items.length&&(u=b.items[n]);n++)h.push('<option value="',CKEDITOR.tools.htmlEncode(void 0!==u[1]?u[1]:u[0]).replace(/"/g,"&quot;"),'" /> ',CKEDITOR.tools.htmlEncode(u[0]));return"undefined"!=typeof c.inputStyle&&(c.style=c.inputStyle),e.select=new CKEDITOR.ui.dialog.uiElement(a,c,d,"select",null,j,h.join("")),d.push("</div>"),d.join("")})}},file:function(a,b,c){if(!(arguments.length<3)){void 0===b["default"]&&(b["default"]="");var e=CKEDITOR.tools.extend(d.call(this,b),{definition:b,buttons:[]});
b.validate&&(this.validate=b.validate),a.on("load",function(){CKEDITOR.document.getById(e.frameId).getParent().addClass("cke_dialog_ui_input_file")}),CKEDITOR.ui.dialog.labeledElement.call(this,a,b,c,function(){e.frameId=CKEDITOR.tools.getNextId()+"_fileInput";var a=['<iframe frameborder="0" allowtransparency="0" class="cke_dialog_ui_input_file" role="presentation" id="',e.frameId,'" title="',b.label,'" src="javascript:void('];return a.push(CKEDITOR.env.ie?"(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})()":"0"),a.push(')"></iframe>'),a.join("")})}},fileButton:function(a,b,c){if(!(arguments.length<3)){d.call(this,b);
var e=this;b.validate&&(this.validate=b.validate);var f=CKEDITOR.tools.extend({},b),h=f.onClick;f.className=(f.className?f.className+" ":"")+"cke_dialog_ui_button",f.onClick=function(c){var d=b["for"];h&&h.call(this,c)===!1||(a.getContentElement(d[0],d[1]).submit(),this.disable())},a.on("load",function(){a.getContentElement(b["for"][0],b["for"][1])._.buttons.push(e)}),CKEDITOR.ui.dialog.button.call(this,a,f,c)}},html:function(){var a=/^\s*<[\w:]+\s+([^>]*)?>/,b=/^(\s*<[\w:]+(?:\s+[^>]*)?)((?:.|\r|\n)+)$/,c=/\/$/;return function(d,e,f){if(!(arguments.length<3)){var h=[],k=e.html;"<"!=k.charAt(0)&&(k="<span>"+k+"</span>");var n=e.focus;if(n){var u=this.focus;this.focus=function(){("function"==typeof n?n:u).call(this),this.fire("focus")
},e.isFocusable&&(this.isFocusable=this.isFocusable),this.keyboardFocusable=!0}CKEDITOR.ui.dialog.uiElement.call(this,d,e,h,"span",null,null,""),h=h.join("").match(a),k=k.match(b)||["","",""],c.test(k[1])&&(k[1]=k[1].slice(0,-1),k[2]="/"+k[2]),f.push([k[1]," ",h[1]||"",k[2]].join(""))}}}(),fieldset:function(a,b,c,d,e){var f=e.label;this._={children:b},CKEDITOR.ui.dialog.uiElement.call(this,a,e,d,"fieldset",null,null,function(){var a=[];f&&a.push("<legend"+(e.labelStyle?' style="'+e.labelStyle+'"':"")+">"+f+"</legend>");for(var b=0;b<c.length;b++)a.push(c[b]);return a.join("")})}},!0),CKEDITOR.ui.dialog.html.prototype=new CKEDITOR.ui.dialog.uiElement,CKEDITOR.ui.dialog.labeledElement.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setLabel:function(a){var b=CKEDITOR.document.getById(this._.labelId);
return b.getChildCount()<1?new CKEDITOR.dom.text(a,CKEDITOR.document).appendTo(b):b.getChild(0).$.nodeValue=a,this},getLabel:function(){var a=CKEDITOR.document.getById(this._.labelId);return!a||a.getChildCount()<1?"":a.getChild(0).getText()},eventProcessors:b},!0),CKEDITOR.ui.dialog.button.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{click:function(){return this._.disabled?!1:this.fire("click",{dialog:this._.dialog})},enable:function(){this._.disabled=!1;var a=this.getElement();a&&a.removeClass("cke_disabled")},disable:function(){this._.disabled=!0,this.getElement().addClass("cke_disabled")},isVisible:function(){return this.getElement().getFirst().isVisible()
},isEnabled:function(){return!this._.disabled},eventProcessors:CKEDITOR.tools.extend({},CKEDITOR.ui.dialog.uiElement.prototype.eventProcessors,{onClick:function(a,b){this.on("click",function(){b.apply(this,arguments)})}},!0),accessKeyUp:function(){this.click()},accessKeyDown:function(){this.focus()},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.textInput.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return CKEDITOR.document.getById(this._.inputId)},focus:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();b&&b.$.focus()},0)},select:function(){var a=this.selectParentTab();setTimeout(function(){var b=a.getInputElement();
b&&(b.$.focus(),b.$.select())},0)},accessKeyUp:function(){this.select()},setValue:function(a){return!a&&(a=""),CKEDITOR.ui.dialog.uiElement.prototype.setValue.apply(this,arguments)},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.textarea.prototype=new CKEDITOR.ui.dialog.textInput,CKEDITOR.ui.dialog.select.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,{getInputElement:function(){return this._.select.getElement()},add:function(a,b,c){var d=new CKEDITOR.dom.element("option",this.getDialog().getParentEditor().document),e=this.getInputElement().$;return d.$.text=a,d.$.value=void 0===b||null===b?a:b,void 0===c||null===c?CKEDITOR.env.ie?e.add(d.$):e.add(d.$,null):e.add(d.$,c),this
},remove:function(a){return this.getInputElement().$.remove(a),this},clear:function(){for(var a=this.getInputElement().$;a.length>0;)a.remove(0);return this},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.checkbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getInputElement:function(){return this._.checkbox.getElement()},setValue:function(a,b){this.getInputElement().$.checked=a,!b&&this.fire("change",{value:a})},getValue:function(){return this.getInputElement().$.checked},accessKeyUp:function(){this.setValue(!this.getValue())},eventProcessors:{onChange:function(a,c){return!CKEDITOR.env.ie||CKEDITOR.env.version>8?b.onChange.apply(this,arguments):(a.on("load",function(){var a=this._.checkbox.getElement();
a.on("propertychange",function(b){b=b.data.$,"checked"==b.propertyName&&this.fire("change",{value:a.$.checked})},this)},this),this.on("change",c),null)}},keyboardFocusable:!0},a,!0),CKEDITOR.ui.dialog.radio.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{setValue:function(a,b){for(var d,c=this._.children,e=0;e<c.length&&(d=c[e]);e++)d.getElement().$.checked=d.getValue()==a;!b&&this.fire("change",{value:a})},getValue:function(){for(var a=this._.children,b=0;b<a.length;b++)if(a[b].getElement().$.checked)return a[b].getValue();return null},accessKeyUp:function(){var b,a=this._.children;for(b=0;b<a.length;b++)if(a[b].getElement().$.checked)return void a[b].getElement().focus();
a[0].getElement().focus()},eventProcessors:{onChange:function(a,c){return CKEDITOR.env.ie?(a.on("load",function(){for(var a=this._.children,b=this,c=0;c<a.length;c++)a[c].getElement().on("propertychange",function(a){a=a.data.$,"checked"==a.propertyName&&this.$.checked&&b.fire("change",{value:this.getAttribute("value")})})},this),this.on("change",c),null):b.onChange.apply(this,arguments)}}},a,!0),CKEDITOR.ui.dialog.file.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.labeledElement,a,{getInputElement:function(){var a=CKEDITOR.document.getById(this._.frameId).getFrameDocument();return a.$.forms.length>0?new CKEDITOR.dom.element(a.$.forms[0].elements[0]):this.getElement()
},submit:function(){return this.getInputElement().getParent().$.submit(),this},getAction:function(){return this.getInputElement().getParent().$.action},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){a.on("formLoaded",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},reset:function(){function a(){c.$.open();var i="";d.size&&(i=d.size-(CKEDITOR.env.ie?7:0));var v=b.frameId+"_input";for(c.$.write(['<html dir="'+k+'" lang="'+n+'"><head><title></title></head><body style="margin: 0; overflow: hidden; background: transparent;">','<form enctype="multipart/form-data" method="POST" dir="'+k+'" lang="'+n+'" action="',CKEDITOR.tools.htmlEncode(d.action),'"><label id="',b.labelId,'" for="',v,'" style="display:none">',CKEDITOR.tools.htmlEncode(d.label),'</label><input style="width:100%" id="',v,'" aria-labelledby="',b.labelId,'" type="file" name="',CKEDITOR.tools.htmlEncode(d.id||"cke_upload"),'" size="',CKEDITOR.tools.htmlEncode(i>0?i:""),'" /></form></body></html><script>',CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"","window.parent.CKEDITOR.tools.callFunction("+f+");","window.onbeforeunload = function() {window.parent.CKEDITOR.tools.callFunction("+h+")}","</script>"].join("")),c.$.close(),i=0;i<e.length;i++)e[i].enable()
}var b=this._,c=CKEDITOR.document.getById(b.frameId).getFrameDocument(),d=b.definition,e=b.buttons,f=this.formLoadedNumber,h=this.formUnloadNumber,k=b.dialog._.editor.lang.dir,n=b.dialog._.editor.langCode;f||(f=this.formLoadedNumber=CKEDITOR.tools.addFunction(function(){this.fire("formLoaded")},this),h=this.formUnloadNumber=CKEDITOR.tools.addFunction(function(){this.getInputElement().clearCustomData()},this),this.getDialog()._.editor.on("destroy",function(){CKEDITOR.tools.removeFunction(f),CKEDITOR.tools.removeFunction(h)})),CKEDITOR.env.gecko?setTimeout(a,500):a()},getValue:function(){return this.getInputElement().$.value||""},setInitValue:function(){this._.initValue=""
},eventProcessors:{onChange:function(a,b){this._.domOnChangeRegistered||(this.on("formLoaded",function(){this.getInputElement().on("change",function(){this.fire("change",{value:this.getValue()})},this)},this),this._.domOnChangeRegistered=!0),this.on("change",b)}},keyboardFocusable:!0},!0),CKEDITOR.ui.dialog.fileButton.prototype=new CKEDITOR.ui.dialog.button,CKEDITOR.ui.dialog.fieldset.prototype=CKEDITOR.tools.clone(CKEDITOR.ui.dialog.hbox.prototype),CKEDITOR.dialog.addUIElement("text",e),CKEDITOR.dialog.addUIElement("password",e),CKEDITOR.dialog.addUIElement("textarea",c),CKEDITOR.dialog.addUIElement("checkbox",c),CKEDITOR.dialog.addUIElement("radio",c),CKEDITOR.dialog.addUIElement("button",c),CKEDITOR.dialog.addUIElement("select",c),CKEDITOR.dialog.addUIElement("file",c),CKEDITOR.dialog.addUIElement("fileButton",c),CKEDITOR.dialog.addUIElement("html",c),CKEDITOR.dialog.addUIElement("fieldset",{build:function(a,b,c){for(var e,d=b.children,f=[],h=[],k=0;k<d.length&&(e=d[k]);k++){var n=[];
f.push(n),h.push(CKEDITOR.dialog._.uiElementBuilders[e.type].build(a,e,n))}return new CKEDITOR.ui.dialog[b.type](a,h,f,c,b)}})}}),CKEDITOR.DIALOG_RESIZE_NONE=0,CKEDITOR.DIALOG_RESIZE_WIDTH=1,CKEDITOR.DIALOG_RESIZE_HEIGHT=2,CKEDITOR.DIALOG_RESIZE_BOTH=3,function(){function d(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId)+a,c=b-1;c>b-a;c--)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];return null}function e(){for(var a=this._.tabIdList.length,b=CKEDITOR.tools.indexOf(this._.tabIdList,this._.currentTabId),c=b+1;b+a>c;c++)if(this._.tabs[this._.tabIdList[c%a]][0].$.offsetHeight)return this._.tabIdList[c%a];
return null}function c(a,b){for(var c=a.$.getElementsByTagName("input"),d=0,e=c.length;e>d;d++){var f=new CKEDITOR.dom.element(c[d]);"text"==f.getAttribute("type").toLowerCase()&&(b?(f.setAttribute("value",f.getCustomData("fake_value")||""),f.removeCustomData("fake_value")):(f.setCustomData("fake_value",f.getAttribute("value")),f.setAttribute("value","")))}}function a(a,b){var c=this.getInputElement();c&&(a?c.removeAttribute("aria-invalid"):c.setAttribute("aria-invalid",!0)),a||(this.select?this.select():this.focus()),b&&alert(b),this.fire("validated",{valid:a,msg:b})}function b(){var a=this.getInputElement();a&&a.removeAttribute("aria-invalid")}function h(a){var a=CKEDITOR.dom.element.createFromHtml(CKEDITOR.addTemplate("dialog",n).output({id:CKEDITOR.tools.getNextNumber(),editorId:a.id,langDir:a.lang.dir,langCode:a.langCode,editorDialogClass:"cke_editor_"+a.name.replace(/\./g,"\\.")+"_dialog",closeTitle:a.lang.common.close,hidpi:CKEDITOR.env.hidpi?"cke_hidpi":""})),b=a.getChild([0,0,0,0,0]),c=b.getChild(0),d=b.getChild(1);
if(CKEDITOR.env.ie&&!CKEDITOR.env.ie6Compat){var e="javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())";CKEDITOR.dom.element.createFromHtml('<iframe frameBorder="0" class="cke_iframe_shim" src="'+e+'" tabIndex="-1"></iframe>').appendTo(b.getParent())}return c.unselectable(),d.unselectable(),{element:a,parts:{dialog:a.getChild(0),title:c,close:d,tabs:b.getChild(2),contents:b.getChild([3,0,0,0]),footer:b.getChild([3,0,1,0])}}}function f(a,b,c){this.element=b,this.focusIndex=c,this.tabIndex=0,this.isFocusable=function(){return!b.getAttribute("disabled")&&b.isVisible()},this.focus=function(){a._.currentFocusIndex=this.focusIndex,this.element.focus()
},b.on("keydown",function(a){a.data.getKeystroke()in{32:1,13:1}&&this.fire("click")}),b.on("focus",function(){this.fire("mouseover")}),b.on("blur",function(){this.fire("mouseout")})}function i(a){function b(){a.layout()}var c=CKEDITOR.document.getWindow();c.on("resize",b),a.on("hide",function(){c.removeListener("resize",b)})}function g(a,b){this._={dialog:a},CKEDITOR.tools.extend(this,b)}function j(a){function b(c){var h=a.getSize(),j=CKEDITOR.document.getWindow().getViewPaneSize(),k=c.data.$.screenX,l=c.data.$.screenY,m=k-d.x,t=l-d.y;d={x:k,y:l},e.x=e.x+m,e.y=e.y+t,a.move(e.x+i[3]<g?-i[3]:e.x-i[1]>j.width-h.width-g?j.width-h.width+("rtl"==f.lang.dir?0:i[1]):e.x,e.y+i[0]<g?-i[0]:e.y-i[2]>j.height-h.height-g?j.height-h.height+i[2]:e.y,1),c.data.preventDefault()
}function c(){if(CKEDITOR.document.removeListener("mousemove",b),CKEDITOR.document.removeListener("mouseup",c),CKEDITOR.env.ie6Compat){var a=q.getChild(0).getFrameDocument();a.removeListener("mousemove",b),a.removeListener("mouseup",c)}}var d=null,e=null;a.getElement().getFirst();var f=a.getParentEditor(),g=f.config.dialog_magnetDistance,i=CKEDITOR.skin.margins||[0,0,0,0];"undefined"==typeof g&&(g=20),a.parts.title.on("mousedown",function(f){if(d={x:f.data.$.screenX,y:f.data.$.screenY},CKEDITOR.document.on("mousemove",b),CKEDITOR.document.on("mouseup",c),e=a.getPosition(),CKEDITOR.env.ie6Compat){var g=q.getChild(0).getFrameDocument();g.on("mousemove",b),g.on("mouseup",c)
}f.data.preventDefault()},a)}function l(a){function d(e){var m="rtl"==i.lang.dir,n=l.width,o=l.height,r=n+(e.data.$.screenX-b)*(m?-1:1)*(a._.moved?1:2),s=o+(e.data.$.screenY-c)*(a._.moved?1:2),p=a._.element.getFirst(),p=m&&p.getComputedStyle("right"),Y=a.getPosition();Y.y+s>k.height&&(s=k.height-Y.y),(m?p:Y.x)+r>k.width&&(r=k.width-(m?p:Y.x)),(g==CKEDITOR.DIALOG_RESIZE_WIDTH||g==CKEDITOR.DIALOG_RESIZE_BOTH)&&(n=Math.max(f.minWidth||0,r-h)),(g==CKEDITOR.DIALOG_RESIZE_HEIGHT||g==CKEDITOR.DIALOG_RESIZE_BOTH)&&(o=Math.max(f.minHeight||0,s-j)),a.resize(n,o),a._.moved||a.layout(),e.data.preventDefault()}function e(){if(CKEDITOR.document.removeListener("mouseup",e),CKEDITOR.document.removeListener("mousemove",d),m&&(m.remove(),m=null),CKEDITOR.env.ie6Compat){var a=q.getChild(0).getFrameDocument();
a.removeListener("mouseup",e),a.removeListener("mousemove",d)}}var b,c,f=a.definition,g=f.resizable;if(g!=CKEDITOR.DIALOG_RESIZE_NONE){var h,j,k,l,m,i=a.getParentEditor(),n=CKEDITOR.tools.addFunction(function(f){l=a.getSize();var g=a.parts.contents;g.$.getElementsByTagName("iframe").length&&(m=CKEDITOR.dom.element.createFromHtml('<div class="cke_dialog_resize_cover" style="height: 100%; position: absolute; width: 100%;"></div>'),g.append(m)),j=l.height-a.parts.contents.getSize("height",!(CKEDITOR.env.gecko||CKEDITOR.env.opera||CKEDITOR.env.ie&&CKEDITOR.env.quirks)),h=l.width-a.parts.contents.getSize("width",1),b=f.screenX,c=f.screenY,k=CKEDITOR.document.getWindow().getViewPaneSize(),CKEDITOR.document.on("mousemove",d),CKEDITOR.document.on("mouseup",e),CKEDITOR.env.ie6Compat&&(g=q.getChild(0).getFrameDocument(),g.on("mousemove",d),g.on("mouseup",e)),f.preventDefault&&f.preventDefault()
});a.on("load",function(){var b="";g==CKEDITOR.DIALOG_RESIZE_WIDTH?b=" cke_resizer_horizontal":g==CKEDITOR.DIALOG_RESIZE_HEIGHT&&(b=" cke_resizer_vertical"),b=CKEDITOR.dom.element.createFromHtml('<div class="cke_resizer'+b+" cke_resizer_"+i.lang.dir+'" title="'+CKEDITOR.tools.htmlEncode(i.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+n+', event )">'+("ltr"==i.lang.dir?"â¢":"â£")+"</div>"),a.parts.footer.append(b,1)}),i.on("destroy",function(){CKEDITOR.tools.removeFunction(n)})}}function m(a){a.data.preventDefault(1)}function o(a){var b=CKEDITOR.document.getWindow(),c=a.config,d=c.dialog_backgroundCoverColor||"white",e=c.dialog_backgroundCoverOpacity,f=c.baseFloatZIndex,c=CKEDITOR.tools.genKey(d,e,f),g=x[c];
g?g.show():(f=['<div tabIndex="-1" style="position: ',CKEDITOR.env.ie6Compat?"absolute":"fixed","; z-index: ",f,"; top: 0px; left: 0px; ",CKEDITOR.env.ie6Compat?"":"background-color: "+d,'" class="cke_dialog_background_cover">'],CKEDITOR.env.ie6Compat&&(d="<html><body style=\\'background-color:"+d+";\\'></body></html>",f.push('<iframe hidefocus="true" frameborder="0" id="cke_dialog_background_iframe" src="javascript:'),f.push("void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.write( '"+d+"' );document.close();")+"})())"),f.push('" style="position:absolute;left:0;top:0;width:100%;height: 100%;filter: progid:DXImageTransform.Microsoft.Alpha(opacity=0)"></iframe>')),f.push("</div>"),g=CKEDITOR.dom.element.createFromHtml(f.join("")),g.setOpacity(void 0!=e?e:.5),g.on("keydown",m),g.on("keypress",m),g.on("keyup",m),g.appendTo(CKEDITOR.document.getBody()),x[c]=g),a.focusManager.add(g),q=g;
var a=function(){var a=b.getViewPaneSize();g.setStyles({width:a.width+"px",height:a.height+"px"})},i=function(){var a=b.getScrollPosition(),c=CKEDITOR.dialog._.currentTop;if(g.setStyles({left:a.x+"px",top:a.y+"px"}),c)do a=c.getPosition(),c.move(a.x,a.y);while(c=c._.parentDialog)};if(z=a,b.on("resize",a),a(),(!CKEDITOR.env.mac||!CKEDITOR.env.webkit)&&g.focus(),CKEDITOR.env.ie6Compat){var h=function(){i(),arguments.callee.prevScrollHandler.apply(this,arguments)};b.$.setTimeout(function(){h.prevScrollHandler=window.onscroll||function(){},window.onscroll=h},0),i()}}function p(a){q&&(a.focusManager.remove(q),a=CKEDITOR.document.getWindow(),q.hide(),a.removeListener("resize",z),CKEDITOR.env.ie6Compat&&a.$.setTimeout(function(){window.onscroll=window.onscroll&&window.onscroll.prevScrollHandler||null
},0),z=null)}var k=CKEDITOR.tools.cssLength,n='<div class="cke_reset_all {editorId} {editorDialogClass} {hidpi}" dir="{langDir}" lang="{langCode}" role="dialog" aria-labelledby="cke_dialog_title_{id}"><table class="cke_dialog '+CKEDITOR.env.cssClass+' cke_{langDir}" style="position:absolute" role="presentation"><tr><td role="presentation"><div class="cke_dialog_body" role="presentation"><div id="cke_dialog_title_{id}" class="cke_dialog_title" role="presentation"></div><a id="cke_dialog_close_button_{id}" class="cke_dialog_close_button" href="javascript:void(0)" title="{closeTitle}" role="button"><span class="cke_label">X</span></a><div id="cke_dialog_tabs_{id}" class="cke_dialog_tabs" role="tablist"></div><table class="cke_dialog_contents" role="presentation"><tr><td id="cke_dialog_contents_{id}" class="cke_dialog_contents_body" role="presentation"></td></tr><tr><td id="cke_dialog_footer_{id}" class="cke_dialog_footer" role="presentation"></td></tr></table></div></td></tr></table></div>';
CKEDITOR.dialog=function(c,f){function g(){var a=t._.focusList;a.sort(function(a,b){return a.tabIndex!=b.tabIndex?b.tabIndex-a.tabIndex:a.focusIndex-b.focusIndex});for(var b=a.length,c=0;b>c;c++)a[c].focusIndex=c}function i(a){var b=t._.focusList,a=a||0;if(!(b.length<1)){var c=t._.currentFocusIndex;try{b[c].getInputElement().$.blur()}catch(d){}for(var e=c=(c+a+b.length)%b.length;a&&!b[e].isFocusable()&&(e=(e+a+b.length)%b.length,e!=c););b[e].focus(),"text"==b[e].type&&b[e].select()}}function k(a){if(t==CKEDITOR.dialog._.currentTop){var b=a.data.getKeystroke(),f="rtl"==c.lang.dir;if(v=q=0,9==b||b==CKEDITOR.SHIFT+9)b=b==CKEDITOR.SHIFT+9,t._.tabBarMode?(b=b?d.call(t):e.call(t),t.selectPage(b),t._.tabs[b][0].focus()):i(b?-1:1),v=1;
else if(b==CKEDITOR.ALT+121&&!t._.tabBarMode&&t.getPageCount()>1)t._.tabBarMode=!0,t._.tabs[t._.currentTabId][0].focus(),v=1;else if(37!=b&&39!=b||!t._.tabBarMode)if(13!=b&&32!=b||!t._.tabBarMode)if(13==b)b=a.data.getTarget(),b.is("a","button","select","textarea")||b.is("input")&&"button"==b.$.type||((b=this.getButton("ok"))&&CKEDITOR.tools.setTimeout(b.click,0,b),v=1),q=1;else{if(27!=b)return;(b=this.getButton("cancel"))?CKEDITOR.tools.setTimeout(b.click,0,b):this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),q=1}else this.selectPage(this._.currentTabId),this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1),v=1;else b=b==(f?39:37)?d.call(t):e.call(t),t.selectPage(b),t._.tabs[b][0].focus(),v=1;
m(a)}}function m(a){v?a.data.preventDefault(1):q&&a.data.stopPropagation()}var v,q,n=CKEDITOR.dialog._.dialogDefinitions[f],o=CKEDITOR.tools.clone(u),r=c.config.dialog_buttonsOrder||"OS",p=c.lang.dir,s={};if(("OS"==r&&CKEDITOR.env.mac||"rtl"==r&&"ltr"==p||"ltr"==r&&"rtl"==p)&&o.buttons.reverse(),n=CKEDITOR.tools.extend(n(c),o),n=CKEDITOR.tools.clone(n),n=new B(this,n),o=h(c),this._={editor:c,element:o.element,name:f,contentSize:{width:0,height:0},size:{width:0,height:0},contents:{},buttons:{},accessKeyMap:{},tabs:{},tabIdList:[],currentTabId:null,currentTabIndex:null,pageCount:0,lastTab:null,tabBarMode:!1,focusList:[],currentFocusIndex:0,hasFocus:!1},this.parts=o.parts,CKEDITOR.tools.setTimeout(function(){c.fire("ariaWidget",this.parts.contents)
},0,this),o={position:CKEDITOR.env.ie6Compat?"absolute":"fixed",top:0,visibility:"hidden"},o["rtl"==p?"right":"left"]=0,this.parts.dialog.setStyles(o),CKEDITOR.event.call(this),this.definition=n=CKEDITOR.fire("dialogDefinition",{name:f,definition:n},c).definition,!("removeDialogTabs"in c._)&&c.config.removeDialogTabs){for(o=c.config.removeDialogTabs.split(";"),p=0;p<o.length;p++)if(r=o[p].split(":"),2==r.length){var y=r[0];s[y]||(s[y]=[]),s[y].push(r[1])}c._.removeDialogTabs=s}if(c._.removeDialogTabs&&(s=c._.removeDialogTabs[f]))for(p=0;p<s.length;p++)n.removeContents(s[p]);n.onLoad&&this.on("load",n.onLoad),n.onShow&&this.on("show",n.onShow),n.onHide&&this.on("hide",n.onHide),n.onOk&&this.on("ok",function(a){c.fire("saveSnapshot"),setTimeout(function(){c.fire("saveSnapshot")
},0),n.onOk.call(this,a)===!1&&(a.data.hide=!1)}),n.onCancel&&this.on("cancel",function(a){n.onCancel.call(this,a)===!1&&(a.data.hide=!1)});var t=this,O=function(a){var d,b=t._.contents,c=!1;for(d in b)for(var e in b[d])if(c=a.call(this,b[d][e]))return};this.on("ok",function(b){O(function(c){if(c.validate){var d=c.validate(this),e="string"==typeof d||d===!1;return e&&(b.data.hide=!1,b.stop()),a.call(c,!e,"string"==typeof d?d:void 0),e}})},this,null,0),this.on("cancel",function(a){O(function(b){return b.isChanged()?(c.config.dialog_noConfirmCancel||confirm(c.lang.common.confirmCancel)||(a.data.hide=!1),!0):void 0})},this,null,0),this.parts.close.on("click",function(a){this.fire("cancel",{hide:!0}).hide!==!1&&this.hide(),a.data.preventDefault()
},this),this.changeFocus=i;var P=this._.element;for(c.focusManager.add(P,1),this.on("show",function(){P.on("keydown",k,this),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&P.on("keypress",m,this)}),this.on("hide",function(){P.removeListener("keydown",k),(CKEDITOR.env.opera||CKEDITOR.env.gecko)&&P.removeListener("keypress",m),O(function(a){b.apply(a)})}),this.on("iframeAdded",function(a){new CKEDITOR.dom.document(a.data.iframe.$.contentWindow.document).on("keydown",k,this,null,0)}),this.on("show",function(){if(g(),c.config.dialog_startupFocusTab&&t._.pageCount>1)t._.tabBarMode=!0,t._.tabs[t._.currentTabId][0].focus();else if(!this._.hasFocus)if(this._.currentFocusIndex=-1,n.onFocus){var a=n.onFocus.call(this);
a&&a.focus()}else i(1)},this,null,4294967295),CKEDITOR.env.ie6Compat&&this.on("load",function(){var a=this.getElement(),b=a.getFirst();b.remove(),b.appendTo(a)},this),j(this),l(this),new CKEDITOR.dom.text(n.title,CKEDITOR.document).appendTo(this.parts.title),p=0;p<n.contents.length;p++)(s=n.contents[p])&&this.addPage(s);for(this.parts.tabs.on("click",function(a){var b=a.data.getTarget();b.hasClass("cke_dialog_tab")&&(b=b.$.id,this.selectPage(b.substring(4,b.lastIndexOf("_"))),this._.tabBarMode&&(this._.tabBarMode=!1,this._.currentFocusIndex=-1,i(1)),a.data.preventDefault())},this),p=[],s=CKEDITOR.dialog._.uiElementBuilders.hbox.build(this,{type:"hbox",className:"cke_dialog_footer_buttons",widths:[],children:n.buttons},p).getChild(),this.parts.footer.setHtml(p.join("")),p=0;p<s.length;p++)this._.buttons[s[p].id]=s[p]
},CKEDITOR.dialog.prototype={destroy:function(){this.hide(),this._.element.remove()},resize:function(){return function(a,b){this._.contentSize&&this._.contentSize.width==a&&this._.contentSize.height==b||(CKEDITOR.dialog.fire("resize",{dialog:this,width:a,height:b},this._.editor),this.fire("resize",{width:a,height:b},this._.editor),this.parts.contents.setStyles({width:a+"px",height:b+"px"}),"rtl"==this._.editor.lang.dir&&this._.position&&(this._.position.x=CKEDITOR.document.getWindow().getViewPaneSize().width-this._.contentSize.width-parseInt(this._.element.getFirst().getStyle("right"),10)),this._.contentSize={width:a,height:b})}}(),getSize:function(){var a=this._.element.getFirst();
return{width:a.$.offsetWidth||0,height:a.$.offsetHeight||0}},move:function(a,b,c){var d=this._.element.getFirst(),e="rtl"==this._.editor.lang.dir,f="fixed"==d.getComputedStyle("position");CKEDITOR.env.ie&&d.setStyle("zoom","100%"),f&&this._.position&&this._.position.x==a&&this._.position.y==b||(this._.position={x:a,y:b},f||(f=CKEDITOR.document.getWindow().getScrollPosition(),a+=f.x,b+=f.y),e&&(f=this.getSize(),a=CKEDITOR.document.getWindow().getViewPaneSize().width-f.width-a),b={top:(b>0?b:0)+"px"},b[e?"right":"left"]=(a>0?a:0)+"px",d.setStyles(b),c&&(this._.moved=1))},getPosition:function(){return CKEDITOR.tools.extend({},this._.position)},show:function(){var a=this._.element,b=this.definition;
if(a.getParent()&&a.getParent().equals(CKEDITOR.document.getBody())?a.setStyle("display","block"):a.appendTo(CKEDITOR.document.getBody()),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900){var c=this.parts.dialog;c.setStyle("position","absolute"),setTimeout(function(){c.setStyle("position","fixed")},0)}this.resize(this._.contentSize&&this._.contentSize.width||b.width||b.minWidth,this._.contentSize&&this._.contentSize.height||b.height||b.minHeight),this.reset(),this.selectPage(this.definition.contents[0].id),null===CKEDITOR.dialog._.currentZIndex&&(CKEDITOR.dialog._.currentZIndex=this._.editor.config.baseFloatZIndex),this._.element.getFirst().setStyle("z-index",CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex+10),null===CKEDITOR.dialog._.currentTop?(CKEDITOR.dialog._.currentTop=this,this._.parentDialog=null,o(this._.editor)):(this._.parentDialog=CKEDITOR.dialog._.currentTop,this._.parentDialog.getElement().getFirst().$.style.zIndex-=Math.floor(this._.editor.config.baseFloatZIndex/2),CKEDITOR.dialog._.currentTop=this),a.on("keydown",y),a.on(CKEDITOR.env.opera?"keypress":"keyup",A),this._.hasFocus=!1;
for(var d in b.contents)if(b.contents[d]){var a=b.contents[d],e=this._.tabs[a.id],f=a.requiredContent,g=0;if(e){for(var h in this._.contents[a.id]){var j=this._.contents[a.id][h];"hbox"!=j.type&&"vbox"!=j.type&&j.getInputElement()&&(j.requiredContent&&!this._.editor.activeFilter.check(j.requiredContent)?j.disable():(j.enable(),g++))}!g||f&&!this._.editor.activeFilter.check(f)?e[0].addClass("cke_dialog_tab_disabled"):e[0].removeClass("cke_dialog_tab_disabled")}}CKEDITOR.tools.setTimeout(function(){this.layout(),i(this),this.parts.dialog.setStyle("visibility",""),this.fireOnce("load",{}),CKEDITOR.ui.fire("ready",this),this.fire("show",{}),this._.editor.fire("dialogShow",this),this._.parentDialog||this._.editor.focusManager.lock(),this.foreach(function(a){a.setInitValue&&a.setInitValue()
})},100,this)},layout:function(){var a=this.parts.dialog,b=this.getSize(),c=CKEDITOR.document.getWindow().getViewPaneSize(),d=(c.width-b.width)/2,e=(c.height-b.height)/2;CKEDITOR.env.ie6Compat||(b.height+(e>0?e:0)>c.height||b.width+(d>0?d:0)>c.width?a.setStyle("position","absolute"):a.setStyle("position","fixed")),this.move(this._.moved?this._.position.x:d,this._.moved?this._.position.y:e)},foreach:function(a){for(var b in this._.contents)for(var c in this._.contents[b])a.call(this,this._.contents[b][c]);return this},reset:function(){var a=function(a){a.reset&&a.reset(1)};return function(){return this.foreach(a),this}}(),setupContent:function(){var a=arguments;
this.foreach(function(b){b.setup&&b.setup.apply(b,a)})},commitContent:function(){var a=arguments;this.foreach(function(b){CKEDITOR.env.ie&&this._.currentFocusIndex==b.focusIndex&&b.getInputElement().$.blur(),b.commit&&b.commit.apply(b,a)})},hide:function(){if(this.parts.dialog.isVisible()){this.fire("hide",{}),this._.editor.fire("dialogHide",this),this.selectPage(this._.tabIdList[0]);var a=this._.element;for(a.setStyle("display","none"),this.parts.dialog.setStyle("visibility","hidden"),G(this);CKEDITOR.dialog._.currentTop!=this;)CKEDITOR.dialog._.currentTop.hide();if(this._.parentDialog){var b=this._.parentDialog.getElement().getFirst();b.setStyle("z-index",parseInt(b.$.style.zIndex,10)+Math.floor(this._.editor.config.baseFloatZIndex/2))
}else p(this._.editor);if(CKEDITOR.dialog._.currentTop=this._.parentDialog)CKEDITOR.dialog._.currentZIndex=CKEDITOR.dialog._.currentZIndex-10;else{CKEDITOR.dialog._.currentZIndex=null,a.removeListener("keydown",y),a.removeListener(CKEDITOR.env.opera?"keypress":"keyup",A);var c=this._.editor;c.focus(),setTimeout(function(){c.focusManager.unlock()},0)}delete this._.parentDialog,this.foreach(function(a){a.resetInitValue&&a.resetInitValue()})}},addPage:function(a){if(!a.requiredContent||this._.editor.filter.check(a.requiredContent)){for(var b=[],c=a.label?' title="'+CKEDITOR.tools.htmlEncode(a.label)+'"':"",d=CKEDITOR.dialog._.uiElementBuilders.vbox.build(this,{type:"vbox",className:"cke_dialog_page_contents",children:a.elements,expand:!!a.expand,padding:a.padding,style:a.style||"width: 100%;"},b),e=this._.contents[a.id]={},f=d.getChild(),g=0;d=f.shift();)!d.notAllowed&&"hbox"!=d.type&&"vbox"!=d.type&&g++,e[d.id]=d,"function"==typeof d.getChild&&f.push.apply(f,d.getChild());
g||(a.hidden=!0),b=CKEDITOR.dom.element.createFromHtml(b.join("")),b.setAttribute("role","tabpanel"),d=CKEDITOR.env,e="cke_"+a.id+"_"+CKEDITOR.tools.getNextNumber(),c=CKEDITOR.dom.element.createFromHtml(['<a class="cke_dialog_tab"',this._.pageCount>0?" cke_last":"cke_first",c,a.hidden?' style="display:none"':"",' id="',e,'"',d.gecko&&d.version>=10900&&!d.hc?"":' href="javascript:void(0)"',' tabIndex="-1" hidefocus="true" role="tab">',a.label,"</a>"].join("")),b.setAttribute("aria-labelledby",e),this._.tabs[a.id]=[c,b],this._.tabIdList.push(a.id),!a.hidden&&this._.pageCount++,this._.lastTab=c,this.updateStyle(),b.setAttribute("name",a.id),b.appendTo(this.parts.contents),c.unselectable(),this.parts.tabs.append(c),a.accessKey&&(D(this,this,"CTRL+"+a.accessKey,F,C),this._.accessKeyMap["CTRL+"+a.accessKey]=a.id)
}},selectPage:function(a){if(this._.currentTabId!=a&&!this._.tabs[a][0].hasClass("cke_dialog_tab_disabled")&&this.fire("selectPage",{page:a,currentPage:this._.currentTabId})!==!1){for(var b in this._.tabs){var d=this._.tabs[b][0],e=this._.tabs[b][1];b!=a&&(d.removeClass("cke_dialog_tab_selected"),e.hide()),e.setAttribute("aria-hidden",b!=a)}var f=this._.tabs[a];f[0].addClass("cke_dialog_tab_selected"),CKEDITOR.env.ie6Compat||CKEDITOR.env.ie7Compat?(c(f[1]),f[1].show(),setTimeout(function(){c(f[1],1)},0)):f[1].show(),this._.currentTabId=a,this._.currentTabIndex=CKEDITOR.tools.indexOf(this._.tabIdList,a)}},updateStyle:function(){this.parts.dialog[(1===this._.pageCount?"add":"remove")+"Class"]("cke_single_page")
},hidePage:function(a){var b=this._.tabs[a]&&this._.tabs[a][0];b&&1!=this._.pageCount&&b.isVisible()&&(a==this._.currentTabId&&this.selectPage(d.call(this)),b.hide(),this._.pageCount--,this.updateStyle())},showPage:function(a){(a=this._.tabs[a]&&this._.tabs[a][0])&&(a.show(),this._.pageCount++,this.updateStyle())},getElement:function(){return this._.element},getName:function(){return this._.name},getContentElement:function(a,b){var c=this._.contents[a];return c&&c[b]},getValueOf:function(a,b){return this.getContentElement(a,b).getValue()},setValueOf:function(a,b,c){return this.getContentElement(a,b).setValue(c)},getButton:function(a){return this._.buttons[a]},click:function(a){return this._.buttons[a].click()
},disableButton:function(a){return this._.buttons[a].disable()},enableButton:function(a){return this._.buttons[a].enable()},getPageCount:function(){return this._.pageCount},getParentEditor:function(){return this._.editor},getSelectedElement:function(){return this.getParentEditor().getSelection().getSelectedElement()},addFocusable:function(a,b){if("undefined"==typeof b)b=this._.focusList.length,this._.focusList.push(new f(this,a,b));else{this._.focusList.splice(b,0,new f(this,a,b));for(var c=b+1;c<this._.focusList.length;c++)this._.focusList[c].focusIndex++}}},CKEDITOR.tools.extend(CKEDITOR.dialog,{add:function(a,b){this._.dialogDefinitions[a]&&"function"!=typeof b||(this._.dialogDefinitions[a]=b)
},exists:function(a){return!!this._.dialogDefinitions[a]},getCurrent:function(){return CKEDITOR.dialog._.currentTop},isTabEnabled:function(a,b,c){return a=a.config.removeDialogTabs,!(a&&a.match(RegExp("(?:^|;)"+b+":"+c+"(?:$|;)","i")))},okButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"ok",type:"button",label:a.lang.common.ok,"class":"cke_dialog_ui_button_ok",onClick:function(a){a=a.data.dialog,a.fire("ok",{hide:!0}).hide!==!1&&a.hide()}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),cancelButton:function(){var a=function(a,b){return b=b||{},CKEDITOR.tools.extend({id:"cancel",type:"button",label:a.lang.common.cancel,"class":"cke_dialog_ui_button_cancel",onClick:function(a){a=a.data.dialog,a.fire("cancel",{hide:!0}).hide!==!1&&a.hide()
}},b,!0)};return a.type="button",a.override=function(b){return CKEDITOR.tools.extend(function(c){return a(c,b)},{type:"button"},!0)},a}(),addUIElement:function(a,b){this._.uiElementBuilders[a]=b}}),CKEDITOR.dialog._={uiElementBuilders:{},dialogDefinitions:{},currentTop:null,currentZIndex:null},CKEDITOR.event.implementOn(CKEDITOR.dialog),CKEDITOR.event.implementOn(CKEDITOR.dialog.prototype);var u={resizable:CKEDITOR.DIALOG_RESIZE_BOTH,minWidth:600,minHeight:400,buttons:[CKEDITOR.dialog.okButton,CKEDITOR.dialog.cancelButton]},v=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return e;if(c&&e[c]&&(e=v(e[c],b,c)))return e}return null},s=function(a,b,c,d,e){if(c){for(var g,f=0;g=a[f];f++){if(g.id==c)return a.splice(f,0,b),b;
if(d&&g[d]&&(g=s(g[d],b,c,d,!0)))return g}if(e)return null}return a.push(b),b},r=function(a,b,c){for(var e,d=0;e=a[d];d++){if(e.id==b)return a.splice(d,1);if(c&&e[c]&&(e=r(e[c],b,c)))return e}return null},B=function(a,b){this.dialog=a;for(var e,c=b.contents,d=0;e=c[d];d++)c[d]=e&&new g(a,e);CKEDITOR.tools.extend(this,b)};B.prototype={getContents:function(a){return v(this.contents,a)},getButton:function(a){return v(this.buttons,a)},addContents:function(a,b){return s(this.contents,a,b)},addButton:function(a,b){return s(this.buttons,a,b)},removeContents:function(a){r(this.contents,a)},removeButton:function(a){r(this.buttons,a)}},g.prototype={get:function(a){return v(this.elements,a,"children")
},add:function(a,b){return s(this.elements,a,b,"children")},remove:function(a){r(this.elements,a,"children")}};var z,q,x={},w={},y=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keydown&&b.keydown.call(b.uiElement,b.dialog,b.key),a.data.preventDefault())},A=function(a){var b=a.data.$.ctrlKey||a.data.$.metaKey,c=a.data.$.altKey,d=a.data.$.shiftKey,e=String.fromCharCode(a.data.$.keyCode);(b=w[(b?"CTRL+":"")+(c?"ALT+":"")+(d?"SHIFT+":"")+e])&&b.length&&(b=b[b.length-1],b.keyup&&(b.keyup.call(b.uiElement,b.dialog,b.key),a.data.preventDefault()))
},D=function(a,b,c,d,e){(w[c]||(w[c]=[])).push({uiElement:a,dialog:b,key:c,keyup:e||a.accessKeyUp,keydown:d||a.accessKeyDown})},G=function(a){for(var b in w){for(var c=w[b],d=c.length-1;d>=0;d--)(c[d].dialog==a||c[d].uiElement==a)&&c.splice(d,1);0===c.length&&delete w[b]}},C=function(a,b){a._.accessKeyMap[b]&&a.selectPage(a._.accessKeyMap[b])},F=function(){};!function(){CKEDITOR.ui.dialog={uiElement:function(a,b,c,d,e,f,g){if(!(arguments.length<4)){var i=(d.call?d(b):d)||"div",h=["<",i," "],j=(e&&e.call?e(b):e)||{},k=(f&&f.call?f(b):f)||{},l=(g&&g.call?g.call(this,a,b):g)||"",m=this.domId=k.id||CKEDITOR.tools.getNextId()+"_uiElement";this.id=b.id,b.requiredContent&&!a.getParentEditor().filter.check(b.requiredContent)&&(j.display="none",this.notAllowed=!0),k.id=m;
var n={};b.type&&(n["cke_dialog_ui_"+b.type]=1),b.className&&(n[b.className]=1),b.disabled&&(n.cke_disabled=1);for(var t=k["class"]&&k["class"].split?k["class"].split(" "):[],m=0;m<t.length;m++)t[m]&&(n[t[m]]=1);t=[];for(m in n)t.push(m);k["class"]=t.join(" "),b.title&&(k.title=b.title),n=(b.style||"").split(";"),b.align&&(t=b.align,j["margin-left"]="left"==t?0:"auto",j["margin-right"]="right"==t?0:"auto");for(m in j)n.push(m+":"+j[m]);for(b.hidden&&n.push("display:none"),m=n.length-1;m>=0;m--)""===n[m]&&n.splice(m,1);n.length>0&&(k.style=(k.style?k.style+"; ":"")+n.join("; "));for(m in k)h.push(m+'="'+CKEDITOR.tools.htmlEncode(k[m])+'" ');h.push(">",l,"</",i,">"),c.push(h.join("")),(this._||(this._={})).dialog=a,"boolean"==typeof b.isChanged&&(this.isChanged=function(){return b.isChanged
}),"function"==typeof b.isChanged&&(this.isChanged=b.isChanged),"function"==typeof b.setValue&&(this.setValue=CKEDITOR.tools.override(this.setValue,function(a){return function(c){a.call(this,b.setValue.call(this,c))}})),"function"==typeof b.getValue&&(this.getValue=CKEDITOR.tools.override(this.getValue,function(a){return function(){return b.getValue.call(this,a.call(this))}})),CKEDITOR.event.implementOn(this),this.registerEvents(b),this.accessKeyUp&&this.accessKeyDown&&b.accessKey&&D(this,a,"CTRL+"+b.accessKey);var o=this;a.on("load",function(){var b=o.getInputElement();if(b){var c=o.type in{checkbox:1,ratio:1}&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?"cke_dialog_ui_focused":"";
b.on("focus",function(){a._.tabBarMode=!1,a._.hasFocus=!0,o.fire("focus"),c&&this.addClass(c)}),b.on("blur",function(){o.fire("blur"),c&&this.removeClass(c)})}}),CKEDITOR.tools.extend(this,b),this.keyboardFocusable&&(this.tabIndex=b.tabIndex||0,this.focusIndex=a._.focusList.push(this)-1,this.on("focus",function(){a._.currentFocusIndex=o.focusIndex}))}},hbox:function(a,b,c,d,e){if(!(arguments.length<4)){this._||(this._={});var h,f=this._.children=b,g=e&&e.widths||null,i=e&&e.height||null,j={role:"presentation"};e&&e.align&&(j.align=e.align),CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"hbox"},d,"table",{},j,function(){var a=['<tbody><tr class="cke_dialog_ui_hbox">'];
for(h=0;h<c.length;h++){var b="cke_dialog_ui_hbox_child",d=[];0===h&&(b="cke_dialog_ui_hbox_first"),h==c.length-1&&(b="cke_dialog_ui_hbox_last"),a.push('<td class="',b,'" role="presentation" '),g?g[h]&&d.push("width:"+k(g[h])):d.push("width:"+Math.floor(100/c.length)+"%"),i&&d.push("height:"+k(i)),e&&void 0!=e.padding&&d.push("padding:"+k(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[h].align&&d.push("text-align:"+f[h].align),d.length>0&&a.push('style="'+d.join("; ")+'" '),a.push(">",c[h],"</td>")}return a.push("</tr></tbody>"),a.join("")})}},vbox:function(a,b,c,d,e){if(!(arguments.length<3)){this._||(this._={});var f=this._.children=b,g=e&&e.width||null,i=e&&e.heights||null;
CKEDITOR.ui.dialog.uiElement.call(this,a,e||{type:"vbox"},d,"div",null,{role:"presentation"},function(){var b=['<table role="presentation" cellspacing="0" border="0" '];b.push('style="'),e&&e.expand&&b.push("height:100%;"),b.push("width:"+k(g||"100%"),";"),CKEDITOR.env.webkit&&b.push("float:none;"),b.push('"'),b.push('align="',CKEDITOR.tools.htmlEncode(e&&e.align||("ltr"==a.getParentEditor().lang.dir?"left":"right")),'" '),b.push("><tbody>");for(var d=0;d<c.length;d++){var h=[];b.push('<tr><td role="presentation" '),g&&h.push("width:"+k(g||"100%")),i?h.push("height:"+k(i[d])):e&&e.expand&&h.push("height:"+Math.floor(100/c.length)+"%"),e&&void 0!=e.padding&&h.push("padding:"+k(e.padding)),CKEDITOR.env.ie&&CKEDITOR.env.quirks&&f[d].align&&h.push("text-align:"+f[d].align),h.length>0&&b.push('style="',h.join("; "),'" '),b.push(' class="cke_dialog_ui_vbox_child">',c[d],"</td></tr>")
}return b.push("</tbody></table>"),b.join("")})}}}}(),CKEDITOR.ui.dialog.uiElement.prototype={getElement:function(){return CKEDITOR.document.getById(this.domId)},getInputElement:function(){return this.getElement()},getDialog:function(){return this._.dialog},setValue:function(a,b){return this.getInputElement().setValue(a),!b&&this.fire("change",{value:a}),this},getValue:function(){return this.getInputElement().getValue()},isChanged:function(){return!1},selectParentTab:function(){for(var a=this.getInputElement();(a=a.getParent())&&-1==a.$.className.search("cke_dialog_page_contents"););return a?(a=a.getAttribute("name"),this._.dialog._.currentTabId!=a&&this._.dialog.selectPage(a),this):this
},focus:function(){return this.selectParentTab().getInputElement().focus(),this},registerEvents:function(a){var c,e,b=/^on([A-Z]\w+)/,d=function(a,b,c,d){b.on("load",function(){a.getInputElement().on(c,d,a)})};for(e in a)(c=e.match(b))&&(this.eventProcessors[e]?this.eventProcessors[e].call(this,this._.dialog,a[e]):d(this,this._.dialog,c[1].toLowerCase(),a[e]));return this},eventProcessors:{onLoad:function(a,b){a.on("load",b,this)},onShow:function(a,b){a.on("show",b,this)},onHide:function(a,b){a.on("hide",b,this)}},accessKeyDown:function(){this.focus()},accessKeyUp:function(){},disable:function(){var a=this.getElement();this.getInputElement().setAttribute("disabled","true"),a.addClass("cke_disabled")
},enable:function(){var a=this.getElement();this.getInputElement().removeAttribute("disabled"),a.removeClass("cke_disabled")},isEnabled:function(){return!this.getElement().hasClass("cke_disabled")},isVisible:function(){return this.getInputElement().isVisible()},isFocusable:function(){return this.isEnabled()&&this.isVisible()?!0:!1}},CKEDITOR.ui.dialog.hbox.prototype=CKEDITOR.tools.extend(new CKEDITOR.ui.dialog.uiElement,{getChild:function(a){return arguments.length<1?this._.children.concat():(a.splice||(a=[a]),a.length<2?this._.children[a[0]]:this._.children[a[0]]&&this._.children[a[0]].getChild?this._.children[a[0]].getChild(a.slice(1,a.length)):null)}},!0),CKEDITOR.ui.dialog.vbox.prototype=new CKEDITOR.ui.dialog.hbox,function(){var a={build:function(a,b,c){for(var e,d=b.children,f=[],g=[],i=0;i<d.length&&(e=d[i]);i++){var h=[];
f.push(h),g.push(CKEDITOR.dialog._.uiElementBuilders[e.type].build(a,e,h))}return new CKEDITOR.ui.dialog[b.type](a,g,f,c,b)}};CKEDITOR.dialog.addUIElement("hbox",a),CKEDITOR.dialog.addUIElement("vbox",a)}(),CKEDITOR.dialogCommand=function(a,b){this.dialogName=a,CKEDITOR.tools.extend(this,b,!0)},CKEDITOR.dialogCommand.prototype={exec:function(a){CKEDITOR.env.opera?CKEDITOR.tools.setTimeout(function(){a.openDialog(this.dialogName)},0,this):a.openDialog(this.dialogName)},canUndo:!1,editorFocus:1},function(){var a=/^([a]|[^a])+$/,b=/^\d*$/,c=/^\d*(?:\.\d+)?$/,d=/^(((\d*(\.\d+))|(\d*))(px|\%)?)?$/,e=/^(((\d*(\.\d+))|(\d*))(px|em|ex|in|cm|mm|pt|pc|\%)?)?$/i,f=/^(\s*[\w-]+\s*:\s*[^:;]+(?:;|$))*$/;
CKEDITOR.VALIDATE_OR=1,CKEDITOR.VALIDATE_AND=2,CKEDITOR.dialog.validate={functions:function(){var a=arguments;return function(){var f,b=this&&this.getValue?this.getValue():a[0],c=void 0,d=CKEDITOR.VALIDATE_AND,e=[];for(f=0;f<a.length&&"function"==typeof a[f];f++)e.push(a[f]);f<a.length&&"string"==typeof a[f]&&(c=a[f],f++),f<a.length&&"number"==typeof a[f]&&(d=a[f]);var g=d==CKEDITOR.VALIDATE_AND?!0:!1;for(f=0;f<e.length;f++)g=d==CKEDITOR.VALIDATE_AND?g&&e[f](b):g||e[f](b);return g?!0:c}},regex:function(a,b){return function(c){return c=this&&this.getValue?this.getValue():c,a.test(c)?!0:b}},notEmpty:function(b){return this.regex(a,b)},integer:function(a){return this.regex(b,a)
},number:function(a){return this.regex(c,a)},cssLength:function(a){return this.functions(function(a){return e.test(CKEDITOR.tools.trim(a))},a)},htmlLength:function(a){return this.functions(function(a){return d.test(CKEDITOR.tools.trim(a))},a)},inlineStyle:function(a){return this.functions(function(a){return f.test(CKEDITOR.tools.trim(a))},a)},equals:function(a,b){return this.functions(function(b){return b==a},b)},notEqual:function(a,b){return this.functions(function(b){return b!=a},b)}},CKEDITOR.on("instanceDestroyed",function(a){if(CKEDITOR.tools.isEmpty(CKEDITOR.instances)){for(var b;b=CKEDITOR.dialog._.currentTop;)b.hide();for(var c in x)x[c].remove();x={}
}var d,a=a.editor._.storedDialogs;for(d in a)a[d].destroy()})}(),CKEDITOR.tools.extend(CKEDITOR.editor.prototype,{openDialog:function(a,b){var c=null,d=CKEDITOR.dialog._.dialogDefinitions[a];if(null===CKEDITOR.dialog._.currentTop&&o(this),"function"==typeof d)c=this._.storedDialogs||(this._.storedDialogs={}),c=c[a]||(c[a]=new CKEDITOR.dialog(this,a)),b&&b.call(c,c),c.show();else{if("failed"==d)throw p(this),Error('[CKEDITOR.dialog.openDialog] Dialog "'+a+'" failed when loading definition.');"string"==typeof d&&CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(d),function(){"function"!=typeof CKEDITOR.dialog._.dialogDefinitions[a]&&(CKEDITOR.dialog._.dialogDefinitions[a]="failed"),this.openDialog(a,b)
},this,0,1)}return CKEDITOR.skin.loadPart("dialog"),c}})}(),CKEDITOR.plugins.add("dialog",{requires:"dialogui",init:function(d){d.on("doubleclick",function(e){e.data.dialog&&d.openDialog(e.data.dialog)},null,null,999)}}),function(){function d(a){function b(){var c=a.editable();c.on(w,function(a){(!CKEDITOR.env.ie||!z)&&s(a)}),CKEDITOR.env.ie&&c.on("paste",function(b){x||(e(),b.data.preventDefault(),s(b),o("paste")||a.openDialog("paste"))}),CKEDITOR.env.ie&&(c.on("contextmenu",h,null,null,0),c.on("beforepaste",function(a){a.data&&!a.data.$.ctrlKey&&h()},null,null,0)),c.on("beforecut",function(){!z&&k(a)});var d;c.attachListener(CKEDITOR.env.ie?c:a.document.getDocumentElement(),"mouseup",function(){d=setTimeout(function(){r()
},0)}),a.on("destroy",function(){clearTimeout(d)}),c.on("keyup",r)}function c(b){return{type:b,canUndo:"cut"==b,startDisabled:!0,exec:function(){"cut"==this.type&&k();var b,c=this.type;if(CKEDITOR.env.ie)b=o(c);else try{b=a.document.$.execCommand(c,!1,null)}catch(d){b=!1}return b||alert(a.lang.clipboard[this.type+"Error"]),b}}}function d(){return{canUndo:!1,async:!0,exec:function(a,b){var c=function(b,c){b&&p(b.type,b.dataValue,!!c),a.fire("afterCommandExec",{name:"paste",command:d,returnValue:!!b})},d=this;"string"==typeof b?c({type:"auto",dataValue:b},1):a.getClipboardData(c)}}}function e(){x=1,setTimeout(function(){x=0},100)}function h(){z=1,setTimeout(function(){z=0
},10)}function o(b){var c=a.document,d=c.getBody(),e=!1,g=function(){e=!0};return d.on(b,g),(CKEDITOR.env.version>7?c.$:c.$.selection.createRange()).execCommand(b),d.removeListener(b,g),e}function p(b,c,d){return b={type:b},d&&a.fire("beforePaste",b)===!1||!c?!1:(b.dataValue=c,a.fire("paste",b))}function k(){if(CKEDITOR.env.ie&&!CKEDITOR.env.quirks){var c,d,e,b=a.getSelection();b.getType()==CKEDITOR.SELECTION_ELEMENT&&(c=b.getSelectedElement())&&(d=b.getRanges()[0],e=a.document.createText(""),e.insertBefore(c),d.setStartBefore(e),d.setEndAfter(c),b.selectRanges([d]),setTimeout(function(){c.getParent()&&(e.remove(),b.selectElement(c))},0))}}function n(b,c){var h,d=a.document,e=a.editable(),g=function(a){a.cancel()
},i=CKEDITOR.env.gecko&&CKEDITOR.env.version<=10902;if(!d.getById("cke_pastebin")){var j=a.getSelection(),k=j.createBookmarks(),l=new CKEDITOR.dom.element(!CKEDITOR.env.webkit&&!e.is("body")||CKEDITOR.env.ie||CKEDITOR.env.opera?"div":"body",d);l.setAttributes({id:"cke_pastebin","data-cke-temp":"1"}),CKEDITOR.env.opera&&l.appendBogus();var m=0,d=d.getWindow();i?(l.insertAfter(k[0].startNode),l.setStyle("display","inline")):(CKEDITOR.env.webkit?(e.append(l),l.addClass("cke_editable"),e.is("body")||(i="static"!=e.getComputedStyle("position")?e:CKEDITOR.dom.element.get(e.$.offsetParent),m=i.getDocumentPosition().y)):e.getAscendant(CKEDITOR.env.ie||CKEDITOR.env.opera?"body":"html",1).append(l),l.setStyles({position:"absolute",top:d.getScrollPosition().y-m+10+"px",width:"1px",height:Math.max(1,d.getViewPaneSize().height-20)+"px",overflow:"hidden",margin:0,padding:0})),(i=l.getParent().isReadOnly())?(l.setOpacity(0),l.setAttribute("contenteditable",!0)):l.setStyle("ltr"==a.config.contentsLangDirection?"left":"right","-1000px"),a.on("selectionChange",g,null,null,0),(CKEDITOR.env.webkit||CKEDITOR.env.gecko)&&(h=e.once("blur",g,null,null,-100)),i&&l.focus(),i=new CKEDITOR.dom.range(l),i.selectNodeContents(l);
var n=i.select();CKEDITOR.env.ie&&(h=e.once("blur",function(){a.lockSelection(n)}));var o=CKEDITOR.document.getWindow().getScrollPosition().y;setTimeout(function(){(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&(CKEDITOR.document[CKEDITOR.env.webkit?"getBody":"getDocumentElement"]().$.scrollTop=o),h&&h.removeListener(),CKEDITOR.env.ie&&e.focus(),j.selectBookmarks(k),l.remove();var b;CKEDITOR.env.webkit&&(b=l.getFirst())&&b.is&&b.hasClass("Apple-style-span")&&(l=b),a.removeListener("selectionChange",g),c(l.getHtml())},0)}}function u(){if(CKEDITOR.env.ie){a.focus(),e();var b=a.focusManager;if(b.lock(),a.editable().fire(w)&&!o("paste"))return b.unlock(),!1;b.unlock()
}else try{if(a.editable().fire(w)&&!a.document.$.execCommand("Paste",!1,null))throw 0}catch(c){return!1}return!0}function v(b){if("wysiwyg"==a.mode)switch(b.data.keyCode){case CKEDITOR.CTRL+86:case CKEDITOR.SHIFT+45:b=a.editable(),e(),!CKEDITOR.env.ie&&b.fire("beforepaste"),(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.version<10900)&&b.fire("paste");break;case CKEDITOR.CTRL+88:case CKEDITOR.SHIFT+46:a.fire("saveSnapshot"),setTimeout(function(){a.fire("saveSnapshot")},50)}}function s(b){var c={type:"auto"},d=a.fire("beforePaste",c);n(b,function(a){a=a.replace(/<span[^>]+data-cke-bookmark[^<]*?<\/span>/gi,""),d&&p(c.type,a,0,1)})}function r(){if("wysiwyg"==a.mode){var b=B("paste");
a.getCommand("cut").setState(B("cut")),a.getCommand("copy").setState(B("copy")),a.getCommand("paste").setState(b),a.fire("pasteState",b)}}function B(b){if(q&&b in{paste:1,cut:1})return CKEDITOR.TRISTATE_DISABLED;if("paste"==b)return CKEDITOR.TRISTATE_OFF;var b=a.getSelection(),c=b.getRanges();return b.getType()==CKEDITOR.SELECTION_NONE||1==c.length&&c[0].collapsed?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF}var z=0,x=0,q=0,w=CKEDITOR.env.ie?"beforepaste":"paste";!function(){a.on("key",v),a.on("contentDom",b),a.on("selectionChange",function(a){q=a.data.selection.getRanges()[0].checkReadOnly(),r()}),a.contextMenu&&a.contextMenu.addListener(function(a,b){return q=b.getRanges()[0].checkReadOnly(),{cut:B("cut"),copy:B("copy"),paste:B("paste")}
})}(),function(){function b(c,d,e,g,i){var h=a.lang.clipboard[d];a.addCommand(d,e),a.ui.addButton&&a.ui.addButton(c,{label:h,command:d,toolbar:"clipboard,"+g}),a.addMenuItems&&a.addMenuItem(d,{label:h,command:d,group:"clipboard",order:i})}b("Cut","cut",c("cut"),10,1),b("Copy","copy",c("copy"),20,4),b("Paste","paste",d(),30,8)}(),a.getClipboardData=function(b,c){function d(a){a.removeListener(),a.cancel(),c(a.data)}function e(a){a.removeListener(),a.cancel(),j=!0,c({type:h,dataValue:a.data})}function g(){this.customTitle=b&&b.title}var i=!1,h="auto",j=!1;c||(c=b,b=null),a.on("paste",d,null,null,0),a.on("beforePaste",function(a){a.removeListener(),i=!0,h=a.data.type
},null,null,1e3),u()===!1&&(a.removeListener("paste",d),i&&a.fire("pasteDialog",g)?(a.on("pasteDialogCommit",e),a.on("dialogHide",function(a){a.removeListener(),a.data.removeListener("pasteDialogCommit",e),setTimeout(function(){j||c(null)},10)})):c(null))}}function e(a){if(CKEDITOR.env.webkit){if(!a.match(/^[^<]*$/g)&&!a.match(/^(<div><br( ?\/)?><\/div>|<div>[^<]*<\/div>)*$/gi))return"html"}else if(CKEDITOR.env.ie){if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi)&&!a.match(/^(<p>([^<]|<br( ?\/)?>)*<\/p>|(\r\n))*$/gi))return"html"}else{if(!CKEDITOR.env.gecko&&!CKEDITOR.env.opera)return"html";if(!a.match(/^([^<]|<br( ?\/)?>)*$/gi))return"html"}return"htmlifiedtext"}function c(a,b){function c(a){return CKEDITOR.tools.repeat("</p><p>",~~(a/2))+(a%2==1?"<br>":"")
}return b=b.replace(/\s+/g," ").replace(/> +</g,"><").replace(/<br ?\/>/gi,"<br>"),b=b.replace(/<\/?[A-Z]+>/g,function(a){return a.toLowerCase()}),b.match(/^[^<]$/)?b:(CKEDITOR.env.webkit&&b.indexOf("<div>")>-1&&(b=b.replace(/^(<div>(<br>|)<\/div>)(?!$|(<div>(<br>|)<\/div>))/g,"<br>").replace(/^(<div>(<br>|)<\/div>){2}(?!$)/g,"<div></div>"),b.match(/<div>(<br>|)<\/div>/)&&(b="<p>"+b.replace(/(<div>(<br>|)<\/div>)+/g,function(a){return c(a.split("</div><div>").length+1)})+"</p>"),b=b.replace(/<\/div><div>/g,"<br>"),b=b.replace(/<\/?div>/g,"")),(CKEDITOR.env.gecko||CKEDITOR.env.opera)&&a.enterMode!=CKEDITOR.ENTER_BR&&(CKEDITOR.env.gecko&&(b=b.replace(/^<br><br>$/,"<br>")),b.indexOf("<br><br>")>-1&&(b="<p>"+b.replace(/(<br>){2,}/g,function(a){return c(a.length/4)
})+"</p>")),h(a,b))}function a(){var a=new CKEDITOR.htmlParser.filter,b={blockquote:1,dl:1,fieldset:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ol:1,p:1,table:1,ul:1},c=CKEDITOR.tools.extend({br:0},CKEDITOR.dtd.$inline),d={p:1,br:1,"cke:br":1},e=CKEDITOR.dtd,h=CKEDITOR.tools.extend({area:1,basefont:1,embed:1,iframe:1,map:1,object:1,param:1},CKEDITOR.dtd.$nonBodyContent,CKEDITOR.dtd.$cdata),o=function(a){delete a.name,a.add(new CKEDITOR.htmlParser.text(" "))},p=function(a){for(var c,b=a;(b=b.next)&&b.name&&b.name.match(/^h\d$/);)for(c=new CKEDITOR.htmlParser.element("cke:br"),c.isEmpty=!0,a.add(c);c=b.children.shift();)a.add(c)};return a.addRules({elements:{h1:p,h2:p,h3:p,h4:p,h5:p,h6:p,img:function(a){var a=CKEDITOR.tools.trim(a.attributes.alt||""),b=" ";
return a&&!a.match(/(^http|\.(jpe?g|gif|png))/i)&&(b=" ["+a+"] "),new CKEDITOR.htmlParser.text(b)},td:o,th:o,$:function(a){var o,f=a.name;if(h[f])return!1;if(a.attributes={},"br"==f)return a;if(b[f])a.name="p";else if(c[f])delete a.name;else if(e[f]){if(o=new CKEDITOR.htmlParser.element("cke:br"),o.isEmpty=!0,CKEDITOR.dtd.$empty[f])return o;a.add(o,0),o=o.clone(),o.isEmpty=!0,a.add(o),delete a.name}return d[a.name]||delete a.name,a}}},{applyToAll:!0}),a}function b(a,b,c){var b=new CKEDITOR.htmlParser.fragment.fromHtml(b),d=new CKEDITOR.htmlParser.basicWriter;b.writeHtml(d,c);var b=d.getHtml(),b=b.replace(/\s*(<\/?[a-z:]+ ?\/?>)\s*/g,"$1").replace(/(<cke:br \/>){2,}/g,"<cke:br />").replace(/(<cke:br \/>)(<\/?p>|<br \/>)/g,"$2").replace(/(<\/?p>|<br \/>)(<cke:br \/>)/g,"$1").replace(/<(cke:)?br( \/)?>/g,"<br>").replace(/<p><\/p>/g,""),e=0,b=b.replace(/<\/?p>/g,function(a){if("<p>"==a){if(++e>1)return"</p><p>"
}else if(--e>0)return"</p><p>";return a}).replace(/<p><\/p>/g,"");return h(a,b)}function h(a,b){return a.enterMode==CKEDITOR.ENTER_BR?b=b.replace(/(<\/p><p>)+/g,function(a){return CKEDITOR.tools.repeat("<br>",a.length/7*2)}).replace(/<\/?p>/g,""):a.enterMode==CKEDITOR.ENTER_DIV&&(b=b.replace(/<(\/)?p>/g,"<$1div>")),b}CKEDITOR.plugins.add("clipboard",{requires:"dialog",init:function(f){var i;d(f),CKEDITOR.dialog.add("paste",CKEDITOR.getUrl(this.path+"dialogs/paste.js")),f.on("paste",function(a){var b=a.data.dataValue,c=CKEDITOR.dtd.$block;if(b.indexOf("Apple-")>-1&&(b=b.replace(/<span class="Apple-converted-space">&nbsp;<\/span>/gi," "),"html"!=a.data.type&&(b=b.replace(/<span class="Apple-tab-span"[^>]*>([^<]*)<\/span>/gi,function(a,b){return b.replace(/\t/g,"&nbsp;&nbsp; &nbsp;")
})),b.indexOf('<br class="Apple-interchange-newline">')>-1&&(a.data.startsWithEOL=1,a.data.preSniffing="html",b=b.replace(/<br class="Apple-interchange-newline">/,"")),b=b.replace(/(<[^>]+) class="Apple-[^"]*"/gi,"$1")),b.match(/^<[^<]+cke_(editable|contents)/i)){var d,e,f=new CKEDITOR.dom.element("div");for(f.setHtml(b);1==f.getChildCount()&&(d=f.getFirst())&&d.type==CKEDITOR.NODE_ELEMENT&&(d.hasClass("cke_editable")||d.hasClass("cke_contents"));)f=e=d;e&&(b=e.getHtml().replace(/<br>$/i,""))}CKEDITOR.env.ie?b=b.replace(/^&nbsp;(?: |\r\n)?<(\w+)/g,function(b,d){return d.toLowerCase()in c?(a.data.preSniffing="html","<"+d):b}):CKEDITOR.env.webkit?b=b.replace(/<\/(\w+)><div><br><\/div>$/,function(b,d){return d in c?(a.data.endsWithEOL=1,"</"+d+">"):b
}):CKEDITOR.env.gecko&&(b=b.replace(/(\s)<br>$/,"$1")),a.data.dataValue=b},null,null,3),f.on("paste",function(d){var m,d=d.data,h=d.type,l=d.dataValue,o=f.config.clipboard_defaultContentType||"html";m="html"==h||"html"==d.preSniffing?"html":e(l),"htmlifiedtext"==m?l=c(f.config,l):"text"==h&&"html"==m&&(l=b(f.config,l,i||(i=a(f)))),d.startsWithEOL&&(l='<br data-cke-eol="1">'+l),d.endsWithEOL&&(l+='<br data-cke-eol="1">'),"auto"==h&&(h="html"==m||"html"==o?"html":"text"),d.type=h,d.dataValue=l,delete d.preSniffing,delete d.startsWithEOL,delete d.endsWithEOL},null,null,6),f.on("paste",function(a){a=a.data,f.insertHtml(a.dataValue,a.type),setTimeout(function(){f.fire("afterPaste")
},0)},null,null,1e3),f.on("pasteDialog",function(a){setTimeout(function(){f.openDialog("paste",a.data)},0)})}})}(),function(){CKEDITOR.plugins.add("panel",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_PANEL,CKEDITOR.ui.panel.handler)}}),CKEDITOR.UI_PANEL="panel",CKEDITOR.ui.panel=function(a,b){b&&CKEDITOR.tools.extend(this,b),CKEDITOR.tools.extend(this,{className:"",css:[]}),this.id=CKEDITOR.tools.getNextId(),this.document=a,this.isFramed=this.forceIFrame||this.css.length,this._={blocks:{}}},CKEDITOR.ui.panel.handler={create:function(a){return new CKEDITOR.ui.panel(a)}};var d=CKEDITOR.addTemplate("panel",'<div lang="{langCode}" id="{id}" dir={dir} class="cke cke_reset_all {editorId} cke_panel cke_panel {cls} cke_{dir}" style="z-index:{z-index}" role="presentation">{frame}</div>'),e=CKEDITOR.addTemplate("panel-frame",'<iframe id="{id}" class="cke_panel_frame" role="presentation" frameborder="0" src="{src}"></iframe>'),c=CKEDITOR.addTemplate("panel-frame-inner",'<!DOCTYPE html><html class="cke_panel_container {env}" dir="{dir}" lang="{langCode}"><head>{css}</head><body class="cke_{dir}" style="margin:0;padding:0" onload="{onload}"></body></html>');
CKEDITOR.ui.panel.prototype={render:function(a,b){this.getHolderElement=function(){var a=this._.holder;if(!a){if(this.isFramed){var a=this.document.getById(this.id+"_frame"),b=a.getParent(),a=a.getFrameDocument();CKEDITOR.env.iOS&&b.setStyles({overflow:"scroll","-webkit-overflow-scrolling":"touch"}),b=CKEDITOR.tools.addFunction(CKEDITOR.tools.bind(function(){this.isLoaded=!0,this.onLoad&&this.onLoad()},this)),a.write(c.output(CKEDITOR.tools.extend({css:CKEDITOR.tools.buildStyleHtml(this.css),onload:"window.parent.CKEDITOR.tools.callFunction("+b+");"},h))),a.getWindow().$.CKEDITOR=CKEDITOR,a.on("key"+(CKEDITOR.env.opera?"press":"down"),function(a){var b=a.data.getKeystroke(),c=this.document.getById(this.id).getAttribute("dir");
this._.onKeyDown&&this._.onKeyDown(b)===!1?a.data.preventDefault():(27==b||b==("rtl"==c?39:37))&&this.onEscape&&this.onEscape(b)===!1&&a.data.preventDefault()},this),a=a.getBody(),a.unselectable(),CKEDITOR.env.air&&CKEDITOR.tools.callFunction(b)}else a=this.document.getById(this.id);this._.holder=a}return a};var h={editorId:a.id,id:this.id,langCode:a.langCode,dir:a.lang.dir,cls:this.className,frame:"",env:CKEDITOR.env.cssClass,"z-index":a.config.baseFloatZIndex+1};if(this.isFramed){var f=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"}())":"";
h.frame=e.output({id:this.id+"_frame",src:f})}return f=d.output(h),b&&b.push(f),f},addBlock:function(a,b){return b=this._.blocks[a]=b instanceof CKEDITOR.ui.panel.block?b:new CKEDITOR.ui.panel.block(this.getHolderElement(),b),this._.currentBlock||this.showBlock(a),b},getBlock:function(a){return this._.blocks[a]},showBlock:function(a){var a=this._.blocks[a],b=this._.currentBlock,c=!this.forceIFrame||CKEDITOR.env.ie?this._.holder:this.document.getById(this.id+"_frame");return b&&b.hide(),this._.currentBlock=a,CKEDITOR.fire("ariaWidget",c),a._.focusIndex=-1,this._.onKeyDown=a.onKeyDown&&CKEDITOR.tools.bind(a.onKeyDown,a),a.show(),a},destroy:function(){this.element&&this.element.remove()
}},CKEDITOR.ui.panel.block=CKEDITOR.tools.createClass({$:function(a,b){this.element=a.append(a.getDocument().createElement("div",{attributes:{tabindex:-1,"class":"cke_panel_block"},styles:{display:"none"}})),b&&CKEDITOR.tools.extend(this,b),this.element.setAttributes({role:this.attributes.role||"presentation","aria-label":this.attributes["aria-label"],title:this.attributes.title||this.attributes["aria-label"]}),this.keys={},this._.focusIndex=-1,this.element.disableContextMenu()},_:{markItem:function(a){-1!=a&&(a=this.element.getElementsByTag("a").getItem(this._.focusIndex=a),(CKEDITOR.env.webkit||CKEDITOR.env.opera)&&a.getDocument().getWindow().focus(),a.focus(),this.onMark&&this.onMark(a))
}},proto:{show:function(){this.element.setStyle("display","")},hide:function(){(!this.onHide||this.onHide.call(this)!==!0)&&this.element.setStyle("display","none")},onKeyDown:function(a,b){var c=this.keys[a];switch(c){case"next":for(var e,d=this._.focusIndex,c=this.element.getElementsByTag("a");e=c.getItem(++d);)if(e.getAttribute("_cke_focus")&&e.$.offsetWidth){this._.focusIndex=d,e.focus();break}return e||b?!1:(this._.focusIndex=-1,this.onKeyDown(a,1));case"prev":for(d=this._.focusIndex,c=this.element.getElementsByTag("a");d>0&&(e=c.getItem(--d));){if(e.getAttribute("_cke_focus")&&e.$.offsetWidth){this._.focusIndex=d,e.focus();break}e=null}return e||b?!1:(this._.focusIndex=c.count(),this.onKeyDown(a,1));
case"click":case"mouseup":return d=this._.focusIndex,(e=d>=0&&this.element.getElementsByTag("a").getItem(d))&&(e.$[c]?e.$[c]():e.$["on"+c]()),!1}return!0}}})}(),CKEDITOR.plugins.add("floatpanel",{requires:"panel"}),function(){function d(c,a,b,d,f){var f=CKEDITOR.tools.genKey(a.getUniqueId(),b.getUniqueId(),c.lang.dir,c.uiColor||"",d.css||"",f||""),i=e[f];return i||(i=e[f]=new CKEDITOR.ui.panel(a,d),i.element=b.append(CKEDITOR.dom.element.createFromHtml(i.render(c),a)),i.element.setStyles({display:"none",position:"absolute"})),i}var e={};CKEDITOR.ui.floatPanel=CKEDITOR.tools.createClass({$:function(c,a,b,e){function f(){l.hide()}b.forceIFrame=1,b.toolbarRelated&&c.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(a=CKEDITOR.document.getById("cke_"+c.name));
var i=a.getDocument(),e=d(c,i,a,b,e||0),g=e.element,j=g.getFirst(),l=this;g.disableContextMenu(),this.element=g,this._={editor:c,panel:e,parentElement:a,definition:b,document:i,iframe:j,children:[],dir:c.lang.dir},c.on("mode",f),c.on("resize",f),i.getWindow().on("resize",f)},proto:{addBlock:function(c,a){return this._.panel.addBlock(c,a)},addListBlock:function(c,a){return this._.panel.addListBlock(c,a)},getBlock:function(c){return this._.panel.getBlock(c)},showBlock:function(c,a,b,d,e,i){var g=this._.panel,j=g.showBlock(c);this.allowBlur(!1),c=this._.editor.editable(),this._.returnFocus=c.hasFocus?c:new CKEDITOR.dom.element(CKEDITOR.document.$.activeElement);
var l=this.element,c=this._.iframe,c=CKEDITOR.env.ie?c:new CKEDITOR.dom.window(c.$.contentWindow),m=l.getDocument(),o=this._.parentElement.getPositionedAncestor(),p=a.getDocumentPosition(m),m=o?o.getDocumentPosition(m):{x:0,y:0},k="rtl"==this._.dir,n=p.x+(d||0)-m.x,u=p.y+(e||0)-m.y;!k||1!=b&&4!=b?k||2!=b&&3!=b||(n+=a.$.offsetWidth-1):n+=a.$.offsetWidth,(3==b||4==b)&&(u+=a.$.offsetHeight-1),this._.panel._.offsetParentId=a.getId(),l.setStyles({top:u+"px",left:0,display:""}),l.setOpacity(0),l.getFirst().removeStyle("width"),this._.editor.focusManager.add(c),this._.blurSet||(CKEDITOR.event.useCapture=!0,c.on("blur",function(a){this.allowBlur()&&a.data.getPhase()==CKEDITOR.EVENT_PHASE_AT_TARGET&&this.visible&&!this._.activeChild&&(delete this._.returnFocus,this.hide())
},this),c.on("focus",function(){this._.focused=!0,this.hideChild(),this.allowBlur(!0)},this),CKEDITOR.event.useCapture=!1,this._.blurSet=1),g.onEscape=CKEDITOR.tools.bind(function(a){return this.onEscape&&this.onEscape(a)===!1?!1:void 0},this),CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.tools.bind(function(){if(l.removeStyle("width"),j.autoSize){var a=j.element.getDocument(),a=(CKEDITOR.env.webkit?j.element:a.getBody()).$.scrollWidth;CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(l.$.offsetWidth||0)-(l.$.clientWidth||0)+3),l.setStyle("width",a+10+"px"),a=j.element.$.scrollHeight,CKEDITOR.env.ie&&CKEDITOR.env.quirks&&a>0&&(a+=(l.$.offsetHeight||0)-(l.$.clientHeight||0)+3),l.setStyle("height",a+"px"),g._.currentBlock.element.setStyle("display","none").removeStyle("display")
}else l.removeStyle("height");k&&(n-=l.$.offsetWidth),l.setStyle("left",n+"px");var b=g.element.getWindow(),a=l.$.getBoundingClientRect(),b=b.getViewPaneSize(),c=a.width||a.right-a.left,d=a.height||a.bottom-a.top,e=k?a.right:b.width-a.left,f=k?b.width-a.right:a.left;k?c>e&&(n=f>c?n+c:b.width>c?n-a.left:n-a.right+b.width):c>e&&(n=f>c?n-c:b.width>c?n-a.right+b.width:n-a.left),c=a.top,b.height-a.top<d&&(u=c>d?u-d:b.height>d?u-a.bottom+b.height:u-a.top),CKEDITOR.env.ie&&(b=a=new CKEDITOR.dom.element(l.$.offsetParent),"html"==b.getName()&&(b=b.getDocument().getBody()),"rtl"==b.getComputedStyle("direction")&&(n=CKEDITOR.env.ie8Compat?n-2*l.getDocument().getDocumentElement().$.scrollLeft:n-(a.$.scrollWidth-a.$.clientWidth)));
var h,a=l.getFirst();(h=a.getCustomData("activePanel"))&&h.onHide&&h.onHide.call(this,1),a.setCustomData("activePanel",this),l.setStyles({top:u+"px",left:n+"px"}),l.setOpacity(1),i&&i()},this);g.isLoaded?a():g.onLoad=a,CKEDITOR.tools.setTimeout(function(){var a=CKEDITOR.env.webkit&&CKEDITOR.document.getWindow().getScrollPosition().y;this.focus(),j.element.focus(),CKEDITOR.env.webkit&&(CKEDITOR.document.getBody().$.scrollTop=a),this.allowBlur(!0),this._.editor.fire("panelShow",this)},0,this)},CKEDITOR.env.air?200:0,this),this.visible=1,this.onShow&&this.onShow.call(this)},focus:function(){if(CKEDITOR.env.webkit){var c=CKEDITOR.document.getActive();!c.equals(this._.iframe)&&c.$.blur()
}(this._.lastFocused||this._.iframe.getFrameDocument().getWindow()).focus()},blur:function(){var c=this._.iframe.getFrameDocument().getActive();c.is("a")&&(this._.lastFocused=c)},hide:function(c){!this.visible||this.onHide&&this.onHide.call(this)===!0||(this.hideChild(),CKEDITOR.env.gecko&&this._.iframe.getFrameDocument().$.activeElement.blur(),this.element.setStyle("display","none"),this.visible=0,this.element.getFirst().removeCustomData("activePanel"),(c=c&&this._.returnFocus)&&(CKEDITOR.env.webkit&&c.type&&c.getWindow().$.focus(),c.focus()),delete this._.lastFocused,this._.editor.fire("panelHide",this))},allowBlur:function(c){var a=this._.panel;return void 0!=c&&(a.allowBlur=c),a.allowBlur
},showAsChild:function(c,a,b,d,e,i){(this._.activeChild!=c||c._.panel._.offsetParentId!=b.getId())&&(this.hideChild(),c.onHide=CKEDITOR.tools.bind(function(){CKEDITOR.tools.setTimeout(function(){this._.focused||this.hide()},0,this)},this),this._.activeChild=c,this._.focused=!1,c.showBlock(a,b,d,e,i),this.blur(),(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&setTimeout(function(){c.element.getChild(0).$.style.cssText+=""},100))},hideChild:function(c){var a=this._.activeChild;a&&(delete a.onHide,delete this._.activeChild,a.hide(),c&&this.focus())}}}),CKEDITOR.on("instanceDestroyed",function(){var a,c=CKEDITOR.tools.isEmpty(CKEDITOR.instances);for(a in e){var b=e[a];
c?b.destroy():b.element.hide()}c&&(e={})})}(),CKEDITOR.plugins.add("menu",{requires:"floatpanel",beforeInit:function(d){for(var e=d.config.menu_groups.split(","),c=d._.menuGroups={},a=d._.menuItems={},b=0;b<e.length;b++)c[e[b]]=b+1;d.addMenuGroup=function(a,b){c[a]=b||100},d.addMenuItem=function(b,d){c[d.group]&&(a[b]=new CKEDITOR.menuItem(this,b,d))},d.addMenuItems=function(a){for(var b in a)this.addMenuItem(b,a[b])},d.getMenuItem=function(b){return a[b]},d.removeMenuItem=function(b){delete a[b]}}}),function(){function d(a){a.sort(function(a,b){return a.group<b.group?-1:a.group>b.group?1:a.order<b.order?-1:a.order>b.order?1:0})}var e='<span class="cke_menuitem"><a id="{id}" class="cke_menubutton cke_menubutton__{name} cke_menubutton_{state} {cls}" href="{href}" title="{title}" tabindex="-1"_cke_focus=1 hidefocus="true" role="{role}" aria-haspopup="{hasPopup}" aria-disabled="{disabled}" {ariaChecked}';
(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(e+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(e+=' onblur="this.style.cssText = this.style.cssText;"');var e=e+(' onmouseover="CKEDITOR.tools.callFunction({hoverFn},{index});" onmouseout="CKEDITOR.tools.callFunction({moveOutFn},{index});" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},{index}); return false;">'),c=CKEDITOR.addTemplate("menuItem",e+'<span class="cke_menubutton_inner"><span class="cke_menubutton_icon"><span class="cke_button_icon cke_button__{iconName}_icon" style="{iconStyle}"></span></span><span class="cke_menubutton_label">{label}</span>{arrowHtml}</span></a></span>'),a=CKEDITOR.addTemplate("menuArrow",'<span class="cke_menuarrow"><span>{label}</span></span>');
CKEDITOR.menu=CKEDITOR.tools.createClass({$:function(a,c){c=this._.definition=c||{},this.id=CKEDITOR.tools.getNextId(),this.editor=a,this.items=[],this._.listeners=[],this._.level=c.level||1;var d=CKEDITOR.tools.extend({},c.panel,{css:[CKEDITOR.skin.getPath("editor")],level:this._.level-1,block:{}}),e=d.block.attributes=d.attributes||{};!e.role&&(e.role="menu"),this._.panelDefinition=d},_:{onShow:function(){var a=this.editor.getSelection(),c=a&&a.getStartElement(),d=this.editor.elementPath(),e=this._.listeners;this.removeAll();for(var g=0;g<e.length;g++){var j=e[g](c,a,d);if(j)for(var l in j){var m=this.editor.getMenuItem(l);!m||m.command&&!this.editor.getCommand(m.command).state||(m.state=j[l],this.add(m))
}}},onClick:function(a){this.hide(),a.onClick?a.onClick():a.command&&this.editor.execCommand(a.command)},onEscape:function(a){var c=this.parent;return c?c._.panel.hideChild(1):27==a&&this.hide(1),!1},onHide:function(){this.onHide&&this.onHide()},showSubMenu:function(a){var c=this._.subMenu,d=this.items[a];if(d=d.getItems&&d.getItems()){c?c.removeAll():(c=this._.subMenu=new CKEDITOR.menu(this.editor,CKEDITOR.tools.extend({},this._.definition,{level:this._.level+1},!0)),c.parent=this,c._.onClick=CKEDITOR.tools.bind(this._.onClick,this));for(var e in d){var g=this.editor.getMenuItem(e);g&&(g.state=d[e],c.add(g))}var j=this._.panel.getBlock(this.id).element.getDocument().getById(this.id+(""+a));
setTimeout(function(){c.show(j,2)},0)}else this._.panel.hideChild(1)}},proto:{add:function(a){a.order||(a.order=this.items.length),this.items.push(a)},removeAll:function(){this.items=[]},show:function(a,c,e,i){if(this.parent||(this._.onShow(),this.items.length)){var c=c||("rtl"==this.editor.lang.dir?2:1),g=this.items,j=this.editor,l=this._.panel,m=this._.element;if(!l){l=this._.panel=new CKEDITOR.ui.floatPanel(this.editor,CKEDITOR.document.getBody(),this._.panelDefinition,this._.level),l.onEscape=CKEDITOR.tools.bind(function(a){return this._.onEscape(a)===!1?!1:void 0},this),l.onShow=function(){l._.panel.getHolderElement().getParent().addClass("cke cke_reset_all")
},l.onHide=CKEDITOR.tools.bind(function(){this._.onHide&&this._.onHide()},this),m=l.addBlock(this.id,this._.panelDefinition.block),m.autoSize=!0;var o=m.keys;o[40]="next",o[9]="next",o[38]="prev",o[CKEDITOR.SHIFT+9]="prev",o["rtl"==j.lang.dir?37:39]=CKEDITOR.env.ie?"mouseup":"click",o[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(o[13]="mouseup"),m=this._.element=m.element,o=m.getDocument(),o.getBody().setStyle("overflow","hidden"),o.getElementsByTag("html").getItem(0).setStyle("overflow","hidden"),this._.itemOverFn=CKEDITOR.tools.addFunction(function(a){clearTimeout(this._.showSubTimeout),this._.showSubTimeout=CKEDITOR.tools.setTimeout(this._.showSubMenu,j.config.menu_subMenuDelay||400,this,[a])
},this),this._.itemOutFn=CKEDITOR.tools.addFunction(function(){clearTimeout(this._.showSubTimeout)},this),this._.itemClickFn=CKEDITOR.tools.addFunction(function(a){var b=this.items[a];b.state==CKEDITOR.TRISTATE_DISABLED?this.hide(1):b.getItems?this._.showSubMenu(a):this._.onClick(b)},this)}d(g);for(var o=j.elementPath(),o=['<div class="cke_menu'+(o&&o.direction()!=j.lang.dir?" cke_mixed_dir_content":"")+'" role="presentation">'],p=g.length,k=p&&g[0].group,n=0;p>n;n++){var u=g[n];k!=u.group&&(o.push('<div class="cke_menuseparator" role="separator"></div>'),k=u.group),u.render(this,n,o)}o.push("</div>"),m.setHtml(o.join("")),CKEDITOR.ui.fire("ready",this),this.parent?this.parent._.panel.showAsChild(l,this.id,a,c,e,i):l.showBlock(this.id,a,c,e,i),j.fire("menuShow",[l])
}},addListener:function(a){this._.listeners.push(a)},hide:function(a){this._.onHide&&this._.onHide(),this._.panel&&this._.panel.hide(a)}}}),CKEDITOR.menuItem=CKEDITOR.tools.createClass({$:function(a,c,d){CKEDITOR.tools.extend(this,d,{order:0,className:"cke_menubutton__"+c}),this.group=a._.menuGroups[this.group],this.editor=a,this.name=c},proto:{render:function(b,d,e){var i=b.id+(""+d),g="undefined"==typeof this.state?CKEDITOR.TRISTATE_OFF:this.state,j="",l=g==CKEDITOR.TRISTATE_ON?"on":g==CKEDITOR.TRISTATE_DISABLED?"disabled":"off";this.role in{menuitemcheckbox:1,menuitemradio:1}&&(j=' aria-checked="'+(g==CKEDITOR.TRISTATE_ON?"true":"false")+'"');var m=this.getItems,o="&#"+("rtl"==this.editor.lang.dir?"9668":"9658")+";",p=this.name;
this.icon&&!/\./.test(this.icon)&&(p=this.icon),b={id:i,name:this.name,iconName:p,label:this.label,cls:this.className||"",state:l,hasPopup:m?"true":"false",disabled:g==CKEDITOR.TRISTATE_DISABLED,title:this.label,href:"javascript:void('"+(this.label||"").replace("'")+"')",hoverFn:b._.itemOverFn,moveOutFn:b._.itemOutFn,clickFn:b._.itemClickFn,index:d,iconStyle:CKEDITOR.skin.getIconStyle(p,"rtl"==this.editor.lang.dir,p==this.icon?null:this.icon,this.iconOffset),arrowHtml:m?a.output({label:o}):"",role:this.role?this.role:"menuitem",ariaChecked:j},c.output(b,e)}}})}(),CKEDITOR.config.menu_groups="clipboard,form,tablecell,tablecellproperties,tablerow,tablecolumn,table,anchor,link,image,flash,checkbox,radio,textfield,hiddenfield,imagebutton,button,select,textarea,div",CKEDITOR.plugins.add("contextmenu",{requires:"menu",onLoad:function(){CKEDITOR.plugins.contextMenu=CKEDITOR.tools.createClass({base:CKEDITOR.menu,$:function(d){this.base.call(this,d,{panel:{className:"cke_menu_panel",attributes:{"aria-label":d.lang.contextmenu.options}}})
},proto:{addTarget:function(d,e){if(d.on("contextmenu",function(a){var a=a.data,d=CKEDITOR.env.webkit?c:CKEDITOR.env.mac?a.$.metaKey:a.$.ctrlKey;if(!e||!d){a.preventDefault();var f=a.getTarget().getDocument(),i=a.getTarget().getDocument().getDocumentElement(),d=!f.equals(CKEDITOR.document),f=f.getWindow().getScrollPosition(),g=d?a.$.clientX:a.$.pageX||f.x+a.$.clientX,j=d?a.$.clientY:a.$.pageY||f.y+a.$.clientY;CKEDITOR.tools.setTimeout(function(){this.open(i,null,g,j)},CKEDITOR.env.ie?200:0,this)}},this),CKEDITOR.env.webkit){var c,a=function(){c=0};d.on("keydown",function(a){c=CKEDITOR.env.mac?a.data.$.metaKey:a.data.$.ctrlKey}),d.on("keyup",a),d.on("contextmenu",a)
}},open:function(d,e,c,a){this.editor.focus(),d=d||CKEDITOR.document.getDocumentElement(),this.editor.selectionChange(1),this.show(d,e,c,a)}}})},beforeInit:function(d){var e=d.contextMenu=new CKEDITOR.plugins.contextMenu(d);d.on("contentDom",function(){e.addTarget(d.editable(),d.config.browserContextMenuOnCtrl!==!1)}),d.addCommand("contextMenu",{exec:function(){d.contextMenu.open(d.document.getBody())}}),d.setKeystroke(CKEDITOR.SHIFT+121,"contextMenu"),d.setKeystroke(CKEDITOR.CTRL+CKEDITOR.SHIFT+121,"contextMenu")}}),CKEDITOR.plugins.add("resize",{init:function(d){var e,c,a,b,h=d.config,f=d.ui.spaceId("resizer"),i=d.element?d.element.getDirection(1):"ltr";if(!h.resize_dir&&(h.resize_dir="vertical"),void 0==h.resize_maxWidth&&(h.resize_maxWidth=3e3),void 0==h.resize_maxHeight&&(h.resize_maxHeight=3e3),void 0==h.resize_minWidth&&(h.resize_minWidth=750),void 0==h.resize_minHeight&&(h.resize_minHeight=250),h.resize_enabled!==!1){var g=null,j=("both"==h.resize_dir||"horizontal"==h.resize_dir)&&h.resize_minWidth!=h.resize_maxWidth,l=("both"==h.resize_dir||"vertical"==h.resize_dir)&&h.resize_minHeight!=h.resize_maxHeight,m=function(f){var g=e,m=c,o=g+(f.data.$.screenX-a)*("rtl"==i?-1:1),f=m+(f.data.$.screenY-b);
j&&(g=Math.max(h.resize_minWidth,Math.min(o,h.resize_maxWidth))),l&&(m=Math.max(h.resize_minHeight,Math.min(f,h.resize_maxHeight))),d.resize(j?g:null,m)},o=function(){CKEDITOR.document.removeListener("mousemove",m),CKEDITOR.document.removeListener("mouseup",o),d.document&&(d.document.removeListener("mousemove",m),d.document.removeListener("mouseup",o))},p=CKEDITOR.tools.addFunction(function(f){g||(g=d.getResizable()),e=g.$.offsetWidth||0,c=g.$.offsetHeight||0,a=f.screenX,b=f.screenY,h.resize_minWidth>e&&(h.resize_minWidth=e),h.resize_minHeight>c&&(h.resize_minHeight=c),CKEDITOR.document.on("mousemove",m),CKEDITOR.document.on("mouseup",o),d.document&&(d.document.on("mousemove",m),d.document.on("mouseup",o)),f.preventDefault&&f.preventDefault()
});d.on("destroy",function(){CKEDITOR.tools.removeFunction(p)}),d.on("uiSpace",function(a){if("bottom"==a.data.space){var b="";j&&!l&&(b=" cke_resizer_horizontal"),!j&&l&&(b=" cke_resizer_vertical");var c='<span id="'+f+'" class="cke_resizer'+b+" cke_resizer_"+i+'" title="'+CKEDITOR.tools.htmlEncode(d.lang.common.resize)+'" onmousedown="CKEDITOR.tools.callFunction('+p+', event)">'+("ltr"==i?"â¢":"â£")+"</span>";a.data.html="ltr"==i&&"ltr"==b?a.data.html+c:c+a.data.html}},d,null,100),d.on("maximize",function(a){d.ui.space("resizer")[a.data==CKEDITOR.TRISTATE_ON?"hide":"show"]()})}}}),function(){var d='<a id="{id}" class="cke_button cke_button__{name} cke_button_{state} {cls}"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":" href=\"javascript:void('{titleJs}')\"")+' title="{title}" tabindex="-1" hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="{hasArrow}" aria-disabled="{ariaDisabled}"';
(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(d+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;"');var d=d+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event);" onfocus="return CKEDITOR.tools.callFunction({focusFn},event);"  onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span class="cke_button_icon cke_button__{iconName}_icon" style="{style}"'),d=d+'>&nbsp;</span><span id="{id}_label" class="cke_button_label cke_button__{name}_label" aria-hidden="false">{label}</span>{arrowHtml}</a>',e=CKEDITOR.addTemplate("buttonArrow",'<span class="cke_button_arrow">'+(CKEDITOR.env.hc?"&#9660;":"")+"</span>"),c=CKEDITOR.addTemplate("button",d);
CKEDITOR.plugins.add("button",{beforeInit:function(a){a.ui.addHandler(CKEDITOR.UI_BUTTON,CKEDITOR.ui.button.handler)}}),CKEDITOR.UI_BUTTON="button",CKEDITOR.ui.button=function(a){CKEDITOR.tools.extend(this,a,{title:a.label,click:a.click||function(b){b.execCommand(a.command)}}),this._={}},CKEDITOR.ui.button.handler={create:function(a){return new CKEDITOR.ui.button(a)}},CKEDITOR.ui.button.prototype={render:function(a,b){var j,d=CKEDITOR.env,f=this._.id=CKEDITOR.tools.getNextId(),i="",g=this.command;this._.editor=a;var l={id:f,button:this,editor:a,focus:function(){CKEDITOR.document.getById(f).focus()},execute:function(){this.button.click(a)},attach:function(a){this.button.attach(a)
}},m=CKEDITOR.tools.addFunction(function(a){return l.onkey?(a=new CKEDITOR.dom.event(a),l.onkey(l,a.getKeystroke())!==!1):void 0}),o=CKEDITOR.tools.addFunction(function(a){var b;return l.onfocus&&(b=l.onfocus(l,new CKEDITOR.dom.event(a))!==!1),CKEDITOR.env.gecko&&CKEDITOR.env.version<10900&&a.preventBubble(),b}),p=0,k=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var b=a.editable();b.isInline()&&b.hasFocus&&(a.lockSelection(),p=1)}});if(l.clickFn=j=CKEDITOR.tools.addFunction(function(){p&&(a.unlockSelection(1),p=0),l.execute()}),this.modes){var n={},u=function(){var b=a.mode;b&&(b=this.modes[b]?void 0!=n[b]?n[b]:CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED,b=a.readOnly&&!this.readOnly?CKEDITOR.TRISTATE_DISABLED:b,this.setState(b),this.refresh&&this.refresh())
};a.on("beforeModeUnload",function(){a.mode&&this._.state!=CKEDITOR.TRISTATE_DISABLED&&(n[a.mode]=this._.state)},this),a.on("activeFilterChange",u,this),a.on("mode",u,this),!this.readOnly&&a.on("readOnly",u,this)}else g&&(g=a.getCommand(g))&&(g.on("state",function(){this.setState(g.state)},this),i+=g.state==CKEDITOR.TRISTATE_ON?"on":g.state==CKEDITOR.TRISTATE_DISABLED?"disabled":"off");this.directional&&a.on("contentDirChanged",function(b){var c=CKEDITOR.document.getById(this._.id),d=c.getFirst(),b=b.data;b!=a.lang.dir?c.addClass("cke_"+b):c.removeClass("cke_ltr").removeClass("cke_rtl"),d.setAttribute("style",CKEDITOR.skin.getIconStyle(v,"rtl"==b,this.icon,this.iconOffset))
},this),g||(i+="off");var v=u=this.name||this.command;return this.icon&&!/\./.test(this.icon)&&(v=this.icon,this.icon=null),d={id:f,name:u,iconName:v,label:this.label,cls:this.className||"",state:i,ariaDisabled:"disabled"==i?"true":"false",title:this.title,titleJs:d.gecko&&d.version>=10900&&!d.hc?"":(this.title||"").replace("'",""),hasArrow:this.hasArrow?"true":"false",keydownFn:m,mousedownFn:k,focusFn:o,clickFn:j,style:CKEDITOR.skin.getIconStyle(v,"rtl"==a.lang.dir,this.icon,this.iconOffset),arrowHtml:this.hasArrow?e.output():""},c.output(d,b),this.onRender&&this.onRender(),l},setState:function(a){if(this._.state==a)return!1;this._.state=a;var b=CKEDITOR.document.getById(this._.id);
return b?(b.setState(a,"cke_button"),a==CKEDITOR.TRISTATE_DISABLED?b.setAttribute("aria-disabled",!0):b.removeAttribute("aria-disabled"),this.hasArrow?(a=a==CKEDITOR.TRISTATE_ON?this._.editor.lang.button.selectedLabel.replace(/%1/g,this.label):this.label,CKEDITOR.document.getById(this._.id+"_label").setText(a)):a==CKEDITOR.TRISTATE_ON?b.setAttribute("aria-pressed",!0):b.removeAttribute("aria-pressed"),!0):!1},getState:function(){return this._.state},toFeature:function(a){if(this._.feature)return this._.feature;var b=this;return!this.allowedContent&&!this.requiredContent&&this.command&&(b=a.getCommand(this.command)||b),this._.feature=b}},CKEDITOR.ui.prototype.addButton=function(a,b){this.add(a,CKEDITOR.UI_BUTTON,b)
}}(),function(){function d(a){function c(){for(var g=d(),h=CKEDITOR.tools.clone(a.config.toolbarGroups)||e(a),j=0;j<h.length;j++){var k=h[j];if("/"!=k){"string"==typeof k&&(k=h[j]={name:k});var l,u=k.groups;if(u)for(var v=0;v<u.length;v++)l=u[v],(l=g[l])&&i(k,l);(l=g[k.name])&&i(k,l)}}return h}function d(){var e,f,g,c={};for(e in a.ui.items)f=a.ui.items[e],g=f.toolbar||"others",g=g.split(","),f=g[0],g=parseInt(g[1]||-1,10),c[f]||(c[f]=[]),c[f].push({name:e,order:g});for(f in c)c[f]=c[f].sort(function(a,b){return a.order==b.order?0:b.order<0?-1:a.order<0?1:a.order<b.order?-1:1});return c}function i(c,d){if(d.length){c.items?c.items.push(a.ui.create("-")):c.items=[];
for(var e;e=d.shift();)e="string"==typeof e?e:e.name,j&&-1!=CKEDITOR.tools.indexOf(j,e)||(e=a.ui.create(e))&&a.addFeature(e)&&c.items.push(e)}}function g(a){var c,d,e,b=[];for(c=0;c<a.length;++c)d=a[c],e={},"/"==d?b.push(d):CKEDITOR.tools.isArray(d)?(i(e,CKEDITOR.tools.clone(d)),b.push(e)):d.items&&(i(e,CKEDITOR.tools.clone(d.items)),e.name=d.name,b.push(e));return b}var j=a.config.removeButtons,j=j&&j.split(","),l=a.config.toolbar;return"string"==typeof l&&(l=a.config["toolbar_"+l]),a.toolbar=l?g(l):c()}function e(a){return a._.toolbarGroups||(a._.toolbarGroups=[{name:"document",groups:["mode","document","doctools"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection","spellchecker"]},{name:"forms"},"/",{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"paragraph",groups:["list","indent","blocks","align","bidi"]},{name:"links"},{name:"insert"},"/",{name:"styles"},{name:"colors"},{name:"tools"},{name:"others"},{name:"about"}])
}var c=function(){this.toolbars=[],this.focusCommandExecuted=!1};c.prototype.focus=function(){for(var c,a=0;c=this.toolbars[a++];)for(var e,d=0;e=c.items[d++];)if(e.focus)return void e.focus()};var a={modes:{wysiwyg:1,source:1},readOnly:1,exec:function(a){a.toolbox&&(a.toolbox.focusCommandExecuted=!0,CKEDITOR.env.ie||CKEDITOR.env.air?setTimeout(function(){a.toolbox.focus()},100):a.toolbox.focus())}};CKEDITOR.plugins.add("toolbar",{requires:"button",init:function(b){var e,f=function(a,c){var d,l="rtl"==b.lang.dir,m=b.config.toolbarGroupCycling,o=l?37:39,l=l?39:37,m=void 0===m||m;switch(c){case 9:case CKEDITOR.SHIFT+9:for(;!d||!d.items.length;)if(d=9==c?(d?d.next:a.toolbar.next)||b.toolbox.toolbars[0]:(d?d.previous:a.toolbar.previous)||b.toolbox.toolbars[b.toolbox.toolbars.length-1],d.items.length)for(a=d.items[e?d.items.length-1:0];a&&!a.focus;)(a=e?a.previous:a.next)||(d=0);
return a&&a.focus(),!1;case o:d=a;do d=d.next,!d&&m&&(d=a.toolbar.items[0]);while(d&&!d.focus);return d?d.focus():f(a,9),!1;case 40:return a.button&&a.button.hasArrow?(b.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),a.execute()):f(a,40==c?o:l),!1;case l:case 38:d=a;do d=d.previous,!d&&m&&(d=a.toolbar.items[a.toolbar.items.length-1]);while(d&&!d.focus);return d?d.focus():(e=1,f(a,CKEDITOR.SHIFT+9),e=0),!1;case 27:return b.focus(),!1;case 13:case 32:return a.execute(),!1}return!0};b.on("uiSpace",function(a){if(a.data.space==b.config.toolbarLocation){a.removeListener(),b.toolbox=new c;var l,m,e=CKEDITOR.tools.getNextId(),h=['<span id="',e,'" class="cke_voice_label">',b.lang.toolbar.toolbars,"</span>",'<span id="'+b.ui.spaceId("toolbox")+'" class="cke_toolbox" role="group" aria-labelledby="',e,'" onmousedown="return false;">'],e=b.config.toolbarStartupExpanded!==!1;
b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE&&h.push('<span class="cke_toolbox_main"'+(e?">":' style="display:none">'));for(var o=b.toolbox.toolbars,p=d(b),k=0;k<p.length;k++){var n,v,r,u=0,s=p[k];if(s)if(l&&(h.push("</span>"),m=l=0),"/"===s)h.push('<span class="cke_toolbar_break"></span>');else{r=s.items||s;for(var B=0;B<r.length;B++){var x,z=r[B];if(z)if(z.type==CKEDITOR.UI_SEPARATOR)m=l&&z;else{if(x=z.canGroup!==!1,!u){n=CKEDITOR.tools.getNextId(),u={id:n,items:[]},v=s.name&&(b.lang.toolbar.toolbarGroups[s.name]||s.name),h.push('<span id="',n,'" class="cke_toolbar"',v?' aria-labelledby="'+n+'_label"':"",' role="toolbar">'),v&&h.push('<span id="',n,'_label" class="cke_voice_label">',v,"</span>"),h.push('<span class="cke_toolbar_start"></span>');
var q=o.push(u)-1;q>0&&(u.previous=o[q-1],u.previous.next=u)}x?l||(h.push('<span class="cke_toolgroup" role="presentation">'),l=1):l&&(h.push("</span>"),l=0),n=function(a){a=a.render(b,h),q=u.items.push(a)-1,q>0&&(a.previous=u.items[q-1],a.previous.next=a),a.toolbar=u,a.onkey=f,a.onfocus=function(){b.toolbox.focusCommandExecuted||b.focus()}},m&&(n(m),m=0),n(z)}}l&&(h.push("</span>"),m=l=0),u&&h.push('<span class="cke_toolbar_end"></span></span>')}}if(b.config.toolbarCanCollapse&&h.push("</span>"),b.config.toolbarCanCollapse&&b.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var w=CKEDITOR.tools.addFunction(function(){b.execCommand("toolbarCollapse")});b.on("destroy",function(){CKEDITOR.tools.removeFunction(w)
}),b.addCommand("toolbarCollapse",{readOnly:1,exec:function(a){var b=a.ui.space("toolbar_collapser"),c=b.getPrevious(),d=a.ui.space("contents"),e=c.getParent(),f=parseInt(d.$.style.height,10),g=e.$.offsetHeight,h=b.hasClass("cke_toolbox_collapser_min");h?(c.show(),b.removeClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarCollapse)):(c.hide(),b.addClass("cke_toolbox_collapser_min"),b.setAttribute("title",a.lang.toolbar.toolbarExpand)),b.getFirst().setText(h?"â²":"â"),d.setStyle("height",f-(e.$.offsetHeight-g)+"px"),a.fire("resize")},modes:{wysiwyg:1,source:1}}),b.setKeystroke(CKEDITOR.ALT+(CKEDITOR.env.ie||CKEDITOR.env.webkit?189:109),"toolbarCollapse"),h.push('<a title="'+(e?b.lang.toolbar.toolbarCollapse:b.lang.toolbar.toolbarExpand)+'" id="'+b.ui.spaceId("toolbar_collapser")+'" tabIndex="-1" class="cke_toolbox_collapser'),e||h.push(" cke_toolbox_collapser_min"),h.push('" onclick="CKEDITOR.tools.callFunction('+w+')">','<span class="cke_arrow">&#9650;</span>',"</a>")
}h.push("</span>"),a.data.html=a.data.html+h.join("")}}),b.on("destroy",function(){if(this.toolbox){var a,c,d,e,b=0;for(a=this.toolbox.toolbars;b<a.length;b++)for(d=a[b].items,c=0;c<d.length;c++)e=d[c],e.clickFn&&CKEDITOR.tools.removeFunction(e.clickFn),e.keyDownFn&&CKEDITOR.tools.removeFunction(e.keyDownFn)}}),b.on("uiReady",function(){var a=b.ui.space("toolbox");a&&b.focusManager.add(a,1)}),b.addCommand("toolbarFocus",a),b.setKeystroke(CKEDITOR.ALT+121,"toolbarFocus"),b.ui.add("-",CKEDITOR.UI_SEPARATOR,{}),b.ui.addHandler(CKEDITOR.UI_SEPARATOR,{create:function(){return{render:function(a,b){return b.push('<span class="cke_toolbar_separator" role="separator"></span>'),{}
}}}})}}),CKEDITOR.ui.prototype.addToolbarGroup=function(a,c,d){var i=e(this.editor),g=0===c,j={name:a};if(d){if(d=CKEDITOR.tools.search(i,function(a){return a.name==d}))return!d.groups&&(d.groups=[]),c&&(c=CKEDITOR.tools.indexOf(d.groups,c),c>=0)?void d.groups.splice(c+1,0,a):void(g?d.groups.splice(0,0,a):d.groups.push(a));c=null}c&&(c=CKEDITOR.tools.indexOf(i,function(a){return a.name==c})),g?i.splice(0,0,a):"number"==typeof c?i.splice(c+1,0,j):i.push(a)}}(),CKEDITOR.UI_SEPARATOR="separator",CKEDITOR.config.toolbarLocation="top",function(){function d(a,b,c){c=a.config.forceEnterMode||c,"wysiwyg"==a.mode&&(b||(b=a.activeEnterMode),a.elementPath().isContextFor("p")||(b=CKEDITOR.ENTER_BR,c=1),a.fire("saveSnapshot"),b==CKEDITOR.ENTER_BR?h(a,b,null,c):f(a,b,null,c),a.fire("saveSnapshot"))
}function e(a){for(var a=a.getSelection().getRanges(!0),b=a.length-1;b>0;b--)a[b].deleteContents();return a[0]}CKEDITOR.plugins.add("enterkey",{init:function(a){a.addCommand("enter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){d(a)}}),a.addCommand("shiftEnter",{modes:{wysiwyg:1},editorFocus:!1,exec:function(a){d(a,a.activeShiftEnterMode,1)}}),a.setKeystroke([[13,"enter"],[CKEDITOR.SHIFT+13,"shiftEnter"]])}});var c=CKEDITOR.dom.walker.whitespaces(),a=CKEDITOR.dom.walker.bookmark();CKEDITOR.plugins.enterkey={enterBlock:function(b,d,f,m){if(f=f||e(b)){var v,o=f.document,p=f.checkStartOfBlock(),k=f.checkEndOfBlock(),n=b.elementPath(f.startContainer).block,u=d==CKEDITOR.ENTER_DIV?"div":"p";
if(p&&k){if(n&&(n.is("li")||n.getParent().is("li"))){f=n.getParent(),v=f.getParent();var m=!n.hasPrevious(),s=!n.hasNext(),u=b.getSelection(),r=u.createBookmarks(),p=n.getDirection(1),k=n.getAttribute("class"),B=n.getAttribute("style"),z=v.getDirection(1)!=p,b=b.enterMode!=CKEDITOR.ENTER_BR||z||B||k;if(v.is("li"))m||s?n[m?"insertBefore":"insertAfter"](v):n.breakParent(v);else{if(b)v=o.createElement(d==CKEDITOR.ENTER_P?"p":"div"),z&&v.setAttribute("dir",p),B&&v.setAttribute("style",B),k&&v.setAttribute("class",k),n.moveChildren(v),m||s?v[m?"insertBefore":"insertAfter"](f):(n.breakParent(f),v.insertAfter(f));else if(n.appendBogus(!0),m||s)for(;o=n[m?"getFirst":"getLast"]();)o[m?"insertBefore":"insertAfter"](f);
else for(n.breakParent(f);o=n.getLast();)o.insertAfter(f);n.remove()}return void u.selectBookmarks(r)}if(n&&n.getParent().is("blockquote"))return n.breakParent(n.getParent()),n.getPrevious().getFirst(CKEDITOR.dom.walker.invisible(1))||n.getPrevious().remove(),n.getNext().getFirst(CKEDITOR.dom.walker.invisible(1))||n.getNext().remove(),f.moveToElementEditStart(n),void f.select()}else if(n&&n.is("pre")&&!k)return void h(b,d,f,m);if(k=f.splitBlock(u)){if(d=k.previousBlock,n=k.nextBlock,b=k.wasStartOfBlock,p=k.wasEndOfBlock,n?(r=n.getParent(),r.is("li")&&(n.breakParent(r),n.move(n.getNext(),1))):d&&(r=d.getParent())&&r.is("li")&&(d.breakParent(r),r=d.getNext(),f.moveToElementEditStart(r),d.move(d.getPrevious())),b||p){if(d?(d.is("li")||!i.test(d.getName())&&!d.is("pre"))&&(v=d.clone()):n&&(v=n.clone()),v?m&&!v.is("li")&&v.renameNode(u):r&&r.is("li")?v=r:(v=o.createElement(u),d&&(s=d.getDirection())&&v.setAttribute("dir",s)),o=k.elementPath)for(m=0,u=o.elements.length;u>m&&(r=o.elements[m],!r.equals(o.block)&&!r.equals(o.blockLimit));m++)CKEDITOR.dtd.$removeEmpty[r.getName()]&&(r=r.clone(),v.moveChildren(r),v.append(r));
v.appendBogus(),v.getParent()||f.insertNode(v),v.is("li")&&v.removeAttribute("value"),!CKEDITOR.env.ie||!b||p&&d.getChildCount()||(f.moveToElementEditStart(p?d:v),f.select()),f.moveToElementEditStart(b&&!p?n:v)}else n.is("li")&&(v=f.clone(),v.selectNodeContents(n),v=new CKEDITOR.dom.walker(v),v.evaluator=function(b){return!(a(b)||c(b)||b.type==CKEDITOR.NODE_ELEMENT&&b.getName()in CKEDITOR.dtd.$inline&&!(b.getName()in CKEDITOR.dtd.$empty))},(r=v.next())&&r.type==CKEDITOR.NODE_ELEMENT&&r.is("ul","ol")&&(CKEDITOR.env.needsBrFiller?o.createElement("br"):o.createText("Â ")).insertBefore(r)),n&&f.moveToElementEditStart(n);f.select(),f.scrollIntoView()}}},enterBr:function(a,b,c,d){if(c=c||e(a)){var h=c.document,p=c.checkEndOfBlock(),k=new CKEDITOR.dom.elementPath(a.getSelection().getStartElement()),n=k.block,k=n&&k.block.getName();
d||"li"!=k?(!d&&p&&i.test(k)?(p=n.getDirection())?(h=h.createElement("div"),h.setAttribute("dir",p),h.insertAfter(n),c.setStart(h,0)):(h.createElement("br").insertAfter(n),CKEDITOR.env.gecko&&h.createText("").insertAfter(n),c.setStartAt(n.getNext(),CKEDITOR.env.ie?CKEDITOR.POSITION_BEFORE_START:CKEDITOR.POSITION_AFTER_START)):(n="pre"==k&&CKEDITOR.env.ie&&CKEDITOR.env.version<8?h.createText("\r"):h.createElement("br"),c.deleteContents(),c.insertNode(n),CKEDITOR.env.needsBrFiller?(h.createText("").insertAfter(n),p&&n.getParent().appendBogus(),n.getNext().$.nodeValue="",c.setStartAt(n.getNext(),CKEDITOR.POSITION_AFTER_START)):c.setStartAt(n,CKEDITOR.POSITION_AFTER_END)),c.collapse(!0),c.select(),c.scrollIntoView()):f(a,b,c,d)
}}};var b=CKEDITOR.plugins.enterkey,h=b.enterBr,f=b.enterBlock,i=/^h[1-6]$/}(),function(){function d(d,c){var a={},b=[],h={nbsp:"Â ",shy:"Â­",gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},d=d.replace(/\b(nbsp|shy|gt|lt|amp|apos|quot)(?:,|$)/g,function(d,e){var f=c?"&"+e+";":h[e];return a[f]=c?h[e]:"&"+e+";",b.push(f),""});if(!c&&d){var i,d=d.split(","),f=document.createElement("div");for(f.innerHTML="&"+d.join(";&")+";",i=f.innerHTML,f=null,f=0;f<i.length;f++){var g=i.charAt(f);a[g]="&"+d[f]+";",b.push(g)}}return a.regex=b.join(c?"|":""),a}CKEDITOR.plugins.add("entities",{afterInit:function(e){var c=e.config;if(e=(e=e.dataProcessor)&&e.htmlFilter){var a=[];c.basicEntities!==!1&&a.push("nbsp,gt,lt,amp"),c.entities&&(a.length&&a.push("quot,iexcl,cent,pound,curren,yen,brvbar,sect,uml,copy,ordf,laquo,not,shy,reg,macr,deg,plusmn,sup2,sup3,acute,micro,para,middot,cedil,sup1,ordm,raquo,frac14,frac12,frac34,iquest,times,divide,fnof,bull,hellip,prime,Prime,oline,frasl,weierp,image,real,trade,alefsym,larr,uarr,rarr,darr,harr,crarr,lArr,uArr,rArr,dArr,hArr,forall,part,exist,empty,nabla,isin,notin,ni,prod,sum,minus,lowast,radic,prop,infin,ang,and,or,cap,cup,int,there4,sim,cong,asymp,ne,equiv,le,ge,sub,sup,nsub,sube,supe,oplus,otimes,perp,sdot,lceil,rceil,lfloor,rfloor,lang,rang,loz,spades,clubs,hearts,diams,circ,tilde,ensp,emsp,thinsp,zwnj,zwj,lrm,rlm,ndash,mdash,lsquo,rsquo,sbquo,ldquo,rdquo,bdquo,dagger,Dagger,permil,lsaquo,rsaquo,euro"),c.entities_latin&&a.push("Agrave,Aacute,Acirc,Atilde,Auml,Aring,AElig,Ccedil,Egrave,Eacute,Ecirc,Euml,Igrave,Iacute,Icirc,Iuml,ETH,Ntilde,Ograve,Oacute,Ocirc,Otilde,Ouml,Oslash,Ugrave,Uacute,Ucirc,Uuml,Yacute,THORN,szlig,agrave,aacute,acirc,atilde,auml,aring,aelig,ccedil,egrave,eacute,ecirc,euml,igrave,iacute,icirc,iuml,eth,ntilde,ograve,oacute,ocirc,otilde,ouml,oslash,ugrave,uacute,ucirc,uuml,yacute,thorn,yuml,OElig,oelig,Scaron,scaron,Yuml"),c.entities_greek&&a.push("Alpha,Beta,Gamma,Delta,Epsilon,Zeta,Eta,Theta,Iota,Kappa,Lambda,Mu,Nu,Xi,Omicron,Pi,Rho,Sigma,Tau,Upsilon,Phi,Chi,Psi,Omega,alpha,beta,gamma,delta,epsilon,zeta,eta,theta,iota,kappa,lambda,mu,nu,xi,omicron,pi,rho,sigmaf,sigma,tau,upsilon,phi,chi,psi,omega,thetasym,upsih,piv"),c.entities_additional&&a.push(c.entities_additional));
var b=d(a.join(",")),h=b.regex?"["+b.regex+"]":"a^";delete b.regex,c.entities&&c.entities_processNumerical&&(h="[^ -~]|"+h);var h=RegExp(h,"g"),f=function(a){return"force"!=c.entities_processNumerical&&b[a]?b[a]:"&#"+a.charCodeAt(0)+";"},i=d("nbsp,gt,lt,amp,shy",!0),g=RegExp(i.regex,"g"),j=function(a){return i[a]};e.addRules({text:function(a){return a.replace(g,j).replace(h,f)}},{applyToAll:!0,excludeNestedEditable:!0})}}})}(),CKEDITOR.config.basicEntities=!0,CKEDITOR.config.entities=!0,CKEDITOR.config.entities_latin=!0,CKEDITOR.config.entities_greek=!0,CKEDITOR.config.entities_additional="#39",CKEDITOR.plugins.add("listblock",{requires:"panel",onLoad:function(){var d=CKEDITOR.addTemplate("panel-list",'<ul role="presentation" class="cke_panel_list">{items}</ul>'),e=CKEDITOR.addTemplate("panel-list-item",'<li id="{id}" class="cke_panel_listItem" role=presentation><a id="{id}_option" _cke_focus=1 hidefocus=true title="{title}" href="javascript:void(\'{val}\')"  {onclick}="CKEDITOR.tools.callFunction({clickFn},\'{val}\'); return false;" role="option">{text}</a></li>'),c=CKEDITOR.addTemplate("panel-list-group",'<h1 id="{id}" class="cke_panel_grouptitle" role="presentation" >{label}</h1>'),a=/\'/g;
CKEDITOR.ui.panel.prototype.addListBlock=function(a,c){return this.addBlock(a,new CKEDITOR.ui.listBlock(this.getHolderElement(),c))},CKEDITOR.ui.listBlock=CKEDITOR.tools.createClass({base:CKEDITOR.ui.panel.block,$:function(a,c){var c=c||{},d=c.attributes||(c.attributes={});(this.multiSelect=!!c.multiSelect)&&(d["aria-multiselectable"]=!0),!d.role&&(d.role="listbox"),this.base.apply(this,arguments),this.element.setAttribute("role",d.role),d=this.keys,d[40]="next",d[9]="next",d[38]="prev",d[CKEDITOR.SHIFT+9]="prev",d[32]=CKEDITOR.env.ie?"mouseup":"click",CKEDITOR.env.ie&&(d[13]="mouseup"),this._.pendingHtml=[],this._.pendingList=[],this._.items={},this._.groups={}
},_:{close:function(){if(this._.started){var a=d.output({items:this._.pendingList.join("")});this._.pendingList=[],this._.pendingHtml.push(a),delete this._.started}},getClick:function(){return this._.click||(this._.click=CKEDITOR.tools.addFunction(function(a){var c=this.toggle(a);this.onClick&&this.onClick(a,c)},this)),this._.click}},proto:{add:function(b,c,d){var i=CKEDITOR.tools.getNextId();this._.started||(this._.started=1,this._.size=this._.size||0),this._.items[b]=i;var g;g=CKEDITOR.tools.htmlEncodeAttr(b).replace(a,"\\'"),b={id:i,val:g,onclick:CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick",clickFn:this._.getClick(),title:CKEDITOR.tools.htmlEncodeAttr(d||b),text:c||b},this._.pendingList.push(e.output(b))
},startGroup:function(a){this._.close();var d=CKEDITOR.tools.getNextId();this._.groups[a]=d,this._.pendingHtml.push(c.output({id:d,label:a}))},commit:function(){this._.close(),this.element.appendHtml(this._.pendingHtml.join("")),delete this._.size,this._.pendingHtml=[]},toggle:function(a){var c=this.isMarked(a);return c?this.unmark(a):this.mark(a),!c},hideGroup:function(a){var c=(a=this.element.getDocument().getById(this._.groups[a]))&&a.getNext();a&&(a.setStyle("display","none"),c&&"ul"==c.getName()&&c.setStyle("display","none"))},hideItem:function(a){this.element.getDocument().getById(this._.items[a]).setStyle("display","none")},showAll:function(){var e,a=this._.items,c=this._.groups,d=this.element.getDocument();
for(e in a)d.getById(a[e]).setStyle("display","");for(var g in c)a=d.getById(c[g]),e=a.getNext(),a.setStyle("display",""),e&&"ul"==e.getName()&&e.setStyle("display","")},mark:function(a){this.multiSelect||this.unmarkAll();var a=this._.items[a],c=this.element.getDocument().getById(a);c.addClass("cke_selected"),this.element.getDocument().getById(a+"_option").setAttribute("aria-selected",!0),this.onMark&&this.onMark(c)},unmark:function(a){var c=this.element.getDocument(),a=this._.items[a],d=c.getById(a);d.removeClass("cke_selected"),c.getById(a+"_option").removeAttribute("aria-selected"),this.onUnmark&&this.onUnmark(d)},unmarkAll:function(){var d,a=this._.items,c=this.element.getDocument();
for(d in a){var e=a[d];c.getById(e).removeClass("cke_selected"),c.getById(e+"_option").removeAttribute("aria-selected")}this.onUnmark&&this.onUnmark()},isMarked:function(a){return this.element.getDocument().getById(this._.items[a]).hasClass("cke_selected")},focus:function(a){this._.focusIndex=-1;var d,c=this.element.getElementsByTag("a"),e=-1;if(a){for(d=this.element.getDocument().getById(this._.items[a]).getFirst();a=c.getItem(++e);)if(a.equals(d)){this._.focusIndex=e;break}}else this.element.focus();d&&setTimeout(function(){d.focus()},0)}}})}}),CKEDITOR.plugins.add("richcombo",{requires:"floatpanel,listblock,button",beforeInit:function(d){d.ui.addHandler(CKEDITOR.UI_RICHCOMBO,CKEDITOR.ui.richCombo.handler)
}}),function(){var d='<span id="{id}" class="cke_combo cke_combo__{name} {cls}" role="presentation"><span id="{id}_label" class="cke_combo_label">{label}</span><a class="cke_combo_button" hidefocus=true title="{title}" tabindex="-1"'+(CKEDITOR.env.gecko&&CKEDITOR.env.version>=10900&&!CKEDITOR.env.hc?"":'" href="javascript:void(\'{titleJs}\')"')+' hidefocus="true" role="button" aria-labelledby="{id}_label" aria-haspopup="true"';(CKEDITOR.env.opera||CKEDITOR.env.gecko&&CKEDITOR.env.mac)&&(d+=' onkeypress="return false;"'),CKEDITOR.env.gecko&&(d+=' onblur="this.style.cssText = this.style.cssText;"');var d=d+(' onkeydown="return CKEDITOR.tools.callFunction({keydownFn},event,this);" onmousedown="return CKEDITOR.tools.callFunction({mousedownFn},event);"  onfocus="return CKEDITOR.tools.callFunction({focusFn},event);" '+(CKEDITOR.env.ie?'onclick="return false;" onmouseup':"onclick")+'="CKEDITOR.tools.callFunction({clickFn},this);return false;"><span id="{id}_text" class="cke_combo_text cke_combo_inlinelabel">{label}</span><span class="cke_combo_open"><span class="cke_combo_arrow">'+(CKEDITOR.env.hc?"&#9660;":CKEDITOR.env.air?"&nbsp;":"")+"</span></span></a></span>"),e=CKEDITOR.addTemplate("combo",d);
CKEDITOR.UI_RICHCOMBO="richcombo",CKEDITOR.ui.richCombo=CKEDITOR.tools.createClass({$:function(c){CKEDITOR.tools.extend(this,c,{canGroup:!1,title:c.label,modes:{wysiwyg:1},editorFocus:1}),c=this.panel||{},delete this.panel,this.id=CKEDITOR.tools.getNextNumber(),this.document=c.parent&&c.parent.getDocument()||CKEDITOR.document,c.className="cke_combopanel",c.block={multiSelect:c.multiSelect,attributes:c.attributes},c.toolbarRelated=!0,this._={panelDefinition:c,items:{}}},proto:{renderHtml:function(c){var a=[];return this.render(c,a),a.join("")},render:function(c,a){function b(){var a=this.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED;c.readOnly&&!this.readOnly&&(a=CKEDITOR.TRISTATE_DISABLED),this.setState(a),this.setValue(""),a!=CKEDITOR.TRISTATE_DISABLED&&this.refresh&&this.refresh()
}var d=CKEDITOR.env,f="cke_"+this.id,i=CKEDITOR.tools.addFunction(function(a){o&&(c.unlockSelection(1),o=0),j.execute(a)},this),g=this,j={id:f,combo:this,focus:function(){CKEDITOR.document.getById(f).getChild(1).focus()},execute:function(a){var b=g._;if(b.state!=CKEDITOR.TRISTATE_DISABLED)if(g.createPanel(c),b.on)b.panel.hide();else{g.commit();var d=g.getValue();d?b.list.mark(d):b.list.unmarkAll(),b.panel.showBlock(g.id,new CKEDITOR.dom.element(a),4)}},clickFn:i};c.on("activeFilterChange",b,this),c.on("mode",b,this),c.on("selectionChange",b,this),!this.readOnly&&c.on("readOnly",b,this);var l=CKEDITOR.tools.addFunction(function(a,b){var a=new CKEDITOR.dom.event(a),d=a.getKeystroke();
switch(40==d&&c.once("panelShow",function(a){a.data._.panel._.currentBlock.onKeyDown(40)}),d){case 13:case 32:case 40:CKEDITOR.tools.callFunction(i,b);break;default:j.onkey(j,d)}a.preventDefault()}),m=CKEDITOR.tools.addFunction(function(){j.onfocus&&j.onfocus()}),o=0,p=CKEDITOR.tools.addFunction(function(){if(CKEDITOR.env.opera){var a=c.editable();a.isInline()&&a.hasFocus&&(c.lockSelection(),o=1)}});return j.keyDownFn=l,d={id:f,name:this.name||this.command,label:this.label,title:this.title,cls:this.className||"",titleJs:d.gecko&&d.version>=10900&&!d.hc?"":(this.title||"").replace("'",""),keydownFn:l,mousedownFn:p,focusFn:m,clickFn:i},e.output(d,a),this.onRender&&this.onRender(),j
},createPanel:function(c){if(!this._.panel){var a=this._.panelDefinition,b=this._.panelDefinition.block,d=a.parent||CKEDITOR.document.getBody(),e="cke_combopanel__"+this.name,i=new CKEDITOR.ui.floatPanel(c,d,a),g=i.addListBlock(this.id,b),j=this;i.onShow=function(){this.element.addClass(e),j.setState(CKEDITOR.TRISTATE_ON),j._.on=1,j.editorFocus&&!c.focusManager.hasFocus&&c.focus(),j.onOpen&&j.onOpen(),c.once("panelShow",function(){g.focus(!g.multiSelect&&j.getValue())})},i.onHide=function(a){this.element.removeClass(e),j.setState(j.modes&&j.modes[c.mode]?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),j._.on=0,!a&&j.onClose&&j.onClose()},i.onEscape=function(){i.hide(1)
},g.onClick=function(a,b){j.onClick&&j.onClick.call(j,a,b),i.hide()},this._.panel=i,this._.list=g,i.getBlock(this.id).onHide=function(){j._.on=0,j.setState(CKEDITOR.TRISTATE_OFF)},this.init&&this.init()}},setValue:function(c,a){this._.value=c;var b=this.document.getById("cke_"+this.id+"_text");b&&(c||a?b.removeClass("cke_combo_inlinelabel"):(a=this.label,b.addClass("cke_combo_inlinelabel")),b.setText("undefined"!=typeof a?a:c))},getValue:function(){return this._.value||""},unmarkAll:function(){this._.list.unmarkAll()},mark:function(c){this._.list.mark(c)},hideItem:function(c){this._.list.hideItem(c)},hideGroup:function(c){this._.list.hideGroup(c)},showAll:function(){this._.list.showAll()
},add:function(c,a,b){this._.items[c]=b||c,this._.list.add(c,a,b)},startGroup:function(c){this._.list.startGroup(c)},commit:function(){this._.committed||(this._.list.commit(),this._.committed=1,CKEDITOR.ui.fire("ready",this)),this._.committed=1},setState:function(c){if(this._.state!=c){var a=this.document.getById("cke_"+this.id);a.setState(c,"cke_combo"),c==CKEDITOR.TRISTATE_DISABLED?a.setAttribute("aria-disabled",!0):a.removeAttribute("aria-disabled"),this._.state=c}},getState:function(){return this._.state},enable:function(){this._.state==CKEDITOR.TRISTATE_DISABLED&&this.setState(this._.lastState)},disable:function(){this._.state!=CKEDITOR.TRISTATE_DISABLED&&(this._.lastState=this._.state,this.setState(CKEDITOR.TRISTATE_DISABLED))
}},statics:{handler:{create:function(c){return new CKEDITOR.ui.richCombo(c)}}}}),CKEDITOR.ui.prototype.addRichCombo=function(c,a){this.add(c,CKEDITOR.UI_RICHCOMBO,a)}}(),CKEDITOR.plugins.add("format",{requires:"richcombo",init:function(d){if(!d.blockless){for(var e=d.config,c=d.lang.format,a=e.format_tags.split(";"),b={},h=0,f=[],i=0;i<a.length;i++){var g=a[i],j=new CKEDITOR.style(e["format_"+g]);(!d.filter.customConfig||d.filter.check(j))&&(h++,b[g]=j,b[g]._.enterMode=d.config.enterMode,f.push(j))}0!==h&&d.ui.addRichCombo("Format",{label:c.label,title:c.panelTitle,toolbar:"styles,20",allowedContent:f,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!1,attributes:{"aria-label":c.panelTitle}},init:function(){this.startGroup(c.panelTitle);
for(var a in b){var d=c["tag_"+a];this.add(a,b[a].buildPreview(d),d)}},onClick:function(a){d.focus(),d.fire("saveSnapshot");var a=b[a],c=d.elementPath();d[a.checkActive(c)?"removeStyle":"applyStyle"](a),setTimeout(function(){d.fire("saveSnapshot")},0)},onRender:function(){d.on("selectionChange",function(a){var c=this.getValue(),a=a.data.path;this.refresh();for(var e in b)if(b[e].checkActive(a))return void(e!=c&&this.setValue(e,d.lang.format["tag_"+e]));this.setValue("")},this)},onOpen:function(){this.showAll();for(var a in b)d.activeFilter.check(b[a])||this.hideItem(a)},refresh:function(){var a=d.elementPath();if(a){if(a.isContextFor("p"))for(var c in b)if(d.activeFilter.check(b[c]))return;
this.setState(CKEDITOR.TRISTATE_DISABLED)}}})}}}),CKEDITOR.config.format_tags="p;h1;h2;h3;h4;h5;h6;pre;address;div",CKEDITOR.config.format_p={element:"p"},CKEDITOR.config.format_div={element:"div"},CKEDITOR.config.format_pre={element:"pre"},CKEDITOR.config.format_address={element:"address"},CKEDITOR.config.format_h1={element:"h1"},CKEDITOR.config.format_h2={element:"h2"},CKEDITOR.config.format_h3={element:"h3"},CKEDITOR.config.format_h4={element:"h4"},CKEDITOR.config.format_h5={element:"h5"},CKEDITOR.config.format_h6={element:"h6"},function(){var d={canUndo:!1,exec:function(d){var c=d.document.createElement("hr");d.insertElement(c)},allowedContent:"hr",requiredContent:"hr"};
CKEDITOR.plugins.add("horizontalrule",{init:function(e){e.blockless||(e.addCommand("horizontalrule",d),e.ui.addButton&&e.ui.addButton("HorizontalRule",{label:e.lang.horizontalrule.toolbar,command:"horizontalrule",toolbar:"insert,40"}))}})}(),CKEDITOR.plugins.add("htmlwriter",{init:function(d){var e=new CKEDITOR.htmlWriter;e.forceSimpleAmpersand=d.config.forceSimpleAmpersand,e.indentationChars=d.config.dataIndentationChars||"	",d.dataProcessor.writer=e}}),CKEDITOR.htmlWriter=CKEDITOR.tools.createClass({base:CKEDITOR.htmlParser.basicWriter,$:function(){this.base(),this.indentationChars="	",this.selfClosingEnd=" />",this.lineBreakChars="\n",this.sortAttributes=1,this._.indent=0,this._.indentation="",this._.inPre=0,this._.rules={};
var e,d=CKEDITOR.dtd;for(e in CKEDITOR.tools.extend({},d.$nonBodyContent,d.$block,d.$listItem,d.$tableContent))this.setRules(e,{indent:!d[e]["#"],breakBeforeOpen:1,breakBeforeClose:!d[e]["#"],breakAfterClose:1,needsSpace:e in d.$block&&!(e in{li:1,dt:1,dd:1})});this.setRules("br",{breakAfterOpen:1}),this.setRules("title",{indent:0,breakAfterOpen:0}),this.setRules("style",{indent:0,breakBeforeClose:1}),this.setRules("pre",{breakAfterOpen:1,indent:0})},proto:{openTag:function(d){var e=this._.rules[d];this._.afterCloser&&e&&e.needsSpace&&this._.needsSpace&&this._.output.push("\n"),this._.indent?this.indentation():e&&e.breakBeforeOpen&&(this.lineBreak(),this.indentation()),this._.output.push("<",d),this._.afterCloser=0
},openTagClose:function(d,e){var c=this._.rules[d];e?(this._.output.push(this.selfClosingEnd),c&&c.breakAfterClose&&(this._.needsSpace=c.needsSpace)):(this._.output.push(">"),c&&c.indent&&(this._.indentation=this._.indentation+this.indentationChars)),c&&c.breakAfterOpen&&this.lineBreak(),"pre"==d&&(this._.inPre=1)},attribute:function(d,e){"string"==typeof e&&(this.forceSimpleAmpersand&&(e=e.replace(/&amp;/g,"&")),e=CKEDITOR.tools.htmlEncodeAttr(e)),this._.output.push(" ",d,'="',e,'"')},closeTag:function(d){var e=this._.rules[d];e&&e.indent&&(this._.indentation=this._.indentation.substr(this.indentationChars.length)),this._.indent?this.indentation():e&&e.breakBeforeClose&&(this.lineBreak(),this.indentation()),this._.output.push("</",d,">"),"pre"==d&&(this._.inPre=0),e&&e.breakAfterClose&&(this.lineBreak(),this._.needsSpace=e.needsSpace),this._.afterCloser=1
},text:function(d){this._.indent&&(this.indentation(),!this._.inPre&&(d=CKEDITOR.tools.ltrim(d))),this._.output.push(d)},comment:function(d){this._.indent&&this.indentation(),this._.output.push("<!--",d,"-->")},lineBreak:function(){!this._.inPre&&this._.output.length>0&&this._.output.push(this.lineBreakChars),this._.indent=1},indentation:function(){!this._.inPre&&this._.indentation&&this._.output.push(this._.indentation),this._.indent=0},reset:function(){this._.output=[],this._.indent=0,this._.indentation="",this._.afterCloser=0,this._.inPre=0},setRules:function(d,e){var c=this._.rules[d];c?CKEDITOR.tools.extend(c,e,!0):this._.rules[d]=e}}}),function(){function d(a){var b=this.editor,c=a.document,d=c.body;
(a=c.getElementById("cke_actscrpt"))&&a.parentNode.removeChild(a),(a=c.getElementById("cke_shimscrpt"))&&a.parentNode.removeChild(a),CKEDITOR.env.gecko&&(d.contentEditable=!1,CKEDITOR.env.version<2e4&&(d.innerHTML=d.innerHTML.replace(/^.*<\!-- cke-content-start --\>/,""),setTimeout(function(){var a=new CKEDITOR.dom.range(new CKEDITOR.dom.document(c));a.setStart(new CKEDITOR.dom.node(d),0),b.getSelection().selectRanges([a])},0))),d.contentEditable=!0,CKEDITOR.env.ie&&(d.hideFocus=!0,d.disabled=!0,d.removeAttribute("disabled")),delete this._.isLoadingData,this.$=d,c=new CKEDITOR.dom.document(c),this.setup(),CKEDITOR.env.ie&&(c.getDocumentElement().addClass(c.$.compatMode),b.config.enterMode!=CKEDITOR.ENTER_P&&this.attachListener(c,"selectionchange",function(){var a=c.getBody(),d=b.getSelection(),e=d&&d.getRanges()[0];
e&&a.getHtml().match(/^<p>(?:&nbsp;|<br>)<\/p>$/i)&&e.startContainer.equals(a)&&setTimeout(function(){e=b.getSelection().getRanges()[0],e.startContainer.equals("body")||(a.getFirst().remove(1),e.moveToElementEditEnd(a),e.select())},0)})),(CKEDITOR.env.webkit||CKEDITOR.env.ie&&CKEDITOR.env.version>10)&&c.getDocumentElement().on("mousedown",function(a){a.data.getTarget().is("html")&&setTimeout(function(){b.editable().focus()})});try{b.document.$.execCommand("2D-position",!1,!0)}catch(e){}try{b.document.$.execCommand("enableInlineTableEditing",!1,!b.config.disableNativeTableHandles)}catch(g){}if(b.config.disableObjectResizing)try{this.getDocument().$.execCommand("enableObjectResizing",!1,!1)
}catch(j){this.attachListener(this,CKEDITOR.env.ie?"resizestart":"resize",function(a){a.data.preventDefault()})}(CKEDITOR.env.gecko||CKEDITOR.env.ie&&"CSS1Compat"==b.document.$.compatMode)&&this.attachListener(this,"keydown",function(a){var c=a.data.getKeystroke();if(33==c||34==c)if(CKEDITOR.env.ie)setTimeout(function(){b.getSelection().scrollIntoView()},0);else if(b.window.$.innerHeight>this.$.offsetHeight){var d=b.createRange();d[33==c?"moveToElementEditStart":"moveToElementEditEnd"](this),d.select(),a.data.preventDefault()}}),CKEDITOR.env.ie&&this.attachListener(c,"blur",function(){try{c.$.selection.empty()}catch(a){}}),b.document.getElementsByTag("title").getItem(0).data("cke-title",b.document.$.title),CKEDITOR.env.ie&&(b.document.$.title=this._.docTitle),CKEDITOR.tools.setTimeout(function(){b.fire("contentDom"),this._.isPendingFocus&&(b.focus(),this._.isPendingFocus=!1),setTimeout(function(){b.fire("dataReady")
},0),CKEDITOR.env.ie&&setTimeout(function(){if(b.document){var a=b.document.$.body;a.runtimeStyle.marginBottom="0px",a.runtimeStyle.marginBottom=""}},1e3)},0,this)}function e(){var a=[];if(CKEDITOR.document.$.documentMode>=8){a.push("html.CSS1Compat [contenteditable=false]{min-height:0 !important}");var c,b=[];for(c in CKEDITOR.dtd.$removeEmpty)b.push("html.CSS1Compat "+c+"[contenteditable=false]");a.push(b.join(",")+"{display:inline-block}")}else CKEDITOR.env.gecko&&(a.push("html{height:100% !important}"),a.push("img:-moz-broken{-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}"));return a.push("html{cursor:text;*cursor:auto}"),a.push("img,input,textarea{cursor:default}"),a.join("\n")
}CKEDITOR.plugins.add("wysiwygarea",{init:function(a){a.config.fullPage&&a.addFeature({allowedContent:"html head title; style [media,type]; body (*)[id]; meta link [*]",requiredContent:"body"}),a.addMode("wysiwyg",function(b){function d(e){e&&e.removeListener(),a.editable(new c(a,i.$.contentWindow.document.body)),a.setData(a.getData(1),b)}var e="document.open();"+(CKEDITOR.env.ie?"("+CKEDITOR.tools.fixDomain+")();":"")+"document.close();",e=CKEDITOR.env.air?"javascript:void(0)":CKEDITOR.env.ie?"javascript:void(function(){"+encodeURIComponent(e)+"}())":"",i=CKEDITOR.dom.element.createFromHtml('<iframe src="'+e+'" frameBorder="0"></iframe>');i.setStyles({width:"100%",height:"100%"}),i.addClass("cke_wysiwyg_frame cke_reset");
var g=a.ui.space("contents");g.append(i),(e=CKEDITOR.env.ie||CKEDITOR.env.gecko)&&i.on("load",d);var j=a.title,l=a.lang.common.editorHelp;j&&(CKEDITOR.env.ie&&(j+=", "+l),i.setAttribute("title",j));var j=CKEDITOR.tools.getNextId(),m=CKEDITOR.dom.element.createFromHtml('<span id="'+j+'" class="cke_voice_label">'+l+"</span>");g.append(m,1),a.on("beforeModeUnload",function(a){a.removeListener(),m.remove()}),i.setAttributes({"aria-describedby":j,tabIndex:a.tabIndex,allowTransparency:"true"}),!e&&d(),CKEDITOR.env.webkit&&(e=function(){g.setStyle("width","100%"),i.hide(),i.setSize("width",g.getSize("width")),g.removeStyle("width"),i.show()},i.setCustomData("onResize",e),CKEDITOR.document.getWindow().on("resize",e)),a.fire("ariaWidget",i)
})}});var c=CKEDITOR.tools.createClass({$:function(){this.base.apply(this,arguments),this._.frameLoadedHandler=CKEDITOR.tools.addFunction(function(a){CKEDITOR.tools.setTimeout(d,0,this,a)},this),this._.docTitle=this.getWindow().getFrame().getAttribute("title")},base:CKEDITOR.editable,proto:{setData:function(a,b){var c=this.editor;if(b)this.setHtml(a),c.fire("dataReady");else{this._.isLoadingData=!0,c._.dataStore={id:1};var d=c.config,i=d.fullPage,g=d.docType,j=CKEDITOR.tools.buildStyleHtml(e()).replace(/<style>/,'<style data-cke-temp="1">');i||(j+=CKEDITOR.tools.buildStyleHtml(c.config.contentsCss));var l=d.baseHref?'<base href="'+d.baseHref+'" data-cke-temp="1" />':"";
i&&(a=a.replace(/<!DOCTYPE[^>]*>/i,function(a){return c.docType=g=a,""}).replace(/<\?xml\s[^\?]*\?>/i,function(a){return c.xmlDeclaration=a,""})),a=c.dataProcessor.toHtml(a),i?(/<body[\s|>]/.test(a)||(a="<body>"+a),/<html[\s|>]/.test(a)||(a="<html>"+a+"</html>"),/<head[\s|>]/.test(a)?/<title[\s|>]/.test(a)||(a=a.replace(/<head[^>]*>/,"$&<title></title>")):a=a.replace(/<html[^>]*>/,"$&<head><title></title></head>"),l&&(a=a.replace(/<head>/,"$&"+l)),a=a.replace(/<\/head\s*>/,j+"$&"),a=g+a):a=d.docType+'<html dir="'+d.contentsLangDirection+'" lang="'+(d.contentsLanguage||c.langCode)+'"><head><title>'+this._.docTitle+"</title>"+l+j+"</head><body"+(d.bodyId?' id="'+d.bodyId+'"':"")+(d.bodyClass?' class="'+d.bodyClass+'"':"")+">"+a+"</body></html>",CKEDITOR.env.gecko&&(a=a.replace(/<body/,'<body contenteditable="true" '),CKEDITOR.env.version<2e4&&(a=a.replace(/<body[^>]*>/,"$&<!-- cke-content-start -->"))),d='<script id="cke_actscrpt" type="text/javascript"'+(CKEDITOR.env.ie?' defer="defer" ':"")+">var wasLoaded=0;function onload(){if(!wasLoaded)window.parent.CKEDITOR.tools.callFunction("+this._.frameLoadedHandler+",window);wasLoaded=1;}"+(CKEDITOR.env.ie?"onload();":'document.addEventListener("DOMContentLoaded", onload, false );')+"</script>",CKEDITOR.env.ie&&CKEDITOR.env.version<9&&(d+='<script id="cke_shimscrpt">window.parent.CKEDITOR.tools.enableHtml5Elements(document)</script>'),a=a.replace(/(?=\s*<\/(:?head)>)/,d),this.clearCustomData(),this.clearListeners(),c.fire("contentDomUnload");
var m=this.getDocument();try{m.write(a)}catch(o){setTimeout(function(){m.write(a)},0)}}},getData:function(a){if(a)return this.getHtml();var a=this.editor,b=a.config,c=b.fullPage,d=c&&a.docType,e=c&&a.xmlDeclaration,g=this.getDocument(),c=c?g.getDocumentElement().getOuterHtml():g.getBody().getHtml();return CKEDITOR.env.gecko&&b.enterMode!=CKEDITOR.ENTER_BR&&(c=c.replace(/<br>(?=\s*(:?$|<\/body>))/,"")),c=a.dataProcessor.toDataFormat(c),e&&(c=e+"\n"+c),d&&(c=d+"\n"+c),c},focus:function(){this._.isLoadingData?this._.isPendingFocus=!0:c.baseProto.focus.call(this)},detach:function(){var a=this.editor,b=a.document,a=a.window.getFrame();c.baseProto.detach.call(this),this.clearCustomData(),b.getDocumentElement().clearCustomData(),a.clearCustomData(),CKEDITOR.tools.removeFunction(this._.frameLoadedHandler),(b=a.removeCustomData("onResize"))&&b.removeListener(),a.remove()
}}})}(),CKEDITOR.config.disableObjectResizing=!1,CKEDITOR.config.disableNativeTableHandles=!0,CKEDITOR.config.disableNativeSpellChecker=!0,CKEDITOR.config.contentsCss=CKEDITOR.getUrl("contents.css"),function(){function d(a,b){var d,f;b.on("refresh",function(a){var d,b=[e];for(d in a.data.states)b.push(a.data.states[d]);this.setState(CKEDITOR.tools.search(b,c)?c:e)},b,null,100),b.on("exec",function(b){d=a.getSelection(),f=d.createBookmarks(1),b.data||(b.data={}),b.data.done=!1},b,null,0),b.on("exec",function(){a.forceNextSelectionCheck(),d.selectBookmarks(f)},b,null,100)}var e=CKEDITOR.TRISTATE_DISABLED,c=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indent",{init:function(a){var b=CKEDITOR.plugins.indent.genericDefinition;
d(a,a.addCommand("indent",new b(!0))),d(a,a.addCommand("outdent",new b)),a.ui.addButton&&(a.ui.addButton("Indent",{label:a.lang.indent.indent,command:"indent",directional:!0,toolbar:"indent,20"}),a.ui.addButton("Outdent",{label:a.lang.indent.outdent,command:"outdent",directional:!0,toolbar:"indent,10"})),a.on("dirChanged",function(b){var c=a.createRange(),d=b.data.node;c.setStartBefore(d),c.setEndAfter(d);for(var j,e=new CKEDITOR.dom.walker(c);j=e.next();)if(j.type==CKEDITOR.NODE_ELEMENT)if(!j.equals(d)&&j.getDirection())c.setStartAfter(j),e=new CKEDITOR.dom.walker(c);else{var l=a.config.indentClasses;if(l)for(var m="ltr"==b.data.dir?["_rtl",""]:["","_rtl"],o=0;o<l.length;o++)j.hasClass(l[o]+m[0])&&(j.removeClass(l[o]+m[0]),j.addClass(l[o]+m[1]));
l=j.getStyle("margin-right"),m=j.getStyle("margin-left"),l?j.setStyle("margin-left",l):j.removeStyle("margin-left"),m?j.setStyle("margin-right",m):j.removeStyle("margin-right")}})}}),CKEDITOR.plugins.indent={genericDefinition:function(a){this.isIndent=!!a,this.startDisabled=!this.isIndent},specificDefinition:function(a,b,c){this.name=b,this.editor=a,this.jobs={},this.enterBr=a.config.enterMode==CKEDITOR.ENTER_BR,this.isIndent=!!c,this.relatedGlobal=c?"indent":"outdent",this.indentKey=c?9:CKEDITOR.SHIFT+9,this.database={}},registerCommands:function(a,b){a.on("pluginsLoaded",function(){for(var a in b)(function(a,b){var d,c=a.getCommand(b.relatedGlobal);for(d in b.jobs)c.on("exec",function(c){c.data.done||(a.fire("lockSnapshot"),b.execJob(a,d)&&(c.data.done=!0),a.fire("unlockSnapshot"),CKEDITOR.dom.element.clearAllMarkers(b.database))
},this,null,d),c.on("refresh",function(c){c.data.states||(c.data.states={}),c.data.states[b.name+"@"+d]=b.refreshJob(a,d,c.data.path)},this,null,d);a.addFeature(b)})(this,b[a])})}},CKEDITOR.plugins.indent.genericDefinition.prototype={context:"p",exec:function(){}},CKEDITOR.plugins.indent.specificDefinition.prototype={execJob:function(a,b){var c=this.jobs[b];return c.state!=e?c.exec.call(this,a):void 0},refreshJob:function(a,b,c){return b=this.jobs[b],b.state=a.activeFilter.checkFeature(this)?b.refresh.call(this,a,c):e,b.state},getContext:function(a){return a.contains(this.context)}}}(),function(){function d(b){function d(c){for(var h=k.startContainer,j=k.endContainer;h&&!h.getParent().equals(c);)h=h.getParent();
for(;j&&!j.getParent().equals(c);)j=j.getParent();if(!h||!j)return!1;for(var n=h,h=[],p=!1;!p;)n.equals(j)&&(p=!0),h.push(n),n=n.getNext();if(h.length<1)return!1;for(n=c.getParents(!0),j=0;j<n.length;j++)if(n[j].getName&&i[n[j].getName()]){c=n[j];break}for(var n=e.isIndent?1:-1,j=h[0],h=h[h.length-1],p=CKEDITOR.plugins.list.listToArray(c,f),u=p[h.getCustomData("listarray_index")].indent,j=j.getCustomData("listarray_index");j<=h.getCustomData("listarray_index");j++)if(p[j].indent=p[j].indent+n,n>0){var q=p[j].parent;p[j].parent=new CKEDITOR.dom.element(q.getName(),q.getDocument())}for(j=h.getCustomData("listarray_index")+1;j<p.length&&p[j].indent>u;j++)p[j].indent=p[j].indent+n;
if(h=CKEDITOR.plugins.list.arrayToList(p,f,null,b.config.enterMode,c.getDirection()),!e.isIndent){var w;if((w=c.getParent())&&w.is("li"))for(var A,n=h.listNode.getChildren(),y=[],j=n.count()-1;j>=0;j--)(A=n.getItem(j))&&A.is&&A.is("li")&&y.push(A)}if(h&&h.listNode.replace(c),y&&y.length)for(j=0;j<y.length;j++){for(A=c=y[j];(A=A.getNext())&&A.is&&A.getName()in i;)CKEDITOR.env.needsNbspFiller&&!c.getFirst(a)&&c.append(k.document.createText("Â ")),c.append(A);c.insertAfter(w)}return h&&b.fire("contentDomInvalidated"),!0}for(var k,e=this,f=this.database,i=this.context,h=b.getSelection(),h=(h&&h.getRanges()).createIterator();k=h.getNextRange();){for(var n=k.getCommonAncestor();n&&(n.type!=CKEDITOR.NODE_ELEMENT||!i[n.getName()]);)n=n.getParent();
if(n||(n=k.startPath().contains(i))&&k.setEndAt(n,CKEDITOR.POSITION_BEFORE_END),!n){var u=k.getEnclosedNode();u&&u.type==CKEDITOR.NODE_ELEMENT&&u.getName()in i&&(k.setStartAt(u,CKEDITOR.POSITION_AFTER_START),k.setEndAt(u,CKEDITOR.POSITION_BEFORE_END),n=u)}if(n&&k.startContainer.type==CKEDITOR.NODE_ELEMENT&&k.startContainer.getName()in i&&(u=new CKEDITOR.dom.walker(k),u.evaluator=c,k.startContainer=u.next()),n&&k.endContainer.type==CKEDITOR.NODE_ELEMENT&&k.endContainer.getName()in i&&(u=new CKEDITOR.dom.walker(k),u.evaluator=c,k.endContainer=u.previous()),n)return d(n)}return 0}function e(a,b){return b||(b=a.contains(this.context)),b&&a.block&&a.block.equals(b.getFirst(c))
}function c(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.is("li")}function a(a){return b(a)&&h(a)}var b=CKEDITOR.dom.walker.whitespaces(!0),h=CKEDITOR.dom.walker.bookmark(!1,!0),f=CKEDITOR.TRISTATE_DISABLED,i=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentlist",{requires:"indent",init:function(a){function b(a){c.specificDefinition.apply(this,arguments),this.requiredContent=["ul","ol"],a.on("key",function(b){if("wysiwyg"==a.mode&&b.data.keyCode==this.indentKey){var c=this.getContext(a.elementPath());!c||this.isIndent&&e.call(this,a.elementPath(),c)||(a.execCommand(this.relatedGlobal),b.cancel())}},this),this.jobs[this.isIndent?10:30]={refresh:this.isIndent?function(a,b){var c=this.getContext(b),d=e.call(this,b,c);
return c&&this.isIndent&&!d?i:f}:function(a,b){return!this.getContext(b)||this.isIndent?f:i},exec:CKEDITOR.tools.bind(d,this)}}var c=CKEDITOR.plugins.indent;c.registerCommands(a,{indentlist:new b(a,"indentlist",!0),outdentlist:new b(a,"outdentlist")}),CKEDITOR.tools.extend(b.prototype,c.specificDefinition.prototype,{context:{ol:1,ul:1}})}})}(),function(){function d(b,c){var d=a.exec(b),e=a.exec(c);if(d){if(!d[2]&&"px"==e[2])return e[1];if("px"==d[2]&&!e[2])return e[1]+"px"}return c}var e=CKEDITOR.htmlParser.cssStyle,c=CKEDITOR.tools.cssLength,a=/^((?:\d*(?:\.\d+))|(?:\d+))(.*)?$/i,b={elements:{$:function(a){var b=a.attributes;if((b=(b=(b=b&&b["data-cke-realelement"])&&new CKEDITOR.htmlParser.fragment.fromHtml(decodeURIComponent(b)))&&b.children[0])&&a.attributes["data-cke-resizable"]){var c=new e(a).rules,a=b.attributes,h=c.width,c=c.height;
h&&(a.width=d(a.width,h)),c&&(a.height=d(a.height,c))}return b}}},h=CKEDITOR.plugins.add("fakeobjects",{init:function(a){a.filter.allow("img[!data-cke-realelement,src,alt,title](*){*}","fakeobjects")},afterInit:function(a){(a=(a=a.dataProcessor)&&a.htmlFilter)&&a.addRules(b)}});CKEDITOR.editor.prototype.createFakeElement=function(a,b,d,j){var l=this.lang.fakeobjects,l=l[d]||l.unknown,b={"class":b,"data-cke-realelement":encodeURIComponent(a.getOuterHtml()),"data-cke-real-node-type":a.type,alt:l,title:l,align:a.getAttribute("align")||""};return CKEDITOR.env.hc||(b.src=CKEDITOR.getUrl(h.path+"images/spacer.gif")),d&&(b["data-cke-real-element-type"]=d),j&&(b["data-cke-resizable"]=j,d=new e,j=a.getAttribute("width"),a=a.getAttribute("height"),j&&(d.rules.width=c(j)),a&&(d.rules.height=c(a)),d.populate(b)),this.document.createElement("img",{attributes:b})
},CKEDITOR.editor.prototype.createFakeParserElement=function(a,b,d,j){var m,l=this.lang.fakeobjects,l=l[d]||l.unknown;return m=new CKEDITOR.htmlParser.basicWriter,a.writeHtml(m),m=m.getHtml(),b={"class":b,"data-cke-realelement":encodeURIComponent(m),"data-cke-real-node-type":a.type,alt:l,title:l,align:a.attributes.align||""},CKEDITOR.env.hc||(b.src=CKEDITOR.getUrl(h.path+"images/spacer.gif")),d&&(b["data-cke-real-element-type"]=d),j&&(b["data-cke-resizable"]=j,j=a.attributes,a=new e,d=j.width,j=j.height,void 0!=d&&(a.rules.width=c(d)),void 0!=j&&(a.rules.height=c(j)),a.populate(b)),new CKEDITOR.htmlParser.element("img",b)},CKEDITOR.editor.prototype.restoreRealElement=function(a){if(a.data("cke-real-node-type")!=CKEDITOR.NODE_ELEMENT)return null;
var b=CKEDITOR.dom.element.createFromHtml(decodeURIComponent(a.data("cke-realelement")),this.document);if(a.data("cke-resizable")){var c=a.getStyle("width"),a=a.getStyle("height");c&&b.setAttribute("width",d(b.getAttribute("width"),c)),a&&b.setAttribute("height",d(b.getAttribute("height"),a))}return b}}(),CKEDITOR.plugins.add("link",{requires:"dialog,fakeobjects",onLoad:function(){function d(a){return c.replace(/%1/g,"rtl"==a?"right":"left").replace(/%2/g,"cke_contents_"+a)}var e="background:url("+CKEDITOR.getUrl(this.path+"images"+(CKEDITOR.env.hidpi?"/hidpi":"")+"/anchor.png")+") no-repeat %1 center;border:1px dotted #00f;background-size:16px;",c=".%2 a.cke_anchor,.%2 a.cke_anchor_empty,.cke_editable.%2 a[name],.cke_editable.%2 a[data-cke-saved-name]{"+e+"padding-%1:18px;cursor:auto;}"+(CKEDITOR.plugins.link.synAnchorSelector?"a.cke_anchor_empty{display:inline-block;"+(CKEDITOR.env.ie&&CKEDITOR.env.version>10?"min-height:16px;vertical-align:middle":"")+"}":"")+".%2 img.cke_anchor{"+e+"width:16px;min-height:15px;height:1.15em;vertical-align:"+(CKEDITOR.env.opera?"middle":"text-bottom")+";}";
CKEDITOR.addCss(d("ltr")+d("rtl"))},init:function(d){var e="a[!href]";CKEDITOR.dialog.isTabEnabled(d,"link","advanced")&&(e=e.replace("]",",accesskey,charset,dir,id,lang,name,rel,tabindex,title,type]{*}(*)")),CKEDITOR.dialog.isTabEnabled(d,"link","target")&&(e=e.replace("]",",target,onclick]")),d.addCommand("link",new CKEDITOR.dialogCommand("link",{allowedContent:e,requiredContent:"a[href]"})),d.addCommand("anchor",new CKEDITOR.dialogCommand("anchor",{allowedContent:"a[!name,id]",requiredContent:"a[name]"})),d.addCommand("unlink",new CKEDITOR.unlinkCommand),d.addCommand("removeAnchor",new CKEDITOR.removeAnchorCommand),d.setKeystroke(CKEDITOR.CTRL+76,"link"),d.ui.addButton&&(d.ui.addButton("Link",{label:d.lang.link.toolbar,command:"link",toolbar:"links,10"}),d.ui.addButton("Unlink",{label:d.lang.link.unlink,command:"unlink",toolbar:"links,20"}),d.ui.addButton("Anchor",{label:d.lang.link.anchor.toolbar,command:"anchor",toolbar:"links,30"})),CKEDITOR.dialog.add("link",this.path+"dialogs/link.js"),CKEDITOR.dialog.add("anchor",this.path+"dialogs/anchor.js"),d.on("doubleclick",function(c){var a=CKEDITOR.plugins.link.getSelectedLink(d)||c.data.element;
!a.isReadOnly()&&a.is&&(a.is("a")?(c.data.dialog=!a.getAttribute("name")||a.getAttribute("href")&&a.getChildCount()?"link":"anchor",d.getSelection().selectElement(a)):CKEDITOR.plugins.link.tryRestoreFakeAnchor(d,a)&&(c.data.dialog="anchor"))}),d.addMenuItems&&d.addMenuItems({anchor:{label:d.lang.link.anchor.menu,command:"anchor",group:"anchor",order:1},removeAnchor:{label:d.lang.link.anchor.remove,command:"removeAnchor",group:"anchor",order:5},link:{label:d.lang.link.menu,command:"link",group:"link",order:1},unlink:{label:d.lang.link.unlink,command:"unlink",group:"link",order:5}}),d.contextMenu&&d.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;
if(c=CKEDITOR.plugins.link.tryRestoreFakeAnchor(d,c),!c&&!(c=CKEDITOR.plugins.link.getSelectedLink(d)))return null;var a={};return c.getAttribute("href")&&c.getChildCount()&&(a={link:CKEDITOR.TRISTATE_OFF,unlink:CKEDITOR.TRISTATE_OFF}),c&&c.hasAttribute("name")&&(a.anchor=a.removeAnchor=CKEDITOR.TRISTATE_OFF),a})},afterInit:function(d){var e=d.dataProcessor,c=e&&e.dataFilter,e=e&&e.htmlFilter,a=d._.elementsPath&&d._.elementsPath.filters;c&&c.addRules({elements:{a:function(a){var c=a.attributes;if(!c.name)return null;var e=!a.children.length;if(CKEDITOR.plugins.link.synAnchorSelector){var a=e?"cke_anchor_empty":"cke_anchor",i=c["class"];c.name&&(!i||i.indexOf(a)<0)&&(c["class"]=(i||"")+" "+a),e&&CKEDITOR.plugins.link.emptyAnchorFix&&(c.contenteditable="false",c["data-cke-editable"]=1)
}else if(CKEDITOR.plugins.link.fakeAnchor&&e)return d.createFakeParserElement(a,"cke_anchor","anchor");return null}}}),CKEDITOR.plugins.link.emptyAnchorFix&&e&&e.addRules({elements:{a:function(a){delete a.attributes.contenteditable}}}),a&&a.push(function(a,c){return"a"!=c||!CKEDITOR.plugins.link.tryRestoreFakeAnchor(d,a)&&(!a.getAttribute("name")||a.getAttribute("href")&&a.getChildCount())?void 0:"anchor"})}}),CKEDITOR.plugins.link={getSelectedLink:function(d){var e=d.getSelection(),c=e.getSelectedElement();return c&&c.is("a")?c:(e=e.getRanges()[0])?(e.shrink(CKEDITOR.SHRINK_TEXT),d.elementPath(e.getCommonAncestor()).contains("a",1)):null},getEditorAnchors:function(d){for(var h,e=d.editable(),c=e.isInline()&&!d.plugins.divarea?d.document:e,a=c.getElementsByTag("a"),e=[],b=0;h=a.getItem(b++);)(h.data("cke-saved-name")||h.hasAttribute("name"))&&e.push({name:h.data("cke-saved-name")||h.getAttribute("name"),id:h.getAttribute("id")});
if(this.fakeAnchor)for(c=c.getElementsByTag("img"),b=0;h=c.getItem(b++);)(h=this.tryRestoreFakeAnchor(d,h))&&e.push({name:h.getAttribute("name"),id:h.getAttribute("id")});return e},fakeAnchor:CKEDITOR.env.opera||CKEDITOR.env.webkit,synAnchorSelector:CKEDITOR.env.ie,emptyAnchorFix:CKEDITOR.env.ie&&8>CKEDITOR.env.version,tryRestoreFakeAnchor:function(d,e){if(e&&e.data("cke-real-element-type")&&"anchor"==e.data("cke-real-element-type")){var c=d.restoreRealElement(e);if(c.data("cke-saved-name"))return c}}},CKEDITOR.unlinkCommand=function(){},CKEDITOR.unlinkCommand.prototype={exec:function(d){var e=new CKEDITOR.style({element:"a",type:CKEDITOR.STYLE_INLINE,alwaysRemoveElement:1});
d.removeStyle(e)},refresh:function(d,e){var c=e.lastElement&&e.lastElement.getAscendant("a",!0);this.setState(c&&"a"==c.getName()&&c.getAttribute("href")&&c.getChildCount()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},contextSensitive:1,startDisabled:1,requiredContent:"a[href]"},CKEDITOR.removeAnchorCommand=function(){},CKEDITOR.removeAnchorCommand.prototype={exec:function(d){var a,e=d.getSelection(),c=e.createBookmarks();e&&(a=e.getSelectedElement())&&(CKEDITOR.plugins.link.fakeAnchor&&!a.getChildCount()?CKEDITOR.plugins.link.tryRestoreFakeAnchor(d,a):a.is("a"))?a.remove(1):(a=CKEDITOR.plugins.link.getSelectedLink(d))&&(a.hasAttribute("href")?(a.removeAttributes({name:1,"data-cke-saved-name":1}),a.removeClass("cke_anchor")):a.remove(1)),e.selectBookmarks(c)
},requiredContent:"a[name]"},CKEDITOR.tools.extend(CKEDITOR.config,{linkShowAdvancedTab:!0,linkShowTargetTab:!0}),function(){function d(a,b,c){function d(c){!(j=h[c?"getFirst":"getLast"]())||j.is&&j.isBlockBoundary()||!(l=b.root[c?"getPrevious":"getNext"](CKEDITOR.dom.walker.invisible(!0)))||l.is&&l.isBlockBoundary({br:1})||a.document.createElement("br")[c?"insertBefore":"insertAfter"](j)}for(var e=CKEDITOR.plugins.list.listToArray(b.root,c),f=[],g=0;g<b.contents.length;g++){var i=b.contents[g];(i=i.getAscendant("li",!0))&&!i.getCustomData("list_item_processed")&&(f.push(i),CKEDITOR.dom.element.setMarker(c,i,"list_item_processed",!0))}for(i=null,g=0;g<f.length;g++)i=f[g].getCustomData("listarray_index"),e[i].indent=-1;
for(g=i+1;g<e.length;g++)if(e[g].indent>e[g-1].indent+1){for(f=e[g-1].indent+1-e[g].indent,i=e[g].indent;e[g]&&e[g].indent>=i;)e[g].indent=e[g].indent+f,g++;g--}var j,l,h=CKEDITOR.plugins.list.arrayToList(e,c,null,a.config.enterMode,b.root.getAttribute("dir")).listNode;d(!0),d(),h.replace(b.root),a.fire("contentDomInvalidated")}function e(a,b){this.name=a,this.context=this.type=b,this.allowedContent=b+" li",this.requiredContent=b}function c(a,b,c,d){for(var e,f;e=a[d?"getLast":"getFirst"](p);)(f=e.getDirection(1))!==b.getDirection(1)&&e.setAttribute("dir",f),e.remove(),c?e[d?"insertBefore":"insertAfter"](c):b.append(e,d)}function a(a){var b;(b=function(b){var d=a[b?"getPrevious":"getNext"](l);
d&&d.type==CKEDITOR.NODE_ELEMENT&&d.is(a.getName())&&(c(a,d,null,!b),a.remove(),a=d)})(),b(1)}function b(a){return a.type==CKEDITOR.NODE_ELEMENT&&(a.getName()in CKEDITOR.dtd.$block||a.getName()in CKEDITOR.dtd.$listItem)&&CKEDITOR.dtd[a.getName()]["#"]}function h(b,d,e){b.fire("saveSnapshot"),e.enlarge(CKEDITOR.ENLARGE_LIST_ITEM_CONTENTS);var g=e.extractContents();d.trim(!1,!0);var i=d.createBookmark(),h=new CKEDITOR.dom.elementPath(d.startContainer),j=h.block,h=h.lastElement.getAscendant("li",1)||j,o=new CKEDITOR.dom.elementPath(e.startContainer),p=o.contains(CKEDITOR.dtd.$listItem),o=o.contains(CKEDITOR.dtd.$list);for(j?(j=j.getBogus())&&j.remove():o&&(j=o.getPrevious(l))&&m(j)&&j.remove(),(j=g.getLast())&&j.type==CKEDITOR.NODE_ELEMENT&&j.is("br")&&j.remove(),(j=d.startContainer.getChild(d.startOffset))?g.insertBefore(j):d.startContainer.append(g),p&&(g=f(p))&&(h.contains(p)?(c(g,p.getParent(),p),g.remove()):h.append(g));e.checkStartOfBlock()&&e.checkEndOfBlock()&&(o=e.startPath(),g=o.block,g);)g.is("li")&&(h=g.getParent(),g.equals(h.getLast(l))&&g.equals(h.getFirst(l))&&(g=h)),e.moveToPosition(g,CKEDITOR.POSITION_BEFORE_START),g.remove();
e=e.clone(),g=b.editable(),e.setEndAt(g,CKEDITOR.POSITION_BEFORE_END),e=new CKEDITOR.dom.walker(e),e.evaluator=function(a){return l(a)&&!m(a)},(e=e.next())&&e.type==CKEDITOR.NODE_ELEMENT&&e.getName()in CKEDITOR.dtd.$list&&a(e),d.moveToBookmark(i),d.select(),b.fire("saveSnapshot")}function f(a){return(a=a.getLast(l))&&a.type==CKEDITOR.NODE_ELEMENT&&a.getName()in i?a:null}var i={ol:1,ul:1},g=CKEDITOR.dom.walker.whitespaces(),j=CKEDITOR.dom.walker.bookmark(),l=function(a){return!(g(a)||j(a))},m=CKEDITOR.dom.walker.bogus();CKEDITOR.plugins.list={listToArray:function(a,b,c,d,e){if(!i[a.getName()])return[];d||(d=0),c||(c=[]);for(var f=0,g=a.getChildCount();g>f;f++){var h=a.getChild(f);
if(h.type==CKEDITOR.NODE_ELEMENT&&h.getName()in CKEDITOR.dtd.$list&&CKEDITOR.plugins.list.listToArray(h,b,c,d+1),"li"==h.$.nodeName.toLowerCase()){var j={parent:a,indent:d,element:h,contents:[]};e?j.grandparent=e:(j.grandparent=a.getParent(),j.grandparent&&"li"==j.grandparent.$.nodeName.toLowerCase()&&(j.grandparent=j.grandparent.getParent())),b&&CKEDITOR.dom.element.setMarker(b,h,"listarray_index",c.length),c.push(j);for(var o,l=0,m=h.getChildCount();m>l;l++)o=h.getChild(l),o.type==CKEDITOR.NODE_ELEMENT&&i[o.getName()]?CKEDITOR.plugins.list.listToArray(o,b,c,d+1,j.grandparent):j.contents.push(o)}}return c},arrayToList:function(a,b,c,d,e){if(c||(c=0),!a||a.length<c+1)return null;
for(var f,A,D,g=a[c].parent.getDocument(),h=new CKEDITOR.dom.documentFragment(g),m=null,o=c,p=Math.max(a[c].indent,0),y=null,G=d==CKEDITOR.ENTER_P?"p":"div";;){var C=a[o];if(f=C.grandparent,A=C.element.getDirection(1),C.indent==p){for(m&&a[o].parent.getName()==m.getName()||(m=a[o].parent.clone(!1,1),e&&m.setAttribute("dir",e),h.append(m)),y=m.append(C.element.clone(0,1)),A!=m.getDirection(1)&&y.setAttribute("dir",A),f=0;f<C.contents.length;f++)y.append(C.contents[f].clone(1,1));o++}else if(C.indent==Math.max(p,0)+1)C=a[o-1].element.getDirection(1),o=CKEDITOR.plugins.list.arrayToList(a,null,o,d,C!=A?A:null),!y.getChildCount()&&CKEDITOR.env.needsNbspFiller&&!(g.$.documentMode>7)&&y.append(g.createText("Â ")),y.append(o.listNode),o=o.nextIndex;
else{if(-1!=C.indent||c||!f)return null;i[f.getName()]?(y=C.element.clone(!1,!0),A!=f.getDirection(1)&&y.setAttribute("dir",A)):y=new CKEDITOR.dom.documentFragment(g);var H,M,m=f.getDirection(1)!=A,F=C.element,E=F.getAttribute("class"),J=F.getAttribute("style"),L=y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&(d!=CKEDITOR.ENTER_BR||m||J||E),T=C.contents.length;for(f=0;T>f;f++)if(H=C.contents[f],j(H)&&T>1)L?M=H.clone(1,1):y.append(H.clone(1,1));else if(H.type==CKEDITOR.NODE_ELEMENT&&H.isBlockBoundary()){m&&!H.getDirection()&&H.setAttribute("dir",A),D=H;var K=F.getAttribute("style");K&&D.setAttribute("style",K.replace(/([^;])$/,"$1;")+(D.getAttribute("style")||"")),E&&H.addClass(E),D=null,M&&(y.append(M),M=null),y.append(H.clone(1,1))
}else L?(D||(D=g.createElement(G),y.append(D),m&&D.setAttribute("dir",A)),J&&D.setAttribute("style",J),E&&D.setAttribute("class",E),M&&(D.append(M),M=null),D.append(H.clone(1,1))):y.append(H.clone(1,1));M&&((D||y).append(M),M=null),y.type==CKEDITOR.NODE_DOCUMENT_FRAGMENT&&o!=a.length-1&&(CKEDITOR.env.needsBrFiller&&(A=y.getLast())&&A.type==CKEDITOR.NODE_ELEMENT&&A.is("br")&&A.remove(),A=y.getLast(l),(!A||!(A.type==CKEDITOR.NODE_ELEMENT&&A.is(CKEDITOR.dtd.$block)))&&y.append(g.createElement("br"))),A=y.$.nodeName.toLowerCase(),("div"==A||"p"==A)&&y.appendBogus(),h.append(y),m=null,o++}if(D=null,a.length<=o||Math.max(a[o].indent,0)<p)break}if(b)for(a=h.getFirst();a;){if(a.type==CKEDITOR.NODE_ELEMENT&&(CKEDITOR.dom.element.clearMarkers(b,a),a.getName()in CKEDITOR.dtd.$listItem&&(c=a,g=e=d=void 0,d=c.getDirection()))){for(e=c.getParent();e&&!(g=e.getDirection());)e=e.getParent();
d==g&&c.removeAttribute("dir")}a=a.getNextSourceNode()}return{listNode:h,nextIndex:o}}};var o=/^h[1-6]$/,p=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_ELEMENT);e.prototype={exec:function(b){this.refresh(b,b.elementPath());var c=b.config,e=b.getSelection(),f=e&&e.getRanges();if(this.state==CKEDITOR.TRISTATE_OFF){var g=b.editable();if(g.getFirst(l)){var h=1==f.length&&f[0];(c=h&&h.getEnclosedNode())&&c.is&&this.type==c.getName()&&this.setState(CKEDITOR.TRISTATE_ON)}else c.enterMode==CKEDITOR.ENTER_BR?g.appendBogus():f[0].fixBlock(1,c.enterMode==CKEDITOR.ENTER_P?"p":"div"),e.selectRanges(f)}for(var c=e.createBookmarks(!0),g=[],j={},f=f.createIterator(),m=0;(h=f.getNextRange())&&++m;){var p=h.getBoundaryNodes(),q=p.startNode,w=p.endNode;
for(q.type==CKEDITOR.NODE_ELEMENT&&"td"==q.getName()&&h.setStartAt(p.startNode,CKEDITOR.POSITION_AFTER_START),w.type==CKEDITOR.NODE_ELEMENT&&"td"==w.getName()&&h.setEndAt(p.endNode,CKEDITOR.POSITION_BEFORE_END),h=h.createIterator(),h.forceBrBreak=this.state==CKEDITOR.TRISTATE_OFF;p=h.getNextParagraph();)if(!p.getCustomData("list_block")){CKEDITOR.dom.element.setMarker(j,p,"list_block",1);for(var A,y=b.elementPath(p),q=y.elements,w=0,y=y.blockLimit,D=q.length-1;D>=0&&(A=q[D]);D--)if(i[A.getName()]&&y.contains(A)){y.removeCustomData("list_group_object_"+m),(q=A.getCustomData("list_group_object"))?q.contents.push(p):(q={root:A,contents:[p]},g.push(q),CKEDITOR.dom.element.setMarker(j,A,"list_group_object",q)),w=1;
break}w||(w=y,w.getCustomData("list_group_object_"+m)?w.getCustomData("list_group_object_"+m).contents.push(p):(q={root:w,contents:[p]},CKEDITOR.dom.element.setMarker(j,w,"list_group_object_"+m,q),g.push(q)))}}for(A=[];g.length>0;)if(q=g.shift(),this.state==CKEDITOR.TRISTATE_OFF)if(i[q.root.getName()]){for(f=b,m=q,q=j,h=A,w=CKEDITOR.plugins.list.listToArray(m.root,q),y=[],p=0;p<m.contents.length;p++)D=m.contents[p],(D=D.getAscendant("li",!0))&&!D.getCustomData("list_item_processed")&&(y.push(D),CKEDITOR.dom.element.setMarker(q,D,"list_item_processed",!0));for(var D=m.root.getDocument(),G=void 0,C=void 0,p=0;p<y.length;p++){var F=y[p].getCustomData("listarray_index"),G=w[F].parent;
G.is(this.type)||(C=D.createElement(this.type),G.copyAttributes(C,{start:1,type:1}),C.removeStyle("list-style-type"),w[F].parent=C)}for(q=CKEDITOR.plugins.list.arrayToList(w,q,null,f.config.enterMode),w=void 0,y=q.listNode.getChildCount(),p=0;y>p&&(w=q.listNode.getChild(p));p++)w.getName()==this.type&&h.push(w);q.listNode.replace(m.root),f.fire("contentDomInvalidated")}else{for(w=b,p=q,h=A,y=p.contents,f=p.root.getDocument(),m=[],1==y.length&&y[0].equals(p.root)&&(q=f.createElement("div"),y[0].moveChildren&&y[0].moveChildren(q),y[0].append(q),y[0]=q),p=p.contents[0].getParent(),D=0;D<y.length;D++)p=p.getCommonAncestor(y[D].getParent());for(G=w.config.useComputedState,w=q=void 0,G=void 0===G||G,D=0;D<y.length;D++)for(C=y[D];F=C.getParent();){if(F.equals(p)){m.push(C),!w&&C.getDirection()&&(w=1),C=C.getDirection(G),null!==q&&(q=q&&q!=C?null:C);
break}C=F}if(!(m.length<1)){for(y=m[m.length-1].getNext(),D=f.createElement(this.type),h.push(D),G=h=void 0;m.length;)h=m.shift(),G=f.createElement("li"),h.is("pre")||o.test(h.getName())||"false"==h.getAttribute("contenteditable")?h.appendTo(G):(h.copyAttributes(G),q&&h.getDirection()&&(G.removeStyle("direction"),G.removeAttribute("dir")),h.moveChildren(G),h.remove()),G.appendTo(D);q&&w&&D.setAttribute("dir",q),y?D.insertBefore(y):D.appendTo(p)}}else this.state==CKEDITOR.TRISTATE_ON&&i[q.root.getName()]&&d.call(this,b,q,j);for(D=0;D<A.length;D++)a(A[D]);CKEDITOR.dom.element.clearAllMarkers(j),e.selectBookmarks(c),b.focus()},refresh:function(a,b){var c=b.contains(i,1),d=b.blockLimit||b.root;
this.setState(c&&d.contains(c)&&c.is(this.type)?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("list",{requires:"indentlist",init:function(a){a.blockless||(a.addCommand("numberedlist",new e("numberedlist","ol")),a.addCommand("bulletedlist",new e("bulletedlist","ul")),a.ui.addButton&&(a.ui.addButton("NumberedList",{label:a.lang.list.numberedlist,command:"numberedlist",directional:!0,toolbar:"list,10"}),a.ui.addButton("BulletedList",{label:a.lang.list.bulletedlist,command:"bulletedlist",directional:!0,toolbar:"list,20"})),a.on("key",function(c){var d=c.data.keyCode;if("wysiwyg"==a.mode&&d in{8:1,46:1}){var e=a.getSelection().getRanges()[0],g=e&&e.startPath();
if(e&&e.collapsed){var j=8==d,o=a.editable(),p=new CKEDITOR.dom.walker(e.clone());if(p.evaluator=function(a){return l(a)&&!m(a)},p.guard=function(a,b){return!(b&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("table"))},d=e.clone(),j){var x,q;(x=g.contains(i))&&e.checkBoundaryOfElement(x,CKEDITOR.START)&&(x=x.getParent())&&x.is("li")&&(x=f(x))?(q=x,x=x.getPrevious(l),d.moveToPosition(x&&m(x)?x:q,CKEDITOR.POSITION_BEFORE_START)):(p.range.setStartAt(o,CKEDITOR.POSITION_AFTER_START),p.range.setEnd(e.startContainer,e.startOffset),(x=p.previous())&&x.type==CKEDITOR.NODE_ELEMENT&&(x.getName()in i||x.is("li"))&&(x.is("li")||(p.range.selectNodeContents(x),p.reset(),p.evaluator=b,x=p.previous()),q=x,d.moveToElementEditEnd(q))),q?(h(a,d,e),c.cancel()):(d=g.contains(i))&&e.checkBoundaryOfElement(d,CKEDITOR.START)&&(q=d.getFirst(l),e.checkBoundaryOfElement(q,CKEDITOR.START)&&(x=d.getPrevious(l),f(q)?x&&(e.moveToElementEditEnd(x),e.select()):a.execCommand("outdent"),c.cancel()))
}else(q=g.contains("li"))?(p.range.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),o=(g=q.getLast(l))&&b(g)?g:q,q=0,(x=p.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.getName()in i&&x.equals(g)?(q=1,x=p.next()):e.checkBoundaryOfElement(o,CKEDITOR.END)&&(q=1),q&&x&&(e=e.clone(),e.moveToElementEditStart(x),h(a,d,e),c.cancel())):(p.range.setEndAt(o,CKEDITOR.POSITION_BEFORE_END),(x=p.next())&&x.type==CKEDITOR.NODE_ELEMENT&&x.is(i)&&(x=x.getFirst(l),g.block&&e.checkStartOfBlock()&&e.checkEndOfBlock()?(g.block.remove(),e.moveToElementEditStart(x),e.select()):f(x)?(e.moveToElementEditStart(x),e.select()):(e=e.clone(),e.moveToElementEditStart(x),h(a,d,e)),c.cancel()));setTimeout(function(){a.selectionChange(1)
})}}}))}})}(),function(){function d(a,b,c){return l(b)&&l(c)&&c.equals(b.getNext(function(a){return!(U(a)||Z(a)||m(a))}))}function e(a){this.upper=a[0],this.lower=a[1],this.set.apply(this,a.slice(2))}function c(a){var b=a.element;if(b&&l(b)&&(b=b.getAscendant(a.triggers,!0))&&a.editable.contains(b)){var c=h(b,!0);if("true"==c.getAttribute("contenteditable"))return b;if(c.is(a.triggers))return c}return null}function a(a,b,c){return r(a,b),r(a,c),a=b.size.bottom,c=c.size.top,a&&c?0|(a+c)/2:a||c}function b(a,b,c){return b=b[c?"getPrevious":"getNext"](function(b){return b&&b.type==CKEDITOR.NODE_TEXT&&!U(b)||l(b)&&!m(b)&&!j(a,b)})}function h(a,b){if(a.data("cke-editable"))return null;
for(b||(a=a.getParent());a&&!a.data("cke-editable");){if(a.hasAttribute("contenteditable"))return a;a=a.getParent()}return null}function f(a){var b=a.doc,c=y('<span contenteditable="false" style="'+W+"position:absolute;border-top:1px dashed "+a.boxColor+'"></span>',b),d=this.path+"images/"+(A.hidpi?"hidpi/":"")+"icon.png";for(q(c,{attach:function(){return this.wrap.getParent()||this.wrap.appendTo(a.editable,!0),this},lineChildren:[q(y('<span title="'+a.editor.lang.magicline.title+'" contenteditable="false">&#8629;</span>',b),{base:W+"height:17px;width:17px;"+(a.rtl?"left":"right")+":17px;background:url("+d+") center no-repeat "+a.boxColor+";cursor:pointer;"+(A.hc?"font-size: 15px;line-height:14px;border:1px solid #fff;text-align:center;":"")+(A.hidpi?"background-size: 9px 10px;":""),looks:["top:-8px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px",1),"top:-17px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","2px 2px 0px 0px",1),"top:-1px;"+CKEDITOR.tools.cssVendorPrefix("border-radius","0px 0px 2px 2px",1)]}),q(y(O,b),{base:t+"left:0px;border-left-color:"+a.boxColor+";",looks:["border-width:8px 0 8px 8px;top:-8px","border-width:8px 0 0 8px;top:-8px","border-width:0 0 8px 8px;top:0px"]}),q(y(O,b),{base:t+"right:0px;border-right-color:"+a.boxColor+";",looks:["border-width:8px 8px 8px 0;top:-8px","border-width:8px 8px 0 0;top:-8px","border-width:0 8px 8px 0;top:0px"]})],detach:function(){return this.wrap.getParent()&&this.wrap.remove(),this
},mouseNear:function(){r(a,this);var b=a.holdDistance,c=this.size;return c&&a.mouse.y>c.top-b&&a.mouse.y<c.bottom+b&&a.mouse.x>c.left-b&&a.mouse.x<c.right+b?!0:!1},place:function(){var b=a.view,c=a.editable,d=a.trigger,e=d.upper,f=d.lower,g=e||f,h=g.getParent(),i={};this.trigger=d,e&&r(a,e,!0),f&&r(a,f,!0),r(a,h,!0),a.inInlineMode&&B(a,!0),h.equals(c)?(i.left=b.scroll.x,i.right=-b.scroll.x,i.width=""):(i.left=g.size.left-g.size.margin.left+b.scroll.x-(a.inInlineMode?b.editable.left+b.editable.border.left:0),i.width=g.size.outerWidth+g.size.margin.left+g.size.margin.right+b.scroll.x,i.right=""),e&&f?i.top=e.size.margin.bottom===f.size.margin.top?0|e.size.bottom+e.size.margin.bottom/2:e.size.margin.bottom<f.size.margin.top?e.size.bottom+e.size.margin.bottom:e.size.bottom+e.size.margin.bottom-f.size.margin.top:e?f||(i.top=e.size.bottom+e.size.margin.bottom):i.top=f.size.top-f.size.margin.top,d.is(T)||i.top>b.scroll.y-15&&i.top<b.scroll.y+5?(i.top=a.inInlineMode?0:b.scroll.y,this.look(T)):d.is(M)||i.top>b.pane.bottom-5&&i.top<b.pane.bottom+15?(i.top=a.inInlineMode?b.editable.height+b.editable.padding.top+b.editable.padding.bottom:b.pane.bottom-1,this.look(M)):(a.inInlineMode&&(i.top=i.top-(b.editable.top+b.editable.border.top)),this.look(K)),a.inInlineMode&&(i.top--,i.top=i.top+b.editable.scroll.top,i.left=i.left+b.editable.scroll.left);
for(var j in i)i[j]=CKEDITOR.tools.cssLength(i[j]);this.setStyles(i)},look:function(a){if(this.oldLook!=a){for(var c,b=this.lineChildren.length;b--;)(c=this.lineChildren[b]).setAttribute("style",c.base+c.looks[0|a/2]);this.oldLook=a}},wrap:new w("span",a.doc)}),b=c.lineChildren.length;b--;)c.lineChildren[b].appendTo(c);c.look(K),c.appendTo(c.wrap),c.unselectable(),c.lineChildren[0].on("mouseup",function(b){c.detach(),i(a,function(b){var c=a.line.trigger;b[c.is(F)?"insertBefore":"insertAfter"](c.is(F)?c.lower:c.upper)},!0),a.editor.focus(),!A.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),b.data.preventDefault(!0)}),c.on("mousedown",function(a){a.data.preventDefault(!0)
}),a.line=c}function i(a,b,c){var f,d=new CKEDITOR.dom.range(a.doc),e=a.editor;A.ie&&a.enterMode==CKEDITOR.ENTER_BR?f=a.doc.createText(I):(f=(f=h(a.element,!0))&&f.data("cke-enter-mode")||a.enterMode,f=new w(C[f],a.doc),f.is("br")||a.doc.createText(I).appendTo(f)),c&&e.fire("saveSnapshot"),b(f),d.moveToPosition(f,CKEDITOR.POSITION_AFTER_START),e.getSelection().selectRanges([d]),a.hotNode=f,c&&e.fire("saveSnapshot")}function g(a,d){return{canUndo:!0,modes:{wysiwyg:1},exec:function(){function e(b){var c=A.ie&&A.version<9?" ":I,f=a.hotNode&&a.hotNode.getText()==c&&a.element.equals(a.hotNode)&&a.lastCmdDirection===!!d;i(a,function(c){f&&a.hotNode&&a.hotNode.remove(),c[d?"insertAfter":"insertBefore"](b),c.setAttributes({"data-cke-magicline-hot":1,"data-cke-magicline-dir":!!d}),a.lastCmdDirection=!!d
}),!A.ie&&a.enterMode!=CKEDITOR.ENTER_BR&&a.hotNode.scrollIntoView(),a.line.detach()}return function(f){var g,f=f.getSelection().getStartElement(),f=f.getAscendant(S,1);if(!k(a,f)&&f&&!f.equals(a.editable)&&!f.contains(a.editable)){(g=h(f))&&"false"==g.getAttribute("contenteditable")&&(f=g),a.element=f,g=b(a,f,!d);var i;l(g)&&g.is(a.triggers)&&g.is(R)&&(!b(a,g,!d)||(i=b(a,g,!d))&&l(i)&&i.is(a.triggers))?e(g):(i=c(a,f),l(i)&&(b(a,i,!d)?(f=b(a,i,!d))&&l(f)&&f.is(a.triggers)&&e(i):e(i)))}}}()}}function j(a,b){if(!b||b.type!=CKEDITOR.NODE_ELEMENT||!b.$)return!1;var c=a.line;return c.wrap.equals(b)||c.wrap.contains(b)}function l(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&a.$
}function m(a){if(!l(a))return!1;var b;return(b=o(a))||(l(a)?(b={left:1,right:1,center:1},b=!(!b[a.getComputedStyle("float")]&&!b[a.getAttribute("align")])):b=!1),b}function o(a){return!!{absolute:1,fixed:1}[a.getComputedStyle("position")]}function p(a,b){return l(b)?b.is(a.triggers):null}function k(a,b){if(!b)return!1;for(var c=b.getParents(1),d=c.length;d--;)for(var e=a.tabuList.length;e--;)if(c[d].hasAttribute(a.tabuList[e]))return!0;return!1}function n(a,b,c){return(b=b[c?"getLast":"getFirst"](function(b){return a.isRelevant(b)&&!b.is(N)}))?(r(a,b),c?b.size.top>a.mouse.y:b.size.bottom<a.mouse.y):!1}function u(a){var b=a.editable,c=a.mouse,d=a.view,f=a.triggerOffset;
B(a);var g=c.y>(a.inInlineMode?d.editable.top+d.editable.height/2:Math.min(d.editable.height,d.pane.height)/2),b=b[g?"getLast":"getFirst"](function(a){return!(U(a)||Z(a))});return b?(j(a,b)&&(b=a.line.wrap[g?"getPrevious":"getNext"](function(a){return!(U(a)||Z(a))})),l(b)&&!m(b)&&p(a,b)?(r(a,b),!g&&b.size.top>=0&&c.y>0&&c.y<b.size.top+f?(a=a.inInlineMode||0===d.scroll.y?T:K,new e([null,b,F,L,a])):g&&b.size.bottom<=d.pane.height&&c.y>b.size.bottom-f&&c.y<d.pane.height?(a=a.inInlineMode||b.size.bottom>d.pane.height-f&&b.size.bottom<d.pane.height?M:K,new e([b,null,E,L,a])):null):null):null}function v(a){var d=a.mouse,f=a.view,g=a.triggerOffset,h=c(a);if(!h)return null;
r(a,h);var j,k,g=Math.min(g,0|h.size.outerHeight/2),i=[];if(d.y>h.size.top-1&&d.y<h.size.top+g)k=!1;else{if(!(d.y>h.size.bottom-g&&d.y<h.size.bottom+1))return null;k=!0}if(m(h)||n(a,h,k)||h.getParent().is(Q))return null;var t=b(a,h,!k);if(t){if(t&&t.type==CKEDITOR.NODE_TEXT)return null;if(l(t)){if(m(t)||!p(a,t)||t.getParent().is(Q))return null;i=[t,h][k?"reverse":"concat"]().concat([J,L])}}else h.equals(a.editable[k?"getLast":"getFirst"](a.isRelevant))?(B(a),k&&d.y>h.size.bottom-g&&d.y<f.pane.height&&h.size.bottom>f.pane.height-g&&h.size.bottom<f.pane.height?j=M:d.y>0&&d.y<h.size.top+g&&(j=T)):j=K,i=[null,h][k?"reverse":"concat"]().concat([k?E:F,L,j,h.equals(a.editable[k?"getLast":"getFirst"](a.isRelevant))?k?M:T:K]);
return 0 in i?new e(i):null}function s(a,b,c,d){for(var e=function(){var c=A.ie?b.$.currentStyle:a.win.$.getComputedStyle(b.$,"");return A.ie?function(a){return c[CKEDITOR.tools.cssStyleToDomStyle(a)]}:function(a){return c.getPropertyValue(a)}}(),f=b.getDocumentPosition(),g={},h={},i={},j={},k=X.length;k--;)g[X[k]]=parseInt(e("border-"+X[k]+"-width"),10)||0,i[X[k]]=parseInt(e("padding-"+X[k]),10)||0,h[X[k]]=parseInt(e("margin-"+X[k]),10)||0;return(!c||d)&&z(a,d),j.top=f.y-(c?0:a.view.scroll.y),j.left=f.x-(c?0:a.view.scroll.x),j.outerWidth=b.$.offsetWidth,j.outerHeight=b.$.offsetHeight,j.height=j.outerHeight-(i.top+i.bottom+g.top+g.bottom),j.width=j.outerWidth-(i.left+i.right+g.left+g.right),j.bottom=j.top+j.outerHeight,j.right=j.left+j.outerWidth,a.inInlineMode&&(j.scroll={top:b.$.scrollTop,left:b.$.scrollLeft}),q({border:g,padding:i,margin:h,ignoreScroll:c},j,!0)
}function r(a,b,c){if(!l(b))return b.size=null;if(b.size){if(b.size.ignoreScroll==c&&b.size.date>new Date-V)return null}else b.size={};return q(b.size,s(a,b,c),{date:+new Date},!0)}function B(a,b){a.view.editable=s(a,a.editable,b,!0)}function z(a,b){a.view||(a.view={});var c=a.view;if(b||!(c&&c.date>new Date-V)){var d=a.win,c=d.getScrollPosition(),d=d.getViewPaneSize();q(a.view,{scroll:{x:c.x,y:c.y,width:a.doc.$.documentElement.scrollWidth-d.width,height:a.doc.$.documentElement.scrollHeight-d.height},pane:{width:d.width,height:d.height,bottom:d.height+c.y},date:+new Date},!0)}}function x(a,b,c,d){for(var f=d,g=d,h=0,i=!1,j=!1,k=a.view.pane.height,l=a.mouse;l.y+h<k&&l.y-h>0&&(i||(i=b(f,d)),j||(j=b(g,d)),!i&&l.y-h>0&&(f=c(a,{x:l.x,y:l.y-h})),!j&&l.y+h<k&&(g=c(a,{x:l.x,y:l.y+h})),!i||!j);)h+=2;
return new e([f,g,null,null])}CKEDITOR.plugins.add("magicline",{init:function(a){var n,p,O,d=a.config,h=d.magicline_triggerOffset||30,t={editor:a,enterMode:d.enterMode,triggerOffset:h,holdDistance:0|h*(d.magicline_holdDistance||.5),boxColor:d.magicline_color||"#ff0000",rtl:"rtl"==d.contentsLangDirection,tabuList:["data-cke-hidden-sel"].concat(d.magicline_tabuList||[]),triggers:d.magicline_everywhere?S:{table:1,hr:1,div:1,ul:1,ol:1,dl:1,form:1,blockquote:1}};t.isRelevant=function(a){return l(a)&&!j(t,a)&&!m(a)},a.on("contentDom",function(){var h=a.editable(),l=a.document,m=a.window;q(t,{editable:h,inInlineMode:h.isInline(),doc:l,win:m,hotNode:null},!0),t.boundary=t.inInlineMode?t.editable:t.doc.getDocumentElement(),h.is(G.$inline)||(t.inInlineMode&&!o(h)&&h.setStyles({position:"relative",top:null,left:null}),f.call(this,t),z(t),h.attachListener(a,"beforeUndoImage",function(){t.line.detach()
}),h.attachListener(a,"beforeGetData",function(){t.line.wrap.getParent()&&(t.line.detach(),a.once("getData",function(){t.line.attach()},null,null,1e3))},null,null,0),h.attachListener(t.inInlineMode?l:l.getWindow().getFrame(),"mouseout",function(b){if("wysiwyg"==a.mode)if(t.inInlineMode){var c=b.data.$.clientX,b=b.data.$.clientY;z(t),B(t,!0);var d=t.view.editable,e=t.view.scroll;c>d.left-e.x&&c<d.right-e.x&&b>d.top-e.y&&b<d.bottom-e.y||(clearTimeout(O),O=null,t.line.detach())}else clearTimeout(O),O=null,t.line.detach()}),h.attachListener(h,"keyup",function(){t.hiddenMode=0}),h.attachListener(h,"keydown",function(b){if("wysiwyg"==a.mode)switch(b=b.data.getKeystroke(),a.getSelection().getStartElement(),b){case 2228240:case 16:t.hiddenMode=1,t.line.detach()
}}),h.attachListener(t.inInlineMode?h:l,"mousemove",function(b){if(p=!0,"wysiwyg"==a.mode&&!a.readOnly&&!O){var c={x:b.data.$.clientX,y:b.data.$.clientY};O=setTimeout(function(){t.mouse=c,O=t.trigger=null,z(t),p&&!t.hiddenMode&&a.focusManager.hasFocus&&!t.line.mouseNear()&&(t.element=P(t,!0))&&((t.trigger=u(t)||v(t)||aa(t))&&!k(t,t.trigger.upper||t.trigger.lower)?t.line.attach().place():(t.trigger=null,t.line.detach()),p=!1)},30)}}),h.attachListener(m,"scroll",function(){"wysiwyg"==a.mode&&(t.line.detach(),A.webkit&&(t.hiddenMode=1,clearTimeout(n),n=setTimeout(function(){t.mouseDown||(t.hiddenMode=0)},50)))}),h.attachListener(D?l:m,"mousedown",function(){"wysiwyg"==a.mode&&(t.line.detach(),t.hiddenMode=1,t.mouseDown=1)
}),h.attachListener(D?l:m,"mouseup",function(){t.hiddenMode=0,t.mouseDown=0}),a.addCommand("accessPreviousSpace",g(t)),a.addCommand("accessNextSpace",g(t,!0)),a.setKeystroke([[d.magicline_keystrokePrevious,"accessPreviousSpace"],[d.magicline_keystrokeNext,"accessNextSpace"]]),a.on("loadSnapshot",function(){var b,c,d,e;for(e in{p:1,br:1,div:1})for(b=a.document.getElementsByTag(e),d=b.count();d--;)if((c=b.getItem(d)).data("cke-magicline-hot"))return t.hotNode=c,void(t.lastCmdDirection="true"===c.data("cke-magicline-dir")?!0:!1)}),this.backdoor={accessFocusSpace:i,boxTrigger:e,isLine:j,getAscendantTrigger:c,getNonEmptyNeighbour:b,getSize:s,that:t,triggerEdge:v,triggerEditable:u,triggerExpand:aa})
},this)}});var q=CKEDITOR.tools.extend,w=CKEDITOR.dom.element,y=w.createFromHtml,A=CKEDITOR.env,D=CKEDITOR.env.ie&&CKEDITOR.env.version<9,G=CKEDITOR.dtd,C={},F=128,E=64,J=32,L=16,H=8,T=4,M=2,K=1,I="Â ",Q=G.$listItem,N=G.$tableContent,R=q({},G.$nonEditable,G.$empty),S=G.$block,V=100,W="width:0px;height:0px;padding:0px;margin:0px;display:block;z-index:9999;color:#fff;position:absolute;font-size: 0px;line-height:0px;",t=W+"border-color:transparent;display:block;border-style:solid;",O="<span>"+I+"</span>";C[CKEDITOR.ENTER_BR]="br",C[CKEDITOR.ENTER_P]="p",C[CKEDITOR.ENTER_DIV]="div",e.prototype={set:function(a,b,c){return this.properties=a+b+(c||K),this},is:function(a){return(this.properties&a)==a
}};var P=function(){return function(a,b,c){if(!a.mouse)return null;var d=a.doc,e=a.line.wrap,c=c||a.mouse,f=new CKEDITOR.dom.element(d.$.elementFromPoint(c.x,c.y));return b&&j(a,f)&&(e.hide(),f=new CKEDITOR.dom.element(d.$.elementFromPoint(c.x,c.y)),e.show()),!f||f.type!=CKEDITOR.NODE_ELEMENT||!f.$||A.ie&&A.version<9&&!a.boundary.equals(f)&&!a.boundary.contains(f)?null:f}}(),U=CKEDITOR.dom.walker.whitespaces(),Z=CKEDITOR.dom.walker.nodeType(CKEDITOR.NODE_COMMENT),aa=function(){function b(e){var g,h,i,f=e.element;if(!l(f)||f.contains(e.editable)||f.isReadOnly())return null;if(i=x(e,function(a,b){return!b.equals(a)},function(a,b){return P(a,!0,b)},f),g=i.upper,h=i.lower,d(e,g,h))return i.set(J,H);
if(g&&f.contains(g))for(;!g.getParent().equals(f);)g=g.getParent();else g=f.getFirst(function(a){return c(e,a)});if(h&&f.contains(h))for(;!h.getParent().equals(f);)h=h.getParent();else h=f.getLast(function(a){return c(e,a)});if(!g||!h)return null;if(r(e,g),r(e,h),!(e.mouse.y>g.size.top&&e.mouse.y<h.size.bottom))return null;for(var j,k,t,m,f=Number.MAX_VALUE;h&&!h.equals(g)&&(k=g.getNext(e.isRelevant));)j=Math.abs(a(e,g,k)-e.mouse.y),f>j&&(f=j,t=g,m=k),g=k,r(e,g);return t&&m&&e.mouse.y>t.size.top&&e.mouse.y<m.size.bottom?(i.upper=t,i.lower=m,i.set(J,H)):null}function c(a,b){return!(b&&b.type==CKEDITOR.NODE_TEXT||Z(b)||m(b)||j(a,b)||b.type==CKEDITOR.NODE_ELEMENT&&b.$&&b.is("br"))
}return function(a){var e,c=b(a);if(e=c){e=c.upper;var f=c.lower;e=!e||!f||m(f)||m(e)||f.equals(e)||e.equals(f)||f.contains(e)||e.contains(f)?!1:p(a,e)&&p(a,f)&&d(a,e,f)?!0:!1}return e?c:null}}(),X=["top","left","right","bottom"]}(),CKEDITOR.config.magicline_keystrokePrevious=CKEDITOR.CTRL+CKEDITOR.SHIFT+51,CKEDITOR.config.magicline_keystrokeNext=CKEDITOR.CTRL+CKEDITOR.SHIFT+52,function(){var d={canUndo:!1,async:!0,exec:function(e){e.getClipboardData({title:e.lang.pastetext.title},function(c){c&&e.fire("paste",{type:"text",dataValue:c.dataValue}),e.fire("afterCommandExec",{name:"pastetext",command:d,returnValue:!!c})})}};CKEDITOR.plugins.add("pastetext",{requires:"clipboard",init:function(e){e.addCommand("pastetext",d),e.ui.addButton&&e.ui.addButton("PasteText",{label:e.lang.pastetext.button,command:"pastetext",toolbar:"clipboard,40"}),e.config.forcePasteAsPlainText&&e.on("beforePaste",function(c){"html"!=c.data.type&&(c.data.type="text")
}),e.on("pasteState",function(c){e.getCommand("pastetext").setState(c.data)})}})}(),function(){function d(c,a,b){var d=CKEDITOR.cleanWord;return d?b():(c=CKEDITOR.getUrl(c.config.pasteFromWordCleanupFile||a+"filter/default.js"),CKEDITOR.scriptLoader.load(c,b,null,!0)),!d}function e(c){c.data.type="html"}CKEDITOR.plugins.add("pastefromword",{requires:"clipboard",init:function(c){var a=0,b=this.path;c.addCommand("pastefromword",{canUndo:!1,async:!0,exec:function(b){var c=this;a=1,b.once("beforePaste",e),b.getClipboardData({title:b.lang.pastefromword.title},function(a){a&&b.fire("paste",{type:"html",dataValue:a.dataValue}),b.fire("afterCommandExec",{name:"pastefromword",command:c,returnValue:!!a})
})}}),c.ui.addButton&&c.ui.addButton("PasteFromWord",{label:c.lang.pastefromword.toolbar,command:"pastefromword",toolbar:"clipboard,50"}),c.on("pasteState",function(a){c.getCommand("pastefromword").setState(a.data)}),c.on("paste",function(e){var f=e.data,i=f.dataValue;if(i&&(a||/(class=\"?Mso|style=\"[^\"]*\bmso\-|w:WordDocument)/.test(i))){var g=d(c,b,function(){g?c.fire("paste",f):(!c.config.pasteFromWordPromptCleanup||a||confirm(c.lang.pastefromword.confirmCleanup))&&(f.dataValue=CKEDITOR.cleanWord(i,c))});g&&e.cancel()}},null,null,3)}})}(),CKEDITOR.plugins.add("removeformat",{init:function(d){d.addCommand("removeFormat",CKEDITOR.plugins.removeformat.commands.removeformat),d.ui.addButton&&d.ui.addButton("RemoveFormat",{label:d.lang.removeformat.toolbar,command:"removeFormat",toolbar:"cleanup,10"})
}}),CKEDITOR.plugins.removeformat={commands:{removeformat:{exec:function(d){for(var f,e=d._.removeFormatRegex||(d._.removeFormatRegex=RegExp("^(?:"+d.config.removeFormatTags.replace(/,/g,"|")+")$","i")),c=d._.removeAttributes||(d._.removeAttributes=d.config.removeFormatAttributes.split(",")),a=CKEDITOR.plugins.removeformat.filter,b=d.getSelection().getRanges(1),h=b.createIterator();f=h.getNextRange();){f.collapsed||f.enlarge(CKEDITOR.ENLARGE_ELEMENT);var i=f.createBookmark(),g=i.startNode,j=i.endNode,l=function(b){for(var h,c=d.elementPath(b),f=c.elements,g=1;(h=f[g])&&(!h.equals(c.block)&&!h.equals(c.blockLimit));g++)e.test(h.getName())&&a(d,h)&&b.breakParent(h)
};if(l(g),j)for(l(j),g=g.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT);g&&!g.equals(j);)l=g.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT),"img"==g.getName()&&g.data("cke-realelement")||!a(d,g)||(e.test(g.getName())?g.remove(1):(g.removeAttributes(c),d.fire("removeFormatCleanup",g))),g=l;f.moveToBookmark(i)}d.forceNextSelectionCheck(),d.getSelection().selectRanges(b)}}},filter:function(d,e){for(var c=d._.removeFormatFilters||[],a=0;a<c.length;a++)if(c[a](e)===!1)return!1;return!0}},CKEDITOR.editor.prototype.addRemoveFormatFilter=function(d){this._.removeFormatFilters||(this._.removeFormatFilters=[]),this._.removeFormatFilters.push(d)},CKEDITOR.config.removeFormatTags="b,big,code,del,dfn,em,font,i,ins,kbd,q,s,samp,small,span,strike,strong,sub,sup,tt,u,var",CKEDITOR.config.removeFormatAttributes="class,style,lang,width,height,align,hspace,valign",function(){CKEDITOR.plugins.add("sourcearea",{init:function(e){function c(){this.hide(),this.setStyle("height",this.getParent().$.clientHeight+"px"),this.setStyle("width",this.getParent().$.clientWidth+"px"),this.show()
}if(e.elementMode!=CKEDITOR.ELEMENT_MODE_INLINE){var a=CKEDITOR.plugins.sourcearea;e.addMode("source",function(a){var h=e.ui.space("contents").getDocument().createElement("textarea");h.setStyles(CKEDITOR.tools.extend({width:CKEDITOR.env.ie7Compat?"99%":"100%",height:"100%",resize:"none",outline:"none","text-align":"left"},CKEDITOR.tools.cssVendorPrefix("tab-size",e.config.sourceAreaTabSize||4))),h.setAttribute("dir","ltr"),h.addClass("cke_source cke_reset cke_enable_context_menu"),e.ui.space("contents").append(h),h=e.editable(new d(e,h)),h.setData(e.getData(1)),CKEDITOR.env.ie&&(h.attachListener(e,"resize",c,h),h.attachListener(CKEDITOR.document.getWindow(),"resize",c,h),CKEDITOR.tools.setTimeout(c,0,h)),e.fire("ariaWidget",this),a()
}),e.addCommand("source",a.commands.source),e.ui.addButton&&e.ui.addButton("Source",{label:e.lang.sourcearea.toolbar,command:"source",toolbar:"mode,10"}),e.on("mode",function(){e.getCommand("source").setState("source"==e.mode?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)})}}});var d=CKEDITOR.tools.createClass({base:CKEDITOR.editable,proto:{setData:function(d){this.setValue(d),this.editor.fire("dataReady")},getData:function(){return this.getValue()},insertHtml:function(){},insertElement:function(){},insertText:function(){},setReadOnly:function(d){this[(d?"set":"remove")+"Attribute"]("readOnly","readonly")},detach:function(){d.baseProto.detach.call(this),this.clearCustomData(),this.remove()
}}})}(),CKEDITOR.plugins.sourcearea={commands:{source:{modes:{wysiwyg:1,source:1},editorFocus:!1,readOnly:1,exec:function(d){"wysiwyg"==d.mode&&d.fire("saveSnapshot"),d.getCommand("source").setState(CKEDITOR.TRISTATE_DISABLED),d.setMode("source"==d.mode?"wysiwyg":"source")},canUndo:!1}}},CKEDITOR.plugins.add("specialchar",{availableLangs:{ar:1,bg:1,ca:1,cs:1,cy:1,de:1,el:1,en:1,eo:1,es:1,et:1,fa:1,fi:1,fr:1,"fr-ca":1,gl:1,he:1,hr:1,hu:1,id:1,it:1,ja:1,km:1,ku:1,lv:1,nb:1,nl:1,no:1,pl:1,pt:1,"pt-br":1,ru:1,si:1,sk:1,sl:1,sq:1,sv:1,th:1,tr:1,ug:1,uk:1,vi:1,zh:1,"zh-cn":1},requires:"dialog",init:function(d){var e=this;CKEDITOR.dialog.add("specialchar",this.path+"dialogs/specialchar.js"),d.addCommand("specialchar",{exec:function(){var c=d.langCode,c=e.availableLangs[c]?c:e.availableLangs[c.replace(/-.*/,"")]?c.replace(/-.*/,""):"en";
CKEDITOR.scriptLoader.load(CKEDITOR.getUrl(e.path+"dialogs/lang/"+c+".js"),function(){CKEDITOR.tools.extend(d.lang.specialchar,e.langEntries[c]),d.openDialog("specialchar")})},modes:{wysiwyg:1},canUndo:!1}),d.ui.addButton&&d.ui.addButton("SpecialChar",{label:d.lang.specialchar.toolbar,command:"specialchar",toolbar:"insert,50"})}}),CKEDITOR.config.specialChars="! &quot; # $ % &amp; ' ( ) * + - . / 0 1 2 3 4 5 6 7 8 9 : ; &lt; = &gt; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~ &euro; &lsquo; &rsquo; &ldquo; &rdquo; &ndash; &mdash; &iexcl; &cent; &pound; &curren; &yen; &brvbar; &sect; &uml; &copy; &ordf; &laquo; &not; &reg; &macr; &deg; &sup2; &sup3; &acute; &micro; &para; &middot; &cedil; &sup1; &ordm; &raquo; &frac14; &frac12; &frac34; &iquest; &Agrave; &Aacute; &Acirc; &Atilde; &Auml; &Aring; &AElig; &Ccedil; &Egrave; &Eacute; &Ecirc; &Euml; &Igrave; &Iacute; &Icirc; &Iuml; &ETH; &Ntilde; &Ograve; &Oacute; &Ocirc; &Otilde; &Ouml; &times; &Oslash; &Ugrave; &Uacute; &Ucirc; &Uuml; &Yacute; &THORN; &szlig; &agrave; &aacute; &acirc; &atilde; &auml; &aring; &aelig; &ccedil; &egrave; &eacute; &ecirc; &euml; &igrave; &iacute; &icirc; &iuml; &eth; &ntilde; &ograve; &oacute; &ocirc; &otilde; &ouml; &divide; &oslash; &ugrave; &uacute; &ucirc; &uuml; &yacute; &thorn; &yuml; &OElig; &oelig; &#372; &#374 &#373 &#375; &sbquo; &#8219; &bdquo; &hellip; &trade; &#9658; &bull; &rarr; &rArr; &hArr; &diams; &asymp;".split(" "),function(){CKEDITOR.plugins.add("stylescombo",{requires:"richcombo",init:function(d){var e=d.config,c=d.lang.stylescombo,a={},b=[],h=[];
d.on("stylesSet",function(c){if(c=c.data.styles){for(var i,g,j=0,l=c.length;l>j;j++)i=c[j],d.blockless&&i.element in CKEDITOR.dtd.$block||(g=i.name,i=new CKEDITOR.style(i),(!d.filter.customConfig||d.filter.check(i))&&(i._name=g,i._.enterMode=e.enterMode,i._.weight=j+1e3*(i.type==CKEDITOR.STYLE_OBJECT?1:i.type==CKEDITOR.STYLE_BLOCK?2:3),a[g]=i,b.push(i),h.push(i)));b.sort(function(a,b){return a._.weight-b._.weight})}}),d.ui.addRichCombo("Styles",{label:c.label,title:c.panelTitle,toolbar:"styles,10",allowedContent:h,panel:{css:[CKEDITOR.skin.getPath("editor")].concat(e.contentsCss),multiSelect:!0,attributes:{"aria-label":c.panelTitle}},init:function(){var a,d,e,h,l,m;
for(l=0,m=b.length;m>l;l++)a=b[l],d=a._name,h=a.type,h!=e&&(this.startGroup(c["panelTitle"+h]),e=h),this.add(d,a.type==CKEDITOR.STYLE_OBJECT?d:a.buildPreview(),d);this.commit()},onClick:function(b){d.focus(),d.fire("saveSnapshot");var b=a[b],c=d.elementPath();d[b.checkActive(c)?"removeStyle":"applyStyle"](b),d.fire("saveSnapshot")},onRender:function(){d.on("selectionChange",function(b){for(var h,c=this.getValue(),b=b.data.path.elements,d=0,e=b.length;e>d;d++){h=b[d];for(var m in a)if(a[m].checkElementRemovable(h,!0))return void(m!=c&&this.setValue(m))}this.setValue("")},this)},onOpen:function(){var b=d.getSelection().getSelectedElement(),b=d.elementPath(b),e=[0,0,0,0];
this.showAll(),this.unmarkAll();for(var g in a){var h=a[g],l=h.type;h.checkApplicable(b,d.activeFilter)?e[l]++:this.hideItem(g),h.checkActive(b)&&this.mark(g)}e[CKEDITOR.STYLE_BLOCK]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_BLOCK]),e[CKEDITOR.STYLE_INLINE]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_INLINE]),e[CKEDITOR.STYLE_OBJECT]||this.hideGroup(c["panelTitle"+CKEDITOR.STYLE_OBJECT])},refresh:function(){var b=d.elementPath();if(b){for(var c in a)if(a[c].checkApplicable(b,d.activeFilter))return;this.setState(CKEDITOR.TRISTATE_DISABLED)}},reset:function(){a={},b=[]}})}})}(),function(){function d(a){return{editorFocus:!1,canUndo:!1,modes:{wysiwyg:1},exec:function(c){if(c.editable().hasFocus){var e,d=c.getSelection();
if(e=new CKEDITOR.dom.elementPath(d.getCommonAncestor(),d.root).contains({td:1,th:1},1)){var d=c.createRange(),g=CKEDITOR.tools.tryThese(function(){var c=e.getParent().$.cells[e.$.cellIndex+(a?-1:1)];return c.parentNode.parentNode,c},function(){var c=e.getParent(),c=c.getAscendant("table").$.rows[c.$.rowIndex+(a?-1:1)];return c.cells[a?c.cells.length-1:0]});if(g||a){if(!g)return!0;g=new CKEDITOR.dom.element(g),d.moveToElementEditStart(g),(!d.checkStartOfBlock()||!d.checkEndOfBlock())&&d.selectNodeContents(g)}else{for(var j=e.getAscendant("table").$,g=e.getParent().$.cells,j=new CKEDITOR.dom.element(j.insertRow(-1),c.document),l=0,m=g.length;m>l;l++)j.append(new CKEDITOR.dom.element(g[l],c.document).clone(!1,!1)).appendBogus();
d.moveToElementEditStart(j)}return d.select(!0),!0}}return!1}}}var e={editorFocus:!1,modes:{wysiwyg:1,source:1}},c={exec:function(a){a.container.focusNext(!0,a.tabIndex)}},a={exec:function(a){a.container.focusPrevious(!0,a.tabIndex)}};CKEDITOR.plugins.add("tab",{init:function(b){for(var h=b.config.enableTabKeyTools!==!1,f=b.config.tabSpaces||0,i="";f--;)i+="Â ";i&&b.on("key",function(a){9==a.data.keyCode&&(b.insertHtml(i),a.cancel())}),h&&b.on("key",function(a){(9==a.data.keyCode&&b.execCommand("selectNextCell")||a.data.keyCode==CKEDITOR.SHIFT+9&&b.execCommand("selectPreviousCell"))&&a.cancel()}),b.addCommand("blur",CKEDITOR.tools.extend(c,e)),b.addCommand("blurBack",CKEDITOR.tools.extend(a,e)),b.addCommand("selectNextCell",d()),b.addCommand("selectPreviousCell",d(!0))
}})}(),CKEDITOR.dom.element.prototype.focusNext=function(d,e){var a,b,h,f,i,g,c=void 0===e?this.getTabIndex():e;if(0>=c)for(i=this.getNextSourceNode(d,CKEDITOR.NODE_ELEMENT);i;){if(i.isVisible()&&0===i.getTabIndex()){h=i;break}i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT)}else for(i=this.getDocument().getBody().getFirst();i=i.getNextSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!b&&i.equals(this)){if(b=!0,d){if(!(i=i.getNextSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;a=1}}else b&&!this.contains(i)&&(a=1);if(i.isVisible()&&!((g=i.getTabIndex())<0)){if(a&&g==c){h=i;break}g>c&&(!h||!f||f>g)?(h=i,f=g):h||0!==g||(h=i,f=g)}}h&&h.focus()},CKEDITOR.dom.element.prototype.focusPrevious=function(d,e){for(var a,b,h,i,c=void 0===e?this.getTabIndex():e,f=0,g=this.getDocument().getBody().getLast();g=g.getPreviousSourceNode(!1,CKEDITOR.NODE_ELEMENT);){if(!a)if(!b&&g.equals(this)){if(b=!0,d){if(!(g=g.getPreviousSourceNode(!0,CKEDITOR.NODE_ELEMENT)))break;
a=1}}else b&&!this.contains(g)&&(a=1);if(g.isVisible()&&!((i=g.getTabIndex())<0))if(0>=c){if(a&&0===i){h=g;break}i>f&&(h=g,f=i)}else{if(a&&i==c){h=g;break}c>i&&(!h||i>f)&&(h=g,f=i)}}h&&h.focus()},function(){function d(a){this.editor=a,this.reset()}CKEDITOR.plugins.add("undo",{init:function(a){function b(a){e.enabled&&a.data.command.canUndo!==!1&&e.save()}function c(){e.enabled=a.readOnly?!1:"wysiwyg"==a.mode,e.onChange()}var e=a.undoManager=new d(a),i=a.addCommand("undo",{exec:function(){e.undo()&&(a.selectionChange(),this.fire("afterUndo"))},startDisabled:!0,canUndo:!1}),g=a.addCommand("redo",{exec:function(){e.redo()&&(a.selectionChange(),this.fire("afterRedo"))
},startDisabled:!0,canUndo:!1});a.setKeystroke([[CKEDITOR.CTRL+90,"undo"],[CKEDITOR.CTRL+89,"redo"],[CKEDITOR.CTRL+CKEDITOR.SHIFT+90,"redo"]]),e.onChange=function(){i.setState(e.undoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED),g.setState(e.redoable()?CKEDITOR.TRISTATE_OFF:CKEDITOR.TRISTATE_DISABLED)},a.on("beforeCommandExec",b),a.on("afterCommandExec",b),a.on("saveSnapshot",function(a){e.save(a.data&&a.data.contentOnly)}),a.on("contentDom",function(){a.editable().on("keydown",function(a){a=a.data.getKey(),(8==a||46==a)&&e.type(a,0)}),a.editable().on("keypress",function(a){e.type(a.data.getKey(),1)})}),a.on("beforeModeUnload",function(){"wysiwyg"==a.mode&&e.save(!0)
}),a.on("mode",c),a.on("readOnly",c),a.ui.addButton&&(a.ui.addButton("Undo",{label:a.lang.undo.undo,command:"undo",toolbar:"undo,10"}),a.ui.addButton("Redo",{label:a.lang.undo.redo,command:"redo",toolbar:"undo,20"})),a.resetUndo=function(){e.reset(),a.fire("saveSnapshot")},a.on("updateSnapshot",function(){e.currentImage&&e.update()}),a.on("lockSnapshot",function(a){e.lock(a.data&&a.data.dontUpdate)}),a.on("unlockSnapshot",e.unlock,e)}}),CKEDITOR.plugins.undo={};var e=CKEDITOR.plugins.undo.Image=function(a,b){this.editor=a,a.fire("beforeUndoImage");var c=a.getSnapshot();CKEDITOR.env.ie&&c&&(c=c.replace(/\s+data-cke-expando=".*?"/g,"")),this.contents=c,b||(this.bookmarks=(c=c&&a.getSelection())&&c.createBookmarks2(!0)),a.fire("afterUndoImage")
},c=/\b(?:href|src|name)="[^"]*?"/gi;e.prototype={equalsContent:function(a){var b=this.contents,a=a.contents;return CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.ie6Compat)&&(b=b.replace(c,""),a=a.replace(c,"")),b!=a?!1:!0},equalsSelection:function(a){var b=this.bookmarks,a=a.bookmarks;if(b||a){if(!b||!a||b.length!=a.length)return!1;for(var c=0;c<b.length;c++){var d=b[c],e=a[c];if(d.startOffset!=e.startOffset||d.endOffset!=e.endOffset||!CKEDITOR.tools.arrayCompare(d.start,e.start)||!CKEDITOR.tools.arrayCompare(d.end,e.end))return!1}}return!0}},d.prototype={type:function(a,b){var c=!b&&a!=this.lastKeystroke,d=this.editor;if(!this.typing||b&&!this.wasCharacter||c){var i=new e(d),g=this.snapshots.length;
CKEDITOR.tools.setTimeout(function(){var a=d.getSnapshot();CKEDITOR.env.ie&&(a=a.replace(/\s+data-cke-expando=".*?"/g,"")),i.contents!=a&&g==this.snapshots.length&&(this.typing=!0,this.save(!1,i,!1)||this.snapshots.splice(this.index+1,this.snapshots.length-this.index-1),this.hasUndo=!0,this.hasRedo=!1,this.modifiersCount=this.typesCount=1,this.onChange())},0,this)}this.lastKeystroke=a,(this.wasCharacter=b)?(this.modifiersCount=0,this.typesCount++,this.typesCount>25?(this.save(!1,null,!1),this.typesCount=1):setTimeout(function(){d.fire("change")},0)):(this.typesCount=0,this.modifiersCount++,this.modifiersCount>25?(this.save(!1,null,!1),this.modifiersCount=1):setTimeout(function(){d.fire("change")
},0))},reset:function(){this.lastKeystroke=0,this.snapshots=[],this.index=-1,this.limit=this.editor.config.undoStackSize||20,this.currentImage=null,this.hasRedo=this.hasUndo=!1,this.locked=null,this.resetType()},resetType:function(){this.typing=!1,delete this.lastKeystroke,this.modifiersCount=this.typesCount=0},fireChange:function(){this.hasUndo=!!this.getNextImage(!0),this.hasRedo=!!this.getNextImage(!1),this.resetType(),this.onChange()},save:function(a,b,c){if(this.locked)return!1;var d=this.snapshots;if(b||(b=new e(this.editor)),b.contents===!1)return!1;if(this.currentImage)if(b.equalsContent(this.currentImage)){if(a||b.equalsSelection(this.currentImage))return!1
}else this.editor.fire("change");return d.splice(this.index+1,d.length-this.index-1),d.length==this.limit&&d.shift(),this.index=d.push(b)-1,this.currentImage=b,c!==!1&&this.fireChange(),!0},restoreImage:function(a){var c,b=this.editor;a.bookmarks&&(b.focus(),c=b.getSelection()),this.locked=1,this.editor.loadSnapshot(a.contents),a.bookmarks?c.selectBookmarks(a.bookmarks):CKEDITOR.env.ie&&(c=this.editor.document.getBody().$.createTextRange(),c.collapse(!0),c.select()),this.locked=0,this.index=a.index,this.currentImage=this.snapshots[this.index],this.update(),this.fireChange(),b.fire("change")},getNextImage:function(a){var d,b=this.snapshots,c=this.currentImage;
if(c)if(a){for(d=this.index-1;d>=0;d--)if(a=b[d],!c.equalsContent(a))return a.index=d,a}else for(d=this.index+1;d<b.length;d++)if(a=b[d],!c.equalsContent(a))return a.index=d,a;return null},redoable:function(){return this.enabled&&this.hasRedo},undoable:function(){return this.enabled&&this.hasUndo},undo:function(){if(this.undoable()){this.save(!0);var a=this.getNextImage(!0);if(a)return this.restoreImage(a),!0}return!1},redo:function(){if(this.redoable()&&(this.save(!0),this.redoable())){var a=this.getNextImage(!1);if(a)return this.restoreImage(a),!0}return!1},update:function(a){if(!this.locked){a||(a=new e(this.editor));for(var b=this.index,c=this.snapshots;b>0&&this.currentImage.equalsContent(c[b-1]);)b-=1;
c.splice(b,this.index-b+1,a),this.index=b,this.currentImage=a}},lock:function(a){this.locked?this.locked.level++:a?this.locked={level:1}:(a=new e(this.editor,!0),this.locked={update:this.currentImage&&this.currentImage.equalsContent(a)?a:null,level:1})},unlock:function(){if(this.locked&&!--this.locked.level){var a=this.locked.update,b=a&&new e(this.editor,!0);this.locked=null,a&&!a.equalsContent(b)&&this.update()}}}}(),function(){CKEDITOR.plugins.add("templates",{requires:"dialog",init:function(c){CKEDITOR.dialog.add("templates",CKEDITOR.getUrl(this.path+"dialogs/templates.js")),c.addCommand("templates",new CKEDITOR.dialogCommand("templates")),c.ui.addButton&&c.ui.addButton("Templates",{label:c.lang.templates.button,command:"templates",toolbar:"doctools,10"})
}});var d={},e={};CKEDITOR.addTemplates=function(c,a){d[c]=a},CKEDITOR.getTemplates=function(c){return d[c]},CKEDITOR.loadTemplates=function(c,a){for(var b=[],d=0,f=c.length;f>d;d++)e[c[d]]||(b.push(c[d]),e[c[d]]=1);b.length?CKEDITOR.scriptLoader.load(b,a):setTimeout(a,0)}}(),CKEDITOR.config.templates_files=[CKEDITOR.getUrl("plugins/templates/templates/default.js")],CKEDITOR.config.templates_replaceContent=!0,CKEDITOR.plugins.add("divarea",{afterInit:function(d){d.addMode("wysiwyg",function(e){var c=CKEDITOR.dom.element.createFromHtml('<div class="cke_wysiwyg_div cke_reset" hidefocus="true"></div>');d.ui.space("contents").append(c),c=d.editable(c),c.detach=CKEDITOR.tools.override(c.detach,function(a){return function(){a.apply(this,arguments),this.remove()
}}),d.setData(d.getData(1),e),d.fire("contentDom")})}}),function(){function d(a,b){var c,b=void 0===b||b;if(b)c=a.getComputedStyle("text-align");else{for(;(!a.hasAttribute||!a.hasAttribute("align")&&!a.getStyle("text-align"))&&(c=a.getParent(),c);)a=c;c=a.getStyle("text-align")||a.getAttribute("align")||""}return c&&(c=c.replace(/(?:-(?:moz|webkit)-)?(?:start|auto)/i,"")),!c&&b&&(c="rtl"==a.getComputedStyle("direction")?"right":"left"),c}function e(a,b,c){this.editor=a,this.name=b,this.value=c,this.context="p";var b=a.config.justifyClasses,d=a.config.enterMode==CKEDITOR.ENTER_P?"p":"div";if(b){switch(c){case"left":this.cssClassName=b[0];break;case"center":this.cssClassName=b[1];
break;case"right":this.cssClassName=b[2];break;case"justify":this.cssClassName=b[3]}this.cssClassRegex=RegExp("(?:^|\\s+)(?:"+b.join("|")+")(?=$|\\s)"),this.requiredContent=d+"("+this.cssClassName+")"}else this.requiredContent=d+"{text-align}";this.allowedContent={"caption div h1 h2 h3 h4 h5 h6 p pre td th li":{propertiesOnly:!0,styles:this.cssClassName?null:"text-align",classes:this.cssClassName||null}},a.config.enterMode==CKEDITOR.ENTER_BR&&(this.allowedContent.div=!0)}function c(a){var b=a.editor,c=b.createRange();c.setStartBefore(a.data.node),c.setEndAfter(a.data.node);for(var e,d=new CKEDITOR.dom.walker(c);e=d.next();)if(e.type==CKEDITOR.NODE_ELEMENT)if(!e.equals(a.data.node)&&e.getDirection())c.setStartAfter(e),d=new CKEDITOR.dom.walker(c);
else{var g=b.config.justifyClasses;g&&(e.hasClass(g[0])?(e.removeClass(g[0]),e.addClass(g[2])):e.hasClass(g[2])&&(e.removeClass(g[2]),e.addClass(g[0]))),g=e.getStyle("text-align"),"left"==g?e.setStyle("text-align","right"):"right"==g&&e.setStyle("text-align","left")}}e.prototype={exec:function(a){var b=a.getSelection(),c=a.config.enterMode;if(b){for(var j,l,e=b.createBookmarks(),i=b.getRanges(),g=this.cssClassName,m=a.config.useComputedState,m=void 0===m||m,o=i.length-1;o>=0;o--)for(j=i[o].createIterator(),j.enlargeBr=c!=CKEDITOR.ENTER_BR;l=j.getNextParagraph(c==CKEDITOR.ENTER_P?"p":"div");)if(!l.isReadOnly()){l.removeAttribute("align"),l.removeStyle("text-align");
var p=g&&(l.$.className=CKEDITOR.tools.ltrim(l.$.className.replace(this.cssClassRegex,""))),k=this.state==CKEDITOR.TRISTATE_OFF&&(!m||d(l,!0)!=this.value);g?k?l.addClass(g):p||l.removeAttribute("class"):k&&l.setStyle("text-align",this.value)}a.focus(),a.forceNextSelectionCheck(),b.selectBookmarks(e)}},refresh:function(a,b){var c=b.block||b.blockLimit;this.setState("body"!=c.getName()&&d(c,this.editor.config.useComputedState)==this.value?CKEDITOR.TRISTATE_ON:CKEDITOR.TRISTATE_OFF)}},CKEDITOR.plugins.add("justify",{init:function(a){if(!a.blockless){var b=new e(a,"justifyleft","left"),d=new e(a,"justifycenter","center"),f=new e(a,"justifyright","right"),i=new e(a,"justifyblock","justify");
a.addCommand("justifyleft",b),a.addCommand("justifycenter",d),a.addCommand("justifyright",f),a.addCommand("justifyblock",i),a.ui.addButton&&(a.ui.addButton("JustifyLeft",{label:a.lang.justify.left,command:"justifyleft",toolbar:"align,10"}),a.ui.addButton("JustifyCenter",{label:a.lang.justify.center,command:"justifycenter",toolbar:"align,20"}),a.ui.addButton("JustifyRight",{label:a.lang.justify.right,command:"justifyright",toolbar:"align,30"}),a.ui.addButton("JustifyBlock",{label:a.lang.justify.block,command:"justifyblock",toolbar:"align,40"})),a.on("dirChanged",c)}}})}(),function(){CKEDITOR.plugins.liststyle={requires:"dialog,contextmenu",init:function(d){if(!d.blockless){var e;
e=new CKEDITOR.dialogCommand("numberedListStyle",{requiredContent:"ol",allowedContent:"ol{list-style-type}[start]"}),e=d.addCommand("numberedListStyle",e),d.addFeature(e),CKEDITOR.dialog.add("numberedListStyle",this.path+"dialogs/liststyle.js"),e=new CKEDITOR.dialogCommand("bulletedListStyle",{requiredContent:"ul",allowedContent:"ul{list-style-type}"}),e=d.addCommand("bulletedListStyle",e),d.addFeature(e),CKEDITOR.dialog.add("bulletedListStyle",this.path+"dialogs/liststyle.js"),d.addMenuGroup("list",108),d.addMenuItems({numberedlist:{label:d.lang.liststyle.numberedTitle,group:"list",command:"numberedListStyle"},bulletedlist:{label:d.lang.liststyle.bulletedTitle,group:"list",command:"bulletedListStyle"}}),d.contextMenu.addListener(function(c){if(!c||c.isReadOnly())return null;
for(;c;){var a=c.getName();if("ol"==a)return{numberedlist:CKEDITOR.TRISTATE_OFF};if("ul"==a)return{bulletedlist:CKEDITOR.TRISTATE_OFF};c=c.getParent()}return null})}}},CKEDITOR.plugins.add("liststyle",CKEDITOR.plugins.liststyle)}(),function(){function d(a,b){CKEDITOR.tools.extend(this,{editor:a,editable:a.editable(),doc:a.document,win:a.window},b,!0),this.frame=this.win.getFrame(),this.inline=this.editable.isInline(),this.target=this[this.inline?"editable":"doc"]}function e(a,b){CKEDITOR.tools.extend(this,b,{editor:a},!0)}function c(a,c){var d=a.editable();CKEDITOR.tools.extend(this,{editor:a,editable:d,doc:a.document,win:a.window,container:CKEDITOR.document.getBody(),winTop:CKEDITOR.document.getWindow()},c,!0),this.hidden={},this.visible={},this.inline=d.isInline(),this.inline||(this.frame=this.win.getFrame()),this.queryViewport();
var e=CKEDITOR.tools.bind(this.queryViewport,this),g=CKEDITOR.tools.bind(this.hideVisible,this),i=CKEDITOR.tools.bind(this.removeAll,this);d.attachListener(this.winTop,"resize",e),d.attachListener(this.winTop,"scroll",e),d.attachListener(this.winTop,"resize",g),d.attachListener(this.win,"scroll",g),d.attachListener(this.inline?d:this.frame,"mouseout",function(a){var b=a.data.$.clientX,a=a.data.$.clientY;this.queryViewport(),(b<=this.rect.left||b>=this.rect.right||a<=this.rect.top||a>=this.rect.bottom)&&this.hideVisible(),(0>=b||b>=this.winTopPane.width||0>=a||a>=this.winTopPane.height)&&this.hideVisible()},this),d.attachListener(a,"resize",e),d.attachListener(a,"mode",i),a.on("destroy",i),this.lineTpl=new CKEDITOR.template(f).output({lineStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},h,this.lineStyle,!0)),tipLeftStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},b,{left:"0px","border-left-color":"red","border-width":"6px 0 6px 6px"},this.tipCss,this.tipLeftStyle,!0)),tipRightStyle:CKEDITOR.tools.writeCssText(CKEDITOR.tools.extend({},b,{right:"0px","border-right-color":"red","border-width":"6px 6px 6px 0"},this.tipCss,this.tipRightStyle,!0))})
}function a(a){return a&&a.type==CKEDITOR.NODE_ELEMENT&&!(i[a.getComputedStyle("float")]||i[a.getAttribute("align")])&&!g[a.getComputedStyle("position")]}CKEDITOR.plugins.add("lineutils"),CKEDITOR.LINEUTILS_BEFORE=1,CKEDITOR.LINEUTILS_AFTER=2,CKEDITOR.LINEUTILS_INSIDE=4,d.prototype={start:function(a){var e,f,g,b=this,c=this.editor,d=this.doc,h=CKEDITOR.tools.eventsBuffer(50,function(){c.readOnly||"wysiwyg"!=c.mode||(b.relations={},e=new CKEDITOR.dom.element(d.$.elementFromPoint(f,g)),b.traverseSearch(e),isNaN(f+g)||b.pixelSearch(e,f,g),a&&a(b.relations,f,g))});this.listener=this.editable.attachListener(this.target,"mousemove",function(a){f=a.data.$.clientX,g=a.data.$.clientY,h.input()
}),this.editable.attachListener(this.inline?this.editable:this.frame,"mouseout",function(){h.reset()})},stop:function(){this.listener&&this.listener.removeListener()},getRange:function(){var a={};return a[CKEDITOR.LINEUTILS_BEFORE]=CKEDITOR.POSITION_BEFORE_START,a[CKEDITOR.LINEUTILS_AFTER]=CKEDITOR.POSITION_AFTER_END,a[CKEDITOR.LINEUTILS_INSIDE]=CKEDITOR.POSITION_AFTER_START,function(b){var c=this.editor.createRange();return c.moveToPosition(this.relations[b.uid].element,a[b.type]),c}}(),store:function(){function b(a,c,d){var e=a.getUniqueId();e in d?d[e].type=d[e].type|c:d[e]={element:a,type:c}}return function(c,d){var e;d&CKEDITOR.LINEUTILS_AFTER&&a(e=c.getNext())&&e.isVisible()&&(b(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),d^=CKEDITOR.LINEUTILS_AFTER),d&CKEDITOR.LINEUTILS_INSIDE&&a(e=c.getFirst())&&e.isVisible()&&(b(e,CKEDITOR.LINEUTILS_BEFORE,this.relations),d^=CKEDITOR.LINEUTILS_INSIDE),b(c,d,this.relations)
}}(),traverseSearch:function(b){var c,d,e;do if(e=b.$["data-cke-expando"],!(e&&e in this.relations)){if(b.equals(this.editable))break;if(a(b))for(c in this.lookups)(d=this.lookups[c](b))&&this.store(b,d)}while((!b||b.type!=CKEDITOR.NODE_ELEMENT||"true"!=b.getAttribute("contenteditable"))&&(b=b.getParent()))},pixelSearch:function(){function b(d,e,f,g,h){for(var j,i=0;h(f)&&(f+=g,25!=++i);)if(j=this.doc.$.elementFromPoint(e,f))if(j==d)i=0;else if(c(d,j)&&(i=0,a(j=new CKEDITOR.dom.element(j))))return j}var c=CKEDITOR.env.ie||CKEDITOR.env.webkit?function(a,b){return a.contains(b)}:function(a,b){return!!(16&a.compareDocumentPosition(b))};return function(c,d,e){var f=this.win.getViewPaneSize().height,g=b.call(this,c.$,d,e,-1,function(a){return a>0
}),d=b.call(this,c.$,d,e,1,function(a){return f>a});if(g)for(this.traverseSearch(g);!g.getParent().equals(c);)g=g.getParent();if(d)for(this.traverseSearch(d);!d.getParent().equals(c);)d=d.getParent();for(;(g||d)&&(g&&(g=g.getNext(a)),g&&!g.equals(d))&&(this.traverseSearch(g),d&&(d=d.getPrevious(a)),d&&!d.equals(g));)this.traverseSearch(d)}}(),greedySearch:function(){this.relations={};for(var d,e,f,b=this.editable.getElementsByTag("*"),c=0;d=b.getItem(c++);)if(!d.equals(this.editable)&&(d.hasAttribute("contenteditable")||!d.isReadOnly())&&a(d)&&d.isVisible())for(f in this.lookups)(e=this.lookups[f](d))&&this.store(d,e);return this.relations}},e.prototype={locate:function(){function b(c,d){var e=c.element[d===CKEDITOR.LINEUTILS_BEFORE?"getPrevious":"getNext"]();
return e&&a(e)?(c.siblingRect=e.getClientRect(),d==CKEDITOR.LINEUTILS_BEFORE?(c.siblingRect.bottom+c.elementRect.top)/2:(c.elementRect.bottom+c.siblingRect.top)/2):d==CKEDITOR.LINEUTILS_BEFORE?c.elementRect.top:c.elementRect.bottom}var c,d;return function(a){this.locations={};for(d in a)c=a[d],c.elementRect=c.element.getClientRect(),c.type&CKEDITOR.LINEUTILS_BEFORE&&this.store(d,CKEDITOR.LINEUTILS_BEFORE,b(c,CKEDITOR.LINEUTILS_BEFORE)),c.type&CKEDITOR.LINEUTILS_AFTER&&this.store(d,CKEDITOR.LINEUTILS_AFTER,b(c,CKEDITOR.LINEUTILS_AFTER)),c.type&CKEDITOR.LINEUTILS_INSIDE&&this.store(d,CKEDITOR.LINEUTILS_INSIDE,(c.elementRect.top+c.elementRect.bottom)/2);return this.locations
}}(),sort:function(){var a,b,c,d,e,f;return function(g,h){a=this.locations,b=[];for(d in a)for(e in a[d])if(c=Math.abs(g-a[d][e]),b.length){for(f=0;f<b.length;f++)if(c<b[f].dist){b.splice(f,0,{uid:+d,type:e,dist:c});break}f==b.length&&b.push({uid:+d,type:e,dist:c})}else b.push({uid:+d,type:e,dist:c});return"undefined"!=typeof h?b.slice(0,h):b}}(),store:function(a,b,c){this.locations[a]||(this.locations[a]={}),this.locations[a][b]=c}};var b={display:"block",width:"0px",height:"0px","border-color":"transparent","border-style":"solid",position:"absolute",top:"-6px"},h={height:"0px","border-top":"1px dashed red",position:"absolute","z-index":9999},f='<div data-cke-lineutils-line="1" class="cke_reset_all" style="{lineStyle}"><span style="{tipLeftStyle}">&nbsp;</span><span style="{tipRightStyle}">&nbsp;</span></div>';
c.prototype={removeAll:function(){for(var a in this.hidden)this.hidden[a].remove(),delete this.hidden[a];for(a in this.visible)this.visible[a].remove(),delete this.visible[a]},hideLine:function(a){var b=a.getUniqueId();a.hide(),this.hidden[b]=a,delete this.visible[b]},showLine:function(a){var b=a.getUniqueId();a.show(),this.visible[b]=a,delete this.hidden[b]},hideVisible:function(){for(var a in this.visible)this.hideLine(this.visible[a])},placeLine:function(a,b){var c,d,e;if(c=this.getStyle(a.uid,a.type)){for(e in this.visible)if(this.visible[e].getCustomData("hash")!==this.hash){d=this.visible[e];break}if(!d)for(e in this.hidden)if(this.hidden[e].getCustomData("hash")!==this.hash){this.showLine(d=this.hidden[e]);
break}d||this.showLine(d=this.addLine()),d.setCustomData("hash",this.hash),this.visible[d.getUniqueId()]=d,d.setStyles(c),b&&b(d)}},getStyle:function(a,b){var c=this.relations[a],d=this.locations[a][b],e={};if(e.width=c.siblingRect?Math.max(c.siblingRect.width,c.elementRect.width):c.elementRect.width,e.top=this.inline?d+this.winTopScroll.y:this.rect.top+this.winTopScroll.y+d,e.top-this.winTopScroll.y<this.rect.top||e.top-this.winTopScroll.y>this.rect.bottom)return!1;this.inline?e.left=c.elementRect.left:(c.elementRect.left>0?e.left=this.rect.left+c.elementRect.left:(e.width=e.width+c.elementRect.left,e.left=this.rect.left),(c=e.left+e.width-(this.rect.left+this.winPane.width))>0&&(e.width=e.width-c)),e.left=e.left+this.winTopScroll.x;
for(var f in e)e[f]=CKEDITOR.tools.cssLength(e[f]);return e},addLine:function(){var a=CKEDITOR.dom.element.createFromHtml(this.lineTpl);return a.appendTo(this.container),a},prepare:function(a,b){this.relations=a,this.locations=b,this.hash=Math.random()},cleanup:function(){var a,b;for(b in this.visible)a=this.visible[b],a.getCustomData("hash")!==this.hash&&this.hideLine(a)},queryViewport:function(){this.winPane=this.win.getViewPaneSize(),this.winTopScroll=this.winTop.getScrollPosition(),this.winTopPane=this.winTop.getViewPaneSize(),this.rect=this.inline?this.editable.getClientRect():this.frame.getClientRect()}};var i={left:1,right:1,center:1},g={absolute:1,fixed:1};
CKEDITOR.plugins.lineutils={finder:d,locator:e,liner:c}}(),function(){function d(a){this.editor=a,this.registered={},this.instances={},this.selected=[],this.widgetHoldingFocusedEditable=this.focused=null,this._={nextId:0,upcasts:[],upcastCallbacks:[],filters:{}},D(this),A(this),this.on("checkWidgets",h),this.editor.on("contentDomInvalidated",this.checkWidgets,this),y(this),x(this),q(this),z(this),w(this)}function e(a,b,c,d,f){var g=a.editor;CKEDITOR.tools.extend(this,d,{editor:g,id:b,inline:"span"==c.getParent().getName(),element:c,data:CKEDITOR.tools.extend({},"function"==typeof d.defaults?d.defaults():d.defaults),dataReady:!1,inited:!1,ready:!1,edit:e.prototype.edit,focusedEditable:null,definition:d,repository:a,draggable:d.draggable!==!1,_:{downcastFn:d.downcast&&"string"==typeof d.downcast?d.downcasts[d.downcast]:d.downcast}},!0),a.fire("instanceCreated",this),I(this,d),this.init&&this.init(),this.inited=!0,(a=this.element.data("cke-widget-data"))&&this.setData(JSON.parse(a)),f&&this.setData(f),this.dataReady=!0,N(this),this.fire("data",this.data),this.isInited()&&g.editable().contains(this.wrapper)&&(this.ready=!0,this.fire("ready"))
}function c(a,b,c){CKEDITOR.dom.element.call(this,b.$),this.editor=a,b=this.filter=c.filter,CKEDITOR.dtd[this.getName()].p?(this.enterMode=b?b.getAllowedEnterMode(a.enterMode):a.enterMode,this.shiftEnterMode=b?b.getAllowedEnterMode(a.shiftEnterMode,!0):a.shiftEnterMode):this.enterMode=this.shiftEnterMode=CKEDITOR.ENTER_BR}function a(a,b){a.addCommand(b.name,{exec:function(){function c(){a.widgets.finalizeCreation(g)}var d=a.widgets.focused;if(d&&d.name==b.name)d.edit();else if(b.insert)b.insert();else if(b.template){var e,d="function"==typeof b.defaults?b.defaults():b.defaults,d=CKEDITOR.dom.element.createFromHtml(b.template.output(d)),f=a.widgets.wrapElement(d,b.name),g=new CKEDITOR.dom.documentFragment(f.getDocument());
g.append(f),(e=a.widgets.initOn(d,b))?(d=e.once("edit",function(b){b.data.dialog?e.once("dialog",function(b){var d,f,b=b.data;d=b.once("ok",c,null,null,20),f=b.once("cancel",function(){a.widgets.destroy(e,!0)}),b.once("hide",function(){d.removeListener(),f.removeListener()})}):c()},null,null,999),e.edit(),d.removeListener()):c()}},refresh:function(a,b){this.setState(g(a.editable(),b.blockLimit)?CKEDITOR.TRISTATE_DISABLED:CKEDITOR.TRISTATE_OFF)},context:"div",allowedContent:b.allowedContent,requiredContent:b.requiredContent,contentForms:b.contentForms,contentTransformations:b.contentTransformations})}function b(a,b){a.focused=null,b.isInited()&&(a.fire("widgetBlurred",{widget:b}),b.setFocused(!1))
}function h(a){if(a=a.data,"wysiwyg"==this.editor.mode){var d,e,b=this.editor.editable(),c=this.instances;if(b){for(d in c)b.contains(c[d].wrapper)||this.destroy(c[d],!0);if(a&&a.initOnlyNew)b=this.initOnAll();else{var f=b.find(".cke_widget_wrapper"),b=[];for(d=0,c=f.count();c>d;d++){e=f.getItem(d);var g;if(g=!this.getByElement(e,!0)){a:{g=u;for(var h=e;h=h.getParent();)if(g(h)){g=!0;break a}g=!1}g=!g}g&&(e.addClass("cke_widget_new"),b.push(this.initOn(e.getFirst(o))))}}a&&a.focusInited&&1==b.length&&b[0].focus()}}}function f(a,b,c){if(!c.allowedContent)return null;var d=this._.filters[a];return d||(this._.filters[a]=d={}),(a=d[b])||(d[b]=a=new CKEDITOR.filter(c.allowedContent)),a
}function i(a){var b=[],c=a._.upcasts,d=a._.upcastCallbacks;return{toBeWrapped:b,iterator:function(a){var e,f,g,h,i;if("data-cke-widget-wrapper"in a.attributes)return(a=a.getFirst(m))&&b.push([a]),!1;if("data-widget"in a.attributes)return b.push([a]),!1;if(i=c.length){if(a.attributes["data-cke-widget-upcasted"])return!1;for(h=0,e=d.length;e>h;++h)if(d[h](a)===!1)return;for(h=0;i>h;++h)if(e=c[h],g={},f=e[0](a,g))return f instanceof CKEDITOR.htmlParser.element&&(a=f),a.attributes["data-cke-widget-data"]=JSON.stringify(g),a.attributes["data-cke-widget-upcasted"]=1,b.push([a,e[1]]),!1}}}}function g(a,b){return!b||b.equals(a)?null:n(b)?b:g(a,b.getParent())}function j(a){return{tabindex:-1,contenteditable:"false","data-cke-widget-wrapper":1,"data-cke-filter":"off","class":"cke_widget_wrapper cke_widget_new cke_widget_"+(a?"inline":"block")}
}function l(a,b,c){if(a.type==CKEDITOR.NODE_ELEMENT){var d=CKEDITOR.dtd[a.name];if(d&&!d[c.name]){var d=a.split(b),e=a.parent,b=d.getIndex();return a.children.length||(b-=1,a.remove()),d.children.length||d.remove(),l(e,b,c)}}a.add(c,b)}function m(a){return a.type==CKEDITOR.NODE_ELEMENT&&!!a.attributes["data-widget"]}function o(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-widget")}function p(a,b){return"boolean"==typeof a.inline?a.inline:!!CKEDITOR.dtd.$inline[b]}function k(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-wrapper")}function n(a){return a.type==CKEDITOR.NODE_ELEMENT&&a.hasAttribute("data-cke-widget-editable")
}function u(a){return a.hasAttribute("data-cke-temp")}function v(a,b,c){b.focus(),a.fire("saveSnapshot"),a.fire("lockSnapshot",{dontUpdate:!0}),c.select(),c=b.wrapper.getOuterHtml(),b.wrapper.remove(),a.widgets.destroy(b,!0),a.execCommand("paste",c),a.fire("unlockSnapshot")}function s(a,b,c,d){var e=a.editor;e.fire("lockSnapshot"),c?(d=c.data("cke-widget-editable"),d=b.editables[d],a.widgetHoldingFocusedEditable=b,b.focusedEditable=d,c.addClass("cke_widget_editable_focused"),d.filter&&e.setActiveFilter(d.filter),e.setActiveEnterMode(d.enterMode,d.shiftEnterMode)):(d||b.focusedEditable.removeClass("cke_widget_editable_focused"),b.focusedEditable=null,a.widgetHoldingFocusedEditable=null,e.setActiveFilter(null),e.setActiveEnterMode(null,null)),e.fire("unlockSnapshot")
}function r(a){a.contextMenu&&a.contextMenu.addListener(function(b){return(b=a.widgets.getByElement(b,!0))?b.fire("contextMenu",{}):void 0})}function B(a,b){return CKEDITOR.tools.trim(b)}function z(a){var b=a.editor,c=CKEDITOR.plugins.lineutils;b.on("contentDom",function(){var d=b.editable(),e=CKEDITOR.env.ie&&CKEDITOR.env.version<9||d.isInline()?d:b.document;d.attachListener(e,"drop",function(c){var e,f,d=c.data.$.dataTransfer.getData("text");if(d){try{e=JSON.parse(d)}catch(g){return}if("cke-widget"==e.type&&(c.data.preventDefault(),e.editor==b.name&&(f=a.instances[e.id]))){a:if(e=c.data.$,d=b.createRange(),c.data.testRange)d=c.data.testRange;else if(document.caretRangeFromPoint)c=b.document.$.caretRangeFromPoint(e.clientX,e.clientY),d.setStart(CKEDITOR.dom.node(c.startContainer),c.startOffset),d.collapse(!0);
else if(e.rangeParent)d.setStart(CKEDITOR.dom.node(e.rangeParent),e.rangeOffset),d.collapse(!0);else{if(!document.body.createTextRange){d=null;break a}c=b.document.getBody().$.createTextRange(),c.moveToPoint(e.clientX,e.clientY),e="cke-temp-"+(new Date).getTime(),c.pasteHTML('<span id="'+e+'">â</span>'),c=b.document.getById(e),d.moveToPosition(c,CKEDITOR.POSITION_BEFORE_START),c.remove()}d&&(CKEDITOR.env.gecko?setTimeout(v,0,b,f,d):v(b,f,d))}}}),CKEDITOR.tools.extend(a,{finder:new c.finder(b,{lookups:{"default":function(a){if(!a.is(CKEDITOR.dtd.$listItem)&&a.is(CKEDITOR.dtd.$block)){for(;a;){if(n(a))return;a=a.getParent()}return CKEDITOR.LINEUTILS_BEFORE|CKEDITOR.LINEUTILS_AFTER
}}}}),locator:new c.locator(b),liner:new c.liner(b,{lineStyle:{cursor:"move !important","border-top-color":"#666"},tipLeftStyle:{"border-left-color":"#666"},tipRightStyle:{"border-right-color":"#666"}})},!0)})}function x(a){var b=a.editor;b.on("contentDom",function(){var e,f,c=b.editable(),d=c.isInline()?c:b.document;c.attachListener(d,"mousedown",function(b){var c=b.data.getTarget();return c.type?(e=a.getByElement(c),f=0,void(e&&(e.inline&&c.type==CKEDITOR.NODE_ELEMENT&&c.hasAttribute("data-cke-widget-drag-handler")?f=1:g(e.wrapper,c)?e=null:(b.data.preventDefault(),CKEDITOR.env.ie||e.focus())))):!1}),c.attachListener(d,"mouseup",function(){e&&f&&(f=0,e.focus())
}),CKEDITOR.env.ie&&c.attachListener(d,"mouseup",function(){e&&setTimeout(function(){e.focus(),e=null})})}),b.on("doubleclick",function(b){var c=a.getByElement(b.data.element);return c&&!g(c.wrapper,b.data.element)?c.fire("doubleclick",{element:b.data.element}):void 0},null,null,1)}function q(a){a.editor.on("key",function(b){var e,c=a.focused,d=a.widgetHoldingFocusedEditable;return c?e=c.fire("key",{keyCode:b.data.keyCode}):d&&(c=b.data.keyCode,b=d.focusedEditable,c==CKEDITOR.CTRL+65?(c=b.getBogus(),d=d.editor.createRange(),d.selectNodeContents(b),c&&d.setEndAt(c,CKEDITOR.POSITION_BEFORE_START),d.select(),e=!1):8==c||46==c?(e=d.editor.getSelection().getRanges(),d=e[0],e=!(1==e.length&&d.collapsed&&d.checkBoundaryOfElement(b,CKEDITOR[8==c?"START":"END"]))):e=void 0),e
},null,null,1)}function w(a){function b(c){a.focused&&F(a.focused,"cut"==c.name)}var c=a.editor;c.on("contentDom",function(){var a=c.editable();a.attachListener(a,"copy",b),a.attachListener(a,"cut",b)})}function y(a){var c=a.editor;c.on("selectionCheck",function(){a.fire("checkSelection")}),a.on("checkSelection",a.checkSelection,a),c.on("selectionChange",function(b){var d=(b=g(c.editable(),b.data.selection.getStartElement()))&&a.getByElement(b),e=a.widgetHoldingFocusedEditable;e?e===d&&e.focusedEditable.equals(b)||(s(a,e,null),d&&b&&s(a,d,b)):d&&b&&s(a,d,b)}),c.on("dataReady",function(){G(a).commit()}),c.on("blur",function(){var c;(c=a.focused)&&b(a,c),(c=a.widgetHoldingFocusedEditable)&&s(a,c,null)
})}function A(a){var b=a.editor,c={};b.on("toDataFormat",function(b){var d=CKEDITOR.tools.getNextNumber(),e=[];b.data.downcastingSessionId=d,c[d]=e,b.data.dataValue.forEach(function(b){var d,c=b.attributes;if("data-cke-widget-id"in c)(c=a.instances[c["data-cke-widget-id"]])&&(d=b.getFirst(m),e.push({wrapper:b,element:d,widget:c,editables:{}}),"1"!=d.attributes["data-cke-widget-keep-attr"]&&delete d.attributes["data-widget"]);else if("data-cke-widget-editable"in c)return e[e.length-1].editables[c["data-cke-widget-editable"]]=b,!1},CKEDITOR.NODE_ELEMENT,!0)},null,null,8),b.on("toDataFormat",function(a){if(a.data.downcastingSessionId)for(var b,d,e,f,g,h,a=c[a.data.downcastingSessionId];b=a.shift();){d=b.widget,e=b.element,f=d._.downcastFn&&d._.downcastFn.call(d,e);
for(h in b.editables)g=b.editables[h],delete g.attributes.contenteditable,g.setHtml(d.editables[h].getData());f||(f=e),b.wrapper.replaceWith(f)}},null,null,13),b.on("contentDomUnload",function(){a.destroyAll(!0)})}function D(a){function b(){c.fire("lockSnapshot"),a.checkWidgets({initOnlyNew:!0,focusInited:d}),c.fire("unlockSnapshot")}var d,e,c=a.editor;c.on("toHtml",function(b){var e,c=i(a);for(b.data.dataValue.forEach(c.iterator,CKEDITOR.NODE_ELEMENT,!0);e=c.toBeWrapped.pop();){var f=e[0],g=f.parent;g.type==CKEDITOR.NODE_ELEMENT&&g.attributes["data-cke-widget-wrapper"]&&g.replaceWith(f),a.wrapElement(e[0],e[1])}d=1==b.data.dataValue.children.length&&b.data.dataValue.children[0].type==CKEDITOR.NODE_ELEMENT&&b.data.dataValue.children[0].attributes["data-cke-widget-wrapper"]
},null,null,8),c.on("dataReady",function(){if(e)for(var f,g,b=a,d=c.editable().find(".cke_widget_wrapper"),h=0,i=d.count();i>h;++h)f=d.getItem(h),g=f.getFirst(o),g.type==CKEDITOR.NODE_ELEMENT&&g.data("widget")?(g.replace(f),b.wrapElement(g)):f.remove();e=0,a.destroyAll(!0),a.initOnAll()}),c.on("loadSnapshot",function(b){/data-cke-widget/.test(b.data)&&(e=1),a.destroyAll(!0)},null,null,9),c.on("paste",function(a){a.data.dataValue=a.data.dataValue.replace(S,B)}),c.on("insertText",b,null,null,999),c.on("insertHtml",b,null,null,999)}function G(a){var c=a.selected,d=[],e=c.slice(0),f=null;return{select:function(a){return CKEDITOR.tools.indexOf(c,a)<0&&d.push(a),a=CKEDITOR.tools.indexOf(e,a),a>=0&&e.splice(a,1),this
},focus:function(a){return f=a,this},commit:function(){var h,g=a.focused!==f;for(a.editor.fire("lockSnapshot"),g&&(h=a.focused)&&b(a,h);h=e.pop();)c.splice(CKEDITOR.tools.indexOf(c,h),1),h.isInited()&&h.setSelected(!1);for(g&&f&&(a.focused=f,a.fire("widgetFocused",{widget:f}),f.setFocused(!0));h=d.pop();)c.push(h),h.setSelected(!0);a.editor.fire("unlockSnapshot")}}}function C(a){a.cancel()}function F(a,b){var c=a.editor,d=c.document;if(!d.getById("cke_copybin")){var e=c.blockless||CKEDITOR.env.ie?"span":"div",f=d.createElement(e),g=d.createElement(e),e=CKEDITOR.env.ie&&CKEDITOR.env.version<9;g.setAttributes({id:"cke_copybin","data-cke-temp":"1"}),f.setStyles({position:"absolute",width:"1px",height:"1px",overflow:"hidden"}),f.setStyle("ltr"==c.config.contentsLangDirection?"left":"right","-5000px"),f.setHtml('<span data-cke-copybin-start="1">â</span>'+a.wrapper.getOuterHtml()+'<span data-cke-copybin-end="1">â</span>'),c.fire("saveSnapshot"),c.fire("lockSnapshot"),g.append(f),c.editable().append(g);
var h=c.on("selectionChange",C,null,null,0),i=a.repository.on("checkSelection",C,null,null,0);if(e)var j=d.getDocumentElement().$,k=j.scrollTop;d=c.createRange(),d.selectNodeContents(f),d.select(),e&&(j.scrollTop=k),setTimeout(function(){b||a.focus(),g.remove(),h.removeListener(),i.removeListener(),c.fire("unlockSnapshot"),b&&(a.repository.del(a),c.fire("saveSnapshot"))},100)}}function E(){var a=CKEDITOR.document.getActive(),b=this.editor,c=b.editable();(c.isInline()?c:b.document.getWindow().getFrame()).equals(a)&&b.focusManager.focus(c)}function J(){CKEDITOR.env.gecko&&this.editor.unlockSelection(),CKEDITOR.env.webkit||(this.editor.forceNextSelectionCheck(),this.editor.selectionChange(1))
}function L(a){if(a.draggable){var d,b=a.editor,c=a.wrapper.findOne(".cke_widget_drag_handler_container");c?d=c.findOne("img"):(c=new CKEDITOR.dom.element("span",b.document),c.setAttributes({"class":"cke_reset cke_widget_drag_handler_container",style:"background:rgba(220,220,220,0.5);background-image:url("+b.plugins.widget.path+"images/handle.png)"}),d=new CKEDITOR.dom.element("img",b.document),d.setAttributes({"class":"cke_reset cke_widget_drag_handler","data-cke-widget-drag-handler":"1",src:V,width:R,title:b.lang.widget.move,height:R}),a.inline&&d.setAttribute("draggable","true"),c.append(d),a.wrapper.append(c)),a.wrapper.on("mouseenter",a.updateDragHandlerPosition,a),setTimeout(function(){a.on("data",a.updateDragHandlerPosition,a)
},50),a.inline?d.on("dragstart",function(c){c.data.$.dataTransfer.setData("text",JSON.stringify({type:"cke-widget",editor:b.name,id:a.id}))}):d.on("mousedown",H,a),a.dragHandlerContainer=c}}function H(){function a(){var b;for(j.reset();b=g.pop();)b.removeListener();var c=h,d=this.repository.finder;b=this.repository.liner;var e=this.editor,f=this.editor.editable();CKEDITOR.tools.isEmpty(b.visible)||(c=d.getRange(c[0]),this.focus(),e.fire("saveSnapshot"),e.fire("lockSnapshot",{dontUpdate:1}),e.getSelection().reset(),f.insertElementIntoRange(this.wrapper,c),this.focus(),e.fire("unlockSnapshot"),e.fire("saveSnapshot")),f.removeClass("cke_widget_dragging"),b.hideVisible()
}var k,l,b=this.repository.finder,c=this.repository.locator,d=this.repository.liner,e=this.editor,f=e.editable(),g=[],h=[],i=b.greedySearch(),j=CKEDITOR.tools.eventsBuffer(50,function(){k=c.locate(i),h=c.sort(l,1),h.length&&(d.prepare(i,k),d.placeLine(h[0]),d.cleanup())});f.addClass("cke_widget_dragging"),g.push(f.on("mousemove",function(a){l=a.data.$.clientY,j.input()})),g.push(e.document.once("mouseup",a,this)),g.push(CKEDITOR.document.once("mouseup",a,this))}function T(a){var b,c,d=a.editables;if(a.editables={},a.editables)for(b in d)c=d[b],a.initEditable(b,"string"==typeof c?{selector:c}:c)}function M(a){if(a.mask){var b=a.wrapper.findOne(".cke_widget_mask");
b||(b=new CKEDITOR.dom.element("img",a.editor.document),b.setAttributes({src:V,"class":"cke_reset cke_widget_mask"}),a.wrapper.append(b)),a.mask=b}}function K(a){if(a.parts){var c,d,b={};for(d in a.parts)c=a.wrapper.findOne(a.parts[d]),b[d]=c;a.parts=b}}function I(a,b){Q(a),K(a),T(a),M(a),L(a),CKEDITOR.env.ie&&CKEDITOR.env.version<9&&a.wrapper.on("dragstart",function(b){var c=b.data.getTarget();!(g(a,c)||a.inline&&c.type==CKEDITOR.NODE_ELEMENT&&c.hasAttribute("data-cke-widget-drag-handler")||!b.data.preventDefault())}),a.wrapper.removeClass("cke_widget_new"),a.element.addClass("cke_widget_element"),a.on("key",function(b){if(b=b.data.keyCode,13==b)a.edit();else{if(b==CKEDITOR.CTRL+67||b==CKEDITOR.CTRL+88)return void F(a,b==CKEDITOR.CTRL+88);
if(b in W||CKEDITOR.CTRL&b||CKEDITOR.ALT&b)return}return!1},null,null,999),a.on("doubleclick",function(){a.edit()}),b.data&&a.on("data",b.data),b.edit&&a.on("edit",b.edit)}function Q(a){(a.wrapper=a.element.getParent()).setAttribute("data-cke-widget-id",a.id)}function N(a){a.element.data("cke-widget-data",JSON.stringify(a.data))}var R=15;CKEDITOR.plugins.add("widget",{requires:"lineutils,clipboard",onLoad:function(){CKEDITOR.addCss(".cke_widget_wrapper{position:relative;outline:none}.cke_widget_inline{display:inline-block}.cke_widget_wrapper:hover>.cke_widget_element{outline:2px solid yellow;cursor:default}.cke_widget_wrapper:hover .cke_widget_editable{outline:2px solid yellow}.cke_widget_wrapper.cke_widget_focused>.cke_widget_element,.cke_widget_wrapper .cke_widget_editable.cke_widget_editable_focused{outline:2px solid #ace}.cke_widget_editable{cursor:text}.cke_widget_drag_handler_container{position:absolute;width:"+R+"px;height:0;left:-9999px;opacity:0.75;transition:height 0s 0.2s;line-height:0}.cke_widget_wrapper:hover>.cke_widget_drag_handler_container{height:"+R+"px;transition:none}.cke_widget_drag_handler_container:hover{opacity:1}img.cke_widget_drag_handler{cursor:move;width:"+R+"px;height:"+R+"px;display:inline-block}.cke_widget_mask{position:absolute;top:0;left:0;width:100%;height:100%;display:block}.cke_editable.cke_widget_dragging, .cke_editable.cke_widget_dragging *{cursor:move !important}")
},beforeInit:function(a){a.widgets=new d(a)},afterInit:function(a){var c,d,e,b=a.widgets.registered;for(d in b)c=b[d],(e=c.button)&&a.ui.addButton&&a.ui.addButton(CKEDITOR.tools.capitalize(c.name,!0),{label:e,command:c.name,toolbar:"insert,10"});r(a)}}),d.prototype={MIN_SELECTION_CHECK_INTERVAL:500,add:function(b,c){c=CKEDITOR.tools.prototypedCopy(c),c.name=b,c._=c._||{},this.editor.fire("widgetDefinition",c),c.template&&(c.template=new CKEDITOR.template(c.template)),a(this.editor,c);var d=c,e=d.upcast;if(e)if("string"==typeof e)for(e=e.split(",");e.length;)this._.upcasts.push([d.upcasts[e.pop()],d.name]);else this._.upcasts.push([e,d.name]);return c.button||this.editor.addFeature(c),this.registered[b]=c
},addUpcastCallback:function(a){this._.upcastCallbacks.push(a)},checkSelection:function(){var d,a=this.editor.getSelection(),b=a.getSelectedElement(),c=G(this);if(b&&(d=this.getByElement(b,!0)))return c.focus(d).select(d).commit();if(a=a.getRanges()[0],!a||a.collapsed)return c.commit();for(a=new CKEDITOR.dom.walker(a),a.evaluator=k;b=a.next();)c.select(this.getByElement(b));c.commit()},checkWidgets:function(a){this.fire("checkWidgets",CKEDITOR.tools.copy(a||{}))},del:function(a){if(this.focused===a){var d,b=a.editor,c=b.createRange();(d=c.moveToClosestEditablePosition(a.wrapper,!0))||(d=c.moveToClosestEditablePosition(a.wrapper,!1)),d&&b.getSelection().selectRanges([c])
}a.wrapper.remove(),this.destroy(a,!0)},destroy:function(a,b){this.widgetHoldingFocusedEditable===a&&s(this,a,null,b),a.destroy(b),delete this.instances[a.id],this.fire("instanceDestroyed",a)},destroyAll:function(a){var c,d,b=this.instances;for(d in b)c=b[d],this.destroy(c,a)},finalizeCreation:function(a){(a=a.getFirst())&&k(a)&&(this.editor.insertElement(a),a=this.getByElement(a),a.ready=!0,a.fire("ready"),a.focus())},getByElement:function(a,b){if(!a)return null;var c,d;for(d in this.instances)if(c=this.instances[d].wrapper,c.equals(a)||!b&&c.contains(a))return this.instances[d];return null},initOn:function(a,b,c){if(b?"string"==typeof b&&(b=this.registered[b]):b=this.registered[a.data("widget")],!b)return null;
var d=this.wrapElement(a,b.name);return d?d.hasClass("cke_widget_new")?(a=new e(this,this._.nextId++,a,b,c),a.isInited()?this.instances[a.id]=a:null):this.getByElement(a):null},initOnAll:function(a){for(var c,a=(a||this.editor.editable()).find(".cke_widget_new"),b=[],d=a.count();d--;)(c=this.initOn(a.getItem(d).getFirst(o)))&&b.push(c);return b},wrapElement:function(a,b){var d,e,c=null;if(a instanceof CKEDITOR.dom.element){if(d=this.registered[b||a.data("widget")],!d)return null;if((c=a.getParent())&&c.type==CKEDITOR.NODE_ELEMENT&&c.data("cke-widget-wrapper"))return c;a.hasAttribute("data-cke-widget-keep-attr")||a.data("cke-widget-keep-attr",a.data("widget")?1:0),b&&a.data("widget",b),e=p(d,a.getName()),c=new CKEDITOR.dom.element(e?"span":"div"),c.setAttributes(j(e)),c.data("cke-display-name",d.pathName?d.pathName:a.getName()),a.getParent(!0)&&c.replace(a),a.appendTo(c)
}else if(a instanceof CKEDITOR.htmlParser.element){if(d=this.registered[b||a.attributes["data-widget"]],!d)return null;if((c=a.parent)&&c.type==CKEDITOR.NODE_ELEMENT&&c.attributes["data-cke-widget-wrapper"])return c;"data-cke-widget-keep-attr"in a.attributes||(a.attributes["data-cke-widget-keep-attr"]=a.attributes["data-widget"]?1:0),b&&(a.attributes["data-widget"]=b),e=p(d,a.name),c=new CKEDITOR.htmlParser.element(e?"span":"div",j(e)),c.attributes["data-cke-display-name"]=d.pathName?d.pathName:a.name,d=a.parent;var f;d&&(f=a.getIndex(),a.remove()),c.add(a),d&&l(d,f,c)}return c},_tests_getNestedEditable:g,_tests_createEditableFilter:f},CKEDITOR.event.implementOn(d.prototype),e.prototype={destroy:function(a){if(this.fire("destroy"),this.editables)for(var b in this.editables)this.destroyEditable(b,a);
a||("0"==this.element.data("cke-widget-keep-attr")&&this.element.removeAttribute("data-widget"),this.element.removeAttributes(["data-cke-widget-data","data-cke-widget-keep-attr"]),this.element.removeClass("cke_widget_element"),this.element.replace(this.wrapper)),this.wrapper=null},destroyEditable:function(a,b){var c=this.editables[a];c.removeListener("focus",J),c.removeListener("blur",E),this.editor.focusManager.remove(c),b||(c.removeClass("cke_widget_editable"),c.removeClass("cke_widget_editable_focused"),c.removeAttributes(["contenteditable","data-cke-widget-editable","data-cke-enter-mode"])),delete this.editables[a]},edit:function(){var a={dialog:this.dialog},b=this;
this.fire("edit",a)!==!1&&a.dialog&&this.editor.openDialog(a.dialog,function(a){var c,d;b.fire("dialog",a)!==!1&&(c=a.on("show",function(){a.setupContent(b)}),d=a.on("ok",function(){var c,d=b.on("data",function(a){c=1,a.cancel()},null,null,0);b.editor.fire("saveSnapshot"),a.commitContent(b),d.removeListener(),c&&(b.fire("data",b.data),b.editor.fire("saveSnapshot"))}),a.once("hide",function(){c.removeListener(),d.removeListener()}))})},initEditable:function(a,b){var d=this.wrapper.findOne(b.selector);return d&&d.is(CKEDITOR.dtd.$editable)?(d=new c(this.editor,d,{filter:f.call(this.repository,this.name,a,b)}),this.editables[a]=d,d.setAttributes({contenteditable:"true","data-cke-widget-editable":a,"data-cke-enter-mode":d.enterMode}),d.filter&&d.data("cke-filter",d.filter.id),d.addClass("cke_widget_editable"),d.removeClass("cke_widget_editable_focused"),b.pathName&&d.data("cke-display-name",b.pathName),this.editor.focusManager.add(d),d.on("focus",J,this),CKEDITOR.env.ie&&d.on("blur",E,this),d.setData(d.getHtml()),!0):!1
},isInited:function(){return!(!this.wrapper||!this.inited)},isReady:function(){return this.isInited()&&this.ready},focus:function(){var a=this.editor.getSelection();a&&a.fake(this.wrapper),this.editor.focus()},setData:function(a,b){var c=this.data,d=0;if("string"==typeof a)c[a]!==b&&(c[a]=b,d=1);else{var e=a;for(a in e)c[a]!==e[a]&&(d=1,c[a]=e[a])}return d&&this.dataReady&&(N(this),this.fire("data",c)),this},setFocused:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_focused"),this.fire(a?"focus":"blur"),this},setSelected:function(a){return this.wrapper[a?"addClass":"removeClass"]("cke_widget_selected"),this.fire(a?"select":"deselect"),this
},updateDragHandlerPosition:function(){var a=this.editor,b=this.element.$,c=this._.dragHandlerOffset,b={x:b.offsetLeft,y:b.offsetTop-R};c&&b.x==c.x&&b.y==c.y||(c=a.checkDirty(),a.fire("lockSnapshot"),this.dragHandlerContainer.setStyles({top:b.y+"px",left:b.x+"px"}),a.fire("unlockSnapshot"),!c&&a.resetDirty(),this._.dragHandlerOffset=b)}},CKEDITOR.event.implementOn(e.prototype),c.prototype=CKEDITOR.tools.extend(CKEDITOR.tools.prototypedCopy(CKEDITOR.dom.element.prototype),{setData:function(a){a=this.editor.dataProcessor.toHtml(a,{context:this.getName(),filter:this.filter,enterMode:this.enterMode}),this.setHtml(a)},getData:function(){return this.editor.dataProcessor.toDataFormat(this.getHtml(),{context:this.getName(),filter:this.filter,enterMode:this.enterMode})
}});var S=RegExp('^(?:<(?:div|span)(?: data-cke-temp="1")?(?: id="cke_copybin")?(?: data-cke-temp="1")?>)?(?:<(?:div|span)(?: style="[^"]+")?>)?<span [^>]*data-cke-copybin-start="1"[^>]*>.?</span>([\\s\\S]+)<span [^>]*data-cke-copybin-end="1"[^>]*>.?</span>(?:</(?:div|span)>)?(?:</(?:div|span)>)?$'),V="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D",W={37:1,38:1,39:1,40:1,8:1,46:1};CKEDITOR.plugins.widget=e,e.repository=d,e.nestedEditable=c}(),function(){var d="http://cdn.mathjax.org/mathjax/2.2-latest/MathJax.js?config=TeX-AMS_HTML";CKEDITOR.plugins.add("mathjax",{requires:"widget,dialog",icons:"mathjax",init:function(e){var c=e.config.mathJaxClass||"math-tex";
e.widgets.add("mathjax",{inline:!0,dialog:"mathjax",button:e.lang.mathjax.button,mask:!0,allowedContent:"span(!"+c+")",pathName:e.lang.mathjax.pathName,template:'<span class="'+c+'" style="display:inline-block" data-cke-survive=1></span>',parts:{span:"span"},defaults:{math:"\\(x = {-b \\pm \\sqrt{b^2-4ac} \\over 2a}\\)"},init:function(){var a=this.parts.span.getChild(0);a&&a.type==CKEDITOR.NODE_ELEMENT&&a.is("iframe")||(a=new CKEDITOR.dom.element("iframe"),a.setAttributes({style:"border:0;width:0;height:0",scrolling:"no",frameborder:0,allowTransparency:!0,src:CKEDITOR.plugins.mathjax.fixSrc}),this.parts.span.append(a)),this.once("ready",function(){CKEDITOR.env.ie&&a.setAttribute("src",CKEDITOR.plugins.mathjax.fixSrc),this.frameWrapper=new CKEDITOR.plugins.mathjax.frameWrapper(a,e),this.frameWrapper.setValue(this.data.math)
})},data:function(){this.frameWrapper&&this.frameWrapper.setValue(this.data.math)},upcast:function(a,b){if("span"==a.name&&a.hasClass(c)&&!(a.children.length>1||a.children[0].type!=CKEDITOR.NODE_TEXT)){b.math=a.children[0].value;var d=a.attributes;return d.style=d.style?d.style+";display:inline-block":"display:inline-block",d["data-cke-survive"]=1,a.children[0].remove(),a}},downcast:function(a){a.children[0].replaceWith(new CKEDITOR.htmlParser.text(this.data.math));var b=a.attributes;return b.style=b.style.replace(/display:\s?inline-block;?\s?/,""),""===b.style&&delete b.style,a}}),CKEDITOR.dialog.add("mathjax",this.path+"dialogs/mathjax.js"),e.on("contentPreview",function(a){a.data.dataValue=a.data.dataValue.replace(/<\/head>/,'<script src="'+(e.config.mathJaxLib?CKEDITOR.getUrl(e.config.mathJaxLib):d)+'"></script></head>')
}),e.on("paste",function(a){a.data.dataValue=a.data.dataValue.replace(RegExp("<span[^>]*?"+c+".*?</span>","ig"),function(a){return a.replace(/(<iframe.*?\/iframe>)/i,"")})})}}),CKEDITOR.plugins.mathjax={},CKEDITOR.plugins.mathjax.fixSrc=CKEDITOR.env.gecko?"javascript:true":CKEDITOR.env.ie?"javascript:void((function(){"+encodeURIComponent("document.open();("+CKEDITOR.tools.fixDomain+")();document.close();")+"})())":"javascript:void(0)",CKEDITOR.plugins.mathjax.loadingIcon=CKEDITOR.plugins.get("mathjax").path+"images/loader.gif",CKEDITOR.plugins.mathjax.copyStyles=function(d,c){for(var a=["color","font-family","font-style","font-weight","font-variant","font-size"],b=0;b<a.length;b++){var h=a[b],f=d.getComputedStyle(h);
f&&c.setStyle(h,f)}},CKEDITOR.plugins.mathjax.trim=function(d){var c=d.indexOf("\\(")+2,a=d.lastIndexOf("\\)");return d.substring(c,a)},CKEDITOR.plugins.mathjax.frameWrapper=CKEDITOR.env.ie&&8==CKEDITOR.env.version?function(d,c){return d.getFrameDocument().write('<!DOCTYPE html><html><head><meta charset="utf-8"></head><body style="padding:0;margin:0;background:transparent;overflow:hidden"><span style="white-space:nowrap;" id="tex"></span></body></html>'),{setValue:function(a){var b=d.getFrameDocument(),h=b.getById("tex");h.setHtml(CKEDITOR.plugins.mathjax.trim(a)),CKEDITOR.plugins.mathjax.copyStyles(d,h),c.fire("lockSnapshot"),d.setStyles({width:Math.min(250,h.$.offsetWidth)+"px",height:b.$.body.offsetHeight+"px",display:"inline","vertical-align":"middle"}),c.fire("unlockSnapshot")
}}}:function(e,c){function a(){j=e.getFrameDocument(),j.getById("preview")||(CKEDITOR.env.ie&&e.removeAttribute("src"),j.write('<!DOCTYPE html><html><head><meta charset="utf-8"><script type="text/x-mathjax-config">MathJax.Hub.Config( {showMathMenu: false,messageStyle: "none"} );function getCKE() {if ( typeof window.parent.CKEDITOR == \'object\' ) {return window.parent.CKEDITOR;} else {return window.parent.parent.CKEDITOR;}}function update() {MathJax.Hub.Queue([ \'Typeset\', MathJax.Hub, this.buffer ],function() {getCKE().tools.callFunction( '+p+" );});}MathJax.Hub.Queue( function() {getCKE().tools.callFunction("+o+');} );</script><script src="'+(c.config.mathJaxLib||d)+'"></script></head><body style="padding:0;margin:0;background:transparent;overflow:hidden"><span id="preview"></span><span id="buffer" style="display:none"></span></body></html>'))
}function b(){m=!0,i=g,c.fire("lockSnapshot"),h.setHtml(i),f.setHtml("<img src="+CKEDITOR.plugins.mathjax.loadingIcon+" alt="+c.lang.mathjax.loading+">"),e.setStyles({height:"16px",width:"16px",display:"inline","vertical-align":"middle"}),c.fire("unlockSnapshot"),j.getWindow().$.update(i)}var h,f,i,g,j=e.getFrameDocument(),l=!1,m=!1,o=CKEDITOR.tools.addFunction(function(){f=j.getById("preview"),h=j.getById("buffer"),l=!0,g&&b(),CKEDITOR.fire("mathJaxLoaded",e)}),p=CKEDITOR.tools.addFunction(function(){CKEDITOR.plugins.mathjax.copyStyles(e,f),f.setHtml(h.getHtml()),c.fire("lockSnapshot"),e.setStyles({height:0,width:0});var a=Math.max(j.$.body.offsetHeight,j.$.documentElement.offsetHeight),d=Math.max(f.$.offsetWidth,j.$.body.scrollWidth);
e.setStyles({height:a+"px",width:d+"px"}),c.fire("unlockSnapshot"),CKEDITOR.fire("mathJaxUpdateDone",e),i!=g?b():m=!1});return e.on("load",a),a(),{setValue:function(a){g=a,l&&!m&&b()}}}}(),function(){CKEDITOR.plugins.add("placeholder",{requires:"widget,dialog",onLoad:function(){CKEDITOR.addCss(".cke_placeholder{background-color:#ff0}")},init:function(d){var e=d.lang.placeholder;CKEDITOR.dialog.add("placeholder",this.path+"dialogs/placeholder.js"),d.widgets.add("placeholder",{dialog:"placeholder",pathName:e.pathName,template:'<span class="cke_placeholder">[[]]</span>',downcast:function(){return new CKEDITOR.htmlParser.text("[["+this.data.name+"]]")},init:function(){this.setData("name",this.element.getText().slice(2,-2))
},data:function(){this.element.setText("[["+this.data.name+"]]")}}),d.ui.addButton&&d.ui.addButton("CreatePlaceholder",{label:e.toolbar,command:"placeholder",toolbar:"insert,5",icon:"placeholder"})},afterInit:function(d){var e=/\[\[([^\[\]])+\]\]/g;d.dataProcessor.dataFilter.addRules({text:function(c,a){var b=a.parent&&CKEDITOR.dtd[a.parent.name];return!b||b.span?c.replace(e,function(a){var b=null,b=new CKEDITOR.htmlParser.element("span",{"class":"cke_placeholder"});return b.add(new CKEDITOR.htmlParser.text(a)),b=d.widgets.wrapElement(b,"placeholder"),b.getOuterHtml()}):void 0}})}})}(),function(){function d(b){var c="left"==b?"pageXOffset":"pageYOffset";return c in a.$?a.$[c]:CKEDITOR.document.$.documentElement["left"==b?"scrollLeft":"scrollTop"]
}function e(e){var f=e.config,i=f.floatSpace||{on:{}},g=!1,j=e.fire("uiSpace",{space:"top",html:""}).html,l=function(){function c(a,d,e){m.setStyle(d,b(e)),m.setStyle("position",a)}function j(a){var b=p.getDocumentPosition();switch(a){case"top":c("absolute","top",b.y-z-w);break;case"pin":c("fixed","top",A);break;case"bottom":c("absolute","top",b.y+(r.height||r.bottom-r.top)+w)}i.on&&"function"==typeof i.on.changeMode&&i.on.changeMode.call(m.$,o,a),o=a}var o,p,s,r,B,z,x,q=f.floatSpaceDockedOffsetX||0,w=f.floatSpaceDockedOffsetY||0,y=f.floatSpacePinnedOffsetX||0,A=f.floatSpacePinnedOffsetY||0;return function(c){if(!p)if(i.centerElement){var f;f="function"==typeof i.centerElement?i.centerElement.call(null):i.centerElement,p=new CKEDITOR.dom.element(f),p.on("mousedown",function(a){a.data.preventDefault()
})}else if(!(p=e.editable()))return;g||(c&&"focus"===c.name&&m.show(),m.removeStyle("left"),m.removeStyle("right"),s=m.getClientRect(),r=p.getClientRect(),B=a.getViewPaneSize(),z=s.height,x=d("left"),o?(j(z+w<=r.top?"top":z+w>B.height-r.bottom?"pin":"bottom"),c=B.width/2,c=r.left>0&&r.right<B.width&&r.width>s.width?"rtl"==e.config.contentsLangDirection?"right":"left":c-r.left>r.right-c?"left":"right",s.width>B.width?(c="left",f=0):(f="left"==c?r.left>0?r.left:0:r.right<B.width?B.width-r.right:0,f+s.width>B.width&&(c="left"==c?"right":"left",f=0)),m.setStyle(c,b(("pin"==o?y:q)+f+("pin"==o?0:"left"==c?x:-x)))):(o="pin",j("pin"),l(c)))}}();if(j){var m=CKEDITOR.document.getBody().append(CKEDITOR.dom.element.createFromHtml(c.output({content:j,id:e.id,langDir:e.lang.dir,langCode:e.langCode,name:e.name,style:"display:none;z-index:"+(f.baseFloatZIndex-1),topId:e.ui.spaceId("top"),voiceLabel:e.lang.editorPanel+", "+e.name}))),o=CKEDITOR.tools.eventsBuffer(500,l),p=CKEDITOR.tools.eventsBuffer(100,l);
m.unselectable(),m.on("mousedown",function(a){a=a.data,a.getTarget().hasAscendant("a",1)||a.preventDefault()}),e.on("focus",function(b){l(b),e.on("change",o.input),a.on("scroll",p.input),a.on("resize",p.input)}),e.on("blur",function(){m.hide(),e.removeListener("change",o.input),a.removeListener("scroll",p.input),a.removeListener("resize",p.input)}),e.on("destroy",function(){a.removeListener("scroll",p.input),a.removeListener("resize",p.input),m.clearCustomData(),m.remove()}),e.focusManager.hasFocus&&m.show(),e.focusManager.add(m,1),i.on&&"function"==typeof i.on.ready&&i.on.ready.call(m.$,{show:function(){g=!1,m.show(),l()},hide:function(){m.hide(),g=!0}})}}var c=CKEDITOR.addTemplate("floatcontainer",'<div id="cke_{name}" class="cke {id} cke_reset_all cke_chrome cke_editor_{name} cke_float cke_{langDir} '+CKEDITOR.env.cssClass+'" dir="{langDir}" title="'+(CKEDITOR.env.gecko?" ":"")+'" lang="{langCode}" role="application" style="{style}" aria-labelledby="cke_{name}_arialbl"><span id="cke_{name}_arialbl" class="cke_voice_label">{voiceLabel}</span><div class="cke_inner"><div id="{topId}" class="cke_top" role="presentation">{content}</div></div><span class="cke_nose"><span></div>'),a=CKEDITOR.document.getWindow(),b=CKEDITOR.tools.cssLength;
CKEDITOR.plugins.add("floatingspace",{init:function(a){a.on("loaded",function(){e(this)},null,null,20)}})}(),CKEDITOR.config.plugins="basicstyles,blockquote,dialogui,dialog,clipboard,panel,floatpanel,menu,contextmenu,resize,button,toolbar,enterkey,entities,listblock,richcombo,format,horizontalrule,htmlwriter,wysiwygarea,indent,indentlist,fakeobjects,link,list,magicline,pastetext,pastefromword,removeformat,sourcearea,specialchar,stylescombo,tab,undo,templates,divarea,justify,liststyle,lineutils,widget,mathjax,placeholder,floatingspace",CKEDITOR.config.skin="moono",function(){var d=function(d,c){for(var a=CKEDITOR.getUrl("plugins/"+c),d=d.split(","),b=0;b<d.length;b++)CKEDITOR.skin.icons[d[b]]={path:a,offset:-d[++b],bgsize:d[++b]}
};CKEDITOR.env.hidpi?d("about,0,,bold,24,,italic,48,,strike,72,,subscript,96,,superscript,120,,underline,144,,bidiltr,168,,bidirtl,192,,blockquote,216,,copy-rtl,240,,copy,264,,cut-rtl,288,,cut,312,,paste-rtl,336,,paste,360,,bgcolor,384,,textcolor,408,,creatediv,432,,docprops-rtl,456,,docprops,480,,find-rtl,504,,find,528,,replace,552,,flash,576,,button,600,,checkbox,624,,form,648,,hiddenfield,672,,imagebutton,696,,radio,720,,select-rtl,744,,select,768,,textarea-rtl,792,,textarea,816,,textfield-rtl,840,,textfield,864,,horizontalrule,888,,iframe,912,,image,936,,indent-rtl,960,,indent,984,,outdent-rtl,1008,,outdent,1032,,justifyblock,1056,,justifycenter,1080,,justifyleft,1104,,justifyright,1128,,language,1152,,anchor-rtl,1176,,anchor,1200,,link,1224,,unlink,1248,,bulletedlist-rtl,1272,,bulletedlist,1296,,numberedlist-rtl,1320,,numberedlist,1344,,mathjax,1368,,maximize,1392,,newpage-rtl,1416,,newpage,1440,,pagebreak-rtl,1464,,pagebreak,1488,,pastefromword-rtl,1512,,pastefromword,1536,,pastetext-rtl,1560,,pastetext,1584,,placeholder,1608,,preview-rtl,1632,,preview,1656,,print,1680,,removeformat,1704,,save,1728,,selectall,1752,,showblocks-rtl,1776,,showblocks,1800,,smiley,1824,,source-rtl,1848,,source,1872,,sourcedialog-rtl,1896,,sourcedialog,1920,,specialchar,1944,,table,1968,,templates-rtl,1992,,templates,2016,,uicolor,2040,,redo-rtl,2064,,redo,2088,,undo-rtl,2112,,undo,2136,","icons_hidpi.png"):d("about,0,auto,bold,24,auto,italic,48,auto,strike,72,auto,subscript,96,auto,superscript,120,auto,underline,144,auto,bidiltr,168,auto,bidirtl,192,auto,blockquote,216,auto,copy-rtl,240,auto,copy,264,auto,cut-rtl,288,auto,cut,312,auto,paste-rtl,336,auto,paste,360,auto,bgcolor,384,auto,textcolor,408,auto,creatediv,432,auto,docprops-rtl,456,auto,docprops,480,auto,find-rtl,504,auto,find,528,auto,replace,552,auto,flash,576,auto,button,600,auto,checkbox,624,auto,form,648,auto,hiddenfield,672,auto,imagebutton,696,auto,radio,720,auto,select-rtl,744,auto,select,768,auto,textarea-rtl,792,auto,textarea,816,auto,textfield-rtl,840,auto,textfield,864,auto,horizontalrule,888,auto,iframe,912,auto,image,936,auto,indent-rtl,960,auto,indent,984,auto,outdent-rtl,1008,auto,outdent,1032,auto,justifyblock,1056,auto,justifycenter,1080,auto,justifyleft,1104,auto,justifyright,1128,auto,language,1152,auto,anchor-rtl,1176,auto,anchor,1200,auto,link,1224,auto,unlink,1248,auto,bulletedlist-rtl,1272,auto,bulletedlist,1296,auto,numberedlist-rtl,1320,auto,numberedlist,1344,auto,mathjax,1368,auto,maximize,1392,auto,newpage-rtl,1416,auto,newpage,1440,auto,pagebreak-rtl,1464,auto,pagebreak,1488,auto,pastefromword-rtl,1512,auto,pastefromword,1536,auto,pastetext-rtl,1560,auto,pastetext,1584,auto,placeholder,1608,auto,preview-rtl,1632,auto,preview,1656,auto,print,1680,auto,removeformat,1704,auto,save,1728,auto,selectall,1752,auto,showblocks-rtl,1776,auto,showblocks,1800,auto,smiley,1824,auto,source-rtl,1848,auto,source,1872,auto,sourcedialog-rtl,1896,auto,sourcedialog,1920,auto,specialchar,1944,auto,table,1968,auto,templates-rtl,1992,auto,templates,2016,auto,uicolor,2040,auto,redo-rtl,2064,auto,redo,2088,auto,undo-rtl,2112,auto,undo,2136,auto","icons.png")
}())}(),define("ckeditor",function(global){return function(){var ret;return ret||global.CKEDITOR}}(this)),define("taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler",["lodash"],function(_){"use strict";var dtdHandler=function(){var dtdMode="html",dtds={},setMode=function(mode){if("xhtml"===mode.toLowerCase()&&(mode="html"),!_.contains(["html","qti"],mode))throw new Error("Unknown mode "+mode);return dtdMode=mode,this},html5Only=["article","aside","bdi","command","datalist","details","dialog","figcaption","figure","footer","header","keygen","main","mark","meter","nav","output","progress","rp","rt","ruby","section","summary","time","wbr","hgroup"],getParentsOf=function(child){var element,parents=[];
child=_normalizeElement(child);for(element in dtds[dtdMode])dtds[dtdMode].hasOwnProperty(element)&&0!==element.indexOf("$")&&child in dtds[dtdMode][element]&&parents.push(element);return parents},getChildrenOf=function(parent){return parent=_normalizeElement(parent),parent in dtds[dtdMode]?_.keys(dtds[dtdMode][parent]):[]},isChildOf=function(child,of){return _.contains(getChildrenOf(of),_normalizeElement(child))},isParentOf=function(parent,of){return _.contains(getParentsOf(of),_normalizeElement(parent))},getDtd=function(){return dtds[dtdMode]},getMode=function(){return dtdMode},_normalizeElement=function(element){if(_.isObject(element)&&!_.isArray(element)){if("nodeName"in element)return element.nodeName.toLowerCase();
if(0 in element&&"nodeName"in element[0])return element[0].nodeName.toLowerCase()}else if(_.isString(element))return element.toLowerCase();throw new Error("Unknown element "+element)};return dtds.html=function(){var X=_.extend,Y=function(source,removed){for(var substracted=_.cloneDeep(source),i=1;i<arguments.length;i++){removed=arguments[i];for(var name in removed)delete substracted[name]}return substracted},P={},F={},PF={a:1,abbr:1,area:1,audio:1,b:1,bdi:1,bdo:1,br:1,button:1,canvas:1,cite:1,code:1,command:1,datalist:1,del:1,dfn:1,em:1,embed:1,i:1,iframe:1,img:1,input:1,ins:1,kbd:1,keygen:1,label:1,map:1,mark:1,meter:1,noscript:1,object:1,output:1,progress:1,q:1,ruby:1,s:1,samp:1,script:1,select:1,small:1,span:1,strong:1,sub:1,sup:1,textarea:1,time:1,u:1,"var":1,video:1,wbr:1},FO={address:1,article:1,aside:1,blockquote:1,details:1,div:1,dl:1,fieldset:1,figure:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,hr:1,menu:1,nav:1,ol:1,p:1,pre:1,section:1,table:1,ul:1},M={command:1,link:1,meta:1,noscript:1,script:1,style:1},E={},T={"#":1},DP={acronym:1,applet:1,basefont:1,big:1,font:1,isindex:1,strike:1,style:1,tt:1},DFO={center:1,dir:1,noframes:1};
X(P,PF,T,DP),X(F,FO,P,DFO);var dtd={a:Y(P,{a:1,button:1}),abbr:P,address:F,area:E,article:X({style:1},F),aside:X({style:1},F),audio:X({source:1,track:1},F),b:P,base:E,bdi:P,bdo:P,blockquote:F,body:F,br:E,button:Y(P,{a:1,button:1}),canvas:P,caption:F,cite:P,code:P,col:E,colgroup:{col:1},command:E,datalist:X({option:1},P),dd:F,del:P,details:X({summary:1},F),dfn:P,div:X({style:1},F),dl:{dt:1,dd:1},dt:F,em:P,embed:E,fieldset:X({legend:1},F),figcaption:F,figure:X({figcaption:1},F),footer:F,form:F,h1:P,h2:P,h3:P,h4:P,h5:P,h6:P,head:X({title:1,base:1},M),header:F,hgroup:{h1:1,h2:1,h3:1,h4:1,h5:1,h6:1},hr:E,html:X({head:1,body:1},F,M),i:P,iframe:T,img:E,input:E,ins:P,kbd:P,keygen:E,label:P,legend:P,li:F,link:E,map:F,mark:P,menu:X({li:1},F),meta:E,meter:Y(P,{meter:1}),nav:F,noscript:X({link:1,meta:1,style:1},P),object:X({param:1},P),ol:{li:1},optgroup:{option:1},option:T,output:P,p:P,param:E,pre:P,progress:Y(P,{progress:1}),q:P,rp:P,rt:P,ruby:X({rp:1,rt:1},P),s:P,samp:P,script:T,section:X({style:1},F),select:{optgroup:1,option:1},small:P,source:E,span:P,strong:P,style:T,sub:P,summary:P,sup:P,table:{caption:1,colgroup:1,thead:1,tfoot:1,tbody:1,tr:1},tbody:{tr:1},td:F,textarea:T,tfoot:{tr:1},th:F,thead:{tr:1},time:Y(P,{time:1}),title:T,tr:{th:1,td:1},track:E,u:P,ul:{li:1},"var":P,video:X({source:1,track:1},F),wbr:E,acronym:P,applet:X({param:1},F),basefont:E,big:P,center:F,dialog:E,dir:{li:1},font:P,isindex:E,noframes:F,strike:P,tt:P};
return X(dtd,{$block:X({audio:1,dd:1,dt:1,figcaption:1,li:1,video:1},FO,DFO),$blockLimit:{article:1,aside:1,audio:1,body:1,caption:1,details:1,dir:1,div:1,dl:1,fieldset:1,figcaption:1,figure:1,footer:1,form:1,header:1,hgroup:1,menu:1,nav:1,ol:1,section:1,table:1,td:1,th:1,tr:1,ul:1,video:1},$cdata:{script:1,style:1},$editable:{address:1,article:1,aside:1,blockquote:1,body:1,details:1,div:1,fieldset:1,figcaption:1,footer:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,header:1,hgroup:1,nav:1,p:1,pre:1,section:1},$empty:{area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1},$inline:P,$list:{dl:1,ol:1,ul:1},$listItem:{dd:1,dt:1,li:1},$nonBodyContent:X({body:1,head:1,html:1},dtd.head),$nonEditable:{applet:1,audio:1,button:1,embed:1,iframe:1,map:1,object:1,option:1,param:1,script:1,textarea:1,video:1},$object:{applet:1,audio:1,button:1,hr:1,iframe:1,img:1,input:1,object:1,select:1,table:1,textarea:1,video:1},$removeEmpty:{abbr:1,acronym:1,b:1,bdi:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,mark:1,meter:1,output:1,q:1,ruby:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,time:1,tt:1,u:1,"var":1},$tabIndex:{a:1,area:1,button:1,input:1,object:1,select:1,textarea:1},$tableContent:{caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1},$transparent:{a:1,audio:1,canvas:1,del:1,ins:1,map:1,noscript:1,object:1,video:1},$intermediate:{caption:1,colgroup:1,dd:1,dt:1,figcaption:1,legend:1,li:1,optgroup:1,option:1,rp:1,rt:1,summary:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1}}),dtd
}(),dtds.qti=function(){for(var element,listCnt,child,actCnt,action,tmp,intersection,actions=["remove","add"],actLnt=actions.length,overrides={pre:{add:[],remove:["img","object","big","small","sub","sup"]},table:{remove:["col"]}},qtiDtd=_.cloneDeep(dtds.html),h5Len=html5Only.length;h5Len--;)delete qtiDtd[html5Only[h5Len]];for(element in qtiDtd)qtiDtd.hasOwnProperty(element)&&(intersection=_.intersection(_.keys(qtiDtd[element]),html5Only),intersection.length&&(overrides[element]||(overrides[element]={remove:[]}),overrides[element].remove=overrides[element].remove.concat(intersection)));for(element in overrides)if(overrides.hasOwnProperty(element)&&qtiDtd.hasOwnProperty(element))for(actCnt=0;actLnt>actCnt;actCnt++)if(action=actions[actCnt],action in overrides[element])if(listCnt=overrides[element][action].length,"remove"!==action||"all"!==overrides[element][action])for(;listCnt--;)child=overrides[element][action][listCnt],tmp=_.cloneDeep(qtiDtd[element]),"remove"===action?(delete tmp[child],qtiDtd[element]=tmp):"add"===action&&"undefined"!=typeof qtiDtd[child]&&(tmp[child]=1,qtiDtd[element]=tmp[child]);
else qtiDtd[element]={};return qtiDtd}(),{getDtd:getDtd,getChildrenOf:getChildrenOf,getParentsOf:getParentsOf,isChildOf:isChildOf,isParentOf:isParentOf,getMode:getMode,setMode:setMode}}();return dtdHandler}),define("ckConfigurator",["lodash","ckeditor","taoQtiItem/qtiCreator/editor/ckEditor/dtdHandler","mathJax"],function(_,ckeditor,dtdHandler,mathJax){var originalConfig=_.cloneDeep(CKEDITOR.config),ckConfigurator=function(){var positionedPlugins={TaoMediaManager:{insertAfter:"SpecialChar"}},qtiPositionedPlugins={TaoQtiImage:{insertAfter:"SpecialChar"}};mathJax&&(qtiPositionedPlugins.TaoQtiMaths={insertAfter:"SpecialChar"});var toolbarPresets={inline:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],flow:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["SpecialChar"]},{name:"links",items:["Link"]}],block:[{name:"basicstyles",items:["Bold","Italic","Subscript","Superscript"]},{name:"insert",items:["Image","Table","SpecialChar"]},{name:"links",items:["Link"]},"/",{name:"styles",items:["Format"]},{name:"paragraph",items:["NumberedList","BulletedList","-","Outdent","Indent","-","Blockquote","JustifyLeft","JustifyCenter","JustifyRight","JustifyBlock"]}]},ckConfig={disableAutoInline:!0,entities:!1,entities_processNumerical:!0,autoParagraph:!1,extraPlugins:"confighelper",floatSpaceDockedOffsetY:0,forcePasteAsPlainText:!0,skin:"tao",language:"en",removePlugins:"",linkShowAdvancedTab:!1,justifyClasses:["txt-lft","txt-ctr","txt-rgt","txt-jty"],linkShowTargetTab:!1,specialChars:["!","&quot;","#","$","%","&amp;","'","(",")","*","+","-",".","/","0","1","2","3","4","5","6","7","8","9",":",";",["&lt;","Less than"],["&le;","Less than or equal to"],"&asymp;","=","&ne;",["&ge;","Greater than or equal to"],["&gt;","Greater than"],"?","@","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","[","]","^","_","`","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","{","|","}","~","&euro;","&lsquo;","&rsquo;","&ldquo;","&rdquo;","&ndash;","&mdash;","&iexcl;","&cent;","&pound;","&curren;","&yen;","&brvbar;","&sect;","&uml;","&copy;","&ordf;","&laquo;","&not;","&reg;","&macr;","&deg;","&sup2;","&sup3;","&acute;","&micro;","&para;","&middot;","&cedil;","&sup1;","&ordm;","&raquo;","&frac14;","&frac12;","&frac34;","&iquest;","&Agrave;","&Aacute;","&Acirc;","&Atilde;","&Auml;","&Aring;","&AElig;","&Ccedil;","&Egrave;","&Eacute;","&Ecirc;","&Euml;","&Igrave;","&Iacute;","&Icirc;","&Iuml;","&ETH;","&Ntilde;","&Ograve;","&Oacute;","&Ocirc;","&Otilde;","&Ouml;","&times;","&Oslash;","&Ugrave;","&Uacute;","&Ucirc;","&Uuml;","&Yacute;","&THORN;","&szlig;","&agrave;","&aacute;","&acirc;","&atilde;","&auml;","&aring;","&aelig;","&ccedil;","&egrave;","&eacute;","&ecirc;","&euml;","&igrave;","&iacute;","&icirc;","&iuml;","&eth;","&ntilde;","&ograve;","&oacute;","&ocirc;","&otilde;","&ouml;","&divide;","&oslash;","&ugrave;","&uacute;","&ucirc;","&uuml;","&yacute;","&thorn;","&yuml;","&OElig;","&oelig;","&#372;","&#374","&#373","&#375;","&sbquo;","&#8219;","&bdquo;","&hellip;","&trade;","&#9658;","&bull;","&rarr;","&rArr;","&hArr;","&diams;","&asymp;"]},_updatePlugins=function(ckConfig,positionedPlugins){var itCnt,itLen,method,plugin,index,separator,idxItem,numToReplace,stringVal,i,tbCnt=ckConfig.toolbar.length,stringVals={};
for(ckConfig.extraPlugins=function(positionedPluginArr,extraPlugins){for(var i=positionedPluginArr.length,extraPluginArr=extraPlugins.split(",");i--;)positionedPluginArr[i]=positionedPluginArr[i].toLowerCase();return extraPluginArr=_.compact(_.union(extraPluginArr,positionedPluginArr)),extraPluginArr.join(",")}(_.keys(positionedPlugins),ckConfig.extraPlugins),i=0;tbCnt>i;i++)_.isString(ckConfig.toolbar[i])&&(stringVals[i]=ckConfig.toolbar[i],ckConfig.toolbar[i]={items:[]});for(plugin in positionedPlugins){for(method=function(pluginProps){for(var i=pluginProps.length;i--;)if(0===pluginProps[i].indexOf("insert")||"replace"===pluginProps[i])return pluginProps[i];
throw"Missing key insertBefore | insertAfter | replace in positionedPlugins"}(_.keys(positionedPlugins[plugin])),idxItem=positionedPlugins[plugin][method].toLowerCase(),separator=positionedPlugins[plugin].separator||!1,index=-1;tbCnt--;){for(itLen=ckConfig.toolbar[tbCnt].items.length,itCnt=0;itLen>itCnt;itCnt++)if(ckConfig.toolbar[tbCnt].items[itCnt].toLowerCase()===idxItem){index=itCnt;break}if(index>-1){numToReplace=~~("replace"===method),"insertAfter"===method&&index++,separator&&(ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,"-"),index++),ckConfig.toolbar[tbCnt].items.splice(index,numToReplace,plugin);break}}tbCnt=ckConfig.toolbar.length}for(stringVal in stringVals)ckConfig.toolbar[stringVal]=stringVals[stringVal]
},getConfig=function(editor,toolbarType,options){if("reset"===toolbarType)return originalConfig;options=options||{},options.resourcemgr=options.resourcemgr||{};var toolbar,config,toolbars=_.clone(toolbarPresets,!0),dtdMode="html";0===toolbarType.indexOf("qti")&&(toolbarType=toolbarType.slice(3).toLowerCase(),ckConfig.allowedContent=!0,ckConfig.autoParagraph=!1,dtdMode="qti"),options.toolbar&&(toolbars[toolbarType]=_.clone(options.toolbar),delete options.toolbar);for(toolbar in toolbars)toolbars.hasOwnProperty(toolbar)&&(ckConfig["toolbar_"+toolbar]=toolbars[toolbar]);return"undefined"!=typeof toolbars[toolbarType]&&(ckConfig.toolbar=toolbars[toolbarType]),"undefined"!=typeof options.positionedPlugins&&(options.positionedPlugins={}),!1!==options.positionedPlugins&&(positionedPlugins="qti"===dtdMode?_.assign(qtiPositionedPlugins,_.clone(options.positionedPlugins)):_.assign(positionedPlugins,_.clone(options.positionedPlugins)),delete options.positionedPlugins,_updatePlugins(ckConfig,positionedPlugins)),config=_.assign({},_.cloneDeep(originalConfig),ckConfig,options),editor.on("focus",function(){dtdHandler.setMode(dtdMode),CKEDITOR.dtd=dtdHandler.getDtd()
}),editor.on("instanceReady",function(e){$(e.editor.element.$).removeAttr("title")}),CKEDITOR.on("dialogDefinition",function(e){if("link"===e.data.name){for(var wanted,linkTypes=e.data.definition.getContents("info").get("linkType").items,i=linkTypes.length;i--;)"anchor"===linkTypes[i][1]||(wanted=i);linkTypes.splice(wanted+1,1)}}),config};return{getConfig:getConfig}}();return ckConfigurator}),function(global){function addEventListener(elem,event,fn){return elem.addEventListener?elem.addEventListener(event,fn,!1):elem.attachEvent?elem.attachEvent("on"+event,fn):void 0}function inArray(arr,item){var i,len;for(i=0,len=arr.length;len>i;i++)if(arr[i]===item)return!0;
return!1}function moveCaret(elem,index){var range;elem.createTextRange?(range=elem.createTextRange(),range.move("character",index),range.select()):elem.selectionStart&&(elem.focus(),elem.setSelectionRange(index,index))}function changeType(elem,type){try{return elem.type=type,!0}catch(e){return!1}}global.Placeholders={Utils:{addEventListener:addEventListener,inArray:inArray,moveCaret:moveCaret,changeType:changeType}}}(this),function(global){function noop(){}function safeActiveElement(){try{return document.activeElement}catch(err){}}function hidePlaceholder(elem,keydownValue){var type,maxLength,valueChanged=!!keydownValue&&elem.value!==keydownValue,isPlaceholderValue=elem.value===elem.getAttribute(ATTR_CURRENT_VAL);
return(valueChanged||isPlaceholderValue)&&"true"===elem.getAttribute(ATTR_ACTIVE)?(elem.removeAttribute(ATTR_ACTIVE),elem.value=elem.value.replace(elem.getAttribute(ATTR_CURRENT_VAL),""),elem.className=elem.className.replace(classNameRegExp,""),maxLength=elem.getAttribute(ATTR_MAXLENGTH),parseInt(maxLength,10)>=0&&(elem.setAttribute("maxLength",maxLength),elem.removeAttribute(ATTR_MAXLENGTH)),type=elem.getAttribute(ATTR_INPUT_TYPE),type&&(elem.type=type),!0):!1}function showPlaceholder(elem){var type,maxLength,val=elem.getAttribute(ATTR_CURRENT_VAL);return""===elem.value&&val?(elem.setAttribute(ATTR_ACTIVE,"true"),elem.value=val,elem.className+=" "+placeholderClassName,maxLength=elem.getAttribute(ATTR_MAXLENGTH),maxLength||(elem.setAttribute(ATTR_MAXLENGTH,elem.maxLength),elem.removeAttribute("maxLength")),type=elem.getAttribute(ATTR_INPUT_TYPE),type?elem.type="text":"password"===elem.type&&Utils.changeType(elem,"text")&&elem.setAttribute(ATTR_INPUT_TYPE,"password"),!0):!1
}function handleElem(node,callback){var handleInputsLength,handleTextareasLength,handleInputs,handleTextareas,elem,len,i;if(node&&node.getAttribute(ATTR_CURRENT_VAL))callback(node);else for(handleInputs=node?node.getElementsByTagName("input"):inputs,handleTextareas=node?node.getElementsByTagName("textarea"):textareas,handleInputsLength=handleInputs?handleInputs.length:0,handleTextareasLength=handleTextareas?handleTextareas.length:0,i=0,len=handleInputsLength+handleTextareasLength;len>i;i++)elem=handleInputsLength>i?handleInputs[i]:handleTextareas[i-handleInputsLength],callback(elem)}function disablePlaceholders(node){handleElem(node,hidePlaceholder)}function enablePlaceholders(node){handleElem(node,showPlaceholder)
}function makeFocusHandler(elem){return function(){hideOnInput&&elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&"true"===elem.getAttribute(ATTR_ACTIVE)?Utils.moveCaret(elem,0):hidePlaceholder(elem)}}function makeBlurHandler(elem){return function(){showPlaceholder(elem)}}function makeKeydownHandler(elem){return function(e){return keydownVal=elem.value,"true"===elem.getAttribute(ATTR_ACTIVE)&&keydownVal===elem.getAttribute(ATTR_CURRENT_VAL)&&Utils.inArray(badKeys,e.keyCode)?(e.preventDefault&&e.preventDefault(),!1):void 0}}function makeKeyupHandler(elem){return function(){hidePlaceholder(elem,keydownVal),""===elem.value&&(elem.blur(),Utils.moveCaret(elem,0))}
}function makeClickHandler(elem){return function(){elem===safeActiveElement()&&elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&"true"===elem.getAttribute(ATTR_ACTIVE)&&Utils.moveCaret(elem,0)}}function makeSubmitHandler(form){return function(){disablePlaceholders(form)}}function newElement(elem){elem.form&&(form=elem.form,"string"==typeof form&&(form=document.getElementById(form)),form.getAttribute(ATTR_FORM_HANDLED)||(Utils.addEventListener(form,"submit",makeSubmitHandler(form)),form.setAttribute(ATTR_FORM_HANDLED,"true"))),Utils.addEventListener(elem,"focus",makeFocusHandler(elem)),Utils.addEventListener(elem,"blur",makeBlurHandler(elem)),hideOnInput&&(Utils.addEventListener(elem,"keydown",makeKeydownHandler(elem)),Utils.addEventListener(elem,"keyup",makeKeyupHandler(elem)),Utils.addEventListener(elem,"click",makeClickHandler(elem))),elem.setAttribute(ATTR_EVENTS_BOUND,"true"),elem.setAttribute(ATTR_CURRENT_VAL,placeholder),(hideOnInput||elem!==safeActiveElement())&&showPlaceholder(elem)
}var inputs,textareas,hideOnInput,liveUpdates,keydownVal,styleElem,styleRules,placeholder,timer,form,elem,len,i,validTypes=["text","search","url","tel","email","password","number","textarea"],badKeys=[27,33,34,35,36,37,38,39,40,8,46],placeholderStyleColor="#ccc",placeholderClassName="placeholdersjs",classNameRegExp=new RegExp("(?:^|\\s)"+placeholderClassName+"(?!\\S)"),ATTR_CURRENT_VAL="data-placeholder-value",ATTR_ACTIVE="data-placeholder-active",ATTR_INPUT_TYPE="data-placeholder-type",ATTR_FORM_HANDLED="data-placeholder-submit",ATTR_EVENTS_BOUND="data-placeholder-bound",ATTR_OPTION_FOCUS="data-placeholder-focus",ATTR_OPTION_LIVE="data-placeholder-live",ATTR_MAXLENGTH="data-placeholder-maxlength",test=document.createElement("input"),head=document.getElementsByTagName("head")[0],root=document.documentElement,Placeholders=global.Placeholders,Utils=Placeholders.Utils;
if(Placeholders.nativeSupport=void 0!==test.placeholder,!Placeholders.nativeSupport){for(inputs=document.getElementsByTagName("input"),textareas=document.getElementsByTagName("textarea"),hideOnInput="false"===root.getAttribute(ATTR_OPTION_FOCUS),liveUpdates="false"!==root.getAttribute(ATTR_OPTION_LIVE),styleElem=document.createElement("style"),styleElem.type="text/css",styleRules=document.createTextNode("."+placeholderClassName+" { color:"+placeholderStyleColor+"; }"),styleElem.styleSheet?styleElem.styleSheet.cssText=styleRules.nodeValue:styleElem.appendChild(styleRules),head.insertBefore(styleElem,head.firstChild),i=0,len=inputs.length+textareas.length;len>i;i++)elem=i<inputs.length?inputs[i]:textareas[i-inputs.length],placeholder=elem.attributes.placeholder,placeholder&&(placeholder=placeholder.nodeValue,placeholder&&Utils.inArray(validTypes,elem.type)&&newElement(elem));
timer=setInterval(function(){for(i=0,len=inputs.length+textareas.length;len>i;i++)elem=i<inputs.length?inputs[i]:textareas[i-inputs.length],placeholder=elem.attributes.placeholder,placeholder?(placeholder=placeholder.nodeValue,placeholder&&Utils.inArray(validTypes,elem.type)&&(elem.getAttribute(ATTR_EVENTS_BOUND)||newElement(elem),(placeholder!==elem.getAttribute(ATTR_CURRENT_VAL)||"password"===elem.type&&!elem.getAttribute(ATTR_INPUT_TYPE))&&("password"===elem.type&&!elem.getAttribute(ATTR_INPUT_TYPE)&&Utils.changeType(elem,"text")&&elem.setAttribute(ATTR_INPUT_TYPE,"password"),elem.value===elem.getAttribute(ATTR_CURRENT_VAL)&&(elem.value=placeholder),elem.setAttribute(ATTR_CURRENT_VAL,placeholder)))):elem.getAttribute(ATTR_ACTIVE)&&(hidePlaceholder(elem),elem.removeAttribute(ATTR_CURRENT_VAL));
liveUpdates||clearInterval(timer)},100)}Utils.addEventListener(global,"beforeunload",function(){Placeholders.disable()}),Placeholders.disable=Placeholders.nativeSupport?noop:disablePlaceholders,Placeholders.enable=Placeholders.nativeSupport?noop:enablePlaceholders}(this),define("polyfill/placeholders",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/ExtendedTextInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/extendedTextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","i18n","ckeditor","ckConfigurator","polyfill/placeholders"],function(_,$,tpl,Helper,__,ckEditor,ckConfigurator){var _setPattern=function($element,pattern){var patt=new RegExp("^"+pattern+"$");
$element.on("keyup",function(){$element.removeClass("field-error"),patt.test($element.val())||$element.addClass("field-error")})},_isMultiple=function(interaction){var attributes=interaction.getAttributes(),response=interaction.getResponseDeclaration();return!(!attributes.maxStrings||"multiple"!==response.attr("cardinality")&&"ordered"!==response.attr("cardinality"))},render=function(interaction){var $el,expectedLength,placeholderType,attributes=interaction.getAttributes(),$container=interaction.getContainer(),multiple=(interaction.getResponseDeclaration(),_isMultiple(interaction));if(ckEditor.on("instanceCreated",function(event){var editor=event.editor,toolbarType="block";
editor.on("configLoaded",function(){editor.config=ckConfigurator.getConfig(editor,toolbarType,ckeOptions)}),editor.on("change",function(){Helper.triggerResponseChangeEvent(interaction,{})})}),multiple){if($el=$container.find("input"),attributes.minStrings){var _getNumStrings=function($element){var num=0;return $element.each(function(){""!==$(this).val()&&num++}),num},minStrings=parseInt(attributes.minStrings);minStrings>0&&$el.on("blur",function(){setTimeout(function(){!$el.is(":focus")&&_getNumStrings($el)<minStrings&&Helper.appendNotification(interaction,__("The minimum number of answers is ")+" : "+minStrings,"warning")},100)})}attributes.expectedLength&&(expectedLength=parseInt(attributes.expectedLength,10),expectedLength>0&&$el.each(function(){$(this).css("width",expectedLength+"em")
})),attributes.patternMask&&$el.each(function(){_setPattern($(this),attributes.patternMask)}),attributes.placeholderText&&(placeholderType="first","multiple"===placeholderType?$el.each(function(){$(this).attr("placeholder",attributes.placeholderText)}):"first"===placeholderType&&$el.first().attr("placeholder",attributes.placeholderText))}else{$el=$container.find("textarea");var ckeOptions={extraPlugins:"confighelper",resize_enabled:!0};attributes.placeholderText&&$el.attr("placeholder",attributes.placeholderText),"xhtml"==_getFormat(interaction)?(ckEditor.replace(interaction.attr("identifier"),ckeOptions),$container.find("#text-container").addClass("solid")):$el.bind("keyup change",function(){Helper.triggerResponseChangeEvent(interaction,{})
})}},resetResponse=function(interaction){interaction.getContainer().find("input, textarea").val("")},setResponse=function(interaction,response){var _setMultipleVal=function(identifier,value){interaction.getContainer().find("#"+identifier).val(value)},_setVal=function(value){interaction.getContainer().find("textarea").val(value)},baseType=interaction.getResponseDeclaration().attr("baseType");if(response.base&&void 0!==response.base[baseType])_setVal(response.base[baseType]);else{if(!response.list||!response.list[baseType])throw new Error("wrong response format in argument.");for(var i in response.list[baseType]){var identifier=void 0===response.list.identifier?"":response.list.identifier[i];
_setMultipleVal(identifier+"_"+i,response.list[baseType][i])}}},getResponse=function(interaction){var $container=interaction.getContainer(),attributes=interaction.getAttributes(),responseDeclaration=interaction.getResponseDeclaration(),baseType=responseDeclaration.attr("baseType"),numericBase=attributes.base||10,multiple=!(!attributes.maxStrings||"multiple"!==responseDeclaration.attr("cardinality")&&"ordered"!==responseDeclaration.attr("cardinality")),ret=multiple?{list:{}}:{base:{}};if(multiple){var values=[];$container.find("input").each(function(i){$el=$(this),attributes.placeholderText&&$el.val()===attributes.placeholderText?values[i]="":"integer"===baseType?(values[i]=parseInt($el.val(),numericBase),values[i]=isNaN(values[i])?"":values[i]):"float"===baseType?(values[i]=parseFloat($el.val()),values[i]=isNaN(values[i])?"":values[i]):"string"===baseType&&(values[i]=$el.val())
}),ret.list[baseType]=values}else{var value="";attributes.placeholderText&&_getTextareaValue(interaction)===attributes.placeholderText?value="":"integer"===baseType?value=parseInt(_getTextareaValue(interaction),numericBase):"float"===baseType?value=parseFloat(_getTextareaValue(interaction)):"string"===baseType&&(value=_getTextareaValue(interaction)),ret.base[baseType]=isNaN(value)&&"number"==typeof value?"":value}return ret},_getTextareaValue=function(interaction){return"xhtml"===_getFormat(interaction)?_ckEditorData(interaction):Helper.getContainer(interaction).find("textarea").val()},_ckEditorData=function(interaction){return ckEditor.instances[interaction.attr("identifier")].getData()
},_getFormat=function(interaction){var format=interaction.attr("format");switch(format){case"plain":case"xhtml":case"preFormatted":return format;default:return"plain"}},updateFormat=function(interaction,from){Helper.getContainer(interaction);"xhtml"==interaction.attr("format")?ckEditor.replace(interaction.attr("identifier")):"xhtml"==from&&ckEditor.instances[interaction.attr("identifier")].destroy()},enable=function(interaction){var $container=Helper.getContainer(interaction);$container.find("input, textarea").removeAttr("disabled"),"xhtml"==interaction.attr("format")&&(ckEditor.instances[interaction.attr("identifier")].destroy(),ckEditor.replace(interaction.attr("identifier")))
},disable=function(interaction){var $container=Helper.getContainer(interaction);$container.find("input, textarea").attr("disabled","disabled"),"xhtml"==interaction.attr("format")&&(ckEditor.instances[interaction.attr("identifier")].destroy(),ckEditor.replace(interaction.attr("identifier")))},clearText=function(interaction){setText(interaction,"")},setText=function(interaction,text){var $container=Helper.getContainer(interaction);"xhtml"==interaction.attr("format")?ckEditor.instances[interaction.attr("identifier")].setData(text):$container.find("textarea").val(text)};return{qtiClass:"extendedTextInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,updateFormat:updateFormat,enable:enable,disable:disable,clearText:clearText,setText:setText}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program3(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-gapMatchInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="gapMatchInteraction">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <ul class="choice-area none block-listing solid horizontal source" data-eyecatcher=">li">\n        ',options={hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    </ul>\n    <div class="instruction-container"></div>\n    <div class="qti-flow-container">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GapMatchInteraction",["lodash","i18n","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/gapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","eyecatcher"],function(_,__,$,tpl,Helper,pciResponse){var _choiceUsages={},setChoice=function(interaction,$choice,$target){var choiceSerial=$choice.data("serial"),choice=interaction.getChoice(choiceSerial);_choiceUsages[choiceSerial]||(_choiceUsages[choiceSerial]=0),_choiceUsages[choiceSerial]++,$target.data("serial",choiceSerial).html($choice.html()).addClass("filled"),!interaction.responseMappingMode&&choice.attr("matchMax")&&_choiceUsages[choiceSerial]>=choice.attr("matchMax")&&$choice.addClass("deactivated"),Helper.triggerResponseChangeEvent(interaction)
},unsetChoice=function(interaction,$choice){var serial=$choice.data("serial"),$container=Helper.getContainer(interaction);$container.find(".choice-area [data-serial="+serial+"]").removeClass("deactivated"),_choiceUsages[serial]--,$choice.removeClass("filled").removeData("serial").empty(),interaction.swapping||Helper.triggerResponseChangeEvent(interaction)},getChoice=function(interaction,identifier){return Helper.getContainer(interaction).find(".choice-area [data-identifier="+identifier+"]")},getGap=function(interaction,identifier){return Helper.getContainer(interaction).find(".qti-flow-container [data-identifier="+identifier+"]")},render=function(interaction){var $container=Helper.getContainer(interaction),$choiceArea=$container.find(".choice-area"),$flowContainer=$container.find(".qti-flow-container"),$activeChoice=null,_getChoice=function(serial){return $choiceArea.find("[data-serial="+serial+"]")
},_setChoice=function($choice,$target){return setChoice(interaction,$choice,$target)},_resetSelection=function(){$activeChoice&&($flowContainer.find(".remove-choice").remove(),$activeChoice.removeClass("active"),$container.find(".empty").removeClass("empty"),$activeChoice=null)},_unsetChoice=function($choice){return unsetChoice(interaction,$choice)},_isInsertionMode=function(){return $activeChoice&&!$activeChoice.hasClass("filled")},_isModeEditing=function(){return $activeChoice&&$activeChoice.hasClass("filled")};$container.on("mousedown.commonRenderer",function(){_resetSelection()}),$choiceArea.on("mousedown.commonRenderer",">li",function(e){return e.stopPropagation(),$(this).hasClass("deactivated")?void e.preventDefault():void(_isModeEditing()||$activeChoice?(_unsetChoice($activeChoice),_setChoice($(this),$activeChoice),_resetSelection()):$(this).hasClass("active")?_resetSelection():(_resetSelection(),$activeChoice=$(this),$(this).addClass("active"),$flowContainer.find(".gapmatch-content").addClass("empty")))
}),$flowContainer.on("mousedown.commonRenderer",".gapmatch-content",function(e){if(e.stopPropagation(),_isInsertionMode()){var $target=$(this),choiceSerial=$activeChoice.data("serial"),targetSerial=$target.data("serial");targetSerial!==choiceSerial&&(targetSerial&&_unsetChoice($target),_setChoice($activeChoice,$target)),_resetSelection()}else if(_isModeEditing()){var $target=$(this),targetSerial=$target.data("serial"),choiceSerial=$activeChoice.data("serial");targetSerial!==choiceSerial&&(_unsetChoice($activeChoice),targetSerial&&(_unsetChoice($target),_setChoice(_getChoice(targetSerial),$activeChoice)),_setChoice(_getChoice(choiceSerial),$target)),_resetSelection()
}else if($(this).data("serial")&&$(this).hasClass("filled")){var serial=$(this).data("serial");$activeChoice=$(this),$activeChoice.addClass("active"),$flowContainer.find(">li>div").filter(function(){return $(this).data("serial")!==serial}).addClass("empty"),$choiceArea.find(">li:not(.deactivated)").filter(function(){return $(this).data("serial")!==serial}).addClass("empty");var $bin=$("<span>",{"class":"icon-undo remove-choice",title:__("remove")});$bin.on("mousedown",function(e){e.stopPropagation(),_unsetChoice($activeChoice),_resetSelection()}),$(this).append($bin)}})},resetResponse=function(interaction){Helper.getContainer(interaction).find(".gapmatch-content").each(function(){unsetChoice(interaction,$(this))
})},_setPairs=function(interaction,pairs){_.each(pairs,function(pair){pair&&setChoice(interaction,getChoice(interaction,pair[0]),getGap(interaction,pair[1]).find(".gapmatch-content"))})},setResponse=function(interaction,response){resetResponse(interaction),_setPairs(interaction,pciResponse.unserialize(response,interaction))},_getRawResponse=function(interaction){var response=[];return Helper.getContainer(interaction).find(".gapmatch-content").each(function(){var choiceSerial=$(this).data("serial"),pair=[];choiceSerial&&pair.push(interaction.getChoice(choiceSerial).attr("identifier")),pair.push($(this).data("identifier")),2===pair.length&&response.push(pair)}),response
},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)},destroy=function(interaction){var $container=Helper.getContainer(interaction);$container.find(".gapmatch-content .active").trigger("mousedown.commonRenderer"),$(document).off(".commonRenderer"),$container.off(".commonRenderer"),$container.find(".choice-area").off(".commonRenderer"),$container.find(".qti-flow-container").off(".commonRenderer"),resetResponse(interaction),$container.find(".gapmatch-content").empty(),$container.find(".active").removeClass("active"),$container.find(".remove-choice").remove(),$container.find(".empty").removeClass("empty")};return{qtiClass:"gapMatchInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}
}),function(glob){var current_event,stop,version="0.4.2",has="hasOwnProperty",separator=/[\.\/]/,wildcard="*",fun=function(){},numsort=function(a,b){return a-b},events={n:{}},eve=function(name,scope){name=String(name);var l,oldstop=stop,args=Array.prototype.slice.call(arguments,2),listeners=eve.listeners(name),z=0,indexed=[],queue={},out=[],ce=current_event;current_event=name,stop=0;for(var i=0,ii=listeners.length;ii>i;i++)"zIndex"in listeners[i]&&(indexed.push(listeners[i].zIndex),listeners[i].zIndex<0&&(queue[listeners[i].zIndex]=listeners[i]));for(indexed.sort(numsort);indexed[z]<0;)if(l=queue[indexed[z++]],out.push(l.apply(scope,args)),stop)return stop=oldstop,out;
for(i=0;ii>i;i++)if(l=listeners[i],"zIndex"in l)if(l.zIndex==indexed[z]){if(out.push(l.apply(scope,args)),stop)break;do if(z++,l=queue[indexed[z]],l&&out.push(l.apply(scope,args)),stop)break;while(l)}else queue[l.zIndex]=l;else if(out.push(l.apply(scope,args)),stop)break;return stop=oldstop,current_event=ce,out.length?out:null};eve._events=events,eve.listeners=function(name){var item,items,k,i,ii,j,jj,nes,names=name.split(separator),e=events,es=[e],out=[];for(i=0,ii=names.length;ii>i;i++){for(nes=[],j=0,jj=es.length;jj>j;j++)for(e=es[j].n,items=[e[names[i]],e[wildcard]],k=2;k--;)item=items[k],item&&(nes.push(item),out=out.concat(item.f||[]));es=nes}return out
},eve.on=function(name,f){if(name=String(name),"function"!=typeof f)return function(){};for(var names=name.split(separator),e=events,i=0,ii=names.length;ii>i;i++)e=e.n,e=e.hasOwnProperty(names[i])&&e[names[i]]||(e[names[i]]={n:{}});for(e.f=e.f||[],i=0,ii=e.f.length;ii>i;i++)if(e.f[i]==f)return fun;return e.f.push(f),function(zIndex){+zIndex==+zIndex&&(f.zIndex=+zIndex)}},eve.f=function(event){var attrs=[].slice.call(arguments,1);return function(){eve.apply(null,[event,null].concat(attrs).concat([].slice.call(arguments,0)))}},eve.stop=function(){stop=1},eve.nt=function(subname){return subname?new RegExp("(?:\\.|\\/|^)"+subname+"(?:\\.|\\/|$)").test(current_event):current_event
},eve.nts=function(){return current_event.split(separator)},eve.off=eve.unbind=function(name,f){if(!name)return void(eve._events=events={n:{}});var e,key,splice,i,ii,j,jj,names=name.split(separator),cur=[events];for(i=0,ii=names.length;ii>i;i++)for(j=0;j<cur.length;j+=splice.length-2){if(splice=[j,1],e=cur[j].n,names[i]!=wildcard)e[names[i]]&&splice.push(e[names[i]]);else for(key in e)e[has](key)&&splice.push(e[key]);cur.splice.apply(cur,splice)}for(i=0,ii=cur.length;ii>i;i++)for(e=cur[i];e.n;){if(f){if(e.f){for(j=0,jj=e.f.length;jj>j;j++)if(e.f[j]==f){e.f.splice(j,1);break}!e.f.length&&delete e.f}for(key in e.n)if(e.n[has](key)&&e.n[key].f){var funcs=e.n[key].f;
for(j=0,jj=funcs.length;jj>j;j++)if(funcs[j]==f){funcs.splice(j,1);break}!funcs.length&&delete e.n[key].f}}else{delete e.f;for(key in e.n)e.n[has](key)&&e.n[key].f&&delete e.n[key].f}e=e.n}},eve.once=function(name,f){var f2=function(){return eve.unbind(name,f2),f.apply(this,arguments)};return eve.on(name,f2)},eve.version=version,eve.toString=function(){return"You are running Eve "+version},"undefined"!=typeof module&&module.exports?module.exports=eve:"undefined"!=typeof define?define("eve",[],function(){return eve}):glob.eve=eve}(window||this),function(glob,factory){"function"==typeof define&&define.amd?define("raphael",["eve"],function(eve){return factory(glob,eve)
}):factory(glob,glob.eve||"function"==typeof require&&require("eve"))}(this,function(window,eve){function R(first){if(R.is(first,"function"))return loaded?first():eve.on("raphael.DOMload",first);if(R.is(first,array))return R._engine.create[apply](R,first.splice(0,3+R.is(first[0],nu))).add(first);var args=Array.prototype.slice.call(arguments,0);if(R.is(args[args.length-1],"function")){var f=args.pop();return loaded?f.call(R._engine.create[apply](R,args)):eve.on("raphael.DOMload",function(){f.call(R._engine.create[apply](R,args))})}return R._engine.create[apply](R,arguments)}function clone(obj){if("function"==typeof obj||Object(obj)!==obj)return obj;var res=new obj.constructor;
for(var key in obj)obj[has](key)&&(res[key]=clone(obj[key]));return res}function repush(array,item){for(var i=0,ii=array.length;ii>i;i++)if(array[i]===item)return array.push(array.splice(i,1)[0])}function cacher(f,scope,postprocessor){function newf(){var arg=Array.prototype.slice.call(arguments,0),args=arg.join("â"),cache=newf.cache=newf.cache||{},count=newf.count=newf.count||[];return cache[has](args)?(repush(count,args),postprocessor?postprocessor(cache[args]):cache[args]):(count.length>=1e3&&delete cache[count.shift()],count.push(args),cache[args]=f[apply](scope,arg),postprocessor?postprocessor(cache[args]):cache[args])}return newf}function clrToString(){return this.hex
}function catmullRom2bezier(crp,z){for(var d=[],i=0,iLen=crp.length;iLen-2*!z>i;i+=2){var p=[{x:+crp[i-2],y:+crp[i-1]},{x:+crp[i],y:+crp[i+1]},{x:+crp[i+2],y:+crp[i+3]},{x:+crp[i+4],y:+crp[i+5]}];z?i?iLen-4==i?p[3]={x:+crp[0],y:+crp[1]}:iLen-2==i&&(p[2]={x:+crp[0],y:+crp[1]},p[3]={x:+crp[2],y:+crp[3]}):p[0]={x:+crp[iLen-2],y:+crp[iLen-1]}:iLen-4==i?p[3]=p[2]:i||(p[0]={x:+crp[i],y:+crp[i+1]}),d.push(["C",(-p[0].x+6*p[1].x+p[2].x)/6,(-p[0].y+6*p[1].y+p[2].y)/6,(p[1].x+6*p[2].x-p[3].x)/6,(p[1].y+6*p[2].y-p[3].y)/6,p[2].x,p[2].y])}return d}function base3(t,p1,p2,p3,p4){var t1=-3*p1+9*p2-9*p3+3*p4,t2=t*t1+6*p1-12*p2+6*p3;return t*t2-3*p1+3*p2}function bezlen(x1,y1,x2,y2,x3,y3,x4,y4,z){null==z&&(z=1),z=z>1?1:0>z?0:z;
for(var z2=z/2,n=12,Tvalues=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],Cvalues=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],sum=0,i=0;n>i;i++){var ct=z2*Tvalues[i]+z2,xbase=base3(ct,x1,x2,x3,x4),ybase=base3(ct,y1,y2,y3,y4),comb=xbase*xbase+ybase*ybase;sum+=Cvalues[i]*math.sqrt(comb)}return z2*sum}function getTatLen(x1,y1,x2,y2,x3,y3,x4,y4,ll){if(!(0>ll||bezlen(x1,y1,x2,y2,x3,y3,x4,y4)<ll)){var l,t=1,step=t/2,t2=t-step,e=.01;for(l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);abs(l-ll)>e;)step/=2,t2+=(ll>l?1:-1)*step,l=bezlen(x1,y1,x2,y2,x3,y3,x4,y4,t2);return t2}}function intersect(x1,y1,x2,y2,x3,y3,x4,y4){if(!(mmax(x1,x2)<mmin(x3,x4)||mmin(x1,x2)>mmax(x3,x4)||mmax(y1,y2)<mmin(y3,y4)||mmin(y1,y2)>mmax(y3,y4))){var nx=(x1*y2-y1*x2)*(x3-x4)-(x1-x2)*(x3*y4-y3*x4),ny=(x1*y2-y1*x2)*(y3-y4)-(y1-y2)*(x3*y4-y3*x4),denominator=(x1-x2)*(y3-y4)-(y1-y2)*(x3-x4);
if(denominator){var px=nx/denominator,py=ny/denominator,px2=+px.toFixed(2),py2=+py.toFixed(2);if(!(px2<+mmin(x1,x2).toFixed(2)||px2>+mmax(x1,x2).toFixed(2)||px2<+mmin(x3,x4).toFixed(2)||px2>+mmax(x3,x4).toFixed(2)||py2<+mmin(y1,y2).toFixed(2)||py2>+mmax(y1,y2).toFixed(2)||py2<+mmin(y3,y4).toFixed(2)||py2>+mmax(y3,y4).toFixed(2)))return{x:px,y:py}}}}function interHelper(bez1,bez2,justCount){var bbox1=R.bezierBBox(bez1),bbox2=R.bezierBBox(bez2);if(!R.isBBoxIntersect(bbox1,bbox2))return justCount?0:[];for(var l1=bezlen.apply(0,bez1),l2=bezlen.apply(0,bez2),n1=mmax(~~(l1/5),1),n2=mmax(~~(l2/5),1),dots1=[],dots2=[],xy={},res=justCount?0:[],i=0;n1+1>i;i++){var p=R.findDotsAtSegment.apply(R,bez1.concat(i/n1));
dots1.push({x:p.x,y:p.y,t:i/n1})}for(i=0;n2+1>i;i++)p=R.findDotsAtSegment.apply(R,bez2.concat(i/n2)),dots2.push({x:p.x,y:p.y,t:i/n2});for(i=0;n1>i;i++)for(var j=0;n2>j;j++){var di=dots1[i],di1=dots1[i+1],dj=dots2[j],dj1=dots2[j+1],ci=abs(di1.x-di.x)<.001?"y":"x",cj=abs(dj1.x-dj.x)<.001?"y":"x",is=intersect(di.x,di.y,di1.x,di1.y,dj.x,dj.y,dj1.x,dj1.y);if(is){if(xy[is.x.toFixed(4)]==is.y.toFixed(4))continue;xy[is.x.toFixed(4)]=is.y.toFixed(4);var t1=di.t+abs((is[ci]-di[ci])/(di1[ci]-di[ci]))*(di1.t-di.t),t2=dj.t+abs((is[cj]-dj[cj])/(dj1[cj]-dj[cj]))*(dj1.t-dj.t);t1>=0&&1.001>=t1&&t2>=0&&1.001>=t2&&(justCount?res++:res.push({x:is.x,y:is.y,t1:mmin(t1,1),t2:mmin(t2,1)}))
}}return res}function interPathHelper(path1,path2,justCount){path1=R._path2curve(path1),path2=R._path2curve(path2);for(var x1,y1,x2,y2,x1m,y1m,x2m,y2m,bez1,bez2,res=justCount?0:[],i=0,ii=path1.length;ii>i;i++){var pi=path1[i];if("M"==pi[0])x1=x1m=pi[1],y1=y1m=pi[2];else{"C"==pi[0]?(bez1=[x1,y1].concat(pi.slice(1)),x1=bez1[6],y1=bez1[7]):(bez1=[x1,y1,x1,y1,x1m,y1m,x1m,y1m],x1=x1m,y1=y1m);for(var j=0,jj=path2.length;jj>j;j++){var pj=path2[j];if("M"==pj[0])x2=x2m=pj[1],y2=y2m=pj[2];else{"C"==pj[0]?(bez2=[x2,y2].concat(pj.slice(1)),x2=bez2[6],y2=bez2[7]):(bez2=[x2,y2,x2,y2,x2m,y2m,x2m,y2m],x2=x2m,y2=y2m);var intr=interHelper(bez1,bez2,justCount);if(justCount)res+=intr;
else{for(var k=0,kk=intr.length;kk>k;k++)intr[k].segment1=i,intr[k].segment2=j,intr[k].bez1=bez1,intr[k].bez2=bez2;res=res.concat(intr)}}}}}return res}function Matrix(a,b,c,d,e,f){null!=a?(this.a=+a,this.b=+b,this.c=+c,this.d=+d,this.e=+e,this.f=+f):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function x_y_w_h(){return this.x+S+this.y+S+this.width+" Ã "+this.height}function CubicBezierAtTime(t,p1x,p1y,p2x,p2y,duration){function sampleCurveX(t){return((ax*t+bx)*t+cx)*t}function solve(x,epsilon){var t=solveCurveX(x,epsilon);return((ay*t+by)*t+cy)*t}function solveCurveX(x,epsilon){var t0,t1,t2,x2,d2,i;for(t2=x,i=0;8>i;i++){if(x2=sampleCurveX(t2)-x,abs(x2)<epsilon)return t2;
if(d2=(3*ax*t2+2*bx)*t2+cx,abs(d2)<1e-6)break;t2-=x2/d2}if(t0=0,t1=1,t2=x,t0>t2)return t0;if(t2>t1)return t1;for(;t1>t0;){if(x2=sampleCurveX(t2),abs(x2-x)<epsilon)return t2;x>x2?t0=t2:t1=t2,t2=(t1-t0)/2+t0}return t2}var cx=3*p1x,bx=3*(p2x-p1x)-cx,ax=1-cx-bx,cy=3*p1y,by=3*(p2y-p1y)-cy,ay=1-cy-by;return solve(t,1/(200*duration))}function Animation(anim,ms){var percents=[],newAnim={};if(this.ms=ms,this.times=1,anim){for(var attr in anim)anim[has](attr)&&(newAnim[toFloat(attr)]=anim[attr],percents.push(toFloat(attr)));percents.sort(sortByNumber)}this.anim=newAnim,this.top=percents[percents.length-1],this.percents=percents}function runAnimation(anim,element,percent,status,totalOrigin,times){percent=toFloat(percent);
var params,isInAnim,isInAnimSet,next,prev,timestamp,ms=anim.ms,from={},to={},diff={};if(status)for(i=0,ii=animationElements.length;ii>i;i++){var e=animationElements[i];if(e.el.id==element.id&&e.anim==anim){e.percent!=percent?(animationElements.splice(i,1),isInAnimSet=1):isInAnim=e,element.attr(e.totalOrigin);break}}else status=+to;for(var i=0,ii=anim.percents.length;ii>i;i++){if(anim.percents[i]==percent||anim.percents[i]>status*anim.top){percent=anim.percents[i],prev=anim.percents[i-1]||0,ms=ms/anim.top*(percent-prev),next=anim.percents[i+1],params=anim.anim[percent];break}status&&element.attr(anim.anim[anim.percents[i]])}if(params){if(isInAnim)isInAnim.initstatus=status,isInAnim.start=new Date-isInAnim.ms*status;
else{for(var attr in params)if(params[has](attr)&&(availableAnimAttrs[has](attr)||element.paper.customAttributes[has](attr)))switch(from[attr]=element.attr(attr),null==from[attr]&&(from[attr]=availableAttrs[attr]),to[attr]=params[attr],availableAnimAttrs[attr]){case nu:diff[attr]=(to[attr]-from[attr])/ms;break;case"colour":from[attr]=R.getRGB(from[attr]);var toColour=R.getRGB(to[attr]);diff[attr]={r:(toColour.r-from[attr].r)/ms,g:(toColour.g-from[attr].g)/ms,b:(toColour.b-from[attr].b)/ms};break;case"path":var pathes=path2curve(from[attr],to[attr]),toPath=pathes[1];for(from[attr]=pathes[0],diff[attr]=[],i=0,ii=from[attr].length;ii>i;i++){diff[attr][i]=[0];for(var j=1,jj=from[attr][i].length;jj>j;j++)diff[attr][i][j]=(toPath[i][j]-from[attr][i][j])/ms
}break;case"transform":var _=element._,eq=equaliseTransform(_[attr],to[attr]);if(eq)for(from[attr]=eq.from,to[attr]=eq.to,diff[attr]=[],diff[attr].real=!0,i=0,ii=from[attr].length;ii>i;i++)for(diff[attr][i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;jj>j;j++)diff[attr][i][j]=(to[attr][i][j]-from[attr][i][j])/ms;else{var m=element.matrix||new Matrix,to2={_:{transform:_.transform},getBBox:function(){return element.getBBox(1)}};from[attr]=[m.a,m.b,m.c,m.d,m.e,m.f],extractTransform(to2,to[attr]),to[attr]=to2._.transform,diff[attr]=[(to2.matrix.a-m.a)/ms,(to2.matrix.b-m.b)/ms,(to2.matrix.c-m.c)/ms,(to2.matrix.d-m.d)/ms,(to2.matrix.e-m.e)/ms,(to2.matrix.f-m.f)/ms]
}break;case"csv":var values=Str(params[attr])[split](separator),from2=Str(from[attr])[split](separator);if("clip-rect"==attr)for(from[attr]=from2,diff[attr]=[],i=from2.length;i--;)diff[attr][i]=(values[i]-from[attr][i])/ms;to[attr]=values;break;default:for(values=[][concat](params[attr]),from2=[][concat](from[attr]),diff[attr]=[],i=element.paper.customAttributes[attr].length;i--;)diff[attr][i]=((values[i]||0)-(from2[i]||0))/ms}var easing=params.easing,easyeasy=R.easing_formulas[easing];if(!easyeasy)if(easyeasy=Str(easing).match(bezierrg),easyeasy&&5==easyeasy.length){var curve=easyeasy;easyeasy=function(t){return CubicBezierAtTime(t,+curve[1],+curve[2],+curve[3],+curve[4],ms)
}}else easyeasy=pipe;if(timestamp=params.start||anim.start||+new Date,e={anim:anim,percent:percent,timestamp:timestamp,start:timestamp+(anim.del||0),status:0,initstatus:status||0,stop:!1,ms:ms,easing:easyeasy,from:from,diff:diff,to:to,el:element,callback:params.callback,prev:prev,next:next,repeat:times||anim.times,origin:element.attr(),totalOrigin:totalOrigin},animationElements.push(e),status&&!isInAnim&&!isInAnimSet&&(e.stop=!0,e.start=new Date-ms*status,1==animationElements.length))return animation();isInAnimSet&&(e.start=new Date-e.ms*status),1==animationElements.length&&requestAnimFrame(animation)}eve("raphael.anim.start."+element.id,element,anim)}}function stopAnimation(paper){for(var i=0;i<animationElements.length;i++)animationElements[i].el.paper==paper&&animationElements.splice(i--,1)
}R.version="2.1.2",R.eve=eve;var loaded,paperproto,separator=/[, ]+/,elements={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},formatrg=/\{(\d+)\}/g,has="hasOwnProperty",g={doc:document,win:window},oldRaphael={was:Object.prototype[has].call(g.win,"Raphael"),is:g.win.Raphael},Paper=function(){this.ca=this.customAttributes={}},apply="apply",concat="concat",supportsTouch="ontouchstart"in g.win||g.win.DocumentTouch&&g.doc instanceof DocumentTouch,E="",S=" ",Str=String,split="split",events="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[split](S),touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},lowerCase=Str.prototype.toLowerCase,math=Math,mmax=math.max,mmin=math.min,abs=math.abs,pow=math.pow,PI=math.PI,nu="number",string="string",array="array",objectToString=Object.prototype.toString,colourRegExp=(R._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i),isnan={NaN:1,Infinity:1,"-Infinity":1},bezierrg=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,round=math.round,toFloat=parseFloat,toInt=parseInt,upperCase=Str.prototype.toUpperCase,availableAttrs=R._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},availableAnimAttrs=R._availableAnimAttrs={blur:nu,"clip-rect":"csv",cx:nu,cy:nu,fill:"colour","fill-opacity":nu,"font-size":nu,height:nu,opacity:nu,path:"path",r:nu,rx:nu,ry:nu,stroke:"colour","stroke-opacity":nu,"stroke-width":nu,transform:"transform",width:nu,x:nu,y:nu},commaSpaces=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,hsrg={hs:1,rg:1},p2s=/,?([achlmqrstvxz]),?/gi,pathCommand=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,tCommand=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi,pathValues=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi,eldata=(R._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,{}),sortByNumber=function(a,b){return toFloat(a)-toFloat(b)
},fun=function(){},pipe=function(x){return x},rectPath=R._rectPath=function(x,y,w,h,r){return r?[["M",x+r,y],["l",w-2*r,0],["a",r,r,0,0,1,r,r],["l",0,h-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-w,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-h],["a",r,r,0,0,1,r,-r],["z"]]:[["M",x,y],["l",w,0],["l",0,h],["l",-w,0],["z"]]},ellipsePath=function(x,y,rx,ry){return null==ry&&(ry=rx),[["M",x,y],["m",0,-ry],["a",rx,ry,0,1,1,0,2*ry],["a",rx,ry,0,1,1,0,-2*ry],["z"]]},getPath=R._getPath={path:function(el){return el.attr("path")},circle:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.r)},ellipse:function(el){var a=el.attrs;return ellipsePath(a.cx,a.cy,a.rx,a.ry)},rect:function(el){var a=el.attrs;
return rectPath(a.x,a.y,a.width,a.height,a.r)},image:function(el){var a=el.attrs;return rectPath(a.x,a.y,a.width,a.height)},text:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)},set:function(el){var bbox=el._getBBox();return rectPath(bbox.x,bbox.y,bbox.width,bbox.height)}},mapPath=R.mapPath=function(path,matrix){if(!matrix)return path;var x,y,i,j,ii,jj,pathi;for(path=path2curve(path),i=0,ii=path.length;ii>i;i++)for(pathi=path[i],j=1,jj=pathi.length;jj>j;j+=2)x=matrix.x(pathi[j],pathi[j+1]),y=matrix.y(pathi[j],pathi[j+1]),pathi[j]=x,pathi[j+1]=y;return path};if(R._g=g,R.type=g.win.SVGAngle||g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML","VML"==R.type){var b,d=g.doc.createElement("div");
if(d.innerHTML='<v:shape adj="1"/>',b=d.firstChild,b.style.behavior="url(#default#VML)",!b||"object"!=typeof b.adj)return R.type=E;d=null}R.svg=!(R.vml="VML"==R.type),R._Paper=Paper,R.fn=paperproto=Paper.prototype=R.prototype,R._id=0,R._oid=0,R.is=function(o,type){return type=lowerCase.call(type),"finite"==type?!isnan[has](+o):"array"==type?o instanceof Array:"null"==type&&null===o||type==typeof o&&null!==o||"object"==type&&o===Object(o)||"array"==type&&Array.isArray&&Array.isArray(o)||objectToString.call(o).slice(8,-1).toLowerCase()==type},R.angle=function(x1,y1,x2,y2,x3,y3){if(null==x3){var x=x1-x2,y=y1-y2;return x||y?(180+180*math.atan2(-y,-x)/PI+360)%360:0
}return R.angle(x1,y1,x3,y3)-R.angle(x2,y2,x3,y3)},R.rad=function(deg){return deg%360*PI/180},R.deg=function(rad){return 180*rad/PI%360},R.snapTo=function(values,value,tolerance){if(tolerance=R.is(tolerance,"finite")?tolerance:10,R.is(values,array)){for(var i=values.length;i--;)if(abs(values[i]-value)<=tolerance)return values[i]}else{values=+values;var rem=value%values;if(tolerance>rem)return value-rem;if(rem>values-tolerance)return value-rem+values}return value};R.createUUID=function(uuidRegEx,uuidReplacer){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx,uuidReplacer).toUpperCase()}}(/[xy]/g,function(c){var r=16*math.random()|0,v="x"==c?r:3&r|8;
return v.toString(16)});R.setWindow=function(newwin){eve("raphael.setWindow",R,g.win,newwin),g.win=newwin,g.doc=g.win.document,R._engine.initWin&&R._engine.initWin(g.win)};var toHex=function(color){if(R.vml){var bod,trim=/^\s+|\s+$/g;try{var docum=new ActiveXObject("htmlfile");docum.write("<body>"),docum.close(),bod=docum.body}catch(e){bod=createPopup().document.body}var range=bod.createTextRange();toHex=cacher(function(color){try{bod.style.color=Str(color).replace(trim,E);var value=range.queryCommandValue("ForeColor");return value=(255&value)<<16|65280&value|(16711680&value)>>>16,"#"+("000000"+value.toString(16)).slice(-6)}catch(e){return"none"}})}else{var i=g.doc.createElement("i");
i.title="RaphaÃ«l Colour Picker",i.style.display="none",g.doc.body.appendChild(i),toHex=cacher(function(color){var computedStyle;return i.style.color=color,computedStyle=g.doc.defaultView.getComputedStyle(i,E),computedStyle?computedStyle.getPropertyValue("color"):color})}return toHex(color)},hsbtoString=function(){return"hsb("+[this.h,this.s,this.b]+")"},hsltoString=function(){return"hsl("+[this.h,this.s,this.l]+")"},rgbtoString=function(){return this.hex},prepareRGB=function(r,g,b){if(null==g&&R.is(r,"object")&&"r"in r&&"g"in r&&"b"in r&&(b=r.b,g=r.g,r=r.r),null==g&&R.is(r,string)){var clr=R.getRGB(r);r=clr.r,g=clr.g,b=clr.b}return(r>1||g>1||b>1)&&(r/=255,g/=255,b/=255),[r,g,b]
},packageRGB=function(r,g,b,o){r*=255,g*=255,b*=255;var rgb={r:r,g:g,b:b,hex:R.rgb(r,g,b),toString:rgbtoString};return R.is(o,"finite")&&(rgb.opacity=o),rgb};R.color=function(clr){var rgb;return R.is(clr,"object")&&"h"in clr&&"s"in clr&&"b"in clr?(rgb=R.hsb2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):R.is(clr,"object")&&"h"in clr&&"s"in clr&&"l"in clr?(rgb=R.hsl2rgb(clr),clr.r=rgb.r,clr.g=rgb.g,clr.b=rgb.b,clr.hex=rgb.hex):(R.is(clr,"string")&&(clr=R.getRGB(clr)),R.is(clr,"object")&&"r"in clr&&"g"in clr&&"b"in clr?(rgb=R.rgb2hsl(clr),clr.h=rgb.h,clr.s=rgb.s,clr.l=rgb.l,rgb=R.rgb2hsb(clr),clr.v=rgb.b):(clr={hex:"none"},clr.r=clr.g=clr.b=clr.h=clr.s=clr.v=clr.l=-1)),clr.toString=rgbtoString,clr
},R.hsb2rgb=function(h,s,v,o){this.is(h,"object")&&"h"in h&&"s"in h&&"b"in h&&(v=h.b,s=h.s,h=h.h,o=h.o),h*=360;var R,G,B,X,C;return h=h%360/60,C=v*s,X=C*(1-abs(h%2-1)),R=G=B=v-C,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],packageRGB(R,G,B,o)},R.hsl2rgb=function(h,s,l,o){this.is(h,"object")&&"h"in h&&"s"in h&&"l"in h&&(l=h.l,s=h.s,h=h.h),(h>1||s>1||l>1)&&(h/=360,s/=100,l/=100),h*=360;var R,G,B,X,C;return h=h%360/60,C=2*s*(.5>l?l:1-l),X=C*(1-abs(h%2-1)),R=G=B=l-C/2,h=~~h,R+=[C,X,0,0,X,C][h],G+=[X,C,C,X,0,0][h],B+=[0,0,X,C,C,X][h],packageRGB(R,G,B,o)},R.rgb2hsb=function(r,g,b){b=prepareRGB(r,g,b),r=b[0],g=b[1],b=b[2];var H,S,V,C;return V=mmax(r,g,b),C=V-mmin(r,g,b),H=0==C?null:V==r?(g-b)/C:V==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,S=0==C?0:C/V,{h:H,s:S,b:V,toString:hsbtoString}
},R.rgb2hsl=function(r,g,b){b=prepareRGB(r,g,b),r=b[0],g=b[1],b=b[2];var H,S,L,M,m,C;return M=mmax(r,g,b),m=mmin(r,g,b),C=M-m,H=0==C?null:M==r?(g-b)/C:M==g?(b-r)/C+2:(r-g)/C+4,H=(H+360)%6*60/360,L=(M+m)/2,S=0==C?0:.5>L?C/(2*L):C/(2-2*L),{h:H,s:S,l:L,toString:hsltoString}},R._path2string=function(){return this.join(",").replace(p2s,"$1")};R._preload=function(src,f){var img=g.doc.createElement("img");img.style.cssText="position:absolute;left:-9999em;top:-9999em",img.onload=function(){f.call(this),this.onload=null,g.doc.body.removeChild(this)},img.onerror=function(){g.doc.body.removeChild(this)},g.doc.body.appendChild(img),img.src=src};R.getRGB=cacher(function(colour){if(!colour||(colour=Str(colour)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString};
if("none"==colour)return{r:-1,g:-1,b:-1,hex:"none",toString:clrToString};!(hsrg[has](colour.toLowerCase().substring(0,2))||"#"==colour.charAt())&&(colour=toHex(colour));var red,green,blue,opacity,t,values,rgb=colour.match(colourRegExp);return rgb?(rgb[2]&&(blue=toInt(rgb[2].substring(5),16),green=toInt(rgb[2].substring(3,5),16),red=toInt(rgb[2].substring(1,3),16)),rgb[3]&&(blue=toInt((t=rgb[3].charAt(3))+t,16),green=toInt((t=rgb[3].charAt(2))+t,16),red=toInt((t=rgb[3].charAt(1))+t,16)),rgb[4]&&(values=rgb[4][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),"rgba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100)),rgb[5]?(values=rgb[5][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||"Â°"==values[0].slice(-1))&&(red/=360),"hsba"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsb2rgb(red,green,blue,opacity)):rgb[6]?(values=rgb[6][split](commaSpaces),red=toFloat(values[0]),"%"==values[0].slice(-1)&&(red*=2.55),green=toFloat(values[1]),"%"==values[1].slice(-1)&&(green*=2.55),blue=toFloat(values[2]),"%"==values[2].slice(-1)&&(blue*=2.55),("deg"==values[0].slice(-3)||"Â°"==values[0].slice(-1))&&(red/=360),"hsla"==rgb[1].toLowerCase().slice(0,4)&&(opacity=toFloat(values[3])),values[3]&&"%"==values[3].slice(-1)&&(opacity/=100),R.hsl2rgb(red,green,blue,opacity)):(rgb={r:red,g:green,b:blue,toString:clrToString},rgb.hex="#"+(16777216|blue|green<<8|red<<16).toString(16).slice(1),R.is(opacity,"finite")&&(rgb.opacity=opacity),rgb)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:clrToString}
},R),R.hsb=cacher(function(h,s,b){return R.hsb2rgb(h,s,b).hex}),R.hsl=cacher(function(h,s,l){return R.hsl2rgb(h,s,l).hex}),R.rgb=cacher(function(r,g,b){return"#"+(16777216|b|g<<8|r<<16).toString(16).slice(1)}),R.getColor=function(value){var start=this.getColor.start=this.getColor.start||{h:0,s:1,b:value||.75},rgb=this.hsb2rgb(start.h,start.s,start.b);return start.h+=.075,start.h>1&&(start.h=0,start.s-=.2,start.s<=0&&(this.getColor.start={h:0,s:1,b:start.b})),rgb.hex},R.getColor.reset=function(){delete this.start},R.parsePathString=function(pathString){if(!pathString)return null;var pth=paths(pathString);if(pth.arr)return pathClone(pth.arr);var paramCounts={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},data=[];
return R.is(pathString,array)&&R.is(pathString[0],array)&&(data=pathClone(pathString)),data.length||Str(pathString).replace(pathCommand,function(a,b,c){var params=[],name=b.toLowerCase();if(c.replace(pathValues,function(a,b){b&&params.push(+b)}),"m"==name&&params.length>2&&(data.push([b][concat](params.splice(0,2))),name="l",b="m"==b?"l":"L"),"r"==name)data.push([b][concat](params));else for(;params.length>=paramCounts[name]&&(data.push([b][concat](params.splice(0,paramCounts[name]))),paramCounts[name]););}),data.toString=R._path2string,pth.arr=pathClone(data),data},R.parseTransformString=cacher(function(TString){if(!TString)return null;var data=[];return R.is(TString,array)&&R.is(TString[0],array)&&(data=pathClone(TString)),data.length||Str(TString).replace(tCommand,function(a,b,c){{var params=[];
lowerCase.call(b)}c.replace(pathValues,function(a,b){b&&params.push(+b)}),data.push([b][concat](params))}),data.toString=R._path2string,data});var paths=function(ps){var p=paths.ps=paths.ps||{};return p[ps]?p[ps].sleep=100:p[ps]={sleep:100},setTimeout(function(){for(var key in p)p[has](key)&&key!=ps&&(p[key].sleep--,!p[key].sleep&&delete p[key])}),p[ps]};R.findDotsAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t,t13=pow(t1,3),t12=pow(t1,2),t2=t*t,t3=t2*t,x=t13*p1x+3*t12*t*c1x+3*t1*t*t*c2x+t3*p2x,y=t13*p1y+3*t12*t*c1y+3*t1*t*t*c2y+t3*p2y,mx=p1x+2*t*(c1x-p1x)+t2*(c2x-2*c1x+p1x),my=p1y+2*t*(c1y-p1y)+t2*(c2y-2*c1y+p1y),nx=c1x+2*t*(c2x-c1x)+t2*(p2x-2*c2x+c1x),ny=c1y+2*t*(c2y-c1y)+t2*(p2y-2*c2y+c1y),ax=t1*p1x+t*c1x,ay=t1*p1y+t*c1y,cx=t1*c2x+t*p2x,cy=t1*c2y+t*p2y,alpha=90-180*math.atan2(mx-nx,my-ny)/PI;
return(mx>nx||ny>my)&&(alpha+=180),{x:x,y:y,m:{x:mx,y:my},n:{x:nx,y:ny},start:{x:ax,y:ay},end:{x:cx,y:cy},alpha:alpha}},R.bezierBBox=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){R.is(p1x,"array")||(p1x=[p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y]);var bbox=curveDim.apply(null,p1x);return{x:bbox.min.x,y:bbox.min.y,x2:bbox.max.x,y2:bbox.max.y,width:bbox.max.x-bbox.min.x,height:bbox.max.y-bbox.min.y}},R.isPointInsideBBox=function(bbox,x,y){return x>=bbox.x&&x<=bbox.x2&&y>=bbox.y&&y<=bbox.y2},R.isBBoxIntersect=function(bbox1,bbox2){var i=R.isPointInsideBBox;return i(bbox2,bbox1.x,bbox1.y)||i(bbox2,bbox1.x2,bbox1.y)||i(bbox2,bbox1.x,bbox1.y2)||i(bbox2,bbox1.x2,bbox1.y2)||i(bbox1,bbox2.x,bbox2.y)||i(bbox1,bbox2.x2,bbox2.y)||i(bbox1,bbox2.x,bbox2.y2)||i(bbox1,bbox2.x2,bbox2.y2)||(bbox1.x<bbox2.x2&&bbox1.x>bbox2.x||bbox2.x<bbox1.x2&&bbox2.x>bbox1.x)&&(bbox1.y<bbox2.y2&&bbox1.y>bbox2.y||bbox2.y<bbox1.y2&&bbox2.y>bbox1.y)
},R.pathIntersection=function(path1,path2){return interPathHelper(path1,path2)},R.pathIntersectionNumber=function(path1,path2){return interPathHelper(path1,path2,1)},R.isPointInsidePath=function(path,x,y){var bbox=R.pathBBox(path);return R.isPointInsideBBox(bbox,x,y)&&interPathHelper(path,[["M",x,y],["H",bbox.x2+10]],1)%2==1},R._removedFactory=function(methodname){return function(){eve("raphael.log",null,"RaphaÃ«l: you are calling to method â"+methodname+"â of removed object",methodname)}};var pathDimensions=R.pathBBox=function(path){var pth=paths(path);if(pth.bbox)return clone(pth.bbox);if(!path)return{x:0,y:0,width:0,height:0,x2:0,y2:0};path=path2curve(path);
for(var p,x=0,y=0,X=[],Y=[],i=0,ii=path.length;ii>i;i++)if(p=path[i],"M"==p[0])x=p[1],y=p[2],X.push(x),Y.push(y);else{var dim=curveDim(x,y,p[1],p[2],p[3],p[4],p[5],p[6]);X=X[concat](dim.min.x,dim.max.x),Y=Y[concat](dim.min.y,dim.max.y),x=p[5],y=p[6]}var xmin=mmin[apply](0,X),ymin=mmin[apply](0,Y),xmax=mmax[apply](0,X),ymax=mmax[apply](0,Y),width=xmax-xmin,height=ymax-ymin,bb={x:xmin,y:ymin,x2:xmax,y2:ymax,width:width,height:height,cx:xmin+width/2,cy:ymin+height/2};return pth.bbox=clone(bb),bb},pathClone=function(pathArray){var res=clone(pathArray);return res.toString=R._path2string,res},pathToRelative=R._pathToRelative=function(pathArray){var pth=paths(pathArray);
if(pth.rel)return pathClone(pth.rel);R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray));var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(x=pathArray[0][1],y=pathArray[0][2],mx=x,my=y,start++,res.push(["M",x,y]));for(var i=start,ii=pathArray.length;ii>i;i++){var r=res[i]=[],pa=pathArray[i];if(pa[0]!=lowerCase.call(pa[0]))switch(r[0]=lowerCase.call(pa[0]),r[0]){case"a":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]-x).toFixed(3),r[7]=+(pa[7]-y).toFixed(3);break;case"v":r[1]=+(pa[1]-y).toFixed(3);break;case"m":mx=pa[1],my=pa[2];default:for(var j=1,jj=pa.length;jj>j;j++)r[j]=+(pa[j]-(j%2?x:y)).toFixed(3)
}else{r=res[i]=[],"m"==pa[0]&&(mx=pa[1]+x,my=pa[2]+y);for(var k=0,kk=pa.length;kk>k;k++)res[i][k]=pa[k]}var len=res[i].length;switch(res[i][0]){case"z":x=mx,y=my;break;case"h":x+=+res[i][len-1];break;case"v":y+=+res[i][len-1];break;default:x+=+res[i][len-2],y+=+res[i][len-1]}}return res.toString=R._path2string,pth.rel=pathClone(res),res},pathToAbsolute=R._pathToAbsolute=function(pathArray){var pth=paths(pathArray);if(pth.abs)return pathClone(pth.abs);if(R.is(pathArray,array)&&R.is(pathArray&&pathArray[0],array)||(pathArray=R.parsePathString(pathArray)),!pathArray||!pathArray.length)return[["M",0,0]];var res=[],x=0,y=0,mx=0,my=0,start=0;"M"==pathArray[0][0]&&(x=+pathArray[0][1],y=+pathArray[0][2],mx=x,my=y,start++,res[0]=["M",x,y]);
for(var r,pa,crz=3==pathArray.length&&"M"==pathArray[0][0]&&"R"==pathArray[1][0].toUpperCase()&&"Z"==pathArray[2][0].toUpperCase(),i=start,ii=pathArray.length;ii>i;i++){if(res.push(r=[]),pa=pathArray[i],pa[0]!=upperCase.call(pa[0]))switch(r[0]=upperCase.call(pa[0]),r[0]){case"A":r[1]=pa[1],r[2]=pa[2],r[3]=pa[3],r[4]=pa[4],r[5]=pa[5],r[6]=+(pa[6]+x),r[7]=+(pa[7]+y);break;case"V":r[1]=+pa[1]+y;break;case"H":r[1]=+pa[1]+x;break;case"R":for(var dots=[x,y][concat](pa.slice(1)),j=2,jj=dots.length;jj>j;j++)dots[j]=+dots[j]+x,dots[++j]=+dots[j]+y;res.pop(),res=res[concat](catmullRom2bezier(dots,crz));break;case"M":mx=+pa[1]+x,my=+pa[2]+y;default:for(j=1,jj=pa.length;jj>j;j++)r[j]=+pa[j]+(j%2?x:y)
}else if("R"==pa[0])dots=[x,y][concat](pa.slice(1)),res.pop(),res=res[concat](catmullRom2bezier(dots,crz)),r=["R"][concat](pa.slice(-2));else for(var k=0,kk=pa.length;kk>k;k++)r[k]=pa[k];switch(r[0]){case"Z":x=mx,y=my;break;case"H":x=r[1];break;case"V":y=r[1];break;case"M":mx=r[r.length-2],my=r[r.length-1];default:x=r[r.length-2],y=r[r.length-1]}}return res.toString=R._path2string,pth.abs=pathClone(res),res},l2c=function(x1,y1,x2,y2){return[x1,y1,x2,y2,x2,y2]},q2c=function(x1,y1,ax,ay,x2,y2){var _13=1/3,_23=2/3;return[_13*x1+_23*ax,_13*y1+_23*ay,_13*x2+_23*ax,_13*y2+_23*ay,x2,y2]},a2c=function(x1,y1,rx,ry,angle,large_arc_flag,sweep_flag,x2,y2,recursive){var xy,_120=120*PI/180,rad=PI/180*(+angle||0),res=[],rotate=cacher(function(x,y,rad){var X=x*math.cos(rad)-y*math.sin(rad),Y=x*math.sin(rad)+y*math.cos(rad);
return{x:X,y:Y}});if(recursive)f1=recursive[0],f2=recursive[1],cx=recursive[2],cy=recursive[3];else{xy=rotate(x1,y1,-rad),x1=xy.x,y1=xy.y,xy=rotate(x2,y2,-rad),x2=xy.x,y2=xy.y;var x=(math.cos(PI/180*angle),math.sin(PI/180*angle),(x1-x2)/2),y=(y1-y2)/2,h=x*x/(rx*rx)+y*y/(ry*ry);h>1&&(h=math.sqrt(h),rx=h*rx,ry=h*ry);var rx2=rx*rx,ry2=ry*ry,k=(large_arc_flag==sweep_flag?-1:1)*math.sqrt(abs((rx2*ry2-rx2*y*y-ry2*x*x)/(rx2*y*y+ry2*x*x))),cx=k*rx*y/ry+(x1+x2)/2,cy=k*-ry*x/rx+(y1+y2)/2,f1=math.asin(((y1-cy)/ry).toFixed(9)),f2=math.asin(((y2-cy)/ry).toFixed(9));f1=cx>x1?PI-f1:f1,f2=cx>x2?PI-f2:f2,0>f1&&(f1=2*PI+f1),0>f2&&(f2=2*PI+f2),sweep_flag&&f1>f2&&(f1-=2*PI),!sweep_flag&&f2>f1&&(f2-=2*PI)
}var df=f2-f1;if(abs(df)>_120){var f2old=f2,x2old=x2,y2old=y2;f2=f1+_120*(sweep_flag&&f2>f1?1:-1),x2=cx+rx*math.cos(f2),y2=cy+ry*math.sin(f2),res=a2c(x2,y2,rx,ry,angle,0,sweep_flag,x2old,y2old,[f2,f2old,cx,cy])}df=f2-f1;var c1=math.cos(f1),s1=math.sin(f1),c2=math.cos(f2),s2=math.sin(f2),t=math.tan(df/4),hx=4/3*rx*t,hy=4/3*ry*t,m1=[x1,y1],m2=[x1+hx*s1,y1-hy*c1],m3=[x2+hx*s2,y2-hy*c2],m4=[x2,y2];if(m2[0]=2*m1[0]-m2[0],m2[1]=2*m1[1]-m2[1],recursive)return[m2,m3,m4][concat](res);res=[m2,m3,m4][concat](res).join()[split](",");for(var newres=[],i=0,ii=res.length;ii>i;i++)newres[i]=i%2?rotate(res[i-1],res[i],rad).y:rotate(res[i],res[i+1],rad).x;return newres},findDotAtSegment=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t){var t1=1-t;
return{x:pow(t1,3)*p1x+3*pow(t1,2)*t*c1x+3*t1*t*t*c2x+pow(t,3)*p2x,y:pow(t1,3)*p1y+3*pow(t1,2)*t*c1y+3*t1*t*t*c2y+pow(t,3)*p2y}},curveDim=cacher(function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y){var dot,a=c2x-2*c1x+p1x-(p2x-2*c2x+c1x),b=2*(c1x-p1x)-2*(c2x-c1x),c=p1x-c1x,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,y=[p1y,p2y],x=[p1x,p2x];return abs(t1)>"1e12"&&(t1=.5),abs(t2)>"1e12"&&(t2=.5),t1>0&&1>t1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),t2>0&&1>t2&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),a=c2y-2*c1y+p1y-(p2y-2*c2y+c1y),b=2*(c1y-p1y)-2*(c2y-c1y),c=p1y-c1y,t1=(-b+math.sqrt(b*b-4*a*c))/2/a,t2=(-b-math.sqrt(b*b-4*a*c))/2/a,abs(t1)>"1e12"&&(t1=.5),abs(t2)>"1e12"&&(t2=.5),t1>0&&1>t1&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t1),x.push(dot.x),y.push(dot.y)),t2>0&&1>t2&&(dot=findDotAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,t2),x.push(dot.x),y.push(dot.y)),{min:{x:mmin[apply](0,x),y:mmin[apply](0,y)},max:{x:mmax[apply](0,x),y:mmax[apply](0,y)}}
}),path2curve=R._path2curve=cacher(function(path,path2){var pth=!path2&&paths(path);if(!path2&&pth.curve)return pathClone(pth.curve);for(var p=pathToAbsolute(path),p2=path2&&pathToAbsolute(path2),attrs={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},attrs2={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},processPath=(function(path,d,pcom){var nx,ny,tq={T:1,Q:1};if(!path)return["C",d.x,d.y,d.x,d.y,d.x,d.y];switch(!(path[0]in tq)&&(d.qx=d.qy=null),path[0]){case"M":d.X=path[1],d.Y=path[2];break;case"A":path=["C"][concat](a2c[apply](0,[d.x,d.y][concat](path.slice(1))));break;case"S":"C"==pcom||"S"==pcom?(nx=2*d.x-d.bx,ny=2*d.y-d.by):(nx=d.x,ny=d.y),path=["C",nx,ny][concat](path.slice(1));
break;case"T":"Q"==pcom||"T"==pcom?(d.qx=2*d.x-d.qx,d.qy=2*d.y-d.qy):(d.qx=d.x,d.qy=d.y),path=["C"][concat](q2c(d.x,d.y,d.qx,d.qy,path[1],path[2]));break;case"Q":d.qx=path[1],d.qy=path[2],path=["C"][concat](q2c(d.x,d.y,path[1],path[2],path[3],path[4]));break;case"L":path=["C"][concat](l2c(d.x,d.y,path[1],path[2]));break;case"H":path=["C"][concat](l2c(d.x,d.y,path[1],d.y));break;case"V":path=["C"][concat](l2c(d.x,d.y,d.x,path[1]));break;case"Z":path=["C"][concat](l2c(d.x,d.y,d.X,d.Y))}return path}),fixArc=function(pp,i){if(pp[i].length>7){pp[i].shift();for(var pi=pp[i];pi.length;)pp.splice(i++,0,["C"][concat](pi.splice(0,6)));pp.splice(i,1),ii=mmax(p.length,p2&&p2.length||0)
}},fixM=function(path1,path2,a1,a2,i){path1&&path2&&"M"==path1[i][0]&&"M"!=path2[i][0]&&(path2.splice(i,0,["M",a2.x,a2.y]),a1.bx=0,a1.by=0,a1.x=path1[i][1],a1.y=path1[i][2],ii=mmax(p.length,p2&&p2.length||0))},i=0,ii=mmax(p.length,p2&&p2.length||0);ii>i;i++){p[i]=processPath(p[i],attrs),fixArc(p,i),p2&&(p2[i]=processPath(p2[i],attrs2)),p2&&fixArc(p2,i),fixM(p,p2,attrs,attrs2,i),fixM(p2,p,attrs2,attrs,i);var seg=p[i],seg2=p2&&p2[i],seglen=seg.length,seg2len=p2&&seg2.length;attrs.x=seg[seglen-2],attrs.y=seg[seglen-1],attrs.bx=toFloat(seg[seglen-4])||attrs.x,attrs.by=toFloat(seg[seglen-3])||attrs.y,attrs2.bx=p2&&(toFloat(seg2[seg2len-4])||attrs2.x),attrs2.by=p2&&(toFloat(seg2[seg2len-3])||attrs2.y),attrs2.x=p2&&seg2[seg2len-2],attrs2.y=p2&&seg2[seg2len-1]
}return p2||(pth.curve=pathClone(p)),p2?[p,p2]:p},null,pathClone),tear=(R._parseDots=cacher(function(gradient){for(var dots=[],i=0,ii=gradient.length;ii>i;i++){var dot={},par=gradient[i].match(/^([^:]*):?([\d\.]*)/);if(dot.color=R.getRGB(par[1]),dot.color.error)return null;dot.color=dot.color.hex,par[2]&&(dot.offset=par[2]+"%"),dots.push(dot)}for(i=1,ii=dots.length-1;ii>i;i++)if(!dots[i].offset){for(var start=toFloat(dots[i-1].offset||0),end=0,j=i+1;ii>j;j++)if(dots[j].offset){end=dots[j].offset;break}end||(end=100,j=ii),end=toFloat(end);for(var d=(end-start)/(j-i+1);j>i;i++)start+=d,dots[i].offset=start+"%"}return dots}),R._tear=function(el,paper){el==paper.top&&(paper.top=el.prev),el==paper.bottom&&(paper.bottom=el.next),el.next&&(el.next.prev=el.prev),el.prev&&(el.prev.next=el.next)
}),toMatrix=(R._tofront=function(el,paper){paper.top!==el&&(tear(el,paper),el.next=null,el.prev=paper.top,paper.top.next=el,paper.top=el)},R._toback=function(el,paper){paper.bottom!==el&&(tear(el,paper),el.next=paper.bottom,el.prev=null,paper.bottom.prev=el,paper.bottom=el)},R._insertafter=function(el,el2,paper){tear(el,paper),el2==paper.top&&(paper.top=el),el2.next&&(el2.next.prev=el),el.next=el2.next,el.prev=el2,el2.next=el},R._insertbefore=function(el,el2,paper){tear(el,paper),el2==paper.bottom&&(paper.bottom=el),el2.prev&&(el2.prev.next=el),el.prev=el2.prev,el2.prev=el,el.next=el2},R.toMatrix=function(path,transform){var bb=pathDimensions(path),el={_:{transform:E},getBBox:function(){return bb
}};return extractTransform(el,transform),el.matrix}),extractTransform=(R.transformPath=function(path,transform){return mapPath(path,toMatrix(path,transform))},R._extractTransform=function(el,tstr){if(null==tstr)return el._.transform;tstr=Str(tstr).replace(/\.{3}|\u2026/g,el._.transform||E);var tdata=R.parseTransformString(tstr),deg=0,dx=0,dy=0,sx=1,sy=1,_=el._,m=new Matrix;if(_.transform=tdata||[],tdata)for(var i=0,ii=tdata.length;ii>i;i++){var x1,y1,x2,y2,bb,t=tdata[i],tlen=t.length,command=Str(t[0]).toLowerCase(),absolute=t[0]!=command,inver=absolute?m.invert():0;"t"==command&&3==tlen?absolute?(x1=inver.x(0,0),y1=inver.y(0,0),x2=inver.x(t[1],t[2]),y2=inver.y(t[1],t[2]),m.translate(x2-x1,y2-y1)):m.translate(t[1],t[2]):"r"==command?2==tlen?(bb=bb||el.getBBox(1),m.rotate(t[1],bb.x+bb.width/2,bb.y+bb.height/2),deg+=t[1]):4==tlen&&(absolute?(x2=inver.x(t[2],t[3]),y2=inver.y(t[2],t[3]),m.rotate(t[1],x2,y2)):m.rotate(t[1],t[2],t[3]),deg+=t[1]):"s"==command?2==tlen||3==tlen?(bb=bb||el.getBBox(1),m.scale(t[1],t[tlen-1],bb.x+bb.width/2,bb.y+bb.height/2),sx*=t[1],sy*=t[tlen-1]):5==tlen&&(absolute?(x2=inver.x(t[3],t[4]),y2=inver.y(t[3],t[4]),m.scale(t[1],t[2],x2,y2)):m.scale(t[1],t[2],t[3],t[4]),sx*=t[1],sy*=t[2]):"m"==command&&7==tlen&&m.add(t[1],t[2],t[3],t[4],t[5],t[6]),_.dirtyT=1,el.matrix=m
}el.matrix=m,_.sx=sx,_.sy=sy,_.deg=deg,_.dx=dx=m.e,_.dy=dy=m.f,1==sx&&1==sy&&!deg&&_.bbox?(_.bbox.x+=+dx,_.bbox.y+=+dy):_.dirtyT=1}),getEmpty=function(item){var l=item[0];switch(l.toLowerCase()){case"t":return[l,0,0];case"m":return[l,1,0,0,1,0,0];case"r":return 4==item.length?[l,0,item[2],item[3]]:[l,0];case"s":return 5==item.length?[l,1,1,item[3],item[4]]:3==item.length?[l,1,1]:[l,1]}},equaliseTransform=R._equaliseTransform=function(t1,t2){t2=Str(t2).replace(/\.{3}|\u2026/g,t1),t1=R.parseTransformString(t1)||[],t2=R.parseTransformString(t2)||[];for(var j,jj,tt1,tt2,maxlength=mmax(t1.length,t2.length),from=[],to=[],i=0;maxlength>i;i++){if(tt1=t1[i]||getEmpty(t2[i]),tt2=t2[i]||getEmpty(tt1),tt1[0]!=tt2[0]||"r"==tt1[0].toLowerCase()&&(tt1[2]!=tt2[2]||tt1[3]!=tt2[3])||"s"==tt1[0].toLowerCase()&&(tt1[3]!=tt2[3]||tt1[4]!=tt2[4]))return;
for(from[i]=[],to[i]=[],j=0,jj=mmax(tt1.length,tt2.length);jj>j;j++)j in tt1&&(from[i][j]=tt1[j]),j in tt2&&(to[i][j]=tt2[j])}return{from:from,to:to}};R._getContainer=function(x,y,w,h){var container;return container=null!=h||R.is(x,"object")?x:g.doc.getElementById(x),null!=container?container.tagName?null==y?{container:container,width:container.style.pixelWidth||container.offsetWidth,height:container.style.pixelHeight||container.offsetHeight}:{container:container,width:y,height:w}:{container:1,x:x,y:y,width:w,height:h}:void 0},R.pathToRelative=pathToRelative,R._engine={},R.path2curve=path2curve,R.matrix=function(a,b,c,d,e,f){return new Matrix(a,b,c,d,e,f)},function(matrixproto){function norm(a){return a[0]*a[0]+a[1]*a[1]
}function normalize(a){var mag=math.sqrt(norm(a));a[0]&&(a[0]/=mag),a[1]&&(a[1]/=mag)}matrixproto.add=function(a,b,c,d,e,f){var x,y,z,res,out=[[],[],[]],m=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],matrix=[[a,c,e],[b,d,f],[0,0,1]];for(a&&a instanceof Matrix&&(matrix=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]),x=0;3>x;x++)for(y=0;3>y;y++){for(res=0,z=0;3>z;z++)res+=m[x][z]*matrix[z][y];out[x][y]=res}this.a=out[0][0],this.b=out[1][0],this.c=out[0][1],this.d=out[1][1],this.e=out[0][2],this.f=out[1][2]},matrixproto.invert=function(){var me=this,x=me.a*me.d-me.b*me.c;return new Matrix(me.d/x,-me.b/x,-me.c/x,me.a/x,(me.c*me.f-me.d*me.e)/x,(me.b*me.e-me.a*me.f)/x)
},matrixproto.clone=function(){return new Matrix(this.a,this.b,this.c,this.d,this.e,this.f)},matrixproto.translate=function(x,y){this.add(1,0,0,1,x,y)},matrixproto.scale=function(x,y,cx,cy){null==y&&(y=x),(cx||cy)&&this.add(1,0,0,1,cx,cy),this.add(x,0,0,y,0,0),(cx||cy)&&this.add(1,0,0,1,-cx,-cy)},matrixproto.rotate=function(a,x,y){a=R.rad(a),x=x||0,y=y||0;var cos=+math.cos(a).toFixed(9),sin=+math.sin(a).toFixed(9);this.add(cos,sin,-sin,cos,x,y),this.add(1,0,0,1,-x,-y)},matrixproto.x=function(x,y){return x*this.a+y*this.c+this.e},matrixproto.y=function(x,y){return x*this.b+y*this.d+this.f},matrixproto.get=function(i){return+this[Str.fromCharCode(97+i)].toFixed(4)
},matrixproto.toString=function(){return R.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},matrixproto.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},matrixproto.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},matrixproto.split=function(){var out={};out.dx=this.e,out.dy=this.f;var row=[[this.a,this.c],[this.b,this.d]];out.scalex=math.sqrt(norm(row[0])),normalize(row[0]),out.shear=row[0][0]*row[1][0]+row[0][1]*row[1][1],row[1]=[row[1][0]-row[0][0]*out.shear,row[1][1]-row[0][1]*out.shear],out.scaley=math.sqrt(norm(row[1])),normalize(row[1]),out.shear/=out.scaley;
var sin=-row[0][1],cos=row[1][1];return 0>cos?(out.rotate=R.deg(math.acos(cos)),0>sin&&(out.rotate=360-out.rotate)):out.rotate=R.deg(math.asin(sin)),out.isSimple=!(+out.shear.toFixed(9)||out.scalex.toFixed(9)!=out.scaley.toFixed(9)&&out.rotate),out.isSuperSimple=!+out.shear.toFixed(9)&&out.scalex.toFixed(9)==out.scaley.toFixed(9)&&!out.rotate,out.noRotation=!+out.shear.toFixed(9)&&!out.rotate,out},matrixproto.toTransformString=function(shorter){var s=shorter||this[split]();return s.isSimple?(s.scalex=+s.scalex.toFixed(4),s.scaley=+s.scaley.toFixed(4),s.rotate=+s.rotate.toFixed(4),(s.dx||s.dy?"t"+[s.dx,s.dy]:E)+(1!=s.scalex||1!=s.scaley?"s"+[s.scalex,s.scaley,0,0]:E)+(s.rotate?"r"+[s.rotate,0,0]:E)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]
}}(Matrix.prototype);var version=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);paperproto.safari="Apple Computer, Inc."==navigator.vendor&&(version&&version[1]<4||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&version&&version[1]<8?function(){var rect=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){rect.remove()})}:fun;for(var preventDefault=function(){this.returnValue=!1},preventTouch=function(){return this.originalEvent.preventDefault()},stopPropagation=function(){this.cancelBubble=!0},stopTouch=function(){return this.originalEvent.stopPropagation()
},getEventPosition=function(e){var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;return{x:e.clientX+scrollX,y:e.clientY+scrollY}},addEvent=function(){return g.doc.addEventListener?function(obj,type,fn,element){var f=function(e){var pos=getEventPosition(e);return fn.call(element,e,pos.x,pos.y)};if(obj.addEventListener(type,f,!1),supportsTouch&&touchMap[type]){var _f=function(e){for(var pos=getEventPosition(e),olde=e,i=0,ii=e.targetTouches&&e.targetTouches.length;ii>i;i++)if(e.targetTouches[i].target==obj){e=e.targetTouches[i],e.originalEvent=olde,e.preventDefault=preventTouch,e.stopPropagation=stopTouch;
break}return fn.call(element,e,pos.x,pos.y)};obj.addEventListener(touchMap[type],_f,!1)}return function(){return obj.removeEventListener(type,f,!1),supportsTouch&&touchMap[type]&&obj.removeEventListener(touchMap[type],f,!1),!0}}:g.doc.attachEvent?function(obj,type,fn,element){var f=function(e){e=e||g.win.event;var scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,x=e.clientX+scrollX,y=e.clientY+scrollY;return e.preventDefault=e.preventDefault||preventDefault,e.stopPropagation=e.stopPropagation||stopPropagation,fn.call(element,e,x,y)};obj.attachEvent("on"+type,f);var detacher=function(){return obj.detachEvent("on"+type,f),!0
};return detacher}:void 0}(),drag=[],dragMove=function(e){for(var dragi,x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft,j=drag.length;j--;){if(dragi=drag[j],supportsTouch&&e.touches){for(var touch,i=e.touches.length;i--;)if(touch=e.touches[i],touch.identifier==dragi.el._drag.id){x=touch.clientX,y=touch.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}else e.preventDefault();var o,node=dragi.el.node,next=node.nextSibling,parent=node.parentNode,display=node.style.display;g.win.opera&&parent.removeChild(node),node.style.display="none",o=dragi.el.paper.getElementByPoint(x,y),node.style.display=display,g.win.opera&&(next?parent.insertBefore(node,next):parent.appendChild(node)),o&&eve("raphael.drag.over."+dragi.el.id,dragi.el,o),x+=scrollX,y+=scrollY,eve("raphael.drag.move."+dragi.el.id,dragi.move_scope||dragi.el,x-dragi.el._drag.x,y-dragi.el._drag.y,x,y,e)
}},dragUp=function(e){R.unmousemove(dragMove).unmouseup(dragUp);for(var dragi,i=drag.length;i--;)dragi=drag[i],dragi.el._drag={},eve("raphael.drag.end."+dragi.el.id,dragi.end_scope||dragi.start_scope||dragi.move_scope||dragi.el,e);drag=[]},elproto=R.el={},i=events.length;i--;)!function(eventName){R[eventName]=elproto[eventName]=function(fn,scope){return R.is(fn,"function")&&(this.events=this.events||[],this.events.push({name:eventName,f:fn,unbind:addEvent(this.shape||this.node||g.doc,eventName,fn,scope||this)})),this},R["un"+eventName]=elproto["un"+eventName]=function(fn){for(var events=this.events||[],l=events.length;l--;)events[l].name!=eventName||!R.is(fn,"undefined")&&events[l].f!=fn||(events[l].unbind(),events.splice(l,1),!events.length&&delete this.events);
return this}}(events[i]);elproto.data=function(key,value){var data=eldata[this.id]=eldata[this.id]||{};if(0==arguments.length)return data;if(1==arguments.length){if(R.is(key,"object")){for(var i in key)key[has](i)&&this.data(i,key[i]);return this}return eve("raphael.data.get."+this.id,this,data[key],key),data[key]}return data[key]=value,eve("raphael.data.set."+this.id,this,value,key),this},elproto.removeData=function(key){return null==key?eldata[this.id]={}:eldata[this.id]&&delete eldata[this.id][key],this},elproto.getData=function(){return clone(eldata[this.id]||{})},elproto.hover=function(f_in,f_out,scope_in,scope_out){return this.mouseover(f_in,scope_in).mouseout(f_out,scope_out||scope_in)
},elproto.unhover=function(f_in,f_out){return this.unmouseover(f_in).unmouseout(f_out)};var draggable=[];elproto.drag=function(onmove,onstart,onend,move_scope,start_scope,end_scope){function start(e){(e.originalEvent||e).preventDefault();var x=e.clientX,y=e.clientY,scrollY=g.doc.documentElement.scrollTop||g.doc.body.scrollTop,scrollX=g.doc.documentElement.scrollLeft||g.doc.body.scrollLeft;if(this._drag.id=e.identifier,supportsTouch&&e.touches)for(var touch,i=e.touches.length;i--;)if(touch=e.touches[i],this._drag.id=touch.identifier,touch.identifier==this._drag.id){x=touch.clientX,y=touch.clientY;break}this._drag.x=x+scrollX,this._drag.y=y+scrollY,!drag.length&&R.mousemove(dragMove).mouseup(dragUp),drag.push({el:this,move_scope:move_scope,start_scope:start_scope,end_scope:end_scope}),onstart&&eve.on("raphael.drag.start."+this.id,onstart),onmove&&eve.on("raphael.drag.move."+this.id,onmove),onend&&eve.on("raphael.drag.end."+this.id,onend),eve("raphael.drag.start."+this.id,start_scope||move_scope||this,e.clientX+scrollX,e.clientY+scrollY,e)
}return this._drag={},draggable.push({el:this,start:start}),this.mousedown(start),this},elproto.onDragOver=function(f){f?eve.on("raphael.drag.over."+this.id,f):eve.unbind("raphael.drag.over."+this.id)},elproto.undrag=function(){for(var i=draggable.length;i--;)draggable[i].el==this&&(this.unmousedown(draggable[i].start),draggable.splice(i,1),eve.unbind("raphael.drag.*."+this.id));!draggable.length&&R.unmousemove(dragMove).unmouseup(dragUp),drag=[]},paperproto.circle=function(x,y,r){var out=R._engine.circle(this,x||0,y||0,r||0);return this.__set__&&this.__set__.push(out),out},paperproto.rect=function(x,y,w,h,r){var out=R._engine.rect(this,x||0,y||0,w||0,h||0,r||0);
return this.__set__&&this.__set__.push(out),out},paperproto.ellipse=function(x,y,rx,ry){var out=R._engine.ellipse(this,x||0,y||0,rx||0,ry||0);return this.__set__&&this.__set__.push(out),out},paperproto.path=function(pathString){pathString&&!R.is(pathString,string)&&!R.is(pathString[0],array)&&(pathString+=E);var out=R._engine.path(R.format[apply](R,arguments),this);return this.__set__&&this.__set__.push(out),out},paperproto.image=function(src,x,y,w,h){var out=R._engine.image(this,src||"about:blank",x||0,y||0,w||0,h||0);return this.__set__&&this.__set__.push(out),out},paperproto.text=function(x,y,text){var out=R._engine.text(this,x||0,y||0,Str(text));return this.__set__&&this.__set__.push(out),out
},paperproto.set=function(itemsArray){!R.is(itemsArray,"array")&&(itemsArray=Array.prototype.splice.call(arguments,0,arguments.length));var out=new Set(itemsArray);return this.__set__&&this.__set__.push(out),out.paper=this,out.type="set",out},paperproto.setStart=function(set){this.__set__=set||this.set()},paperproto.setFinish=function(){var out=this.__set__;return delete this.__set__,out},paperproto.setSize=function(width,height){return R._engine.setSize.call(this,width,height)},paperproto.setViewBox=function(x,y,w,h,fit){return R._engine.setViewBox.call(this,x,y,w,h,fit)},paperproto.top=paperproto.bottom=null,paperproto.raphael=R;var getOffset=function(elem){var box=elem.getBoundingClientRect(),doc=elem.ownerDocument,body=doc.body,docElem=doc.documentElement,clientTop=docElem.clientTop||body.clientTop||0,clientLeft=docElem.clientLeft||body.clientLeft||0,top=box.top+(g.win.pageYOffset||docElem.scrollTop||body.scrollTop)-clientTop,left=box.left+(g.win.pageXOffset||docElem.scrollLeft||body.scrollLeft)-clientLeft;
return{y:top,x:left}};paperproto.getElementByPoint=function(x,y){var paper=this,svg=paper.canvas,target=g.doc.elementFromPoint(x,y);if(g.win.opera&&"svg"==target.tagName){var so=getOffset(svg),sr=svg.createSVGRect();sr.x=x-so.x,sr.y=y-so.y,sr.width=sr.height=1;var hits=svg.getIntersectionList(sr,null);hits.length&&(target=hits[hits.length-1])}if(!target)return null;for(;target.parentNode&&target!=svg.parentNode&&!target.raphael;)target=target.parentNode;return target==paper.canvas.parentNode&&(target=svg),target=target&&target.raphael?paper.getById(target.raphaelid):null},paperproto.getElementsByBBox=function(bbox){var set=this.set();return this.forEach(function(el){R.isBBoxIntersect(el.getBBox(),bbox)&&set.push(el)
}),set},paperproto.getById=function(id){for(var bot=this.bottom;bot;){if(bot.id==id)return bot;bot=bot.next}return null},paperproto.forEach=function(callback,thisArg){for(var bot=this.bottom;bot;){if(callback.call(thisArg,bot)===!1)return this;bot=bot.next}return this},paperproto.getElementsByPoint=function(x,y){var set=this.set();return this.forEach(function(el){el.isPointInside(x,y)&&set.push(el)}),set},elproto.isPointInside=function(x,y){var rp=this.realPath=getPath[this.type](this);return this.attr("transform")&&this.attr("transform").length&&(rp=R.transformPath(rp,this.attr("transform"))),R.isPointInsidePath(rp,x,y)},elproto.getBBox=function(isWithoutTransform){if(this.removed)return{};
var _=this._;return isWithoutTransform?((_.dirty||!_.bboxwt)&&(this.realPath=getPath[this.type](this),_.bboxwt=pathDimensions(this.realPath),_.bboxwt.toString=x_y_w_h,_.dirty=0),_.bboxwt):((_.dirty||_.dirtyT||!_.bbox)&&((_.dirty||!this.realPath)&&(_.bboxwt=0,this.realPath=getPath[this.type](this)),_.bbox=pathDimensions(mapPath(this.realPath,this.matrix)),_.bbox.toString=x_y_w_h,_.dirty=_.dirtyT=0),_.bbox)},elproto.clone=function(){if(this.removed)return null;var out=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(out),out},elproto.glow=function(glow){if("text"==this.type)return null;glow=glow||{};var s={width:(glow.width||10)+(+this.attr("stroke-width")||1),fill:glow.fill||!1,opacity:glow.opacity||.5,offsetx:glow.offsetx||0,offsety:glow.offsety||0,color:glow.color||"#000"},c=s.width/2,r=this.paper,out=r.set(),path=this.realPath||getPath[this.type](this);
path=this.matrix?mapPath(path,this.matrix):path;for(var i=1;c+1>i;i++)out.push(r.path(path).attr({stroke:s.color,fill:s.fill?s.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(s.width/c*i).toFixed(3),opacity:+(s.opacity/c).toFixed(3)}));return out.insertBefore(this).translate(s.offsetx,s.offsety)};var getPointAtSegmentLength=function(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length){return null==length?bezlen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y):R.findDotsAtSegment(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,getTatLen(p1x,p1y,c1x,c1y,c2x,c2y,p2x,p2y,length))},getLengthFactory=function(istotal,subpath){return function(path,length,onlystart){path=path2curve(path);
for(var x,y,p,l,point,sp="",subpaths={},len=0,i=0,ii=path.length;ii>i;i++){if(p=path[i],"M"==p[0])x=+p[1],y=+p[2];else{if(l=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6]),len+l>length){if(subpath&&!subpaths.start){if(point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len),sp+=["C"+point.start.x,point.start.y,point.m.x,point.m.y,point.x,point.y],onlystart)return sp;subpaths.start=sp,sp=["M"+point.x,point.y+"C"+point.n.x,point.n.y,point.end.x,point.end.y,p[5],p[6]].join(),len+=l,x=+p[5],y=+p[6];continue}if(!istotal&&!subpath)return point=getPointAtSegmentLength(x,y,p[1],p[2],p[3],p[4],p[5],p[6],length-len),{x:point.x,y:point.y,alpha:point.alpha}
}len+=l,x=+p[5],y=+p[6]}sp+=p.shift()+p}return subpaths.end=sp,point=istotal?len:subpath?subpaths:R.findDotsAtSegment(x,y,p[0],p[1],p[2],p[3],p[4],p[5],1),point.alpha&&(point={x:point.x,y:point.y,alpha:point.alpha}),point}},getTotalLength=getLengthFactory(1),getPointAtLength=getLengthFactory(),getSubpathsAtLength=getLengthFactory(0,1);R.getTotalLength=getTotalLength,R.getPointAtLength=getPointAtLength,R.getSubpath=function(path,from,to){if(this.getTotalLength(path)-to<1e-6)return getSubpathsAtLength(path,from).end;var a=getSubpathsAtLength(path,to,1);return from?getSubpathsAtLength(a,from).end:a},elproto.getTotalLength=function(){var path=this.getPath();if(path)return this.node.getTotalLength?this.node.getTotalLength():getTotalLength(path)
},elproto.getPointAtLength=function(length){var path=this.getPath();if(path)return getPointAtLength(path,length)},elproto.getPath=function(){var path,getPath=R._getPath[this.type];if("text"!=this.type&&"set"!=this.type)return getPath&&(path=getPath(this)),path},elproto.getSubpath=function(from,to){var path=this.getPath();if(path)return R.getSubpath(path,from,to)};var ef=R.easing_formulas={linear:function(n){return n},"<":function(n){return pow(n,1.7)},">":function(n){return pow(n,.48)},"<>":function(n){var q=.48-n/1.04,Q=math.sqrt(.1734+q*q),x=Q-q,X=pow(abs(x),1/3)*(0>x?-1:1),y=-Q-q,Y=pow(abs(y),1/3)*(0>y?-1:1),t=X+Y+.5;return 3*(1-t)*t*t+t*t*t},backIn:function(n){var s=1.70158;
return n*n*((s+1)*n-s)},backOut:function(n){n-=1;var s=1.70158;return n*n*((s+1)*n+s)+1},elastic:function(n){return n==!!n?n:pow(2,-10*n)*math.sin(2*(n-.075)*PI/.3)+1},bounce:function(n){var l,s=7.5625,p=2.75;return 1/p>n?l=s*n*n:2/p>n?(n-=1.5/p,l=s*n*n+.75):2.5/p>n?(n-=2.25/p,l=s*n*n+.9375):(n-=2.625/p,l=s*n*n+.984375),l}};ef.easeIn=ef["ease-in"]=ef["<"],ef.easeOut=ef["ease-out"]=ef[">"],ef.easeInOut=ef["ease-in-out"]=ef["<>"],ef["back-in"]=ef.backIn,ef["back-out"]=ef.backOut;var animationElements=[],requestAnimFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){setTimeout(callback,16)
},animation=function(){for(var Now=+new Date,l=0;l<animationElements.length;l++){var e=animationElements[l];if(!e.el.removed&&!e.paused){var now,key,time=Now-e.start,ms=e.ms,easing=e.easing,from=e.from,diff=e.diff,to=e.to,that=(e.t,e.el),set={},init={};if(e.initstatus?(time=(e.initstatus*e.anim.top-e.prev)/(e.percent-e.prev)*ms,e.status=e.initstatus,delete e.initstatus,e.stop&&animationElements.splice(l--,1)):e.status=(e.prev+(e.percent-e.prev)*(time/ms))/e.anim.top,!(0>time))if(ms>time){var pos=easing(time/ms);for(var attr in from)if(from[has](attr)){switch(availableAnimAttrs[attr]){case nu:now=+from[attr]+pos*ms*diff[attr];break;case"colour":now="rgb("+[upto255(round(from[attr].r+pos*ms*diff[attr].r)),upto255(round(from[attr].g+pos*ms*diff[attr].g)),upto255(round(from[attr].b+pos*ms*diff[attr].b))].join(",")+")";
break;case"path":now=[];for(var i=0,ii=from[attr].length;ii>i;i++){now[i]=[from[attr][i][0]];for(var j=1,jj=from[attr][i].length;jj>j;j++)now[i][j]=+from[attr][i][j]+pos*ms*diff[attr][i][j];now[i]=now[i].join(S)}now=now.join(S);break;case"transform":if(diff[attr].real)for(now=[],i=0,ii=from[attr].length;ii>i;i++)for(now[i]=[from[attr][i][0]],j=1,jj=from[attr][i].length;jj>j;j++)now[i][j]=from[attr][i][j]+pos*ms*diff[attr][i][j];else{var get=function(i){return+from[attr][i]+pos*ms*diff[attr][i]};now=[["m",get(0),get(1),get(2),get(3),get(4),get(5)]]}break;case"csv":if("clip-rect"==attr)for(now=[],i=4;i--;)now[i]=+from[attr][i]+pos*ms*diff[attr][i];break;default:var from2=[][concat](from[attr]);
for(now=[],i=that.paper.customAttributes[attr].length;i--;)now[i]=+from2[i]+pos*ms*diff[attr][i]}set[attr]=now}that.attr(set),function(id,that,anim){setTimeout(function(){eve("raphael.anim.frame."+id,that,anim)})}(that.id,that,e.anim)}else{if(function(f,el,a){setTimeout(function(){eve("raphael.anim.frame."+el.id,el,a),eve("raphael.anim.finish."+el.id,el,a),R.is(f,"function")&&f.call(el)})}(e.callback,that,e.anim),that.attr(to),animationElements.splice(l--,1),e.repeat>1&&!e.next){for(key in to)to[has](key)&&(init[key]=e.totalOrigin[key]);e.el.attr(init),runAnimation(e.anim,e.el,e.anim.percents[0],null,e.totalOrigin,e.repeat-1)}e.next&&!e.stop&&runAnimation(e.anim,e.el,e.next,null,e.totalOrigin,e.repeat)
}}}R.svg&&that&&that.paper&&that.paper.safari(),animationElements.length&&requestAnimFrame(animation)},upto255=function(color){return color>255?255:0>color?0:color};elproto.animateWith=function(el,anim,params,ms,easing,callback){var element=this;if(element.removed)return callback&&callback.call(element),element;var a=params instanceof Animation?params:R.animation(params,ms,easing,callback);runAnimation(a,element,a.percents[0],null,element.attr());for(var i=0,ii=animationElements.length;ii>i;i++)if(animationElements[i].anim==anim&&animationElements[i].el==el){animationElements[ii-1].start=animationElements[i].start;break}return element},elproto.onAnimation=function(f){return f?eve.on("raphael.anim.frame."+this.id,f):eve.unbind("raphael.anim.frame."+this.id),this
},Animation.prototype.delay=function(delay){var a=new Animation(this.anim,this.ms);return a.times=this.times,a.del=+delay||0,a},Animation.prototype.repeat=function(times){var a=new Animation(this.anim,this.ms);return a.del=this.del,a.times=math.floor(mmax(times,0))||1,a},R.animation=function(params,ms,easing,callback){if(params instanceof Animation)return params;(R.is(easing,"function")||!easing)&&(callback=callback||easing||null,easing=null),params=Object(params),ms=+ms||0;var json,attr,p={};for(attr in params)params[has](attr)&&toFloat(attr)!=attr&&toFloat(attr)+"%"!=attr&&(json=!0,p[attr]=params[attr]);return json?(easing&&(p.easing=easing),callback&&(p.callback=callback),new Animation({100:p},ms)):new Animation(params,ms)
},elproto.animate=function(params,ms,easing,callback){var element=this;if(element.removed)return callback&&callback.call(element),element;var anim=params instanceof Animation?params:R.animation(params,ms,easing,callback);return runAnimation(anim,element,anim.percents[0],null,element.attr()),element},elproto.setTime=function(anim,value){return anim&&null!=value&&this.status(anim,mmin(value,anim.ms)/anim.ms),this},elproto.status=function(anim,value){var len,e,out=[],i=0;if(null!=value)return runAnimation(anim,this,-1,mmin(value,1)),this;for(len=animationElements.length;len>i;i++)if(e=animationElements[i],e.el.id==this.id&&(!anim||e.anim==anim)){if(anim)return e.status;
out.push({anim:e.anim,status:e.status})}return anim?0:out},elproto.pause=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||eve("raphael.anim.pause."+this.id,this,animationElements[i].anim)!==!1&&(animationElements[i].paused=!0);return this},elproto.resume=function(anim){for(var i=0;i<animationElements.length;i++)if(animationElements[i].el.id==this.id&&(!anim||animationElements[i].anim==anim)){var e=animationElements[i];eve("raphael.anim.resume."+this.id,this,e.anim)!==!1&&(delete e.paused,this.status(e.anim,e.status))}return this},elproto.stop=function(anim){for(var i=0;i<animationElements.length;i++)animationElements[i].el.id!=this.id||anim&&animationElements[i].anim!=anim||eve("raphael.anim.stop."+this.id,this,animationElements[i].anim)!==!1&&animationElements.splice(i--,1);
return this},eve.on("raphael.remove",stopAnimation),eve.on("raphael.clear",stopAnimation),elproto.toString=function(){return"RaphaÃ«lâs object"};var Set=function(items){if(this.items=[],this.length=0,this.type="set",items)for(var i=0,ii=items.length;ii>i;i++)!items[i]||items[i].constructor!=elproto.constructor&&items[i].constructor!=Set||(this[this.items.length]=this.items[this.items.length]=items[i],this.length++)},setproto=Set.prototype;setproto.push=function(){for(var item,len,i=0,ii=arguments.length;ii>i;i++)item=arguments[i],!item||item.constructor!=elproto.constructor&&item.constructor!=Set||(len=this.items.length,this[len]=this.items[len]=item,this.length++);
return this},setproto.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},setproto.forEach=function(callback,thisArg){for(var i=0,ii=this.items.length;ii>i;i++)if(callback.call(thisArg,this.items[i],i)===!1)return this;return this};for(var method in elproto)elproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname][apply](el,arg)})}}(method));return setproto.attr=function(name,value){if(name&&R.is(name,array)&&R.is(name[0],"object"))for(var j=0,jj=name.length;jj>j;j++)this.items[j].attr(name[j]);else for(var i=0,ii=this.items.length;ii>i;i++)this.items[i].attr(name,value);
return this},setproto.clear=function(){for(;this.length;)this.pop()},setproto.splice=function(index,count){index=0>index?mmax(this.length+index,0):index,count=mmax(0,mmin(this.length-index,count));var i,tail=[],todel=[],args=[];for(i=2;i<arguments.length;i++)args.push(arguments[i]);for(i=0;count>i;i++)todel.push(this[index+i]);for(;i<this.length-index;i++)tail.push(this[index+i]);var arglen=args.length;for(i=0;i<arglen+tail.length;i++)this.items[index+i]=this[index+i]=arglen>i?args[i]:tail[i-arglen];for(i=this.items.length=this.length-=count-arglen;this[i];)delete this[i++];return new Set(todel)},setproto.exclude=function(el){for(var i=0,ii=this.length;ii>i;i++)if(this[i]==el)return this.splice(i,1),!0
},setproto.animate=function(params,ms,easing,callback){(R.is(easing,"function")||!easing)&&(callback=easing||null);var item,collector,len=this.items.length,i=len,set=this;if(!len)return this;callback&&(collector=function(){!--len&&callback.call(set)}),easing=R.is(easing,string)?easing:collector;var anim=R.animation(params,ms,easing,collector);for(item=this.items[--i].animate(anim);i--;)this.items[i]&&!this.items[i].removed&&this.items[i].animateWith(item,anim,anim),this.items[i]&&!this.items[i].removed||len--;return this},setproto.insertAfter=function(el){for(var i=this.items.length;i--;)this.items[i].insertAfter(el);return this},setproto.getBBox=function(){for(var x=[],y=[],x2=[],y2=[],i=this.items.length;i--;)if(!this.items[i].removed){var box=this.items[i].getBBox();
x.push(box.x),y.push(box.y),x2.push(box.x+box.width),y2.push(box.y+box.height)}return x=mmin[apply](0,x),y=mmin[apply](0,y),x2=mmax[apply](0,x2),y2=mmax[apply](0,y2),{x:x,y:y,x2:x2,y2:y2,width:x2-x,height:y2-y}},setproto.clone=function(s){s=this.paper.set();for(var i=0,ii=this.items.length;ii>i;i++)s.push(this.items[i].clone());return s},setproto.toString=function(){return"RaphaÃ«lâs set"},setproto.glow=function(glowConfig){var ret=this.paper.set();return this.forEach(function(shape){var g=shape.glow(glowConfig);null!=g&&g.forEach(function(shape2){ret.push(shape2)})}),ret},setproto.isPointInside=function(x,y){var isPointInside=!1;return this.forEach(function(el){return el.isPointInside(x,y)?(isPointInside=!0,!1):void 0
}),isPointInside},R.registerFont=function(font){if(!font.face)return font;this.fonts=this.fonts||{};var fontcopy={w:font.w,face:{},glyphs:{}},family=font.face["font-family"];for(var prop in font.face)font.face[has](prop)&&(fontcopy.face[prop]=font.face[prop]);if(this.fonts[family]?this.fonts[family].push(fontcopy):this.fonts[family]=[fontcopy],!font.svg){fontcopy.face["units-per-em"]=toInt(font.face["units-per-em"],10);for(var glyph in font.glyphs)if(font.glyphs[has](glyph)){var path=font.glyphs[glyph];if(fontcopy.glyphs[glyph]={w:path.w,k:{},d:path.d&&"M"+path.d.replace(/[mlcxtrv]/g,function(command){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[command]||"M"})+"z"},path.k)for(var k in path.k)path[has](k)&&(fontcopy.glyphs[glyph].k[k]=path.k[k])
}}return font},paperproto.getFont=function(family,weight,style,stretch){if(stretch=stretch||"normal",style=style||"normal",weight=+weight||{normal:400,bold:700,lighter:300,bolder:800}[weight]||400,R.fonts){var font=R.fonts[family];if(!font){var name=new RegExp("(^|\\s)"+family.replace(/[^\w\d\s+!~.:_-]/g,E)+"(\\s|$)","i");for(var fontName in R.fonts)if(R.fonts[has](fontName)&&name.test(fontName)){font=R.fonts[fontName];break}}var thefont;if(font)for(var i=0,ii=font.length;ii>i&&(thefont=font[i],thefont.face["font-weight"]!=weight||thefont.face["font-style"]!=style&&thefont.face["font-style"]||thefont.face["font-stretch"]!=stretch);i++);return thefont}},paperproto.print=function(x,y,string,font,size,origin,letter_spacing,line_spacing){origin=origin||"middle",letter_spacing=mmax(mmin(letter_spacing||0,1),-1),line_spacing=mmax(mmin(line_spacing||1,3),1);
var scale,letters=Str(string)[split](E),shift=0,notfirst=0,path=E;if(R.is(font,"string")&&(font=this.getFont(font)),font){scale=(size||16)/font.face["units-per-em"];for(var bb=font.face.bbox[split](separator),top=+bb[0],lineHeight=bb[3]-bb[1],shifty=0,height=+bb[1]+("baseline"==origin?lineHeight+ +font.face.descent:lineHeight/2),i=0,ii=letters.length;ii>i;i++){if("\n"==letters[i])shift=0,curr=0,notfirst=0,shifty+=lineHeight*line_spacing;else{var prev=notfirst&&font.glyphs[letters[i-1]]||{},curr=font.glyphs[letters[i]];shift+=notfirst?(prev.w||font.w)+(prev.k&&prev.k[letters[i]]||0)+font.w*letter_spacing:0,notfirst=1}curr&&curr.d&&(path+=R.transformPath(curr.d,["t",shift*scale,shifty*scale,"s",scale,scale,top,height,"t",(x-top)/scale,(y-height)/scale]))
}}return this.path(path).attr({fill:"#000",stroke:"none"})},paperproto.add=function(json){if(R.is(json,"array"))for(var j,res=this.set(),i=0,ii=json.length;ii>i;i++)j=json[i]||{},elements[has](j.type)&&res.push(this[j.type]().attr(j));return res},R.format=function(token,params){var args=R.is(params,array)?[0][concat](params):arguments;return token&&R.is(token,string)&&args.length-1&&(token=token.replace(formatrg,function(str,i){return null==args[++i]?E:args[i]})),token||E},R.fullfill=function(){var tokenRegex=/\{([^\}]+)\}/g,objNotationRegex=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,replacer=function(all,key,obj){var res=obj;return key.replace(objNotationRegex,function(all,name,quote,quotedName,isFunc){name=name||quotedName,res&&(name in res&&(res=res[name]),"function"==typeof res&&isFunc&&(res=res()))
}),res=(null==res||res==obj?all:res)+""};return function(str,obj){return String(str).replace(tokenRegex,function(all,key){return replacer(all,key,obj)})}}(),R.ninja=function(){return oldRaphael.was?g.win.Raphael=oldRaphael.is:delete Raphael,R},R.st=setproto,function(doc,loaded,f){function isLoaded(){/in/.test(doc.readyState)?setTimeout(isLoaded,9):R.eve("raphael.DOMload")}null==doc.readyState&&doc.addEventListener&&(doc.addEventListener(loaded,f=function(){doc.removeEventListener(loaded,f,!1),doc.readyState="complete"},!1),doc.readyState="loading"),isLoaded()}(document,"DOMContentLoaded"),eve.on("raphael.DOMload",function(){loaded=!0}),function(){if(R.svg){var has="hasOwnProperty",Str=String,toFloat=parseFloat,toInt=parseInt,math=Math,mmax=math.max,abs=math.abs,pow=math.pow,separator=/[, ]+/,eve=R.eve,E="",S=" ",xlink="http://www.w3.org/1999/xlink",markers={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},markerCounter={};
R.toString=function(){return"Your browser supports SVG.\nYou are running RaphaÃ«l "+this.version};var $=function(el,attr){if(attr){"string"==typeof el&&(el=$(el));for(var key in attr)attr[has](key)&&("xlink:"==key.substring(0,6)?el.setAttributeNS(xlink,key.substring(6),Str(attr[key])):el.setAttribute(key,Str(attr[key])))}else el=R._g.doc.createElementNS("http://www.w3.org/2000/svg",el),el.style&&(el.style.webkitTapHighlightColor="rgba(0,0,0,0)");return el},addGradientFill=function(element,gradient){var type="linear",id=element.id+gradient,fx=.5,fy=.5,o=element.node,SVG=element.paper,s=o.style,el=R._g.doc.getElementById(id);if(!el){if(gradient=Str(gradient).replace(R._radial_gradient,function(all,_fx,_fy){if(type="radial",_fx&&_fy){fx=toFloat(_fx),fy=toFloat(_fy);
var dir=2*(fy>.5)-1;pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*dir+.5)&&.5!=fy&&(fy=fy.toFixed(5)-1e-5*dir)}return E}),gradient=gradient.split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null;var vector=[0,0,math.cos(R.rad(angle)),math.sin(R.rad(angle))],max=1/(mmax(abs(vector[2]),abs(vector[3]))||1);vector[2]*=max,vector[3]*=max,vector[2]<0&&(vector[0]=-vector[2],vector[2]=0),vector[3]<0&&(vector[1]=-vector[3],vector[3]=0)}var dots=R._parseDots(gradient);if(!dots)return null;if(id=id.replace(/[\(\)\s,\xb0#]/g,"_"),element.gradient&&id!=element.gradient.id&&(SVG.defs.removeChild(element.gradient),delete element.gradient),!element.gradient){el=$(type+"Gradient",{id:id}),element.gradient=el,$(el,"radial"==type?{fx:fx,fy:fy}:{x1:vector[0],y1:vector[1],x2:vector[2],y2:vector[3],gradientTransform:element.matrix.invert()}),SVG.defs.appendChild(el);
for(var i=0,ii=dots.length;ii>i;i++)el.appendChild($("stop",{offset:dots[i].offset?dots[i].offset:i?"100%":"0%","stop-color":dots[i].color||"#fff"}))}}return $(o,{fill:"url(#"+id+")",opacity:1,"fill-opacity":1}),s.fill=E,s.opacity=1,s.fillOpacity=1,1},updatePosition=function(o){var bbox=o.getBBox(1);$(o.pattern,{patternTransform:o.matrix.invert()+" translate("+bbox.x+","+bbox.y+")"})},addArrow=function(o,value,isEnd){if("path"==o.type){for(var from,to,dx,refX,attr,values=Str(value).toLowerCase().split("-"),p=o.paper,se=isEnd?"end":"start",node=o.node,attrs=o.attrs,stroke=attrs["stroke-width"],i=values.length,type="classic",w=3,h=3,t=5;i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];
break;case"wide":h=5;break;case"narrow":h=2;break;case"long":w=5;break;case"short":w=2}if("open"==type?(w+=2,h+=2,t+=2,dx=1,refX=isEnd?4:1,attr={fill:"none",stroke:attrs.stroke}):(refX=dx=w/2,attr={fill:attrs.stroke,stroke:"none"}),o._.arrows?isEnd?(o._.arrows.endPath&&markerCounter[o._.arrows.endPath]--,o._.arrows.endMarker&&markerCounter[o._.arrows.endMarker]--):(o._.arrows.startPath&&markerCounter[o._.arrows.startPath]--,o._.arrows.startMarker&&markerCounter[o._.arrows.startMarker]--):o._.arrows={},"none"!=type){var pathId="raphael-marker-"+type,markerId="raphael-marker-"+se+type+w+h;R._g.doc.getElementById(pathId)?markerCounter[pathId]++:(p.defs.appendChild($($("path"),{"stroke-linecap":"round",d:markers[type],id:pathId})),markerCounter[pathId]=1);
var use,marker=R._g.doc.getElementById(markerId);marker?(markerCounter[markerId]++,use=marker.getElementsByTagName("use")[0]):(marker=$($("marker"),{id:markerId,markerHeight:h,markerWidth:w,orient:"auto",refX:refX,refY:h/2}),use=$($("use"),{"xlink:href":"#"+pathId,transform:(isEnd?"rotate(180 "+w/2+" "+h/2+") ":E)+"scale("+w/t+","+h/t+")","stroke-width":(1/((w/t+h/t)/2)).toFixed(4)}),marker.appendChild(use),p.defs.appendChild(marker),markerCounter[markerId]=1),$(use,attr);var delta=dx*("diamond"!=type&&"oval"!=type);isEnd?(from=o._.arrows.startdx*stroke||0,to=R.getTotalLength(attrs.path)-delta*stroke):(from=delta*stroke,to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),attr={},attr["marker-"+se]="url(#"+markerId+")",(to||from)&&(attr.d=R.getSubpath(attrs.path,from,to)),$(node,attr),o._.arrows[se+"Path"]=pathId,o._.arrows[se+"Marker"]=markerId,o._.arrows[se+"dx"]=delta,o._.arrows[se+"Type"]=type,o._.arrows[se+"String"]=value
}else isEnd?(from=o._.arrows.startdx*stroke||0,to=R.getTotalLength(attrs.path)-from):(from=0,to=R.getTotalLength(attrs.path)-(o._.arrows.enddx*stroke||0)),o._.arrows[se+"Path"]&&$(node,{d:R.getSubpath(attrs.path,from,to)}),delete o._.arrows[se+"Path"],delete o._.arrows[se+"Marker"],delete o._.arrows[se+"dx"],delete o._.arrows[se+"Type"],delete o._.arrows[se+"String"];for(attr in markerCounter)if(markerCounter[has](attr)&&!markerCounter[attr]){var item=R._g.doc.getElementById(attr);item&&item.parentNode.removeChild(item)}}},dasharray={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},addDashes=function(o,value,params){if(value=dasharray[Str(value).toLowerCase()]){for(var width=o.attrs["stroke-width"]||"1",butt={round:width,square:width,butt:0}[o.attrs["stroke-linecap"]||params["stroke-linecap"]]||0,dashes=[],i=value.length;i--;)dashes[i]=value[i]*width+(i%2?1:-1)*butt;
$(o.node,{"stroke-dasharray":dashes.join(",")})}},setFillAndStroke=function(o,params){var node=o.node,attrs=o.attrs,vis=node.style.visibility;node.style.visibility="hidden";for(var att in params)if(params[has](att)){if(!R._availableAttrs[has](att))continue;var value=params[att];switch(attrs[att]=value,att){case"blur":o.blur(value);break;case"title":var title=node.getElementsByTagName("title");if(title.length&&(title=title[0]))title.firstChild.nodeValue=value;else{title=$("title");var val=R._g.doc.createTextNode(value);title.appendChild(val),node.appendChild(title)}break;case"href":case"target":var pn=node.parentNode;if("a"!=pn.tagName.toLowerCase()){var hl=$("a");
pn.insertBefore(hl,node),hl.appendChild(node),pn=hl}"target"==att?pn.setAttributeNS(xlink,"show","blank"==value?"new":value):pn.setAttributeNS(xlink,att,value);break;case"cursor":node.style.cursor=value;break;case"transform":o.transform(value);break;case"arrow-start":addArrow(o,value);break;case"arrow-end":addArrow(o,value,1);break;case"clip-rect":var rect=Str(value).split(separator);if(4==rect.length){o.clip&&o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);var el=$("clipPath"),rc=$("rect");el.id=R.createUUID(),$(rc,{x:rect[0],y:rect[1],width:rect[2],height:rect[3]}),el.appendChild(rc),o.paper.defs.appendChild(el),$(node,{"clip-path":"url(#"+el.id+")"}),o.clip=rc
}if(!value){var path=node.getAttribute("clip-path");if(path){var clip=R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g,E));clip&&clip.parentNode.removeChild(clip),$(node,{"clip-path":E}),delete o.clip}}break;case"path":"path"==o.type&&($(node,{d:value?attrs.path=R._pathToAbsolute(value):"M0,0"}),o._.dirty=1,o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1)));break;case"width":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fx)break;att="x",value=attrs.x;case"x":attrs.fx&&(value=-attrs.x-(attrs.width||0));case"rx":if("rx"==att&&"rect"==o.type)break;case"cx":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;
break;case"height":if(node.setAttribute(att,value),o._.dirty=1,!attrs.fy)break;att="y",value=attrs.y;case"y":attrs.fy&&(value=-attrs.y-(attrs.height||0));case"ry":if("ry"==att&&"rect"==o.type)break;case"cy":node.setAttribute(att,value),o.pattern&&updatePosition(o),o._.dirty=1;break;case"r":"rect"==o.type?$(node,{rx:value,ry:value}):node.setAttribute(att,value),o._.dirty=1;break;case"src":"image"==o.type&&node.setAttributeNS(xlink,"href",value);break;case"stroke-width":(1!=o._.sx||1!=o._.sy)&&(value/=mmax(abs(o._.sx),abs(o._.sy))||1),o.paper._vbSize&&(value*=o.paper._vbSize),node.setAttribute(att,value),attrs["stroke-dasharray"]&&addDashes(o,attrs["stroke-dasharray"],params),o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));
break;case"stroke-dasharray":addDashes(o,value,params);break;case"fill":var isURL=Str(value).match(R._ISURL);if(isURL){el=$("pattern");var ig=$("image");el.id=R.createUUID(),$(el,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),$(ig,{x:0,y:0,"xlink:href":isURL[1]}),el.appendChild(ig),function(el){R._preload(isURL[1],function(){var w=this.offsetWidth,h=this.offsetHeight;$(el,{width:w,height:h}),$(ig,{width:w,height:h}),o.paper.safari()})}(el),o.paper.defs.appendChild(el),$(node,{fill:"url(#"+el.id+")"}),o.pattern=el,o.pattern&&updatePosition(o);break}var clr=R.getRGB(value);if(clr.error){if(("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value)){if("opacity"in attrs||"fill-opacity"in attrs){var gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E));
if(gradient){var stops=gradient.getElementsByTagName("stop");$(stops[stops.length-1],{"stop-opacity":("opacity"in attrs?attrs.opacity:1)*("fill-opacity"in attrs?attrs["fill-opacity"]:1)})}}attrs.gradient=value,attrs.fill="none";break}}else delete params.gradient,delete attrs.gradient,!R.is(attrs.opacity,"undefined")&&R.is(params.opacity,"undefined")&&$(node,{opacity:attrs.opacity}),!R.is(attrs["fill-opacity"],"undefined")&&R.is(params["fill-opacity"],"undefined")&&$(node,{"fill-opacity":attrs["fill-opacity"]});clr[has]("opacity")&&$(node,{"fill-opacity":clr.opacity>1?clr.opacity/100:clr.opacity});case"stroke":clr=R.getRGB(value),node.setAttribute(att,clr.hex),"stroke"==att&&clr[has]("opacity")&&$(node,{"stroke-opacity":clr.opacity>1?clr.opacity/100:clr.opacity}),"stroke"==att&&o._.arrows&&("startString"in o._.arrows&&addArrow(o,o._.arrows.startString),"endString"in o._.arrows&&addArrow(o,o._.arrows.endString,1));
break;case"gradient":("circle"==o.type||"ellipse"==o.type||"r"!=Str(value).charAt())&&addGradientFill(o,value);break;case"opacity":attrs.gradient&&!attrs[has]("stroke-opacity")&&$(node,{"stroke-opacity":value>1?value/100:value});case"fill-opacity":if(attrs.gradient){gradient=R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g,E)),gradient&&(stops=gradient.getElementsByTagName("stop"),$(stops[stops.length-1],{"stop-opacity":value}));break}default:"font-size"==att&&(value=toInt(value,10)+"px");var cssrule=att.replace(/(\-.)/g,function(w){return w.substring(1).toUpperCase()});node.style[cssrule]=value,o._.dirty=1,node.setAttribute(att,value)
}}tuneText(o,params),node.style.visibility=vis},leading=1.2,tuneText=function(el,params){if("text"==el.type&&(params[has]("text")||params[has]("font")||params[has]("font-size")||params[has]("x")||params[has]("y"))){var a=el.attrs,node=el.node,computedStyle=node.firstChild?R._g.doc.defaultView.getComputedStyle(node.firstChild,E):void 0,fontSize=computedStyle?toInt(computedStyle.getPropertyValue("font-size"),10):10;if(params[has]("text")){for(a.text=params.text;node.firstChild;)node.removeChild(node.firstChild);for(var tspan,texts=Str(params.text).split("\n"),tspans=[],i=0,ii=texts.length;ii>i;i++)tspan=$("tspan"),i&&$(tspan,{dy:fontSize*leading,x:a.x}),tspan.appendChild(R._g.doc.createTextNode(texts[i])),node.appendChild(tspan),tspans[i]=tspan
}else for(tspans=node.getElementsByTagName("tspan"),i=0,ii=tspans.length;ii>i;i++)i?$(tspans[i],{dy:fontSize*leading,x:a.x}):$(tspans[0],{dy:0});$(node,{x:a.x,y:a.y}),el._.dirty=1;var bb=el._getBBox(),dif=a.y-(bb.y+bb.height/2);dif&&R.is(dif,"finite")&&$(tspans[0],{dy:dif})}},Element=function(node,svg){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.matrix=R.matrix(),this.realPath=null,this.paper=svg,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!svg.bottom&&(svg.bottom=this),this.prev=svg.top,svg.top&&(svg.top.next=this),svg.top=this,this.next=null},elproto=R.el;Element.prototype=elproto,elproto.constructor=Element,R._engine.path=function(pathString,SVG){var el=$("path");
SVG.canvas&&SVG.canvas.appendChild(el);var p=new Element(el,SVG);return p.type="path",setFillAndStroke(p,{fill:"none",stroke:"#000",path:pathString}),p},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(deg=Str(deg).split(separator),deg.length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this.transform(this._.transform.concat([["r",deg,cx,cy]])),this},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if(sx=Str(sx).split(separator),sx.length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3])),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);
return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this},elproto.translate=function(dx,dy){return this.removed?this:(dx=Str(dx).split(separator),dx.length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this.transform(this._.transform.concat([["t",dx,dy]])),this)},elproto.transform=function(tstr){var _=this._;if(null==tstr)return _.transform;if(R._extractTransform(this,tstr),this.clip&&$(this.clip,{transform:this.matrix.invert()}),this.pattern&&updatePosition(this),this.node&&$(this.node,{transform:this.matrix}),1!=_.sx||1!=_.sy){var sw=this.attrs[has]("stroke-width")?this.attrs["stroke-width"]:1;
this.attr({"stroke-width":sw})}return this},elproto.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},elproto.remove=function(){if(!this.removed&&this.node.parentNode){var paper=this.paper;paper.__set__&&paper.__set__.exclude(this),eve.unbind("raphael.*.*."+this.id),this.gradient&&paper.defs.removeChild(this.gradient),R._tear(this,paper),"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;
this.removed=!0}},elproto._getBBox=function(){if("none"==this.node.style.display){this.show();var hide=!0}var bbox={};try{bbox=this.node.getBBox()}catch(e){}finally{bbox=bbox||{}}return hide&&this.hide(),bbox},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if("fill"==name&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("transform"==name)return this._.transform;for(var names=name.split(separator),out={},i=0,ii=names.length;ii>i;i++)name=names[i],out[name]=name in this.attrs?this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?this.paper.customAttributes[name].def:R._availableAttrs[name];
return ii-1?out:out[names[0]]}if(null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;ii>i;i++)out[name[i]]=this.attr(name[i]);return out}if(null!=value){var params={};params[name]=value}else null!=name&&R.is(name,"object")&&(params=name);for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)par[has](subkey)&&(params[subkey]=par[subkey])}return setFillAndStroke(this,params),this
},elproto.toFront=function(){if(this.removed)return this;"a"==this.node.parentNode.tagName.toLowerCase()?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var svg=this.paper;return svg.top!=this&&R._tofront(this,svg),this},elproto.toBack=function(){if(this.removed)return this;var parent=this.node.parentNode;"a"==parent.tagName.toLowerCase()?parent.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):parent.firstChild!=this.node&&parent.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper);this.paper;return this},elproto.insertAfter=function(element){if(this.removed)return this;
var node=element.node||element[element.length-1].node;return node.nextSibling?node.parentNode.insertBefore(this.node,node.nextSibling):node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper),this},elproto.insertBefore=function(element){if(this.removed)return this;var node=element.node||element[0].node;return node.parentNode.insertBefore(this.node,node),R._insertbefore(this,element,this.paper),this},elproto.blur=function(size){var t=this;if(0!==+size){var fltr=$("filter"),blur=$("feGaussianBlur");t.attrs.blur=size,fltr.id=R.createUUID(),$(blur,{stdDeviation:+size||1.5}),fltr.appendChild(blur),t.paper.defs.appendChild(fltr),t._blur=fltr,$(t.node,{filter:"url(#"+fltr.id+")"})
}else t._blur&&(t._blur.parentNode.removeChild(t._blur),delete t._blur,delete t.attrs.blur),t.node.removeAttribute("filter");return t},R._engine.circle=function(svg,x,y,r){var el=$("circle");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,r:r,fill:"none",stroke:"#000"},res.type="circle",$(el,res.attrs),res},R._engine.rect=function(svg,x,y,w,h,r){var el=$("rect");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,r:r||0,rx:r||0,ry:r||0,fill:"none",stroke:"#000"},res.type="rect",$(el,res.attrs),res},R._engine.ellipse=function(svg,x,y,rx,ry){var el=$("ellipse");
svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={cx:x,cy:y,rx:rx,ry:ry,fill:"none",stroke:"#000"},res.type="ellipse",$(el,res.attrs),res},R._engine.image=function(svg,src,x,y,w,h){var el=$("image");$(el,{x:x,y:y,width:w,height:h,preserveAspectRatio:"none"}),el.setAttributeNS(xlink,"href",src),svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,width:w,height:h,src:src},res.type="image",res},R._engine.text=function(svg,x,y,text){var el=$("text");svg.canvas&&svg.canvas.appendChild(el);var res=new Element(el,svg);return res.attrs={x:x,y:y,"text-anchor":"middle",text:text,font:R._availableAttrs.font,stroke:"none",fill:"#000"},res.type="text",setFillAndStroke(res,res.attrs),res
},R._engine.setSize=function(width,height){return this.width=width||this.width,this.height=height||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con&&con.container,x=con.x,y=con.y,width=con.width,height=con.height;if(!container)throw new Error("SVG container not found.");var isFloating,cnvs=$("svg"),css="overflow:hidden;";return x=x||0,y=y||0,width=width||512,height=height||342,$(cnvs,{height:height,version:1.1,width:width,xmlns:"http://www.w3.org/2000/svg"}),1==container?(cnvs.style.cssText=css+"position:absolute;left:"+x+"px;top:"+y+"px",R._g.doc.body.appendChild(cnvs),isFloating=1):(cnvs.style.cssText=css+"position:relative",container.firstChild?container.insertBefore(cnvs,container.firstChild):container.appendChild(cnvs)),container=new R._Paper,container.width=width,container.height=height,container.canvas=cnvs,container.clear(),container._left=container._top=0,isFloating&&(container.renderfix=function(){}),container.renderfix(),container
},R._engine.setViewBox=function(x,y,w,h,fit){eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var vb,sw,size=mmax(w/this.width,h/this.height),top=this.top,aspectRatio=fit?"xMidYMid meet":"xMinYMin";for(null==x?(this._vbSize&&(size=1),delete this._vbSize,vb="0 0 "+this.width+S+this.height):(this._vbSize=size,vb=x+S+y+S+w+S+h),$(this.canvas,{viewBox:vb,preserveAspectRatio:aspectRatio});size&&top;)sw="stroke-width"in top.attrs?top.attrs["stroke-width"]:1,top.attr({"stroke-width":sw}),top._.dirty=1,top._.dirtyT=1,top=top.prev;return this._viewBox=[x,y,w,h,!!fit],this},R.prototype.renderfix=function(){var pos,cnvs=this.canvas,s=cnvs.style;try{pos=cnvs.getScreenCTM()||cnvs.createSVGMatrix()
}catch(e){pos=cnvs.createSVGMatrix()}var left=-pos.e%1,top=-pos.f%1;(left||top)&&(left&&(this._left=(this._left+left)%1,s.left=this._left+"px"),top&&(this._top=(this._top+top)%1,s.top=this._top+"px"))},R.prototype.clear=function(){R.eve("raphael.clear",this);for(var c=this.canvas;c.firstChild;)c.removeChild(c.firstChild);this.bottom=this.top=null,(this.desc=$("desc")).appendChild(R._g.doc.createTextNode("Created with RaphaÃ«l "+R.version)),c.appendChild(this.desc),c.appendChild(this.defs=$("defs"))},R.prototype.remove=function(){eve("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null
};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)})}}(method))}}(),function(){if(R.vml){var has="hasOwnProperty",Str=String,toFloat=parseFloat,math=Math,round=math.round,mmax=math.max,mmin=math.min,abs=math.abs,fillString="fill",separator=/[, ]+/,eve=R.eve,ms=" progid:DXImageTransform.Microsoft",S=" ",E="",map={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},bites=/([clmz]),?([^clmz]*)/gi,blurregexp=/ progid:\S+Blur\([^\)]+\)/g,val=/-?[^,\s-]+/g,cssDot="position:absolute;left:0;top:0;width:1px;height:1px",zoom=21600,pathTypes={path:1,rect:1,image:1},ovalTypes={circle:1,ellipse:1},path2vml=function(path){var total=/[ahqstv]/gi,command=R._pathToAbsolute;
if(Str(path).match(total)&&(command=R._path2curve),total=/[clmz]/g,command==R._pathToAbsolute&&!Str(path).match(total)){var res=Str(path).replace(bites,function(all,command,args){var vals=[],isMove="m"==command.toLowerCase(),res=map[command];return args.replace(val,function(value){isMove&&2==vals.length&&(res+=vals+map["m"==command?"l":"L"],vals=[]),vals.push(round(value*zoom))}),res+vals});return res}var p,r,pa=command(path);res=[];for(var i=0,ii=pa.length;ii>i;i++){p=pa[i],r=pa[i][0].toLowerCase(),"z"==r&&(r="x");for(var j=1,jj=p.length;jj>j;j++)r+=round(p[j]*zoom)+(j!=jj-1?",":E);res.push(r)}return res.join(S)},compensation=function(deg,dx,dy){var m=R.matrix();
return m.rotate(-deg,.5,.5),{dx:m.x(dx,dy),dy:m.y(dx,dy)}},setCoords=function(p,sx,sy,dx,dy,deg){var _=p._,m=p.matrix,fillpos=_.fillpos,o=p.node,s=o.style,y=1,flip="",kx=zoom/sx,ky=zoom/sy;if(s.visibility="hidden",sx&&sy){if(o.coordsize=abs(kx)+S+abs(ky),s.rotation=deg*(0>sx*sy?-1:1),deg){var c=compensation(deg,dx,dy);dx=c.dx,dy=c.dy}if(0>sx&&(flip+="x"),0>sy&&(flip+=" y")&&(y=-1),s.flip=flip,o.coordorigin=dx*-kx+S+dy*-ky,fillpos||_.fillsize){var fill=o.getElementsByTagName(fillString);fill=fill&&fill[0],o.removeChild(fill),fillpos&&(c=compensation(deg,m.x(fillpos[0],fillpos[1]),m.y(fillpos[0],fillpos[1])),fill.position=c.dx*y+S+c.dy*y),_.fillsize&&(fill.size=_.fillsize[0]*abs(sx)+S+_.fillsize[1]*abs(sy)),o.appendChild(fill)
}s.visibility="visible"}};R.toString=function(){return"Your browser doesnât support SVG. Falling down to VML.\nYou are running RaphaÃ«l "+this.version};var addArrow=function(o,value,isEnd){for(var values=Str(value).toLowerCase().split("-"),se=isEnd?"end":"start",i=values.length,type="classic",w="medium",h="medium";i--;)switch(values[i]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":type=values[i];break;case"wide":case"narrow":h=values[i];break;case"long":case"short":w=values[i]}var stroke=o.node.getElementsByTagName("stroke")[0];stroke[se+"arrow"]=type,stroke[se+"arrowlength"]=w,stroke[se+"arrowwidth"]=h},setFillAndStroke=function(o,params){o.attrs=o.attrs||{};
var node=o.node,a=o.attrs,s=node.style,newpath=pathTypes[o.type]&&(params.x!=a.x||params.y!=a.y||params.width!=a.width||params.height!=a.height||params.cx!=a.cx||params.cy!=a.cy||params.rx!=a.rx||params.ry!=a.ry||params.r!=a.r),isOval=ovalTypes[o.type]&&(a.cx!=params.cx||a.cy!=params.cy||a.r!=params.r||a.rx!=params.rx||a.ry!=params.ry),res=o;for(var par in params)params[has](par)&&(a[par]=params[par]);if(newpath&&(a.path=R._getPath[o.type](o),o._.dirty=1),params.href&&(node.href=params.href),params.title&&(node.title=params.title),params.target&&(node.target=params.target),params.cursor&&(s.cursor=params.cursor),"blur"in params&&o.blur(params.blur),(params.path&&"path"==o.type||newpath)&&(node.path=path2vml(~Str(a.path).toLowerCase().indexOf("r")?R._pathToAbsolute(a.path):a.path),"image"==o.type&&(o._.fillpos=[a.x,a.y],o._.fillsize=[a.width,a.height],setCoords(o,1,1,0,0,0))),"transform"in params&&o.transform(params.transform),isOval){var cx=+a.cx,cy=+a.cy,rx=+a.rx||+a.r||0,ry=+a.ry||+a.r||0;
node.path=R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",round((cx-rx)*zoom),round((cy-ry)*zoom),round((cx+rx)*zoom),round((cy+ry)*zoom),round(cx*zoom)),o._.dirty=1}if("clip-rect"in params){var rect=Str(params["clip-rect"]).split(separator);if(4==rect.length){rect[2]=+rect[2]+ +rect[0],rect[3]=+rect[3]+ +rect[1];var div=node.clipRect||R._g.doc.createElement("div"),dstyle=div.style;dstyle.clip=R.format("rect({1}px {2}px {3}px {0}px)",rect),node.clipRect||(dstyle.position="absolute",dstyle.top=0,dstyle.left=0,dstyle.width=o.paper.width+"px",dstyle.height=o.paper.height+"px",node.parentNode.insertBefore(div,node),div.appendChild(node),node.clipRect=div)}params["clip-rect"]||node.clipRect&&(node.clipRect.style.clip="auto")
}if(o.textpath){var textpathStyle=o.textpath.style;params.font&&(textpathStyle.font=params.font),params["font-family"]&&(textpathStyle.fontFamily='"'+params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,E)+'"'),params["font-size"]&&(textpathStyle.fontSize=params["font-size"]),params["font-weight"]&&(textpathStyle.fontWeight=params["font-weight"]),params["font-style"]&&(textpathStyle.fontStyle=params["font-style"])}if("arrow-start"in params&&addArrow(res,params["arrow-start"]),"arrow-end"in params&&addArrow(res,params["arrow-end"],1),null!=params.opacity||null!=params["stroke-width"]||null!=params.fill||null!=params.src||null!=params.stroke||null!=params["stroke-width"]||null!=params["stroke-opacity"]||null!=params["fill-opacity"]||null!=params["stroke-dasharray"]||null!=params["stroke-miterlimit"]||null!=params["stroke-linejoin"]||null!=params["stroke-linecap"]){var fill=node.getElementsByTagName(fillString),newfill=!1;
if(fill=fill&&fill[0],!fill&&(newfill=fill=createNode(fillString)),"image"==o.type&&params.src&&(fill.src=params.src),params.fill&&(fill.on=!0),(null==fill.on||"none"==params.fill||null===params.fill)&&(fill.on=!1),fill.on&&params.fill){var isURL=Str(params.fill).match(R._ISURL);if(isURL){fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=isURL[1],fill.type="tile";var bbox=o.getBBox(1);fill.position=bbox.x+S+bbox.y,o._.fillpos=[bbox.x,bbox.y],R._preload(isURL[1],function(){o._.fillsize=[this.offsetWidth,this.offsetHeight]})}else fill.color=R.getRGB(params.fill).hex,fill.src=E,fill.type="solid",R.getRGB(params.fill).error&&(res.type in{circle:1,ellipse:1}||"r"!=Str(params.fill).charAt())&&addGradientFill(res,params.fill,fill)&&(a.fill="none",a.gradient=params.fill,fill.rotate=!1)
}if("fill-opacity"in params||"opacity"in params){var opacity=((+a["fill-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+R.getRGB(params.fill).o+1||2)-1);opacity=mmin(mmax(opacity,0),1),fill.opacity=opacity,fill.src&&(fill.color="none")}node.appendChild(fill);var stroke=node.getElementsByTagName("stroke")&&node.getElementsByTagName("stroke")[0],newstroke=!1;!stroke&&(newstroke=stroke=createNode("stroke")),(params.stroke&&"none"!=params.stroke||params["stroke-width"]||null!=params["stroke-opacity"]||params["stroke-dasharray"]||params["stroke-miterlimit"]||params["stroke-linejoin"]||params["stroke-linecap"])&&(stroke.on=!0),("none"==params.stroke||null===params.stroke||null==stroke.on||0==params.stroke||0==params["stroke-width"])&&(stroke.on=!1);
var strokeColor=R.getRGB(params.stroke);stroke.on&&params.stroke&&(stroke.color=strokeColor.hex),opacity=((+a["stroke-opacity"]+1||2)-1)*((+a.opacity+1||2)-1)*((+strokeColor.o+1||2)-1);var width=.75*(toFloat(params["stroke-width"])||1);if(opacity=mmin(mmax(opacity,0),1),null==params["stroke-width"]&&(width=a["stroke-width"]),params["stroke-width"]&&(stroke.weight=width),width&&1>width&&(opacity*=width)&&(stroke.weight=1),stroke.opacity=opacity,params["stroke-linejoin"]&&(stroke.joinstyle=params["stroke-linejoin"]||"miter"),stroke.miterlimit=params["stroke-miterlimit"]||8,params["stroke-linecap"]&&(stroke.endcap="butt"==params["stroke-linecap"]?"flat":"square"==params["stroke-linecap"]?"square":"round"),"stroke-dasharray"in params){var dasharray={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};
stroke.dashstyle=dasharray[has](params["stroke-dasharray"])?dasharray[params["stroke-dasharray"]]:E}newstroke&&node.appendChild(stroke)}if("text"==res.type){res.paper.canvas.style.display=E;var span=res.paper.span,m=100,fontSize=a.font&&a.font.match(/\d+(?:\.\d*)?(?=px)/);s=span.style,a.font&&(s.font=a.font),a["font-family"]&&(s.fontFamily=a["font-family"]),a["font-weight"]&&(s.fontWeight=a["font-weight"]),a["font-style"]&&(s.fontStyle=a["font-style"]),fontSize=toFloat(a["font-size"]||fontSize&&fontSize[0])||10,s.fontSize=fontSize*m+"px",res.textpath.string&&(span.innerHTML=Str(res.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));
var brect=span.getBoundingClientRect();res.W=a.w=(brect.right-brect.left)/m,res.H=a.h=(brect.bottom-brect.top)/m,res.X=a.x,res.Y=a.y+res.H/2,("x"in params||"y"in params)&&(res.path.v=R.format("m{0},{1}l{2},{1}",round(a.x*zoom),round(a.y*zoom),round(a.x*zoom)+1));for(var dirtyattrs=["x","y","text","font","font-family","font-weight","font-style","font-size"],d=0,dd=dirtyattrs.length;dd>d;d++)if(dirtyattrs[d]in params){res._.dirty=1;break}switch(a["text-anchor"]){case"start":res.textpath.style["v-text-align"]="left",res.bbx=res.W/2;break;case"end":res.textpath.style["v-text-align"]="right",res.bbx=-res.W/2;break;default:res.textpath.style["v-text-align"]="center",res.bbx=0
}res.textpath.style["v-text-kern"]=!0}},addGradientFill=function(o,gradient,fill){o.attrs=o.attrs||{};var pow=(o.attrs,Math.pow),type="linear",fxfy=".5 .5";if(o.attrs.gradient=gradient,gradient=Str(gradient).replace(R._radial_gradient,function(all,fx,fy){return type="radial",fx&&fy&&(fx=toFloat(fx),fy=toFloat(fy),pow(fx-.5,2)+pow(fy-.5,2)>.25&&(fy=math.sqrt(.25-pow(fx-.5,2))*(2*(fy>.5)-1)+.5),fxfy=fx+S+fy),E}),gradient=gradient.split(/\s*\-\s*/),"linear"==type){var angle=gradient.shift();if(angle=-toFloat(angle),isNaN(angle))return null}var dots=R._parseDots(gradient);if(!dots)return null;if(o=o.shape||o.node,dots.length){o.removeChild(fill),fill.on=!0,fill.method="none",fill.color=dots[0].color,fill.color2=dots[dots.length-1].color;
for(var clrs=[],i=0,ii=dots.length;ii>i;i++)dots[i].offset&&clrs.push(dots[i].offset+S+dots[i].color);fill.colors=clrs.length?clrs.join():"0% "+fill.color,"radial"==type?(fill.type="gradientTitle",fill.focus="100%",fill.focussize="0 0",fill.focusposition=fxfy,fill.angle=0):(fill.type="gradient",fill.angle=(270-angle)%360),o.appendChild(fill)}return 1},Element=function(node,vml){this[0]=this.node=node,node.raphael=!0,this.id=R._oid++,node.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=vml,this.matrix=R.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!vml.bottom&&(vml.bottom=this),this.prev=vml.top,vml.top&&(vml.top.next=this),vml.top=this,this.next=null
},elproto=R.el;Element.prototype=elproto,elproto.constructor=Element,elproto.transform=function(tstr){if(null==tstr)return this._.transform;var oldt,vbs=this.paper._viewBoxShift,vbt=vbs?"s"+[vbs.scale,vbs.scale]+"-1-1t"+[vbs.dx,vbs.dy]:E;vbs&&(oldt=tstr=Str(tstr).replace(/\.{3}|\u2026/g,this._.transform||E)),R._extractTransform(this,vbt+tstr);var split,matrix=this.matrix.clone(),skew=this.skew,o=this.node,isGrad=~Str(this.attrs.fill).indexOf("-"),isPatt=!Str(this.attrs.fill).indexOf("url(");if(matrix.translate(1,1),isPatt||isGrad||"image"==this.type)if(skew.matrix="1 0 0 1",skew.offset="0 0",split=matrix.split(),isGrad&&split.noRotation||!split.isSimple){o.style.filter=matrix.toFilter();
var bb=this.getBBox(),bbt=this.getBBox(1),dx=bb.x-bbt.x,dy=bb.y-bbt.y;o.coordorigin=dx*-zoom+S+dy*-zoom,setCoords(this,1,1,dx,dy,0)}else o.style.filter=E,setCoords(this,split.scalex,split.scaley,split.dx,split.dy,split.rotate);else o.style.filter=E,skew.matrix=Str(matrix),skew.offset=matrix.offset();return oldt&&(this._.transform=oldt),this},elproto.rotate=function(deg,cx,cy){if(this.removed)return this;if(null!=deg){if(deg=Str(deg).split(separator),deg.length-1&&(cx=toFloat(deg[1]),cy=toFloat(deg[2])),deg=toFloat(deg[0]),null==cy&&(cx=cy),null==cx||null==cy){var bbox=this.getBBox(1);cx=bbox.x+bbox.width/2,cy=bbox.y+bbox.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",deg,cx,cy]])),this
}},elproto.translate=function(dx,dy){return this.removed?this:(dx=Str(dx).split(separator),dx.length-1&&(dy=toFloat(dx[1])),dx=toFloat(dx[0])||0,dy=+dy||0,this._.bbox&&(this._.bbox.x+=dx,this._.bbox.y+=dy),this.transform(this._.transform.concat([["t",dx,dy]])),this)},elproto.scale=function(sx,sy,cx,cy){if(this.removed)return this;if(sx=Str(sx).split(separator),sx.length-1&&(sy=toFloat(sx[1]),cx=toFloat(sx[2]),cy=toFloat(sx[3]),isNaN(cx)&&(cx=null),isNaN(cy)&&(cy=null)),sx=toFloat(sx[0]),null==sy&&(sy=sx),null==cy&&(cx=cy),null==cx||null==cy)var bbox=this.getBBox(1);return cx=null==cx?bbox.x+bbox.width/2:cx,cy=null==cy?bbox.y+bbox.height/2:cy,this.transform(this._.transform.concat([["s",sx,sy,cx,cy]])),this._.dirtyT=1,this
},elproto.hide=function(){return!this.removed&&(this.node.style.display="none"),this},elproto.show=function(){return!this.removed&&(this.node.style.display=E),this},elproto._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},elproto.remove=function(){if(!this.removed&&this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),R.eve.unbind("raphael.*.*."+this.id),R._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;this.removed=!0
}},elproto.attr=function(name,value){if(this.removed)return this;if(null==name){var res={};for(var a in this.attrs)this.attrs[has](a)&&(res[a]=this.attrs[a]);return res.gradient&&"none"==res.fill&&(res.fill=res.gradient)&&delete res.gradient,res.transform=this._.transform,res}if(null==value&&R.is(name,"string")){if(name==fillString&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;for(var names=name.split(separator),out={},i=0,ii=names.length;ii>i;i++)name=names[i],out[name]=name in this.attrs?this.attrs[name]:R.is(this.paper.customAttributes[name],"function")?this.paper.customAttributes[name].def:R._availableAttrs[name];return ii-1?out:out[names[0]]
}if(this.attrs&&null==value&&R.is(name,"array")){for(out={},i=0,ii=name.length;ii>i;i++)out[name[i]]=this.attr(name[i]);return out}var params;null!=value&&(params={},params[name]=value),null==value&&R.is(name,"object")&&(params=name);for(var key in params)eve("raphael.attr."+key+"."+this.id,this,params[key]);if(params){for(key in this.paper.customAttributes)if(this.paper.customAttributes[has](key)&&params[has](key)&&R.is(this.paper.customAttributes[key],"function")){var par=this.paper.customAttributes[key].apply(this,[].concat(params[key]));this.attrs[key]=params[key];for(var subkey in par)par[has](subkey)&&(params[subkey]=par[subkey])}params.text&&"text"==this.type&&(this.textpath.string=params.text),setFillAndStroke(this,params)
}return this},elproto.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&R._tofront(this,this.paper),this},elproto.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),R._toback(this,this.paper)),this)},elproto.insertAfter=function(element){return this.removed?this:(element.constructor==R.st.constructor&&(element=element[element.length-1]),element.node.nextSibling?element.node.parentNode.insertBefore(this.node,element.node.nextSibling):element.node.parentNode.appendChild(this.node),R._insertafter(this,element,this.paper),this)
},elproto.insertBefore=function(element){return this.removed?this:(element.constructor==R.st.constructor&&(element=element[0]),element.node.parentNode.insertBefore(this.node,element.node),R._insertbefore(this,element,this.paper),this)},elproto.blur=function(size){var s=this.node.runtimeStyle,f=s.filter;return f=f.replace(blurregexp,E),0!==+size?(this.attrs.blur=size,s.filter=f+S+ms+".Blur(pixelradius="+(+size||1.5)+")",s.margin=R.format("-{0}px 0 0 -{0}px",round(+size||1.5))):(s.filter=f,s.margin=0,delete this.attrs.blur),this},R._engine.path=function(pathString,vml){var el=createNode("shape");el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin=vml.coordorigin;
var p=new Element(el,vml),attr={fill:"none",stroke:"#000"};pathString&&(attr.path=pathString),p.type="path",p.path=[],p.Path=E,setFillAndStroke(p,attr),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.rect=function(vml,x,y,w,h,r){var path=R._rectPath(x,y,w,h,r),res=vml.path(path),a=res.attrs;return res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,res.H=a.height=h,a.r=r,a.path=path,res.type="rect",res},R._engine.ellipse=function(vml,x,y,rx,ry){{var res=vml.path();res.attrs}return res.X=x-rx,res.Y=y-ry,res.W=2*rx,res.H=2*ry,res.type="ellipse",setFillAndStroke(res,{cx:x,cy:y,rx:rx,ry:ry}),res
},R._engine.circle=function(vml,x,y,r){{var res=vml.path();res.attrs}return res.X=x-r,res.Y=y-r,res.W=res.H=2*r,res.type="circle",setFillAndStroke(res,{cx:x,cy:y,r:r}),res},R._engine.image=function(vml,src,x,y,w,h){var path=R._rectPath(x,y,w,h),res=vml.path(path).attr({stroke:"none"}),a=res.attrs,node=res.node,fill=node.getElementsByTagName(fillString)[0];return a.src=src,res.X=a.x=x,res.Y=a.y=y,res.W=a.width=w,res.H=a.height=h,a.path=path,res.type="image",fill.parentNode==node&&node.removeChild(fill),fill.rotate=!0,fill.src=src,fill.type="tile",res._.fillpos=[x,y],res._.fillsize=[w,h],node.appendChild(fill),setCoords(res,1,1,0,0,0),res},R._engine.text=function(vml,x,y,text){var el=createNode("shape"),path=createNode("path"),o=createNode("textpath");
x=x||0,y=y||0,text=text||"",path.v=R.format("m{0},{1}l{2},{1}",round(x*zoom),round(y*zoom),round(x*zoom)+1),path.textpathok=!0,o.string=Str(text),o.on=!0,el.style.cssText=cssDot,el.coordsize=zoom+S+zoom,el.coordorigin="0 0";var p=new Element(el,vml),attr={fill:"#000",stroke:"none",font:R._availableAttrs.font,text:text};p.shape=el,p.path=path,p.textpath=o,p.type="text",p.attrs.text=Str(text),p.attrs.x=x,p.attrs.y=y,p.attrs.w=1,p.attrs.h=1,setFillAndStroke(p,attr),el.appendChild(o),el.appendChild(path),vml.canvas.appendChild(el);var skew=createNode("skew");return skew.on=!0,el.appendChild(skew),p.skew=skew,p.transform(E),p},R._engine.setSize=function(width,height){var cs=this.canvas.style;
return this.width=width,this.height=height,width==+width&&(width+="px"),height==+height&&(height+="px"),cs.width=width,cs.height=height,cs.clip="rect(0 "+width+" "+height+" 0)",this._viewBox&&R._engine.setViewBox.apply(this,this._viewBox),this},R._engine.setViewBox=function(x,y,w,h,fit){R.eve("raphael.setViewBox",this,this._viewBox,[x,y,w,h,fit]);var H,W,width=this.width,height=this.height,size=1/mmax(w/width,h/height);return fit&&(H=height/h,W=width/w,width>w*H&&(x-=(width-w*H)/2/H),height>h*W&&(y-=(height-h*W)/2/W)),this._viewBox=[x,y,w,h,!!fit],this._viewBoxShift={dx:-x,dy:-y,scale:size},this.forEach(function(el){el.transform("...")}),this};var createNode;
R._engine.initWin=function(win){var doc=win.document;doc.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!doc.namespaces.rvml&&doc.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),createNode=function(tagName){return doc.createElement("<rvml:"+tagName+' class="rvml">')}}catch(e){createNode=function(tagName){return doc.createElement("<"+tagName+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},R._engine.initWin(R._g.win),R._engine.create=function(){var con=R._getContainer.apply(0,arguments),container=con.container,height=con.height,width=con.width,x=con.x,y=con.y;if(!container)throw new Error("VML container not found.");var res=new R._Paper,c=res.canvas=R._g.doc.createElement("div"),cs=c.style;
return x=x||0,y=y||0,width=width||512,height=height||342,res.width=width,res.height=height,width==+width&&(width+="px"),height==+height&&(height+="px"),res.coordsize=1e3*zoom+S+1e3*zoom,res.coordorigin="0 0",res.span=R._g.doc.createElement("span"),res.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",c.appendChild(res.span),cs.cssText=R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",width,height),1==container?(R._g.doc.body.appendChild(c),cs.left=x+"px",cs.top=y+"px",cs.position="absolute"):container.firstChild?container.insertBefore(c,container.firstChild):container.appendChild(c),res.renderfix=function(){},res
},R.prototype.clear=function(){R.eve("raphael.clear",this),this.canvas.innerHTML=E,this.span=R._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},R.prototype.remove=function(){R.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var i in this)this[i]="function"==typeof this[i]?R._removedFactory(i):null;return!0};var setproto=R.st;for(var method in elproto)elproto[has](method)&&!setproto[has](method)&&(setproto[method]=function(methodname){return function(){var arg=arguments;return this.forEach(function(el){el[methodname].apply(el,arg)
})}}(method))}}(),oldRaphael.was?g.win.Raphael=R:Raphael=R,"object"==typeof exports&&(module.exports=R),R}),define("scale.raphael",["jquery","raphael"],function($,Raphael){var scaleRaphael=function(container,width,height){var wrapper=container.style?container:document.getElementById(container);wrapper.style.position||(wrapper.style.position="relative"),wrapper.style.width=width+"px",wrapper.style.height=height+"px";var nestedWrapper;"VML"===Raphael.type?(wrapper.innerHTML="<rvml:group style='position : absolute; width: 1000px; height: 1000px; top: 0px; left: 0px' coordsize='1000,1000' class='rvml'></rvml:group>",nestedWrapper=$(".rvml",$(wrapper))[0]):(wrapper.innerHTML="<div class='svggroup'></div>",nestedWrapper=$(".svggroup",$(wrapper))[0]);
var vmlDiv,paper=new Raphael(nestedWrapper,width,height);return"SVG"===Raphael.type?paper.canvas.setAttribute("viewBox","0 0 "+width+" "+height):vmlDiv=wrapper.getElementsByTagName("div")[0],paper.changeSize=function(w,h,center,clipping){clipping=!clipping;var ratioW=w/width,ratioH=h/height,scale=ratioH>ratioW?ratioW:ratioH,newHeight=parseInt(height*scale),newWidth=parseInt(width*scale);if("VML"===Raphael.type){var txt=document.getElementsByTagName("textpath");for(var i in txt){var curr=txt[i];if(curr.style){if(!curr._fontSize){var mod=curr.style.font.split("px");curr._fontSize=parseInt(mod[0]),curr._font=mod[1]}curr.style.font=curr._fontSize*scale+"px"+curr._font
}}var newSize;newSize=newHeight>newWidth?1e3*newWidth/width:1e3*newHeight/height,newSize=parseInt(newSize),nestedWrapper.style.width=newSize+"px",nestedWrapper.style.height=newSize+"px",clipping&&(nestedWrapper.style.left=parseInt((w-newWidth)/2)+"px",nestedWrapper.style.top=parseInt((h-newHeight)/2)+"px"),vmlDiv.style.overflow="visible"}clipping&&(newWidth=w,newHeight=h),wrapper.style.width=newWidth+"px",wrapper.style.height=newHeight+"px",paper.setSize(newWidth,newHeight),center&&(wrapper.style.position="absolute",wrapper.style.left=parseInt((w-newWidth)/2)+"px",wrapper.style.top=parseInt((h-newHeight)/2)+"px")},paper.scaleAll=function(amount){paper.changeSize(width*amount,height*amount)
},paper.changeSize(width,height),paper.w=width,paper.h=height,paper};return scaleRaphael}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;
return buffer+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicAssociateInteraction clearfix '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json",function(){return{basic:{stroke:"#8D949E","stroke-width":2,"stroke-dasharray":"","stroke-linejoin":"round",fill:"#cccccc","fill-opacity":.5,cursor:"pointer"},hover:{stroke:"#3E7DA7",fill:"#0E5D91","fill-opacity":.3},selectable:{"stroke-dasharray":"-",stroke:"#3E7DA7",fill:"#cccccc","fill-opacity":.5},active:{stroke:"#3E7DA7","stroke-dasharray":"",fill:"#0E5D91","fill-opacity":.5},error:{stroke:"#C74155","stroke-dasharray":"","fill-opacity":.5,fill:"#661728"},success:{stroke:"#C74155","stroke-dasharray":"",fill:"#0E914B","fill-opacity":.5},layer:{fill:"#ffffff",opacity:0,cursor:"pointer"},creator:{"fill-opacity":.5,stroke:"#3E7DA7","stroke-dasharray":"",fill:"#0E5D91",cursor:"pointer"},"imageset-rect-stroke":{fill:"#ffffff",stroke:"#666666","stroke-width":1,"stroke-linejoin":"round",cursor:"pointer"},"imageset-rect-no-stroke":{fill:"#ffffff",stroke:"#ffffff","stroke-width":2,"stroke-linejoin":"round",cursor:"pointer"},"imageset-img":{cursor:"pointer"},"order-text":{fill:"#ffffff",stroke:"#000000","stroke-width":.7,"font-family":"sans-serif","font-weight":"bold","font-size":22,cursor:"pointer"},"score-text-default":{stroke:"#444444","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":20,cursor:"pointer"},"score-text":{stroke:"#000000","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":20,cursor:"pointer"},"small-text":{stroke:"#000000","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":16,cursor:"pointer"},"layer-pos-text":{stroke:"#333","stroke-width":.5,"font-family":"sans-serif","font-weight":"normal","font-size":14},target:{path:"m 18,8.4143672 -1.882582,0 C 15.801891,4.9747852 13.071059,2.2344961 9.63508,1.9026738 L 9.63508,0 8.2305176,0 l 0,1.9026387 C 4.7947148,2.2343027 2.0637246,4.9746621 1.7481973,8.4143672 l -1.7481973,0 0,1.4045625 1.754877,0 c 0.3460429,3.4066753 3.0632871,6.1119843 6.4756406,6.4413813 l 0,1.739689 1.4045624,0 0,-1.739725 c 3.412547,-0.329537 6.129633,-3.034793 6.475641,-6.4413453 l 1.889279,0 z m -8.36492,6.5188648 0,-4.064673 -1.4045624,0 0,4.063882 C 5.5511016,14.612555 3.4232695,12.494619 3.0864551,9.8189297 l 4.0449512,0 0,-1.4045625 -4.0546368,0 C 3.3788672,5.6984941 5.5228887,3.5393379 8.2305176,3.2161113 l 0,3.9153125 1.4045624,0 0,-3.9160859 c 2.711162,0.3203965 4.858576,2.4808887 5.160955,5.1990293 l -3.927441,0 0,1.4045625 3.917773,0 C 14.449289,12.496957 12.318363,14.616158 9.63508,14.933232 z",fill:"#0E914B",width:1,"stroke-width":0,cursor:"pointer"},"target-hover":{fill:"#3E7DA7","fill-opacity":1},"target-success":{fill:"#0E914B","fill-opacity":1},assoc:{"stroke-width":2,"stroke-linecap":"round",cursor:"pointer"},"assoc-layer":{"stroke-width":12,cursor:"pointer","stroke-opacity":0},"assoc-bullet":{fill:"#000000"},close:{path:"m 8.9997236,18.000001 c -4.9703918,0 -8.99972284217367,-4.02901 -8.99972284217367,-9 C 7.5782633e-7,4.029011 4.0293108,9.8531742e-7 8.9997236,9.8531742e-7 13.970691,9.8531742e-7 18.000001,4.029011 18.000001,9.000001 c 0,4.97099 -4.02931,9 -9.0002774,9 z m 0.0045,-16.37151 c -4.06191,0 -7.35492,3.29635 -7.35492,7.36251 0,4.06562 3.292989,7.36255 7.35492,7.36255 4.0630384,0 7.3554334,-3.29693 7.3554334,-7.36255 0,-4.06614 -3.292969,-7.36251 -7.3554334,-7.36251 v 0 z m 3.1314894,9.31167 -1.953823,-1.94014 1.953843,-1.94018 c 0.08964,-0.089 0.134622,-0.19099 0.135073,-0.30584 4.31e-4,-0.11488 -0.04383,-0.21712 -0.132838,-0.30681 l -0.54267,-0.54685 c -0.08898,-0.0897 -0.190903,-0.13473 -0.305719,-0.13514 -0.114837,-4.4e-4 -0.217064,0.0439 -0.306703,0.1329 l -1.9623724,1.94865 -1.962395,-1.94865 c -0.08964,-0.089 -0.191845,-0.13336 -0.306702,-0.1329 -0.114837,4.3e-4 -0.216736,0.0455 -0.305719,0.13514 l -0.54265,0.54685 c -0.08902,0.0897 -0.133269,0.19193 -0.132838,0.30681 4.3e-4,0.11485 0.04543,0.21681 0.135073,0.30584 l 1.953823,1.94018 -1.953782,1.94014 c -0.0896,0.089 -0.134684,0.19094 -0.135114,0.3058 -4.31e-4,0.11486 0.04386,0.21716 0.132838,0.30681 l 0.542671,0.54687 c 0.08896,0.0897 0.190923,0.13467 0.305718,0.13516 0.114857,3.9e-4 0.217105,-0.0439 0.306724,-0.13288 l 1.962332,-1.94863 1.9623324,1.94863 c 0.08962,0.089 0.191886,0.13323 0.306744,0.13288 0.114836,-4.5e-4 0.216736,-0.0455 0.305698,-0.13516 l 0.542691,-0.54687 c 0.089,-0.0897 0.133227,-0.19193 0.132838,-0.30681 -3.9e-4,-0.1149 -0.0455,-0.21683 -0.135073,-0.3058 z",fill:"#0E5D91",width:1,opacity:0,"stroke-width":0,cursor:"pointer"},"close-bg":{fill:"#ffffff",stroke:"none",cursor:"pointer",opacity:0},"touch-circle":{fill:"none",stroke:"#3E7DA7","stroke-width":2}}
}),define("taoQtiItem/qtiCommonRenderer/helpers/Graphic",["jquery","lodash","raphael","scale.raphael","json!taoQtiItem/qtiCommonRenderer/renderers/graphic-style.json"],function($,_,raphael,scaleRaphael,gstyle){var shapeMap={"default":"rect",poly:"path"},coordsValidator={rect:4,ellipse:4,circle:3,poly:6,"default":0},qti2raphCoordsMapper={rect:function(coords){return[coords[0],coords[1],coords[2]-coords[0],coords[3]-coords[1]]},"default":function(paper){return[0,0,paper.width,paper.height]},poly:function(coords){var a,size=coords.length;for(coords[0]!==coords[size-2]&&coords[1]!==coords[size-1]&&(coords.push(coords[0]),coords.push(coords[1])),coords[0]="M"+coords[0],a=1;size>a;a++)a%2===0&&(coords[a]="L"+coords[a]);
return[coords.join(" ")]}},raph2qtiCoordsMapper={rect:function(attr){return[attr.x,attr.y,attr.x+attr.width,attr.y+attr.height]},circle:function(attr){return[attr.cx,attr.cy,attr.r]},ellipse:function(attr){return[attr.cx,attr.cy,attr.rx,attr.ry]},"default":function(attr){return this.rect(attr)},path:function(attr){var i,poly=[];if(_.isArray(attr.path))for(i=1;i<attr.path.length;i++)3===attr.path[i].length&&(poly.push(attr.path[i][1]),poly.push(attr.path[i][2]));return poly}},GraphicHelper={_style:gstyle,setStyle:function(element,name){element&&gstyle[name]&&element.attr(gstyle[name])},responsivePaper:function(id,serial,options){function resizePaper(e,givenWidth){e&&e.stopPropagation();
var factor=1,diff=$editor.outerWidth()-$editor.width()+($container.outerWidth()-$container.width())+1,maxWidth=$body.width(),containerWidth=$container.innerWidth();(containerWidth>0||givenWidth>0)&&(!givenWidth&&$container.children(".image-sidebar").length&&(diff+=$container.children(".image-sidebar").outerWidth(!0)),containerWidth>givenWidth&&maxWidth>givenWidth?containerWidth=givenWidth-diff:containerWidth>maxWidth?containerWidth=maxWidth-diff:containerWidth-=diff,$container.hasClass("responsive")?(factor=containerWidth/width,paper.changeSize(containerWidth,height*factor,!1,!1),paper.scaleAll(factor)):paper.changeSize(containerWidth,height,!1,!1),"function"==typeof options.resize&&options.resize(containerWidth,factor),$container.trigger("resized.qti-widget"))
}var paper,image,$container=options.container||$("#"+id).parent(),$editor=$(".image-editor",$container),$body=$container.closest(".qti-itemBody"),factory="SVG"===raphael.type?scaleRaphael:raphael,width=options.width||$container.innerWidth(),height=options.height||$container.innerHeight(),resizer=_.throttle(resizePaper,10);return paper=factory.call(null,id,width,height),image=paper.image(options.img,0,0,width,height),options.imgId&&(image.id=options.imgId),$(image.node).attr("externalResourcesRequired","true").on("load",function(){resizePaper()}),"SVG"===raphael.type?(resizePaper(),$(window).on("resize.qti-widget."+serial,resizer),$(document).on("customcssloaded.styleeditor",function(){_.delay(resizer,200)
}),$container.on("resize.qti-widget."+serial,function(e,givenWidth){resizer(e,givenWidth)})):(paper.canvas.setAttribute("viewBox","0 0 "+width+" "+height),$container.find(".main-image-box").width(width),"function"==typeof options.resize&&options.resize(width,1)),paper},createElement:function(paper,type,coords,options){var element,self=this,shaper=shapeMap[type]?paper[shapeMap[type]]:paper[type],shapeCoords=options.qtiCoords!==!1?self.raphaelCoords(paper,type,coords):coords;if("function"!=typeof shaper)throw new Error("Unable to find method "+type+" on paper");return element=shaper.apply(paper,shapeCoords),element&&(options.id&&(element.id=options.id),options.title&&element.attr("title",options.title),element.attr(gstyle[options.style||"basic"]).toFront(),options.hover!==!1&&element.hover(function(){element.flashing||self.updateElementState(this,"hover")
},function(){element.flashing||self.updateElementState(this,this.active?"active":this.selectable?"selectable":"basic")}),options.touchEffect!==!1&&element.touchstart(function(){self.createTouchCircle(paper,element.getBBox())})),element},createTarget:function(paper,options){var self=this;options=options||{};var tBBox,point=options.point||{x:0,y:0},baseSize=18,factor=paper.w&&paper.width?paper.width/paper.w:1,size=1!==factor?Math.floor(18/factor)+1:baseSize,half=size/2,x=point.x>=half?point.x-half:0,y=point.y>=half?point.y-half:0,hover="undefined"==typeof options.hover?!0:!!options.hover,target=paper.path(gstyle.target.path).transform("T"+x+","+y+"s"+size/baseSize).attr(gstyle.target).attr("title",_("Click again to remove"));
if(options.id)target.id=options.id;else{var count=0;paper.forEach(function(element){element.data("target")&&count++}),target.id="target-"+count}tBBox=target.getBBox();var layer=paper.rect(tBBox.x,tBBox.y,tBBox.width,tBBox.height).attr(gstyle.layer).click(function(){var id=target.id,point=this.data("point");_.isFunction(options.select)&&options.select(target,point,this),_.isFunction(options.remove)&&(this.remove(),target.remove(),options.remove(id,point))});return hover&&layer.hover(function(){target.flashing||self.setStyle(target,"target-hover")},function(){target.flashing||self.setStyle(target,"target-success")}),layer.id="layer-"+target.id,layer.data("point",point),target.data("target",point),_.isFunction(options.create)&&options.create(target),target
},raphaelCoords:function(paper,type,coords){var shapeCoords;if(_.isString(coords)&&(coords=_.map(coords.split(","),function(coord){return parseInt(coord,10)})),!_.isArray(coords)||coords.length<coordsValidator[type])throw new Error("Invalid coords "+JSON.stringify(coords)+"  for type "+type);switch(type){case"rect":shapeCoords=qti2raphCoordsMapper.rect(coords);break;case"default":shapeCoords=qti2raphCoordsMapper["default"].call(null,paper);break;case"poly":shapeCoords=qti2raphCoordsMapper.poly(coords);break;default:shapeCoords=coords}return shapeCoords},qtiCoords:function(element){var mapper=raph2qtiCoordsMapper[element.type],result="";return _.isFunction(mapper)&&(result=_.map(mapper.call(raph2qtiCoordsMapper,element.attr()),function(coord){return _.parseInt(coord)
}).join(",")),result},createTouchCircle:function(paper,bbox){var radius=bbox.width>bbox.height?bbox.width:bbox.height,tCircle=paper.circle(bbox.x+bbox.width/2,bbox.y+bbox.height/2,radius);tCircle.attr(gstyle["touch-circle"]),_.defer(function(){tCircle.animate({r:radius+5,opacity:.7},300,function(){tCircle.remove()})})},createText:function(paper,options){var fontSize,scaledFontSize,top=options.top||0,left=options.left||0,content=options.content||"",style=options.style||"small-text",title=options.title||"",factor=1;paper.width&&paper.w&&(factor=paper.width/paper.w);var text=paper.text(left,top,content).toFront();return options.id&&(text.id=options.id),options.hide&&text.hide(),text.attr(gstyle[style]),"undefined"!=typeof factor&&1!==factor&&(fontSize=parseInt(text.attr("font-size"),10),scaledFontSize=Math.floor(fontSize/factor)+1,text.attr("font-size",scaledFontSize)),title&&this.updateTitle(text,title),text
},createShapeText:function(paper,shape,options){var self=this,bbox=shape.getBBox(),text=this.createText(paper,_.merge({left:bbox.x+bbox.width/2,top:bbox.y+bbox.height/2},options));return options.shapeClick&&text.click(function(){self.trigger(shape,"click")}),text},createBorderedImage:function(paper,options){var padding=options.padding>=0?options.padding:6,halfPad=padding/2,rx=options.left,ry=options.top,rw=options.width+padding,rh=options.height+padding,ix=options.left+halfPad,iy=options.top+halfPad,iw=options.width,ih=options.height,set=paper.set(),rect=paper.rect(rx,ry,rw,rh).attr(options.border?gstyle["imageset-rect-stroke"]:gstyle["imageset-rect-no-stroke"]),image=paper.image(options.url,ix,iy,iw,ih).attr(gstyle["imageset-img"]);
return options.shadow&&set.push(rect.glow({width:2,offsetx:1,offsety:1})),set.push(rect,image),set.move=function(x,y,duration){var animation=raphael.animation({x:x,y:y},duration||400),elt=rect.animate(animation);return image.animateWith(elt,animation,{x:x+halfPad,y:y+halfPad},duration||400),set},set},updateElementState:function(element,state,title){element&&element.animate&&(element.animate(gstyle[state],200,"linear",function(){element.attr(gstyle[state])}),title&&this.updateTitle(element,title))},updateTitle:function(element,title){element&&element.node&&(_.forEach(element.node.children,function(child){"title"===child.nodeName.toLowerCase()&&element.node.removeChild(child)
}),element.attr("title",title))},highlightError:function(element,restoredState){var self=this;element&&(element.flashing=!0,self.updateElementState(element,"error"),_.delay(function(){self.updateElementState(element,restoredState||"basic"),element.flashing=!1},800))},trigger:function(element,event){var evt=_.where(element.events,{name:event});evt.length&&evt[0]&&"function"==typeof evt[0].f&&evt[0].f.apply(element,Array.prototype.slice.call(arguments,2))},getPoint:function(event,paper,$container,isResponsive){var rwidth,rheight,wfactor,point=this.clickPoint($container,event);return paper.w&&paper.w!==paper.width&&(isResponsive?(wfactor=paper.w/paper.width,point.x=Math.round(point.x*wfactor),point.y=Math.round(point.y*wfactor)):paper.width>paper.w?(rwidth=(paper.width-paper.w)/2,point.x=Math.round(point.x-rwidth)):(wfactor=paper.w/paper.width,point.x=Math.round(point.x*wfactor),rheight=(paper.height-paper.height*(2-wfactor))/2,point.y=Math.round(point.y*wfactor-rheight))),point
},position:function($container,paper){var pw=parseInt(paper.w||paper.width,10),cw=parseInt($container.width(),10),ph=parseInt(paper.w||paper.width,10),ch=parseInt($container.height(),10);return{left:(cw-pw)/2,top:(ch-ph)/2}},clickPoint:function($container,event){var x,y,offset=$container.offset();return event.pageX||event.pageY?(x=event.pageX-offset.left,y=event.pageY-offset.top):(event.clientX||event.clientY)&&(x=event.clientX+document.body.scrollLeft+document.documentElement.scrollLeft-offset.left,y=event.clientY+document.body.scrollTop+document.documentElement.scrollTop-offset.top),{x:x,y:y}}};return GraphicHelper}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicAssociateInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicAssociateInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function($,_,__,raphael,scaleRaphael,tpl,graphic,pciResponse,Helper){var render=function(interaction){{var $container=Helper.getContainer(interaction),background=interaction.object.attributes,baseUrl=this.getOption("baseUrl")||"";
$(".main-image-box",$container)}interaction._vsets=[],interaction.paper=graphic.responsivePaper("graphic-paper-"+interaction.serial,interaction.serial,{width:background.width,height:background.height,img:baseUrl+background.data,imgId:"bg-image-"+interaction.serial,container:$container}),_.forEach(interaction.getChoices(),_.partial(_renderChoice,interaction)),_paperUnSelect(interaction),Helper.minMaxChoiceInstructions(interaction,{min:interaction.attr("minAssociations"),max:interaction.attr("maxAssociations"),getResponse:_getRawResponse,onError:function(data){data&&data.target&&graphic.highlightError(data.target)}})},_renderChoice=function(interaction,choice){{var shape=choice.attr("shape"),coords=choice.attr("coords"),maxAssociations=interaction.attr("maxAssociations");
graphic.createElement(interaction.paper,shape,coords,{id:choice.serial,title:__("Select this area to start an association")}).data("max",choice.attr("matchMax")).data("matching",0).removeData("assocs").click(function(){var active,assocs,self=this;return maxAssociations>0&&_getRawResponse(interaction).length>=maxAssociations?(_shapesUnSelectable(interaction),void Helper.validateInstructions(interaction,{choice:choice,target:this})):(this.selectable?(active=_getActiveElement(interaction),active&&(active.data("matching",active.data("matching")+1),this.data("matching",this.data("matching")+1),assocs=active.data("assocs")||[],assocs.push(choice.id()),active.data("assocs",assocs),_createPath(interaction,active,this,function(){active.data("matching",active.data("matching")-1),self.data("matching",self.data("matching")-1),active.data("assocs",_.remove(active.data("assocs")||[],choice.id())),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction,{choice:choice,target:self})
})),_shapesUnSelectable(interaction)):this.active?(graphic.updateElementState(this,"basic",__("Select another area to complete the association")),this.active=!1,_shapesUnSelectable(interaction)):_isMatchable(this)&&(graphic.updateElementState(this,"active",__("Select this area to start an association")),this.active=!0,_shapesSelectable(interaction,this)),Helper.triggerResponseChangeEvent(interaction),void Helper.validateInstructions(interaction,{choice:choice,target:this}))})}},_paperUnSelect=function(interaction){var $container=Helper.getContainer(interaction),image=interaction.paper.getById("bg-image-"+interaction.serial);image&&image.click(function(){_shapesUnSelectable(interaction),$container.trigger("unselect.graphicassociate")
})},_getActiveElement=function(interaction){var active;return _.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);return element&&element.active===!0?(active=element,!1):void 0}),active},_createPath=function(interaction,srcElement,destElement,onRemove){function showCloser(){closerBg.toFront().animate({opacity:.8},300).click(removeSet),closer.toFront().animate({opacity:1},300).click(removeSet)}function hideCloser(){closerBg&&closerBg.type&&(closerBg.animate({opacity:0},300,function(){closerBg.toBack()}).unclick(),closer.animate({opacity:0},300,function(){closer.toBack()}).unclick())}function removeSet(){_.invoke(vset,"remove"),interaction._vsets=_.without(interaction._vsets,vset),"function"==typeof onRemove&&onRemove()
}var $container=Helper.getContainer(interaction),vset=[],src=srcElement.getBBox(),sx=src.x+src.width/2,sy=src.y+src.height/2,dest=destElement.getBBox(),dx=dest.x+dest.width/2,dy=dest.y+dest.height/2,srcBullet=interaction.paper.circle(sx,sy,3).attr(graphic._style["assoc-bullet"]),destBullet=interaction.paper.circle(dx,dy,3).attr(graphic._style["assoc-bullet"]),path=interaction.paper.path("M"+sx+","+sy+"L"+sx+","+sy).attr(graphic._style.assoc).animate({path:"M"+sx+","+sy+"L"+dx+","+dy},300),layer=interaction.paper.path("M"+sx+","+sy+"L"+dx+","+dy).attr(graphic._style["assoc-layer"]),midPath=layer.getPointAtLength(layer.getTotalLength()/2),closerBg=interaction.paper.circle(midPath.x,midPath.y,9).attr(graphic._style["close-bg"]).toBack(),closer=interaction.paper.path(graphic._style.close.path).attr(graphic._style.close).transform("T"+(midPath.x-9)+","+(midPath.y-9)).attr("title",_("Click again to remove")).toBack();
srcElement.toFront(),destElement.toFront(),vset=[srcBullet,path,destBullet,layer,closerBg,closer],interaction._vsets.push(vset),_.invoke(vset,"data","assoc-path",!0),layer.click(function(){0===closer.attrs.opacity?showCloser():hideCloser()}),$container.on("unselect.graphicassociate",function(){hideCloser()})},_shapesSelectable=function(interaction,active){var assocs=active.data("assocs")||[];_.forEach(interaction.getChoices(),function(choice){var element;_.contains(assocs,choice.id())||(element=interaction.paper.getById(choice.serial),!element.active&&element.id!==active.id&&_isMatchable(element,active)&&(element.selectable=!0,graphic.updateElementState(element,"selectable")))
})},_shapesUnSelectable=function(interaction){_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);element&&(element.selectable=!1,element.active=!1,graphic.updateElementState(element,"basic"))})},_isMatchable=function(element){var matching,matchMax,matchable=!1;return element&&(matchMax=element.data("max")||0,matching=element.data("matching")||0,matchable=0===matchMax||matchMax>matching),matchable},_getRawResponse=function(interaction){var responses=[];return _.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial),assocs=element.data("assocs");element&&assocs&&(responses=responses.concat(_.map(assocs,function(id){return[choice.id(),id]
})))}),responses},setResponse=function(interaction,response){var responseValues;if(response&&interaction.paper){try{responseValues=pciResponse.unserialize(response,interaction)}catch(e){}if(_.isArray(responseValues)){var map=_.transform(interaction.getChoices(),function(res,choice){res[choice.id()]=interaction.paper.getById(choice.serial)});_.forEach(responseValues,function(responseValue){var el1,el2;_.isArray(responseValue)&&2===responseValue.length&&(el1=map[responseValue[0]],el2=map[responseValue[1]],el1&&el2&&(graphic.trigger(el1,"click"),graphic.trigger(el2,"click")))})}}},resetResponse=function(interaction){var toRemove=[];_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);
element&&element.data({max:choice.attr("matchMax"),matching:0,assocs:[]})}),interaction.paper.forEach(function(elt){elt.data("assoc-path")&&toRemove.push(elt)}),_.invoke(toRemove,"remove")},getResponse=function(interaction){var response=(_getRawResponse(interaction),pciResponse.serialize(_getRawResponse(interaction),interaction));return response},destroy=function(interaction){var $container;interaction.paper&&($container=Helper.getContainer(interaction),$(window).off("resize.qti-widget."+interaction.serial),$container.off("resize.qti-widget."+interaction.serial),interaction.paper.clear(),Helper.removeInstructions(interaction),$container.off(".graphicassociate"),$(".main-image-box",$container).empty().removeAttr("style"),$(".image-editor",$container).removeAttr("style"),$("ul",$container).empty())
};return{qtiClass:"graphicAssociateInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""
}function program3(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicGapMatchInteraction '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+' clearfix" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'\' class="main-image-box"></div>\n        <div class="clearfix"></div>\n        <ul class="none block-listing solid horizontal source">\n            ',options={hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data},(helper=helpers.gapImgs)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.gapImgs,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.gapImgs||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        </ul>\n    </div>\n</div>\n"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicGapMatchInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicGapMatchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function($,_,__,tpl,graphic,pciResponse,Helper){var render=function(interaction){var $container=Helper.getContainer(interaction),$gapList=$("ul.source",$container),background=($(".main-image-box",$container),interaction.object.attributes),baseUrl=this.getOption("baseUrl")||"";interaction.gapFillers=[],interaction.paper=graphic.responsivePaper("graphic-paper-"+interaction.serial,interaction.serial,{width:background.width,height:background.height,img:baseUrl+background.data,imgId:"bg-image-"+interaction.serial,container:$container,resize:function(newSize,factor){$gapList.css("max-width",newSize+"px"),1!==factor&&$gapList.find("img").each(function(){var $img=$(this);
$img.width($img.attr("width")*factor),$img.height($img.attr("height")*factor)})}}),_.forEach(interaction.getChoices(),_.partial(_renderChoice,interaction)),_renderGapList(interaction,$gapList),_paperUnSelect(interaction)},_renderChoice=function(interaction,choice){graphic.createElement(interaction.paper,choice.attr("shape"),choice.attr("coords"),{id:choice.serial,title:__("Select an image first"),hover:!1}).data("max",choice.attr("matchMax")).data("matching",[]).click(function(){_isMatchable(this)&&this.selectable===!0&&_selectShape(interaction,this)})},_renderGapList=function(interaction,$gapList){$gapList.children("li").click(function(e){e.preventDefault();
var $elt=$(this);$elt.hasClass("disabled")||($elt.hasClass("active")?($elt.removeClass("active"),_shapesUnSelectable(interaction)):($gapList.children("li").removeClass("active"),$elt.addClass("active"),_shapesSelectable(interaction)))})},_paperUnSelect=function(interaction){var $container=Helper.getContainer(interaction),$gapImages=$("ul > li",$container),image=interaction.paper.getById("bg-image-"+interaction.serial);image&&image.click(function(){_shapesUnSelectable(interaction),$gapImages.removeClass("active")})},_selectShape=function(interaction,element,trackResponse){var $img,$clone,gapFiller,id,bbox,shapeOffset,activeOffset,matching,currentCount;"undefined"==typeof trackResponse&&(trackResponse=!0);
var $container=Helper.getContainer(interaction),$gapList=$("ul",$container),$active=$gapList.find(".active:first"),$imageBox=$(".main-image-box",$container),boxOffset=$imageBox.offset();$active.length&&(id=$active.data("identifier"),matching=element.data("matching")||[],matching.push(id),element.data("matching",matching),currentCount=matching.length,$img=$active.find("img"),_shapesUnSelectable(interaction),$gapList.children().removeClass("active"),$clone=$img.clone(),shapeOffset=$(element.node).offset(),activeOffset=$active.offset(),$clone.css({position:"absolute",display:"block","z-index":1e4,opacity:.8,top:activeOffset.top-boxOffset.top,left:activeOffset.left-boxOffset.left}),$clone.appendTo($imageBox),$clone.animate({top:shapeOffset.top-boxOffset.top,left:shapeOffset.left-boxOffset.left},400,function(){$clone.remove(),bbox=element.getBBox(),gapFiller=graphic.createBorderedImage(interaction.paper,{url:$img.attr("src"),left:bbox.x+3*(currentCount-1),top:bbox.y+3*(currentCount-1),width:parseInt($img.attr("width"),10),height:parseInt($img.attr("height"),10),padding:0,border:!1,shadow:!0}).data("identifier",id).toFront().unclick().click(function(e){e.preventDefault(),e.stopPropagation(),$gapList.find(".active").length>0?graphic.trigger(element,"click"):(element.data("matching",_.without(element.data("matching")||[],this.data("identifier"))),interaction.gapFillers=_.without(interaction.gapFillers,gapFiller),gapFiller.remove(),Helper.triggerResponseChangeEvent(interaction))
}),interaction.gapFillers.push(gapFiller),Helper.triggerResponseChangeEvent(interaction)}))},_shapesSelectable=function(interaction){var tooltip=__("Select the area to add an image");_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);_isMatchable(element)&&(element.selectable=!0,graphic.updateElementState(element,"selectable",tooltip))}),_.forEach(interaction.gapFillers,function(gapFiller){gapFiller.forEach(function(element){graphic.updateTitle(element,tooltip)})})},_shapesUnSelectable=function(interaction){_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);
element&&(element.selectable=!1,graphic.updateElementState(element,"basic",__("Select an image first")))}),_.forEach(interaction.gapFillers,function(gapFiller){gapFiller.forEach(function(element){graphic.updateTitle(element,__("Remove"))})})},_isMatchable=function(element){var matching,matchMax,matchable=!1;return element&&(matchMax=element.data("max")||0,matching=element.data("matching")||[],matchable=0===matchMax||matchMax>matching.length),matchable},_getRawResponse=function(interaction){var pairs=[];return _.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);element&&_.isArray(element.data("matching"))&&_.forEach(element.data("matching"),function(match){pairs.push([choice.id(),match])
})}),pairs},setResponse=function(interaction,response){var responseValues,$container=Helper.getContainer(interaction);if(response&&interaction.paper){try{responseValues=pciResponse.unserialize(response,interaction)}catch(e){}_.isArray(responseValues)&&_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);element&&_.forEach(responseValues,function(pair){var index=_.indexOf(pair,choice.id());index>-1&&2===pair.length&&($("[data-identifier="+pair[0===index?1:0]+"]",$container).addClass("active"),_selectShape(interaction,element,!1))})})}},resetResponse=function(interaction){Helper.getContainer(interaction);_shapesUnSelectable(interaction),_.forEach(interaction.gapFillers,function(gapFiller){graphic.trigger(gapFiller.items[0],"click")
})},getResponse=function(interaction){var response=(_getRawResponse(interaction),pciResponse.serialize(_getRawResponse(interaction),interaction));return response},destroy=function(interaction){var $container;interaction.paper&&($container=Helper.getContainer(interaction),$(window).off("resize.qti-widget."+interaction.serial),$container.off("resize.qti-widget."+interaction.serial),interaction.paper.clear(),Helper.removeInstructions(interaction),$(".main-image-box",$container).empty().removeAttr("style"),$(".image-editor",$container).removeAttr("style"),$("ul",$container).empty())};return{qtiClass:"graphicGapMatchInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-graphicOrderInteraction clearfix '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'\' class="main-image-box"></div>\n        <div class="clearfix"></div>\n        <ul class="none block-listing solid horizontal ordinals"></ul>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/GraphicOrderInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/graphicOrderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function($,_,__,raphael,scaleRaphael,tpl,graphic,pciResponse,Helper){var render=function(interaction){var $container=Helper.getContainer(interaction),$orderList=$("ul",$container),background=interaction.object.attributes,baseUrl=this.getOption("baseUrl")||"";interaction.paper=graphic.responsivePaper("graphic-paper-"+interaction.serial,interaction.serial,{width:background.width,height:background.height,img:baseUrl+background.data,imgId:"bg-image-"+interaction.serial,container:$container}),_renderOrderList(interaction,$orderList),_.forEach(interaction.getChoices(),_.partial(_renderChoice,interaction,$orderList)),Helper.minMaxChoiceInstructions(interaction,{min:interaction.attr("minChoices"),max:interaction.attr("maxChoices"),getResponse:_getRawResponse,onError:function(data){graphic.highlightError(data.target)
}})},_renderChoice=function(interaction,$orderList,choice){graphic.createElement(interaction.paper,choice.attr("shape"),choice.attr("coords"),{id:choice.serial,title:__("Select this area")}).click(function(){this.active?_unselectShape(interaction.paper,this,$orderList):_selectShape(interaction.paper,this,$orderList),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction,{choice:choice})})},_renderOrderList=function(interaction,$orderList){var $orderers,size=_.size(interaction.getChoices()),min=interaction.attr("minChoices"),max=interaction.attr("maxChoices");max>0&&size>max?size=max:min>0&&size>min&&(size=min),_.times(size,function(index){var position=index+1,$orderer=$('<li class="selectable" data-number="'+position+'">'+position+"</li>");
0===index&&$orderer.addClass("active"),$orderList.append($orderer)}),_createTexts(interaction.paper,size,$orderList),$orderers=$orderList.children("li"),$orderers.click(function(e){e.preventDefault();var $orderer=$(this);$orderer.hasClass("active")||$orderer.hasClass("disabled")||($orderers.removeClass("active"),$orderer.addClass("active"))})},_selectShape=function(paper,element,$orderList){var $active=$orderList.find(".active:first");$active.length&&$active.data("number")>0&&(element.data("number",$active.data("number")),element.active=!0,_showText(paper,element),graphic.updateElementState(element,"active"),$active.toggleClass("active disabled").siblings(":not(.disabled)").first().toggleClass("active"))
},_unselectShape=function(paper,element,$orderList){var number=element.data("number");element.active=!1,_hideText(paper,element),element.removeData("number"),graphic.updateElementState(element,"basic"),$orderList.children().removeClass("active").filter("[data-number="+number+"]").removeClass("disabled").addClass("active")},_createTexts=function(paper,size){var texts=[];return _.times(size,function(index){var number=index+1,text=graphic.createText(paper,{id:"text-"+number,content:number,title:__("Remove"),style:"order-text",hide:!0});text.click(function(){paper.forEach(function(element){if(element.data("number")===number&&element.events){var evt=_.where(element.events,{name:"click"});
evt.length&&evt[0]&&"function"==typeof evt[0].f&&evt[0].f.call(element)}})}),texts.push(text)}),texts},_showText=function(paper,element){var transf,bbox=element.getBBox(),text=paper.getById("text-"+element.data("number"));text&&(transf="T"+(bbox.x+bbox.width/2)+","+(bbox.y+bbox.height/2),text.transform(transf).show().toFront())},_hideText=function(paper,element){var text=paper.getById("text-"+element.data("number"));text&&text.hide()},_getRawResponse=function(interaction){var response=[];return _.forEach(interaction.getChoices(),function(choice){var elt=interaction.paper.getById(choice.serial);elt&&elt.data("number")&&response.push({index:elt.data("number"),id:choice.id()})
}),_(response).sortBy("index").map("id").value()},setResponse=function(interaction,response){var responseValues,$container=Helper.getContainer(interaction),$orderList=$("ul",$container);if(response&&interaction.paper){try{responseValues=pciResponse.unserialize(response,interaction)}catch(e){}_.isArray(responseValues)&&_.forEach(responseValues,function(responseValue,index){var element,number=index+1,choice=_(interaction.getChoices()).where({attributes:{identifier:responseValue}}).first();choice&&(element=interaction.paper.getById(choice.serial),element&&($orderList.children("[data-number="+number+"]").addClass("active"),_selectShape(interaction.paper,element,$orderList)))
})}},resetResponse=function(interaction){var $container=Helper.getContainer(interaction),$orderList=$("ul",$container);_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);element&&_unselectShape(interaction.paper,element,$orderList)}),$orderList.children("li").removeClass("active disabled").first().addClass("active")},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)},destroy=function(interaction){var $container;interaction.paper&&($container=Helper.getContainer(interaction),$(window).off("resize.qti-widget."+interaction.serial),$container.off("resize.qti-widget."+interaction.serial),interaction.paper.clear(),Helper.removeInstructions(interaction),$(".main-image-box",$container).empty().removeAttr("style"),$(".image-editor",$container).removeAttr("style"),$("ul",$container).empty())
};return{qtiClass:"graphicOrderInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-hotspotInteraction clearfix '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/HotspotInteraction",["jquery","lodash","i18n","raphael","scale.raphael","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hotspotInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function($,_,__,raphael,scaleRaphael,tpl,graphic,pciResponse,Helper){var render=function(interaction){var $container=Helper.getContainer(interaction),background=interaction.object.attributes,baseUrl=this.getOption("baseUrl")||"";interaction.paper=graphic.responsivePaper("graphic-paper-"+interaction.serial,interaction.serial,{width:background.width,height:background.height,img:baseUrl+background.data,container:$container}),_.forEach(interaction.getChoices(),_.partial(_renderChoice,interaction)),Helper.minMaxChoiceInstructions(interaction,{min:interaction.attr("minChoices"),max:interaction.attr("maxChoices"),getResponse:_getRawResponse,onError:function(data){data.target.active&&(data.target.active=!1,graphic.updateElementState(this,"basic",__("Select this area")),graphic.highlightError(data.target),Helper.triggerResponseChangeEvent(interaction),$container.trigger("inactiveChoice.qti-widget",[data.choice,data.target]))
}})},_renderChoice=function(interaction,choice){{var $container=Helper.getContainer(interaction);graphic.createElement(interaction.paper,choice.attr("shape"),choice.attr("coords"),{id:choice.serial,title:__("Select this area")}).click(function(){this.active?(graphic.updateElementState(this,"basic",__("Select this area")),this.active=!1,$container.trigger("inactiveChoice.qti-widget",[choice,this])):(graphic.updateElementState(this,"active",__("Click again to remove")),this.active=!0,$container.trigger("activeChoice.qti-widget",[choice,this])),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction,{choice:choice,target:this})})}},_getRawResponse=function(interaction){return _(interaction.getChoices()).map(function(choice){var rElement=interaction.paper.getById(choice.serial);
return rElement&&rElement.active===!0?choice.id():!1}).filter(_.isString).value()},setResponse=function(interaction,response){var responseValues;if(response&&interaction.paper){try{responseValues=pciResponse.unserialize(response,interaction)}catch(e){}_.isArray(responseValues)&&_.forEach(interaction.getChoices(),function(choice){var rElement;_.contains(responseValues,choice.attributes.identifier)&&(rElement=interaction.paper.getById(choice.serial),rElement&&(rElement.active=!0,graphic.updateElementState(rElement,"active",__("Click again to remove")),Helper.validateInstructions(interaction,{choice:choice,target:rElement})))})}},resetResponse=function(interaction){_.forEach(interaction.getChoices(),function(choice){var element=interaction.paper.getById(choice.serial);
element&&(element.active=!1,graphic.updateElementState(element,"basic"))}),Helper.resetInstructions(interaction)},getResponse=function(interaction){var response=(_getRawResponse(interaction),pciResponse.serialize(_getRawResponse(interaction),interaction));return response},destroy=function(interaction){var $container;interaction.paper&&($container=Helper.getContainer(interaction),$(window).off("resize.qti-widget."+interaction.serial),$container.off("resize.qti-widget."+interaction.serial),interaction.paper.clear(),Helper.removeInstructions(interaction),$(".main-image-box",$container).empty().removeAttr("style"),$(".image-editor",$container).removeAttr("style"))
};return{qtiClass:"hotspotInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div id="'+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1.identifier,typeof stack1===functionType?stack1.apply(depth0):stack1))+'" class="qti-interaction qti-blockInteraction qti-hottextInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="hottextInteraction">\n  ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n  <div class="instruction-container"></div>\n  <div class="qti-flow-container">',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</div>\n</div>"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/HottextInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/hottextInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n"],function(_,$,tpl,Helper,pciResponse){var pseudoLabel=function(interaction){var setChoice=function($choice,interaction){var $inupt=$choice.find("input");if($inupt.prop("checked")||$inupt.hasClass("disabled"))$inupt.prop("checked",!1);else{var maxChoices=parseInt(interaction.attr("maxChoices")),currentChoices=_.values(_getRawResponse(interaction)).length;(maxChoices>currentChoices||0===maxChoices)&&$inupt.prop("checked",!0)
}Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction,{choice:$choice})};Helper.getContainer(interaction).find(".hottext").on("click",function(e){e.preventDefault(),setChoice($(this),interaction)})},render=function(interaction){pseudoLabel(interaction),Helper.minMaxChoiceInstructions(interaction,{min:interaction.attr("minChoices"),max:interaction.attr("maxChoices"),getResponse:_getRawResponse,onError:function(data){var $input,$choice,$icon;data.choice&&data.choice.length&&($choice=data.choice.addClass("error"),$input=$choice.find("input"),$icon=$choice.find(" > label > span").addClass("error cross"),setTimeout(function(){$input.prop("checked",!1),$choice.removeClass("error"),$icon.removeClass("error cross")
},350))}})},resetResponse=function(interaction){Helper.getContainer(interaction).find("input").prop("checked",!1)},setResponse=function(interaction,response){var $container=Helper.getContainer(interaction);try{_.each(pciResponse.unserialize(response,interaction),function(identifier){$container.find("input[value="+identifier+"]").prop("checked",!0)}),Helper.validateInstructions(interaction)}catch(e){throw new Error("wrong response format in argument : "+e)}},_getRawResponse=function(interaction){var values=[];return Helper.getContainer(interaction).find("input:checked").each(function(){values.push($(this).val())}),values},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)
},destroy=function(interaction){var $container=Helper.getContainer(interaction);resetResponse(interaction),$container.find(".hottext").off("click")};return{qtiClass:"hottextInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<select class="qti-interaction qti-inlineInteraction qti-inlineChoiceInteraction" \n        data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" \n        data-qti-class="inlineChoiceInteraction" \n        data-has-search="false">\n    <option></option>\n    <option value="empty"></option>\n    ',options={hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</select>"
})}),!function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){function n(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){function b(a){return m[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function p(a,b){for(var c=0,d=b.length;d>c;c+=1)if(r(a,b[c]))return c;return-1}function q(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function r(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1
}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function x(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)
});b.on("scroll",function(a){p(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus();var e=b.offsetWidth>0||b.offsetHeight>0;e&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}
}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&f.push(this)
})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(g=d(this),g&&f.push(g))})),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return 0>e?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;
return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};
i.callback(d)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),void b.callback(e))
}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;
for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function O(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0
}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l="<div class='select2-measure-scrollbar'></div>",m={"â¶":"A",ï¼¡:"A",Ã:"A",Ã:"A",Ã:"A",áº¦:"A",áº¤:"A",áºª:"A",áº¨:"A",Ã:"A",Ä:"A",Ä:"A",áº°:"A",áº®:"A",áº´:"A",áº²:"A",È¦:"A",Ç :"A",Ã:"A",Ç:"A",áº¢:"A",Ã:"A",Çº:"A",Ç:"A",È:"A",È:"A",áº :"A",áº¬:"A",áº¶:"A",á¸:"A",Ä:"A",Èº:"A",â±¯:"A",ê²:"AA",Ã:"AE",Ç¼:"AE",Ç¢:"AE",ê´:"AO",ê¶:"AU",ê¸:"AV",êº:"AV",ê¼:"AY","â·":"B",ï¼¢:"B",á¸:"B",á¸:"B",á¸:"B",É:"B",Æ:"B",Æ:"B","â¸":"C",ï¼£:"C",Ä:"C",Ä:"C",Ä:"C",Ä:"C",Ã:"C",á¸:"C",Æ:"C",È»:"C",ê¾:"C","â¹":"D",ï¼¤:"D",á¸:"D",Ä:"D",á¸:"D",á¸:"D",á¸:"D",á¸:"D",Ä:"D",Æ:"D",Æ:"D",Æ:"D",ê¹:"D",Ç±:"DZ",Ç:"DZ",Ç²:"Dz",Ç:"Dz","âº":"E",ï¼¥:"E",Ã:"E",Ã:"E",Ã:"E",á»:"E",áº¾:"E",á»:"E",á»:"E",áº¼:"E",Ä:"E",á¸:"E",á¸:"E",Ä:"E",Ä:"E",Ã:"E",áºº:"E",Ä:"E",È:"E",È:"E",áº¸:"E",á»:"E",È¨:"E",á¸:"E",Ä:"E",á¸:"E",á¸:"E",Æ:"E",Æ:"E","â»":"F",ï¼¦:"F",á¸:"F",Æ:"F",ê»:"F","â¼":"G",ï¼§:"G",Ç´:"G",Ä:"G",á¸ :"G",Ä:"G",Ä :"G",Ç¦:"G",Ä¢:"G",Ç¤:"G",Æ:"G","ê ":"G",ê½:"G",ê¾:"G","â½":"H",ï¼¨:"H",Ä¤:"H",á¸¢:"H",á¸¦:"H",È:"H",á¸¤:"H",á¸¨:"H",á¸ª:"H",Ä¦:"H",â±§:"H",â±µ:"H","ê":"H","â¾":"I",ï¼©:"I",Ã:"I",Ã:"I",Ã:"I",Ä¨:"I",Äª:"I",Ä¬:"I",Ä°:"I",Ã:"I",á¸®:"I",á»:"I",Ç:"I",È:"I",È:"I",á»:"I",Ä®:"I",á¸¬:"I",Æ:"I","â¿":"J",ï¼ª:"J",Ä´:"J",É:"J","â":"K",ï¼«:"K",á¸°:"K",Ç¨:"K",á¸²:"K",Ä¶:"K",á¸´:"K",Æ:"K",â±©:"K",ê:"K",ê:"K",ê:"K","ê¢":"K","â":"L",ï¼¬:"L",Ä¿:"L",Ä¹:"L",Ä½:"L",á¸¶:"L",á¸¸:"L",Ä»:"L",á¸¼:"L",á¸º:"L",Å:"L",È½:"L",â±¢:"L",â± :"L",ê:"L",ê:"L",ê:"L",Ç:"LJ",Ç:"Lj","â":"M",ï¼­:"M",á¸¾:"M",á¹:"M",á¹:"M",â±®:"M",Æ:"M","â":"N",ï¼®:"N",Ç¸:"N",Å:"N",Ã:"N",á¹:"N",Å:"N",á¹:"N",Å:"N",á¹:"N",á¹:"N",È :"N",Æ:"N","ê":"N","ê¤":"N",Ç:"NJ",Ç:"Nj","â":"O",ï¼¯:"O",Ã:"O",Ã:"O",Ã:"O",á»:"O",á»:"O",á»:"O",á»:"O",Ã:"O",á¹:"O",È¬:"O",á¹:"O",Å:"O",á¹:"O",á¹:"O",Å:"O",È®:"O",È°:"O",Ã:"O",Èª:"O",á»:"O",Å:"O",Ç:"O",È:"O",È:"O",Æ :"O",á»:"O",á»:"O",á» :"O",á»:"O",á»¢:"O",á»:"O",á»:"O",Çª:"O",Ç¬:"O",Ã:"O",Ç¾:"O",Æ:"O",Æ:"O",ê:"O",ê:"O",Æ¢:"OI",ê:"OO",È¢:"OU","â":"P",ï¼°:"P",á¹:"P",á¹:"P",Æ¤:"P",â±£:"P",ê:"P",ê:"P",ê:"P","â":"Q",ï¼±:"Q",ê:"Q",ê:"Q",É:"Q","â":"R",ï¼²:"R",Å:"R",á¹:"R",Å:"R",È:"R",È:"R",á¹:"R",á¹:"R",Å:"R",á¹:"R",É:"R",â±¤:"R",ê:"R","ê¦":"R",ê:"R","â":"S",ï¼³:"S",áº:"S",Å:"S",á¹¤:"S",Å:"S",á¹ :"S",Å :"S",á¹¦:"S",á¹¢:"S",á¹¨:"S",È:"S",Å:"S","â±¾":"S","ê¨":"S",ê:"S","â":"T",ï¼´:"T",á¹ª:"T",Å¤:"T",á¹¬:"T",È:"T",Å¢:"T",á¹°:"T",á¹®:"T",Å¦:"T",Æ¬:"T",Æ®:"T",È¾:"T",ê:"T",ê¨:"TZ","â":"U",ï¼µ:"U",Ã:"U",Ã:"U",Ã:"U",Å¨:"U",á¹¸:"U",Åª:"U",á¹º:"U",Å¬:"U",Ã:"U",Ç:"U",Ç:"U",Ç:"U",Ç:"U",á»¦:"U",Å®:"U",Å°:"U",Ç:"U",È:"U",È:"U",Æ¯:"U",á»ª:"U",á»¨:"U",á»®:"U",á»¬:"U",á»°:"U",á»¤:"U",á¹²:"U",Å²:"U",á¹¶:"U",á¹´:"U",É:"U","â":"V",ï¼¶:"V",á¹¼:"V",á¹¾:"V",Æ²:"V",ê:"V",É:"V",ê :"VY","â":"W",ï¼·:"W",áº:"W",áº:"W",Å´:"W",áº:"W",áº:"W",áº:"W",â±²:"W","â":"X",ï¼¸:"X",áº:"X",áº:"X","â":"Y",ï¼¹:"Y",á»²:"Y",Ã:"Y",Å¶:"Y",á»¸:"Y",È²:"Y",áº:"Y",Å¸:"Y",á»¶:"Y",á»´:"Y",Æ³:"Y",É:"Y",á»¾:"Y","â":"Z",ï¼º:"Z",Å¹:"Z",áº:"Z",Å»:"Z",Å½:"Z",áº:"Z",áº:"Z",Æµ:"Z",È¤:"Z","â±¿":"Z",â±«:"Z",ê¢:"Z","â":"a",ï½:"a",áº:"a",Ã :"a",Ã¡:"a",Ã¢:"a",áº§:"a",áº¥:"a",áº«:"a",áº©:"a",Ã£:"a",Ä:"a",Ä:"a",áº±:"a",áº¯:"a",áºµ:"a",áº³:"a",È§:"a",Ç¡:"a",Ã¤:"a",Ç:"a",áº£:"a",Ã¥:"a",Ç»:"a",Ç:"a",È:"a",È:"a",áº¡:"a",áº­:"a",áº·:"a",á¸:"a",Ä:"a",â±¥:"a",É:"a",ê³:"aa",Ã¦:"ae",Ç½:"ae",Ç£:"ae",êµ:"ao",ê·:"au",ê¹:"av",ê»:"av",ê½:"ay","â":"b",ï½:"b",á¸:"b",á¸:"b",á¸:"b",Æ:"b",Æ:"b",É:"b","â":"c",ï½:"c",Ä:"c",Ä:"c",Ä:"c",Ä:"c",Ã§:"c",á¸:"c",Æ:"c",È¼:"c",ê¿:"c",â:"c","â":"d",ï½:"d",á¸:"d",Ä:"d",á¸:"d",á¸:"d",á¸:"d",á¸:"d",Ä:"d",Æ:"d",É:"d",É:"d",êº:"d",Ç³:"dz",Ç:"dz","â":"e",ï½:"e",Ã¨:"e",Ã©:"e",Ãª:"e",á»:"e",áº¿:"e",á»:"e",á»:"e",áº½:"e",Ä:"e",á¸:"e",á¸:"e",Ä:"e",Ä:"e",Ã«:"e",áº»:"e",Ä:"e",È:"e",È:"e",áº¹:"e",á»:"e",È©:"e",á¸:"e",Ä:"e",á¸:"e",á¸:"e",É:"e",É:"e",Ç:"e","â":"f",ï½:"f",á¸:"f",Æ:"f",ê¼:"f","â":"g",ï½:"g",Çµ:"g",Ä:"g",á¸¡:"g",Ä:"g",Ä¡:"g",Ç§:"g",Ä£:"g",Ç¥:"g",É :"g","ê¡":"g",áµ¹:"g",ê¿:"g","â":"h",ï½:"h",Ä¥:"h",á¸£:"h",á¸§:"h",È:"h",á¸¥:"h",á¸©:"h",á¸«:"h",áº:"h",Ä§:"h",â±¨:"h",â±¶:"h",É¥:"h",Æ:"hv","â":"i",ï½:"i",Ã¬:"i",Ã­:"i",Ã®:"i",Ä©:"i",Ä«:"i",Ä­:"i",Ã¯:"i",á¸¯:"i",á»:"i",Ç:"i",È:"i",È:"i",á»:"i",Ä¯:"i",á¸­:"i",É¨:"i",Ä±:"i","â":"j",ï½:"j",Äµ:"j",Ç°:"j",É:"j","â":"k",ï½:"k",á¸±:"k",Ç©:"k",á¸³:"k",Ä·:"k",á¸µ:"k",Æ:"k",â±ª:"k",ê:"k",ê:"k",ê:"k","ê£":"k","â":"l",ï½:"l",Å:"l",Äº:"l",Ä¾:"l",á¸·:"l",á¸¹:"l",Ä¼:"l",á¸½:"l",á¸»:"l",Å¿:"l",Å:"l",Æ:"l",É«:"l",â±¡:"l",ê:"l",ê:"l",ê:"l",Ç:"lj","â":"m",ï½:"m",á¸¿:"m",á¹:"m",á¹:"m",É±:"m",É¯:"m","â":"n",ï½:"n",Ç¹:"n",Å:"n",Ã±:"n",á¹:"n",Å:"n",á¹:"n",Å:"n",á¹:"n",á¹:"n",Æ:"n",É²:"n",Å:"n","ê":"n","ê¥":"n",Ç:"nj","â":"o",ï½:"o",Ã²:"o",Ã³:"o",Ã´:"o",á»:"o",á»:"o",á»:"o",á»:"o",Ãµ:"o",á¹:"o",È­:"o",á¹:"o",Å:"o",á¹:"o",á¹:"o",Å:"o",È¯:"o",È±:"o",Ã¶:"o",È«:"o",á»:"o",Å:"o",Ç:"o",È:"o",È:"o",Æ¡:"o",á»:"o",á»:"o",á»¡:"o",á»:"o",á»£:"o",á»:"o",á»:"o",Ç«:"o",Ç­:"o",Ã¸:"o",Ç¿:"o",É:"o",ê:"o",ê:"o",Éµ:"o",Æ£:"oi",È£:"ou",ê:"oo","â":"p",ï½:"p",á¹:"p",á¹:"p",Æ¥:"p",áµ½:"p",ê:"p",ê:"p",ê:"p","â ":"q",ï½:"q",É:"q",ê:"q",ê:"q","â¡":"r",ï½:"r",Å:"r",á¹:"r",Å:"r",È:"r",È:"r",á¹:"r",á¹:"r",Å:"r",á¹:"r",É:"r",É½:"r",ê:"r","ê§":"r",ê:"r","â¢":"s",ï½:"s",Ã:"s",Å:"s",á¹¥:"s",Å:"s",á¹¡:"s",Å¡:"s",á¹§:"s",á¹£:"s",á¹©:"s",È:"s",Å:"s",È¿:"s","ê©":"s",ê:"s",áº:"s","â£":"t",ï½:"t",á¹«:"t",áº:"t",Å¥:"t",á¹­:"t",È:"t",Å£:"t",á¹±:"t",á¹¯:"t",Å§:"t",Æ­:"t",Ê:"t",â±¦:"t",ê:"t",ê©:"tz","â¤":"u",ï½:"u",Ã¹:"u",Ãº:"u",Ã»:"u",Å©:"u",á¹¹:"u",Å«:"u",á¹»:"u",Å­:"u",Ã¼:"u",Ç:"u",Ç:"u",Ç:"u",Ç:"u",á»§:"u",Å¯:"u",Å±:"u",Ç:"u",È:"u",È:"u",Æ°:"u",á»«:"u",á»©:"u",á»¯:"u",á»­:"u",á»±:"u",á»¥:"u",á¹³:"u",Å³:"u",á¹·:"u",á¹µ:"u",Ê:"u","â¥":"v",ï½:"v",á¹½:"v",á¹¿:"v",Ê:"v",ê:"v",Ê:"v",ê¡:"vy","â¦":"w",ï½:"w",áº:"w",áº:"w",Åµ:"w",áº:"w",áº:"w",áº:"w",áº:"w",â±³:"w","â§":"x",ï½:"x",áº:"x",áº:"x","â¨":"y",ï½:"y",á»³:"y",Ã½:"y",Å·:"y",á»¹:"y",È³:"y",áº:"y",Ã¿:"y",á»·:"y",áº:"y",á»µ:"y",Æ´:"y",É:"y",á»¿:"y","â©":"z",ï½:"z",Åº:"z",áº:"z",Å¼:"z",Å¾:"z",áº:"z",áº:"z",Æ¶:"z",È¥:"z",É:"z",â±¬:"z",ê£:"z",Î:"Î",Î:"Î",Î:"Î",Î:"Î",Îª:"Î",Î:"Î",Î:"Î¥",Î«:"Î¥",Î:"Î©",Î¬:"Î±",Î­:"Îµ",Î®:"Î·",Î¯:"Î¹",Ï:"Î¹",Î:"Î¹",Ï:"Î¿",Ï:"Ï",Ï:"Ï",Î°:"Ï",Ï:"Ï",Ï:"Ï"};
j=a(document),g=function(){var a=1;return function(){return a++}}(),d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)
})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))
}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");
h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||q(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&d._sync&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results","search")
},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;
(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v;d=c.sortResults(d,e,f);var w=[];for(m=0,n=d.length;n>m;m+=1)o=d[m],q=o.disabled===!0,p=!q&&j(o)!==b,r=o.children&&o.children.length>0,s=a("<li></li>"),s.addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(i.opts.formatResultCssClass(o)),s.attr("role","presentation"),t=a(document.createElement("div")),t.addClass("select2-result-label"),t.attr("id","select2-result-label-"+g()),t.attr("role","option"),v=c.formatResult(o,t,f,i.opts.escapeMarkup),v!==b&&(t.html(v),s.append(t)),r&&(u=a("<ul></ul>"),u.addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),w.push(s[0]);
e.append(w),k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)
}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(h=c.element.data("ajax-url"),h&&h.length>0&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");
if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop("disabled");a===b&&(a=!1),this.enable(!a);var d=c.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass,this.opts.element))
}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent("onpropertychange",e._sync)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()
},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1
},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=l>=m+f,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=j>=n+q,s=b.hasClass("select2-drop-above");s?(u=!0,!p&&o&&(v=!0,u=!1)):(u=!1,!o&&p&&(v=!0,u=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,q=b.outerWidth(!1),r=j>=n+q,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width),q>e?e=q:q=e,f=b.outerHeight(!1),r=j>=n+q):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss,this.opts.element)),b.css(w)
},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),j.on("mousemove.select2Event",function(a){i.x=a.pageX,i.y=a.pageY}),!0):!1},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),f=a("#select2-drop-mask"),0==f.length&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart",function(b){n(f);
var d,c=a("#select2-drop");c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;
this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)
},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),e=a(c[d]),j=(e.offset()||{}).top||0,f=j+e.outerHeight(!0),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=j-b.offset().top,0>h&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;
var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),e=d.data("select2-data"),void(e&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")
},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()
},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?e.text():h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((c===!0||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;
var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,f.element,o)+"</li>");if(d.val().length<f.minimumInputLength)return n(J(f.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void n(J(f.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+K(f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+"</li>":"");
f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching,f.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(g.hasError!==b&&J(f.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+K(f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+"</li>");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))
}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+K(f.formatNoMatches,f.element,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()
},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)
},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];
return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),e=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));
return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))
},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")
},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);
switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;
return this.open(),void A(a)}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)
})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")
})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();
else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled
});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")
}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();
this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")
},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})
})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));
return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);
break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);
var e=this;this.selection.on("click",".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;
var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);
if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()
})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())
})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)
},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")
},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())
},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup),j!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),k=this.opts.formatSelectionCssClass(c,g.find("div")),k!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(b),this.close(),this.focusSearch())
})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;(e=p(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();
return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));p(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+"</li>")
},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,d,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),s(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);
return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))
})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")
}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),e=h?new window.Select2["class"].multi:new window.Select2["class"].single,e.init(d);
else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,e=a(this).data("select2"),e===b)return;if(f=c[0],"container"===f?g=e.container:"dropdown"===f?g=e.dropdown:(l[f]&&(f=l[f]),g=e[f].apply(e,c.slice(1))),p(c[0],j)>=0||p(c[0],k)>=0&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a
},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;
return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more resultsâ¦"
},formatSearching:function(){return"Searchingâ¦"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},"class":{"abstract":d,single:e,multi:f}}}}(jQuery),define("select2",function(){}),define("css!lib/tooltipster/css/tooltipster",[],function(){}),function(e,t,n){function o(t,n){this.bodyOverflowX,this.callbacks={hide:[],show:[]},this.checkInterval=null,this.content,this.$el=e(t),this.$elProxy,this.elProxyPosition,this.enabled=!0,this.options=e.extend({},s,n),this.mouseIsOverProxy=!1,this.namespace="tooltipster-"+Math.round(1e5*Math.random()),this.status="hidden",this.timerHide=null,this.timerShow=null,this.$tooltip,this.options.iconTheme=this.options.iconTheme.replace(".",""),this.options.theme=this.options.theme.replace(".",""),this.init()
}function u(t,n){var r=!0;return e.each(t,function(e){return"undefined"==typeof n[e]||t[e]!==n[e]?(r=!1,!1):void 0}),r}function l(){return!f&&a}function c(){var e=n.body||n.documentElement,t=e.style,r="transition";if("string"==typeof t[r])return!0;v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++)if("string"==typeof t[v[i]+r])return!0;return!1}var r="tooltipster",s={animation:"fade",arrow:!0,arrowColor:"",autoClose:!0,content:null,contentAsHTML:!1,contentCloning:!0,delay:200,fixedWidth:0,maxWidth:0,functionInit:function(){},functionBefore:function(e,t){t()},functionReady:function(){},functionAfter:function(){},icon:"(?)",iconCloning:!0,iconDesktop:!1,iconTouch:!1,iconTheme:"tooltipster-icon",interactive:!1,interactiveTolerance:350,offsetX:0,offsetY:0,onlyOne:!1,position:"top",positionTracker:!1,speed:350,timer:0,theme:"tooltipster-default",touchDevices:!0,trigger:"hover",updateAnimation:!0};
o.prototype={init:function(){var t=this;if(n.querySelector){if(null!==t.options.content)t.setContent(t.options.content);else{var r=t.$el.attr("title");"undefined"==typeof r&&(r=null),t.setContent(r)}var i=t.options.functionInit.call(t.$el,t.$el,t.content);"undefined"!=typeof i&&t.setContent(i),t.$el.removeAttr("title").addClass("tooltipstered"),!a&&t.options.iconDesktop||a&&t.options.iconTouch?("string"==typeof t.options.icon?(t.$elProxy=e('<span class="'+t.options.iconTheme+'"></span>'),t.$elProxy.text(t.options.icon)):t.$elProxy=t.options.iconCloning?t.options.icon.clone(!0):t.options.icon,t.$elProxy.insertAfter(t.$el)):t.$elProxy=t.$el,"hover"==t.options.trigger?(t.$elProxy.on("mouseenter."+t.namespace,function(){(!l()||t.options.touchDevices)&&(t.mouseIsOverProxy=!0,t.showTooltip())
}).on("mouseleave."+t.namespace,function(){(!l()||t.options.touchDevices)&&(t.mouseIsOverProxy=!1)}),a&&t.options.touchDevices&&t.$elProxy.on("touchstart."+t.namespace,function(){t.showTooltipNow()})):"click"==t.options.trigger&&t.$elProxy.on("click."+t.namespace,function(){(!l()||t.options.touchDevices)&&t.showTooltip()})}},showTooltip:function(){var e=this;"shown"!=e.status&&"appearing"!=e.status&&(e.options.delay?e.timerShow=setTimeout(function(){("click"==e.options.trigger||"hover"==e.options.trigger&&e.mouseIsOverProxy)&&e.showTooltipNow()},e.options.delay):e.showTooltipNow())},showTooltipNow:function(n){var i=this;i.options.functionBefore.call(i.$el,i.$el,function(){if(i.enabled&&null!==i.content){n&&i.callbacks.show.push(n),i.callbacks.hide=[],clearTimeout(i.timerShow),i.timerShow=null,clearTimeout(i.timerHide),i.timerHide=null,i.options.onlyOne&&e(".tooltipstered").not(i.$el).each(function(t,n){var i=e(n),s=i[r]("status"),o=i[r]("option","autoClose");
"hidden"!==s&&"disappearing"!==s&&o&&i[r]("hide")});var s=function(){i.status="shown",e.each(i.callbacks.show,function(e,t){t.call(i.$el)}),i.callbacks.show=[]};if("hidden"!==i.status){var o=0;"disappearing"===i.status?(i.status="appearing",c()?(i.$tooltip.clearQueue().removeClass("tooltipster-dying").addClass("tooltipster-"+i.options.animation+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(s)):i.$tooltip.stop().fadeIn(s)):"shown"===i.status&&s()}else{i.status="appearing";var o=i.options.speed;i.bodyOverflowX=e("body").css("overflow-x"),e("body").css("overflow-x","hidden");var u="tooltipster-"+i.options.animation,f="-webkit-transition-duration: "+i.options.speed+"ms; -webkit-animation-duration: "+i.options.speed+"ms; -moz-transition-duration: "+i.options.speed+"ms; -moz-animation-duration: "+i.options.speed+"ms; -o-transition-duration: "+i.options.speed+"ms; -o-animation-duration: "+i.options.speed+"ms; -ms-transition-duration: "+i.options.speed+"ms; -ms-animation-duration: "+i.options.speed+"ms; transition-duration: "+i.options.speed+"ms; animation-duration: "+i.options.speed+"ms;",l=i.options.fixedWidth>0?"width:"+Math.round(i.options.fixedWidth)+"px;":"",h=i.options.maxWidth>0?"max-width:"+Math.round(i.options.maxWidth)+"px;":"",p=i.options.interactive?"pointer-events: auto;":"";
if(i.$tooltip=e('<div class="tooltipster-base '+i.options.theme+'" style="'+l+" "+h+" "+p+" "+f+'"><div class="tooltipster-content"></div></div>'),c()&&i.$tooltip.addClass(u),i.insertContent(),i.$tooltip.appendTo("body"),i.positionTooltip(),i.options.functionReady.call(i.$el,i.$el,i.$tooltip),c()?(i.$tooltip.addClass(u+"-show"),i.options.speed>0&&i.$tooltip.delay(i.options.speed),i.$tooltip.queue(s)):i.$tooltip.css("display","none").fadeIn(i.options.speed,s),i.setCheckInterval(),e(t).on("scroll."+i.namespace+" resize."+i.namespace,function(){i.positionTooltip()}),i.options.autoClose)if(e("body").off("."+i.namespace),"hover"==i.options.trigger)if(a&&setTimeout(function(){e("body").on("touchstart."+i.namespace,function(){i.hideTooltip()
})},0),i.options.interactive){a&&i.$tooltip.on("touchstart."+i.namespace,function(e){e.stopPropagation()});var d=null;i.$elProxy.add(i.$tooltip).on("mouseleave."+i.namespace+"-autoClose",function(){clearTimeout(d),d=setTimeout(function(){i.hideTooltip()},i.options.interactiveTolerance)}).on("mouseenter."+i.namespace+"-autoClose",function(){clearTimeout(d)})}else i.$elProxy.on("mouseleave."+i.namespace+"-autoClose",function(){i.hideTooltip()});else"click"==i.options.trigger&&(setTimeout(function(){e("body").on("click."+i.namespace+" touchstart."+i.namespace,function(){i.hideTooltip()})},0),i.options.interactive&&i.$tooltip.on("click."+i.namespace+" touchstart."+i.namespace,function(e){e.stopPropagation()
}))}i.options.timer>0&&(i.timerHide=setTimeout(function(){i.timerHide=null,i.hideTooltip()},i.options.timer+o))}})},setCheckInterval:function(){var t=this;t.checkInterval=setInterval(function(){if(0===e("body").find(t.$el).length||0===e("body").find(t.$elProxy).length||"hidden"==t.status||0===e("body").find(t.$tooltip).length)("shown"==t.status||"appearing"==t.status)&&t.hideTooltip(),t.cancelCheckInterval();else if(t.options.positionTracker){var n=t.positionInfo(t.$elProxy),r=!1;u(n.dimension,t.elProxyPosition.dimension)&&("fixed"===t.$elProxy.css("position")?u(n.position,t.elProxyPosition.position)&&(r=!0):u(n.offset,t.elProxyPosition.offset)&&(r=!0)),r||t.positionTooltip()
}},200)},cancelCheckInterval:function(){clearInterval(this.checkInterval),this.checkInterval=null},hideTooltip:function(n){var r=this;n&&r.callbacks.hide.push(n),r.callbacks.show=[],clearTimeout(r.timerShow),r.timerShow=null,clearTimeout(r.timerHide),r.timerHide=null;var i=function(){e.each(r.callbacks.hide,function(e,t){t.call(r.$el)}),r.callbacks.hide=[]};if("shown"==r.status||"appearing"==r.status){r.status="disappearing";var s=function(){r.status="hidden",r.$tooltip.remove(),r.$tooltip=null,e(t).off("."+r.namespace),e("body").off("."+r.namespace).css("overflow-x",r.bodyOverflowX),r.$elProxy.off("."+r.namespace+"-autoClose"),r.options.functionAfter.call(r.$el,r.$el),i()
};c()?(r.$tooltip.clearQueue().removeClass("tooltipster-"+r.options.animation+"-show").addClass("tooltipster-dying"),r.options.speed>0&&r.$tooltip.delay(r.options.speed),r.$tooltip.queue(s)):r.$tooltip.stop().fadeOut(r.options.speed,s)}else"hidden"==r.status&&i()},setContent:function(e){"object"==typeof e&&null!==e&&this.options.contentCloning&&(e=e.clone(!0)),this.content=e},insertContent:function(){var e=this,t=this.$tooltip.find(".tooltipster-content");"string"!=typeof e.content||e.options.contentAsHTML?t.empty().append(e.content):t.text(e.content)},updateTooltip:function(e){var t=this;t.setContent(e),null!==t.content?"hidden"!==t.status&&(t.insertContent(),t.positionTooltip(),t.options.updateAnimation&&(c()?(t.$tooltip.css({width:"","-webkit-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-moz-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-o-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms","-ms-transition":"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms",transition:"all "+t.options.speed+"ms, width 0ms, height 0ms, left 0ms, top 0ms"}).addClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!=t.status&&(t.$tooltip.removeClass("tooltipster-content-changing"),setTimeout(function(){"hidden"!==t.status&&t.$tooltip.css({"-webkit-transition":t.options.speed+"ms","-moz-transition":t.options.speed+"ms","-o-transition":t.options.speed+"ms","-ms-transition":t.options.speed+"ms",transition:t.options.speed+"ms"})
},t.options.speed))},t.options.speed)):t.$tooltip.fadeTo(t.options.speed,.5,function(){"hidden"!=t.status&&t.$tooltip.fadeTo(t.options.speed,1)}))):t.hideTooltip()},positionInfo:function(e){return{dimension:{height:e.outerHeight(!1),width:e.outerWidth(!1)},offset:e.offset(),position:{left:parseInt(e.css("left")),top:parseInt(e.css("top"))}}},positionTooltip:function(){function H(){var n=e(t).scrollLeft();0>A-n&&(r=A-n,A=n),A+u-n>s&&(r=A-(s+n-u),A=s+n-u)}function B(n,r){o.offset.top-e(t).scrollTop()-f-_-12<0&&r.indexOf("top")>-1&&(P=n),o.offset.top+o.dimension.height+f+12+_>e(t).scrollTop()+e(t).height()&&r.indexOf("bottom")>-1&&(P=n,M=o.offset.top-f-_-12)}var n=this;
if(0!==e("body").find(n.$tooltip).length){n.$tooltip.css("width",""),n.elProxyPosition=n.positionInfo(n.$elProxy);var r=null,s=e(t).width(),o=n.elProxyPosition,u=n.$tooltip.outerWidth(!1),a=n.$tooltip.innerWidth()+1,f=n.$tooltip.outerHeight(!1);if(n.$elProxy.is("area")){var l=n.$elProxy.attr("shape"),c=n.$elProxy.parent().attr("name"),h=e('img[usemap="#'+c+'"]'),p=h.offset().left,d=h.offset().top,v=void 0!==n.$elProxy.attr("coords")?n.$elProxy.attr("coords").split(","):void 0;if("circle"==l){var m=parseInt(v[0]),g=parseInt(v[1]),y=parseInt(v[2]);o.dimension.height=2*y,o.dimension.width=2*y,o.offset.top=d+g-y,o.offset.left=p+m-y}else if("rect"==l){var m=parseInt(v[0]),g=parseInt(v[1]),b=parseInt(v[2]),w=parseInt(v[3]);
o.dimension.height=w-g,o.dimension.width=b-m,o.offset.top=d+g,o.offset.left=p+m}else if("poly"==l){var x=0,T=0,N=0,C=0,k="even";for(i=0;i<v.length;i++){var L=parseInt(v[i]);"even"==k?(L>N&&(N=L,0===i&&(x=N)),x>L&&(x=L),k="odd"):(L>C&&(C=L,1==i&&(T=C)),T>L&&(T=L),k="even")}o.dimension.height=C-T,o.dimension.width=N-x,o.offset.top=d+T,o.offset.left=p+x}else o.dimension.height=h.outerHeight(!1),o.dimension.width=h.outerWidth(!1),o.offset.top=d,o.offset.left=p}0===n.options.fixedWidth&&n.$tooltip.css({width:Math.round(a)+"px","padding-left":"0px","padding-right":"0px"});var A=0,O=0,M=0,_=parseInt(n.options.offsetY),D=parseInt(n.options.offsetX),P=n.options.position;
if("top"==P){var j=o.offset.left+u-(o.offset.left+o.dimension.width);A=o.offset.left+D-j/2,M=o.offset.top-f-_-12,H(),B("bottom","top")}if("top-left"==P&&(A=o.offset.left+D,M=o.offset.top-f-_-12,H(),B("bottom-left","top-left")),"top-right"==P&&(A=o.offset.left+o.dimension.width+D-u,M=o.offset.top-f-_-12,H(),B("bottom-right","top-right")),"bottom"==P){var j=o.offset.left+u-(o.offset.left+o.dimension.width);A=o.offset.left-j/2+D,M=o.offset.top+o.dimension.height+_+12,H(),B("top","bottom")}if("bottom-left"==P&&(A=o.offset.left+D,M=o.offset.top+o.dimension.height+_+12,H(),B("top-left","bottom-left")),"bottom-right"==P&&(A=o.offset.left+o.dimension.width+D-u,M=o.offset.top+o.dimension.height+_+12,H(),B("top-right","bottom-right")),"left"==P){A=o.offset.left-D-u-12,O=o.offset.left+D+o.dimension.width+12;
var F=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1));if(M=o.offset.top-F/2-_,0>A&&O+u>s){var I=2*parseFloat(n.$tooltip.css("border-width")),q=u+A-I;n.$tooltip.css("width",q+"px"),f=n.$tooltip.outerHeight(!1),A=o.offset.left-D-q-12-I,F=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1)),M=o.offset.top-F/2-_}else 0>A&&(A=o.offset.left+D+o.dimension.width+12,r="left")}if("right"==P){A=o.offset.left+D+o.dimension.width+12,O=o.offset.left-D-u-12;var F=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1));if(M=o.offset.top-F/2-_,A+u>s&&0>O){var I=2*parseFloat(n.$tooltip.css("border-width")),q=s-A-I;n.$tooltip.css("width",q+"px"),f=n.$tooltip.outerHeight(!1),F=o.offset.top+f-(o.offset.top+n.$elProxy.outerHeight(!1)),M=o.offset.top-F/2-_
}else A+u>s&&(A=o.offset.left-D-u-12,r="right")}if(n.options.arrow){var R="tooltipster-arrow-"+P;if(n.options.arrowColor.length<1)var U=n.$tooltip.css("background-color");else var U=n.options.arrowColor;if(r?"left"==r?(R="tooltipster-arrow-right",r=""):"right"==r?(R="tooltipster-arrow-left",r=""):r="left:"+Math.round(r)+"px;":r="","top"==P||"top-left"==P||"top-right"==P)var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");else if("bottom"==P||"bottom-left"==P||"bottom-right"==P)var z=parseFloat(n.$tooltip.css("border-top-width")),W=n.$tooltip.css("border-top-color");else if("left"==P)var z=parseFloat(n.$tooltip.css("border-right-width")),W=n.$tooltip.css("border-right-color");
else if("right"==P)var z=parseFloat(n.$tooltip.css("border-left-width")),W=n.$tooltip.css("border-left-color");else var z=parseFloat(n.$tooltip.css("border-bottom-width")),W=n.$tooltip.css("border-bottom-color");z>1&&z++;var X="";if(0!==z){var V="",J="border-color: "+W+";";-1!==R.indexOf("bottom")?V="margin-top: -"+Math.round(z)+"px;":-1!==R.indexOf("top")?V="margin-bottom: -"+Math.round(z)+"px;":-1!==R.indexOf("left")?V="margin-right: -"+Math.round(z)+"px;":-1!==R.indexOf("right")&&(V="margin-left: -"+Math.round(z)+"px;"),X='<span class="tooltipster-arrow-border" style="'+V+" "+J+';"></span>'}n.$tooltip.find(".tooltipster-arrow").remove();var K='<div class="'+R+' tooltipster-arrow" style="'+r+'">'+X+'<span style="border-color:'+U+';"></span></div>';
n.$tooltip.append(K)}n.$tooltip.css({top:Math.round(M)+"px",left:Math.round(A)+"px"})}}},e.fn[r]=function(){var t=arguments;if(0===this.length){if("string"==typeof t[0]){var n=!0;switch(t[0]){case"setDefaults":e.extend(s,t[1]);break;default:n=!1}return n?!0:this}return this}if("string"==typeof t[0]){var r="#*$~&";return this.each(function(){var n=e(this).data("tooltipster");if(!n)throw new Error("You called Tooltipster's \""+t[0]+'" method on an uninitialized element');switch(t[0]){case"content":case"update":if("undefined"==typeof t[1])return r=n.content,!1;n.updateTooltip(t[1]);break;case"destroy":n.hideTooltip(),n.$el[0]!==n.$elProxy[0]&&n.$elProxy.remove();
var i="string"==typeof n.content?n.content:e("<div></div>").append(n.content).html();n.$el.removeClass("tooltipstered").attr("title",i).removeData("tooltipster").off("."+n.namespace);break;case"disable":n.hideTooltip(),n.enabled=!1;break;case"elementIcon":return r=n.$el[0]!==n.$elProxy[0]?n.$elProxy[0]:void 0,!1;case"elementTooltip":return r=n.$tooltip?n.$tooltip[0]:void 0,!1;case"enable":n.enabled=!0;break;case"hide":n.hideTooltip(t[1]);break;case"option":return r=n.options[t[1]],!1;case"reposition":n.positionTooltip();break;case"show":n.showTooltipNow(t[1]);break;case"status":return r=n.status,!1;default:throw new Error('Unknown method .tooltipster("'+t[0]+'")')
}}),"#*$~&"!==r?r:this}return this.each(function(){e(this).data("tooltipster")||e(this).data("tooltipster",new o(this,t[0]))})};var a=!!("ontouchstart"in t),f=!1;e("body").one("mousemove",function(){f=!0})}(jQuery,window,document),define("tooltipster",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/InlineChoiceInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/inlineChoiceInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","select2","tooltipster"],function(_,tpl,Helper,pciResponse,__){var _emptyValue="empty",_defaultOptions={allowEmpty:!0,placeholderText:__("select a choice")},render=function(interaction,options){var opts=_.clone(_defaultOptions),required=!!interaction.attr("required");
_.extend(opts,options);var $container=Helper.getContainer(interaction);opts.allowEmpty&&!required?$container.find("option[value="+_emptyValue+"]").text("--- "+__("leave empty")+" ---"):$container.find("option[value="+_emptyValue+"]").remove(),$container.select2({width:"resolve",placeholder:opts.placeholderText,minimumResultsForSearch:-1});var $el=$container.select2("container");_setInstructions(interaction),$container.on("change",function(){required&&""!==$container.val()&&$el.tooltipster("hide"),Helper.triggerResponseChangeEvent(interaction)}).on("select2-open",function(){$el.tooltipster("hide")}).on("select2-close",function(){required&&""===$container.val()&&$el.tooltipster("show")
})},_setInstructions=function(interaction){var required=!!interaction.attr("required"),$container=interaction.getContainer(),$el=$container.select2("container");required&&($el.tooltipster({theme:"tao-warning-tooltip",content:__("A choice must be selected"),delay:250,trigger:"custom"}),""===$container.val()&&$el.tooltipster("show"))},resetResponse=function(interaction){_setVal(interaction,_emptyValue)},_setVal=function(interaction,choiceIdentifier){Helper.getContainer(interaction).val(choiceIdentifier).select2("val",choiceIdentifier).change()},setResponse=function(interaction,response){_setVal(interaction,pciResponse.unserialize(response,interaction)[0])},_getRawResponse=function(interaction){var value=Helper.getContainer(interaction).val();
return value&&value!==_emptyValue?[value]:[]},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)};return{qtiClass:"inlineChoiceInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""
}function program3(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""}function program5(depth0,data,depth1){var stack1,buffer="";return buffer+="\n      <tr>\n        ",stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n        ",stack1=helpers.each.call(depth0,depth1&&depth1.matchSet1,{hash:{},inverse:self.noop,fn:self.program(6,program6,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n      </tr>\n      "}function program6(){return'\n        <td>\n          <label>\n            <input type="checkbox" >\n            <span class="icon-checkbox cross"></span>\n          </label>\n        </td>\n        '
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",self=this,escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-matchInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="matchInteraction">\n  ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n  <div class="instruction-container"></div>\n  <div class="match-interaction-area">\n    <table class="matrix">\n      <thead>\n      <tr>\n        <th> </th>\n        ',options={hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data},(helper=helpers.matchSet1)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.matchSet1,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.matchSet1||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(3,program3,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n      </tr>\n      </thead>\n      <tbody>\n      ",options={hash:{},inverse:self.noop,fn:self.programWithDepth(5,program5,data,depth0),data:data},(helper=helpers.matchSet2)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.matchSet2,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.matchSet2||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.programWithDepth(5,program5,data,depth0),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n      </tbody>\n    </table>\n  </div>\n  <div class="notification-container"></div>\n</div>'
})}),function(a,b){function m(a,b,c){var d=h[b.type]||{};return null==a?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";return i?(f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1):void 0}),d.length?("0,0,0,0"===d.join()&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,1>6*c?a+(b-a)*c*6:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}var k,c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]
}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[2.55*a[1],2.55*a[2],2.55*a[3],a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)
},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a("<p>")[0],l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)",i.rgba=j.style.backgroundColor.indexOf("rgba")>-1,l(g,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b)return this._rgba=[null,null,null,null],this;(c.jquery||c.nodeType)&&(c=a(c).css(d),d=b);var i=this,j=a.type(c),o=this._rgba=[];
return d!==b&&(c=[c,d,e,h],j="array"),"string"===j?this.parse(n(c)||k._default):"array"===j?(l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this):"object"===j?(c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if("alpha"===a||null==c[a])return;i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this):void 0},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){return null!=g[b.idx]?c=g[b.idx]===f[b.idx]:void 0
})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=0===this.alpha()?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};null!==g&&(null===f?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d)))}),this[d](k)},blend:function(b){if(1===this._rgba[3])return this;var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return null==a?b>2?1:0:a
});return 1===c[3]&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return null==a&&(a=b>2?1:0),b&&3>b&&(a=Math.round(100*a)+"%"),a});return 1===c[3]&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(255*d)),"#"+a.map(c,function(a){return a=(a||0).toString(16),1===a.length?"0"+a:a}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var k,l,b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=.5*i;
return k=g===f?0:b===f?60*(c-d)/h+360:c===f?60*(d-b)/h+120:60*(b-c)/h+240,l=0===h?0:.5>=j?h/i:h/(2-i),[Math.round(k)%360,l,j,null==e?1:e]},g.hsla.from=function(a){if(null==a[0]||null==a[1]||null==a[2])return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=.5>=d?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(255*o(g,f,b+1/3)),Math.round(255*o(g,f,b)),Math.round(255*o(g,f,b-1/3)),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){if(i&&!this[h]&&(this[h]=i(this._rgba)),c===b)return this[h].slice();var d,e=a.type(c),k="array"===e||"object"===e?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k["object"===e?a:b.idx];
null==c&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){f.fn[b]||(f.fn[b]=function(f){var k,g=a.type(f),h="alpha"===b?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx];return"undefined"===g?j:("function"===g&&(f=f.call(this,j),g=a.type(f)),null==f&&e.empty?this:("string"===g&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*("+"===k[1]?1:-1))),i[e.idx]=f,this[h](i)))})})}),f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if("transparent"!==d&&("string"!==a.type(d)||(e=n(d)))){if(d=f(e||d),!i.rgba&&1!==d._rgba[3]){for(g="backgroundColor"===c?b.parentNode:b;(""===h||"transparent"===h)&&g&&g.style;)try{h=a.css(g,"backgroundColor"),g=g.parentNode
}catch(j){}d=d.blend(h&&"transparent"!==h?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(j){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}
}(jQuery),define("lib/jquery.color",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/MatchInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/matchInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","lib/jquery.color"],function(_,$,tpl,Helper,pciResponse,__){var inWarning=!1,render=function(interaction){var $container=Helper.getContainer(interaction);_setInstructions(interaction),$container.on("click.commonRenderer","input[type=checkbox]",function(e){_onCheckboxSelected(interaction,e)}),Helper.validateInstructions(interaction)},setResponse=function(interaction,response){response=_filterResponse(response),"undefined"!=typeof response.list&&"undefined"!=typeof response.list.directedPair&&_(response.list.directedPair).forEach(function(directedPair){var x=$("th[data-identifier="+directedPair[0]+"]").index()-1,y=$("th[data-identifier="+directedPair[1]+"]").parent().index();
$(".matrix > tbody tr").eq(y).find("input[type=checkbox]").eq(x).attr("checked",!0)}),Helper.validateInstructions(interaction)},getResponse=function(interaction){var response=pciResponse.serialize(_getRawResponse(interaction),interaction);return response},resetResponse=function(interaction){Helper.getContainer(interaction).find("input[type=checkbox]:checked").each(function(){$(this).prop("checked",!1)}),Helper.validateInstructions(interaction)},_filterResponse=function(response){if("undefined"==typeof response.list){if("undefined"==typeof response.base)throw"The given response is not compliant with PCI JSON representation.";if(null==response.base)return{list:{directedPair:[]}};
if("undefined"==typeof response.base.directedPair)throw"The matchInteraction only accepts directedPair values as responses.";return{list:{directedPair:[response.base.directedPair]}}}if("undefined"==typeof response.list.directedPair)throw"The matchInteraction only accept directedPair values as responses.";return response},_getRawResponse=function(interaction){var $container=Helper.getContainer(interaction),values=[];return $container.find("input[type=checkbox]:checked").each(function(){values.push(_inferValue(this))}),values},_inferValue=function(element){var $element=$(element),y=$element.closest("tr").index(),x=$element.closest("td").index(),firstId=$(".matrix > thead th").eq(x).data("identifier"),secondId=$(".matrix > tbody th").eq(y).data("identifier");
return[firstId,secondId]},_onCheckboxSelected=function(interaction,e){var currentResponse=_getRawResponse(interaction),maxAssociations=(interaction.attr("minAssociations"),interaction.attr("maxAssociations"));0===maxAssociations&&(maxAssociations=_countChoices(interaction)),_.size(currentResponse)>maxAssociations?(e.preventDefault(),Helper.validateInstructions(interaction)):(choice=_maxMatchReached(interaction,e.target))!==!1?(e.preventDefault(),Helper.validateInstructions(interaction,choice)):(Helper.triggerResponseChangeEvent(interaction,{}),Helper.validateInstructions(interaction))},_maxMatchReached=function(interaction,input){var association=_inferValue(input),overflow=!1;
return _(association).forEach(function(identifier){var choice=_getChoiceDefinitionByIdentifier(interaction,identifier),matchMax=(choice.attributes.matchMin,choice.attributes.matchMax),assoc=_countAssociations(interaction,choice);matchMax>0&&assoc>matchMax&&(overflow=choice)}),overflow},_countAssociations=function(interaction,choice){var rawResponse=_getRawResponse(interaction),count=0;return _(rawResponse).forEach(function(response){(response[0]==choice.attributes.identifier||response[1]==choice.attributes.identifier)&&count++}),count},_countChoices=function(interaction){var $container=Helper.getContainer(interaction);return $container.find("input[type=checkbox]").length
},_getChoiceDefinitionByIdentifier=function(interaction,identifier){var rawChoices=_getRawChoices(interaction);return rawChoices[identifier]},_getRawChoices=function(interaction){var rawChoices={};return _(interaction.choices).forEach(function(matchset){_(matchset).forEach(function(choice){rawChoices[choice.attributes.identifier]=choice})}),rawChoices},_setInstructions=function(interaction){var minAssociations=interaction.attr("minAssociations"),maxAssociations=interaction.attr("maxAssociations"),choiceCount=_countChoices(interaction),superClosure=function(){var onMaxChoicesReached=function(report,msg){inWarning===!1&&(inWarning=!0,report.update({level:"warning",message:__("Maximum number of choices reached."),timeout:2e3,stop:function(){report.update({level:"success",message:msg}),inWarning=!1
}}))},onMatchMaxReached=function(interaction,choice,report,msg,level){var $container=Helper.getContainer(interaction);if(inWarning===!1){inWarning=!0;var $choice=$container.find('.qti-simpleAssociableChoice[data-identifier="'+choice.attributes.identifier+'"]'),originalBackgroundColor=$choice.css("background-color"),originalColor=$choice.css("color");report.update({level:"warning",message:__("The highlighted choice cannot be associated more than %d time(s).").replace("%d",choice.attributes.matchMax),timeout:3e3,start:function(){$choice.animate({backgroundColor:"#fff",color:"#ba122b"},250,function(){$choice.animate({backgroundColor:"#ba122b",color:"#fff"},250)})
},stop:function(){$choice.animate({backgroundColor:originalBackgroundColor,color:originalColor},500),report.update({level:level,message:msg}),inWarning=!1}})}};if(0==minAssociations&&maxAssociations>0){var msg=__("You must select 0 to %d choices.").replace("%d",maxAssociations);Helper.appendInstruction(interaction,msg,function(choice){var responseCount=_.size(_getRawResponse(interaction)),choiceGiven="undefined"!=typeof choice;1==choiceGiven&&choice.attributes.matchMax>0&&_countAssociations(interaction,choice)>choice.attributes.matchMax?onMatchMaxReached(interaction,choice,this,msg,this.getLevel()):maxAssociations>=responseCount?this.setLevel("success"):responseCount>maxAssociations?onMaxChoicesReached(this,msg):this.reset()
})}else if(0==minAssociations&&0==maxAssociations){var msg=__("You must select 0 to %d choices.").replace("%d",choiceCount);Helper.appendInstruction(interaction,msg,function(choice){var choiceGiven="undefined"!=typeof choice;1==choiceGiven&&choice.attributes.matchMax>0&&_countAssociations(interaction,choice)>choice.attributes.matchMax?onMatchMaxReached(interaction,choice,this,msg,this.getLevel()):this.setLevel("success")})}else if(minAssociations>0&&0==maxAssociations){var msg=__("You must select %1$d to %2$d choices.");msg=msg.replace("%1$d",minAssociations),msg=msg.replace("%2$d",choiceCount),Helper.appendInstruction(interaction,msg,function(choice){var responseCount=_.size(_getRawResponse(interaction)),choiceGiven="undefined"!=typeof choice;
1==choiceGiven&&choice.attributes.matchMax>0&&_countAssociations(interaction,choice)>choice.attributes.matchMax?onMatchMaxReached(interaction,choice,this,msg,this.getLevel()):minAssociations>responseCount?this.setLevel("info"):responseCount>choiceCount?onMaxChoicesReached(this,msg):this.setLevel("success")})}else if(minAssociations>0&&maxAssociations>0){if(minAssociations!=maxAssociations){var msg=__("You must select %1$d to %2$d choices.");msg=msg.replace("%1$d",minAssociations),msg=msg.replace("%2$d",maxAssociations)}else{var msg=__("You must select exactly %d choice(s).");msg=msg.replace("%d",minAssociations)}Helper.appendInstruction(interaction,msg,function(choice){var responseCount=_.size(_getRawResponse(interaction)),choiceGiven="undefined"!=typeof choice;
1==choiceGiven&&choice.attributes.matchMax>0&&_countAssociations(interaction,choice)>choice.attributes.matchMax?onMatchMaxReached(interaction,choice,this,msg,this.getLevel()):minAssociations>responseCount?this.setLevel("info"):responseCount>maxAssociations?onMaxChoicesReached(this,msg):responseCount>=minAssociations&&maxAssociations>=responseCount&&this.setLevel("success")})}};superClosure()},destroy=function(interaction){Helper.getContainer(interaction).off(".commonRenderer"),resetResponse(interaction),Helper.removeInstructions(interaction)};return{qtiClass:"matchInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy,inferValue:_inferValue}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-mediaInteraction '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="media-container"></div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/MediaInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/mediaInteraction","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper","mediaElement"],function($,_,__,tpl,pciResponse,Helper,MediaElementPlayer){var getMediaType=function(mimetype){var type="";return""!==mimetype&&(-1!==mimetype.indexOf("youtube")?type="video/youtube":0===mimetype.indexOf("video")||mimetype.indexOf("application/ogg")?type="video":0===mimetype.indexOf("audio")&&(type="audio")),type},defaults={type:"video/mp4",video:{width:480,height:270},audio:{width:400,height:30}},render=function(interaction){var $meTag,mediaOptions,$container=Helper.getContainer(interaction),media=interaction.object,baseUrl=this.getOption("baseUrl")||"",mediaType=getMediaType(media.attr("type")||defaults.type),enablePause=$container.hasClass("pause"),maxPlays=parseInt(interaction.attr("maxPlays"),10)||0,playFromPauseEvent=!1,pauseFromClick=!1,features=enablePause?["playpause","progress","current","duration","volume"]:["playpause","current","duration","volume"],initMediaPlayer=function(){!interaction.mediaElement&&$meTag&&$meTag.length&&new MediaElementPlayer($meTag,mediaOptions)
},canBePlayed=function(){var current=parseInt($container.data("timesPlayed"),10);return 0===maxPlays||maxPlays>current};0===_.size(media.attributes)&&(media.attr("type",defaults.type),media.attr("width",$container.innerWidth()),media.attr("height",defaults.video.height),media.attr("data","")),mediaOptions={defaultVideoWidth:defaults.video.width,defaultVideoHeight:defaults.video.height,videoWidth:media.attr("width"),videoHeight:media.attr("height"),audioWidth:media.attr("width")||defaults.audio.width,audioHeight:media.attr("height")||defaults.audio.height,features:features,startVolume:1,loop:!!interaction.attr("loop"),enableAutosize:!0,alwaysShowControls:!0,iPadUseNativeControls:!1,iPhoneUseNativeControls:!1,AndroidUseNativeControls:!1,alwaysShowHours:!1,enableKeyboard:!1,pauseOtherPlayers:!1,success:function(mediaElement,playerDom){var stillNeedToCallPlay=!0,$meContainer=$(playerDom).closest(".mejs-container"),$layers=$(".mejs-layers",$meContainer),$playpauseBtn=$(".mejs-playpause-button",$meContainer),$bigPlayBtn=$(".mejs-overlay-play",$meContainer),$controls=$(".mejs-controls",$meContainer),controlsHeight=$controls.outerHeight();
interaction.mediaElement=mediaElement,"video/youtube"===mediaType&&_.defer(function(){$("iframe.me-plugin",$container).css("min-height",media.attr("height"))}),$container.data("timesPlayed")||$container.data("timesPlayed",0),interaction.attr("autostart")&&canBePlayed()&&("video/youtube"!==mediaType&&(mediaElement.load(),mediaElement.play()),mediaElement.addEventListener("canplay",function(){stillNeedToCallPlay&&mediaElement.play()},!1)),mediaElement.addEventListener("play",function(){stillNeedToCallPlay=!1,playFromPauseEvent===!0?playFromPauseEvent=!1:enablePause||($bigPlayBtn.detach(),$playpauseBtn.detach(),("video/youtube"===mediaType||"flash"===mediaElement.pluginType)&&$('<div class="overlay"></div>').width(mediaOptions.videoWidth).height(mediaOptions.videoHeight-controlsHeight).appendTo($layers))
},!1),mediaElement.addEventListener("ended",function(){$container.data("timesPlayed",$container.data("timesPlayed")+1),Helper.triggerResponseChangeEvent(interaction),canBePlayed()&&!enablePause?($controls.prepend($playpauseBtn),$layers.append($bigPlayBtn),$(".overlay",$layers).remove()):canBePlayed()||($bigPlayBtn.detach(),$playpauseBtn.detach(),("video/youtube"===mediaType||"flash"===mediaElement.pluginType)&&$('<div class="overlay"></div>').width(mediaOptions.videoWidth).height(mediaOptions.videoHeight-controlsHeight).appendTo($layers),interaction.attr("loop")&&(interaction.mediaElement.pluginApi?$(playerDom).remove():interaction.mediaElement.setSrc("")))},!1),$playpauseBtn.on("click.qti-element",function(e){pauseFromClick=!0,enablePause||(e.preventDefault(),e.stopPropagation())
}),mediaElement.addEventListener("pause",function(){pauseFromClick&&(playFromPauseEvent=!0,pauseFromClick=!1)}),$container.trigger("playerready")},error:function(playerDom){$(playerDom).closest("div.mejs-container").find(".me-cannotplay").remove()}},$meTag=$(_buildMedia(media,mediaType,baseUrl)).appendTo($(".media-container",$container)),$meTag.on("contextmenu",function(e){e.preventDefault()}).on("click.qit-element",function(e){return pauseFromClick=!0,enablePause?void 0:(e.preventDefault(),e.stopPropagation(),!1)}),$container.on("responseSet",function(){initMediaPlayer()}),_.defer(function(){initMediaPlayer()})},_buildMedia=function(media,type,baseUrl){var element,url,attrs,inlineAttrs=function(attrs){return _.reduce(attrs,function(res,value,key){return res+=key+'="'+value+'" '
},"")};return media&&(url=media.attr("data")?media.attr("data").replace(/^\//,""):"",attrs={width:media.attr("width")+"px",height:media.attr("height")+"px",preload:"none"},/^http(s)?:\/\//.test(url)||(url=baseUrl+url,attrs.type=media.attr("type")),"video/youtube"===type?element="<video "+inlineAttrs(attrs)+'>  <source type="video/youtube" src="'+url+'" /> </video>':(attrs.src=url,type||(type="video"),element="<"+type+" "+inlineAttrs(attrs)+"></"+type+">")),element},destroy=function(interaction){var $container=Helper.getContainer(interaction);interaction.mediaElement&&(interaction.mediaElement.pluginApi||interaction.mediaElement.setSrc(""),interaction.mediaElement=void 0),$(".instruction-container",$container).empty(),$(".media-container",$container).empty(),$container.removeData("timesPlayed")
},_getRawResponse=function(interaction){return[Helper.getContainer(interaction).data("timesPlayed")]},setResponse=function(interaction,response){if(response)try{var responseValues;responseValues=pciResponse.unserialize(response,interaction),Helper.getContainer(interaction).data("timesPlayed",responseValues[0])}catch(e){}},resetResponse=function(interaction){Helper.getContainer(interaction).data("timesPlayed",0)},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)};return{qtiClass:"mediaInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(){return"qti-horizontal"}function program3(){return"qti-vertical"}function program5(){return"horizontal"}function program7(){return"vertical"}function program9(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}function program11(depth0){var stack1;return stack1=typeof depth0===functionType?depth0.apply(depth0):depth0,stack1||0===stack1?stack1:""
}function program13(){return"icon-down"}function program15(){return"icon-right"}function program17(){return"icon-up"}function program19(){return"icon-left"}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,options,buffer="",functionType="function",self=this,escapeExpression=this.escapeExpression,blockHelperMissing=helpers.blockHelperMissing;return buffer+='<div class="qti-interaction qti-blockInteraction qti-orderInteraction ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(3,program3,data),fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='" \n     data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" \n     data-qti-class="orderInteraction" \n     data-orientation="',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(7,program7,data),fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(9,program9,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="order-interaction-area">\n        <ul class="choice-area square source solid block-listing ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n            ',options={hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data},(helper=helpers.choices)?stack1=helper.call(depth0,options):(helper=depth0&&depth0.choices,stack1=typeof helper===functionType?helper.call(depth0,options):helper),helpers.choices||(stack1=blockHelperMissing.call(depth0,stack1,{hash:{},inverse:self.noop,fn:self.program(11,program11,data),data:data})),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n        </ul>\n        <div class="arrow-bar middle">\n            <span class="icon-add-to-selection ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(15,program15,data),fn:self.program(13,program13,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='"></span>\n            <span class="icon-remove-from-selection ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(19,program19,data),fn:self.program(17,program17,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' inactive"></span>\n        </div>\n        <ul class="result-area decimal target solid block-listing ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.noop,fn:self.program(5,program5,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='">\n        </ul>\n        <div class="arrow-bar">\n            <span class="icon-move-before ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(17,program17,data),fn:self.program(19,program19,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' inactive"></span>\n            <span class="icon-move-after ',stack1=helpers["if"].call(depth0,depth0&&depth0.horizontal,{hash:{},inverse:self.program(13,program13,data),fn:self.program(15,program15,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+=' inactive"></span>\n        </div>\n    </div>\n    <div class="notification-container"></div>\n</div>'
})}),function(a,b){function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var h,f=b.parentNode,g=f.name;return b.href&&g&&"map"===f.nodeName.toLowerCase()?(h=a("img[usemap=#"+g+"]")[0],!!h&&d(h)):!1}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}function d(b){return!a(b).parents().andSelf().filter(function(){return"hidden"===a.curCSS(this,"visibility")||a.expr.filters.hidden(this)}).length}a.ui=a.ui||{},a.ui.version||(a.extend(a.ui,{version:"1.8.23",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return"number"==typeof b?this.each(function(){var d=this;
setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;return b=a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);
if(this.length)for(var e,f,d=a(this[0]);d.length&&d[0]!==document;){if(e=d.css("position"),("absolute"===e||"relative"===e||"fixed"===e)&&(f=parseInt(d.css("zIndex"),10),!isNaN(f)&&0!==f))return f;d=d.parent()}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function h(b,c,d,f){return a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)
}),c}var e="Width"===d?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?g["inner"+d].call(this):this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?g["outer"+d].call(this,b):this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))
},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=100===c.offsetHeight,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.curCSS||(a.curCSS=a.css),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(d&&a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)
}},contains:function(a,b){return document.compareDocumentPosition?16&a.compareDocumentPosition(b):a!==b&&a.contains(b)},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0?!0:(b[d]=1,e=b[d]>0,b[d]=0,e)},isOverAxis:function(a,b,c){return a>b&&b+c>a},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))}(jQuery),function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var e,d=0;null!=(e=b[d]);d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){return c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")
}catch(b){}}),d.call(a(this),b,c)})}}a.widget=function(b,c,d){var f,e=b.split(".")[0];b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f="string"==typeof e,g=Array.prototype.slice.call(arguments,1),h=this;return e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e,f&&"_"===e.charAt(0)?h:(this.each(f?function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;
return f!==d&&f!==b?(h=f,!1):void 0}:function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))}),h)}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled ui-state-disabled")
},widget:function(){return this.element},option:function(c,d){var e=c;if(0===arguments.length)return a.extend({},this.options);if("string"==typeof c){if(d===b)return this.options[c];e={},e[c]=d}return this._setOptions(e),this},_setOptions:function(b){var c=this;return a.each(b,function(a,b){c._setOption(a,b)}),this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled ui-state-disabled").attr("aria-disabled",b),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];
if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent,f)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}}(jQuery),function(a){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){return!0===a.data(c.target,b.widgetName+".preventClickEvent")?(a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1):void 0
}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1==b.which,f="string"==typeof this.options.cancel&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;return e&&!f&&this._mouseCapture(b)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)
},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0)):!0}},_mouseMove:function(b){return!a.browser.msie||document.documentMode>=9||b.button?this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted):this._mouseUp(b)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1
},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a){a.ui=a.ui||{};var c=/left|center|right/,d=/top|center|bottom/,e="center",f={},g=a.fn.position,h=a.fn.offset;a.fn.position=function(b){if(!b||!b.of)return g.apply(this,arguments);b=a.extend({},b);var l,m,n,h=a(b.of),i=h[0],j=(b.collision||"flip").split(" "),k=b.offset?b.offset.split(" "):[0,0];return 9===i.nodeType?(l=h.width(),m=h.height(),n={top:0,left:0}):i.setTimeout?(l=h.width(),m=h.height(),n={top:h.scrollTop(),left:h.scrollLeft()}):i.preventDefault?(b.at="left top",l=m=0,n={top:b.of.pageY,left:b.of.pageX}):(l=h.outerWidth(),m=h.outerHeight(),n=h.offset()),a.each(["my","at"],function(){var a=(b[this]||"").split(" ");
1===a.length&&(a=c.test(a[0])?a.concat([e]):d.test(a[0])?[e].concat(a):[e,e]),a[0]=c.test(a[0])?a[0]:e,a[1]=d.test(a[1])?a[1]:e,b[this]=a}),1===j.length&&(j[1]=j[0]),k[0]=parseInt(k[0],10)||0,1===k.length&&(k[1]=k[0]),k[1]=parseInt(k[1],10)||0,"right"===b.at[0]?n.left+=l:b.at[0]===e&&(n.left+=l/2),"bottom"===b.at[1]?n.top+=m:b.at[1]===e&&(n.top+=m/2),n.left+=k[0],n.top+=k[1],this.each(function(){var r,c=a(this),d=c.outerWidth(),g=c.outerHeight(),h=parseInt(a.curCSS(this,"marginLeft",!0))||0,i=parseInt(a.curCSS(this,"marginTop",!0))||0,o=d+h+(parseInt(a.curCSS(this,"marginRight",!0))||0),p=g+i+(parseInt(a.curCSS(this,"marginBottom",!0))||0),q=a.extend({},n);"right"===b.my[0]?q.left-=d:b.my[0]===e&&(q.left-=d/2),"bottom"===b.my[1]?q.top-=g:b.my[1]===e&&(q.top-=g/2),f.fractions||(q.left=Math.round(q.left),q.top=Math.round(q.top)),r={left:q.left-h,top:q.top-i},a.each(["left","top"],function(c,e){a.ui.position[j[c]]&&a.ui.position[j[c]][e](q,{targetWidth:l,targetHeight:m,elemWidth:d,elemHeight:g,collisionPosition:r,collisionWidth:o,collisionHeight:p,offset:k,my:b.my,at:b.at})
}),a.fn.bgiframe&&c.bgiframe(),c.offset(a.extend(q,{using:b.using}))})},a.ui.position={fit:{left:function(b,c){var d=a(window),e=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft();b.left=e>0?b.left-e:Math.max(b.left-c.collisionPosition.left,b.left)},top:function(b,c){var d=a(window),e=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop();b.top=e>0?b.top-e:Math.max(b.top-c.collisionPosition.top,b.top)}},flip:{left:function(b,c){if(c.at[0]!==e){var d=a(window),f=c.collisionPosition.left+c.collisionWidth-d.width()-d.scrollLeft(),g="left"===c.my[0]?-c.elemWidth:"right"===c.my[0]?c.elemWidth:0,h="left"===c.at[0]?c.targetWidth:-c.targetWidth,i=-2*c.offset[0];
b.left+=c.collisionPosition.left<0?g+h+i:f>0?g+h+i:0}},top:function(b,c){if(c.at[1]!==e){var d=a(window),f=c.collisionPosition.top+c.collisionHeight-d.height()-d.scrollTop(),g="top"===c.my[1]?-c.elemHeight:"bottom"===c.my[1]?c.elemHeight:0,h="top"===c.at[1]?c.targetHeight:-c.targetHeight,i=-2*c.offset[1];b.top+=c.collisionPosition.top<0?g+h+i:f>0?g+h+i:0}}}},a.offset.setOffset||(a.offset.setOffset=function(b,c){/static/.test(a.curCSS(b,"position"))&&(b.style.position="relative");var d=a(b),e=d.offset(),f=parseInt(a.curCSS(b,"top",!0),10)||0,g=parseInt(a.curCSS(b,"left",!0),10)||0,h={top:c.top-e.top+f,left:c.left-e.left+g};"using"in c?c.using.call(b,h):d.css(h)
},a.fn.offset=function(b){var c=this[0];return c&&c.ownerDocument?b?this.each(a.isFunction(b)?function(c){a(this).offset(b.call(this,c,a(this).offset()))}:function(){a.offset.setOffset(this,b)}):h.call(this):null}),a.curCSS||(a.curCSS=a.css),function(){var d,e,g,h,i,b=document.getElementsByTagName("body")[0],c=document.createElement("div");d=document.createElement(b?"div":"body"),g={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},b&&a.extend(g,{position:"absolute",left:"-1000px",top:"-1000px"});for(var j in g)d.style[j]=g[j];d.appendChild(c),e=b||document.documentElement,e.insertBefore(d,e.firstChild),c.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",h=a(c).offset(function(a,b){return b
}).offset(),d.innerHTML="",e.removeChild(d),i=h.top+h.left+(b?2e3:0),f.fractions=i>21&&22>i}()}(jQuery),function(a){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()
},destroy:function(){return this.element.data("draggable")?(this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this):void 0},_mouseCapture:function(b){var c=this.options;return this.helper||c.disabled||a(b.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(b),this.handle?(c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")
}),!0):!1)},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)
},_mouseDrag:function(b,c){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);for(var d=this.element[0],e=!1;d&&(d=d.parentNode);)d==document&&(e=!0);
if(!e&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!c||"valid"==this.options.revert&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var f=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){f._trigger("stop",b)!==!1&&f._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){return this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this
},_getHandle:function(b){var c=this.options.handle&&a(this.options.handle,this.element).length?!1:!0;return a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)}),c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"==c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"==c.appendTo?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)
},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.element.position();
return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=["document"==b.containment?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==b.containment?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==b.containment?0:a(window).scrollLeft())+a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==b.containment?0:a(window).scrollTop())+(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(b.containment)||b.containment.constructor==Array)b.containment.constructor==Array&&(this.containment=b.containment);
else{var c=a(b.containment),d=c[0];if(!d)return;var f=(c.offset(),"hidden"!=a(d).css("overflow"));this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c
}},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}
},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)
}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h&&(j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3])?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h&&(k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2])?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}
},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"==b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.23"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});
d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"==d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))
})},drag:function(b,c){var d=a(this).data("draggable"),e=this;a.each(d.sortables,function(){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)
})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var d=a(this).data("draggable");
d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b){var d=a(this).data("draggable"),e=d.options,f=!1;d.scrollParent[0]!=document&&"HTML"!=d.scrollParent[0].tagName?(e.axis&&"x"==e.axis||(d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed)),e.axis&&"y"==e.axis||(d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed))):(e.axis&&"x"==e.axis||(b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed))),e.axis&&"y"==e.axis||(b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed)))),f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)
}}),a.ui.plugin.add("draggable","snap",{start:function(){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){for(var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height,k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;
if(g>l-f&&m+f>g&&i>n-f&&o+f>i||g>l-f&&m+f>g&&j>n-f&&o+f>j||h>l-f&&m+f>h&&i>n-f&&o+f>i||h>l-f&&m+f>h&&j>n-f&&o+f>j){if("inner"!=e.snapMode){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if("outer"!=e.snapMode){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;
p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}else d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1
}}}),a.ui.plugin.add("draggable","stack",{start:function(){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a){a.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var b=this.options,c=b.accept;
this.isover=0,this.isout=1,this.accept=a.isFunction(c)?c:function(a){return a.is(c)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},a.ui.ddmanager.droppables[b.scope]=a.ui.ddmanager.droppables[b.scope]||[],a.ui.ddmanager.droppables[b.scope].push(this),b.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){for(var b=a.ui.ddmanager.droppables[this.options.scope],c=0;c<b.length;c++)b[c]==this&&b.splice(c,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(b,c){"accept"==b&&(this.accept=a.isFunction(c)?c:function(a){return a.is(c)
}),a.Widget.prototype._setOption.apply(this,arguments)},_activate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),c&&this._trigger("activate",b,this.ui(c))},_deactivate:function(b){var c=a.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),c&&this._trigger("deactivate",b,this.ui(c))},_over:function(b){var c=a.ui.ddmanager.current;c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",b,this.ui(c)))},_out:function(b){var c=a.ui.ddmanager.current;
c&&(c.currentItem||c.element)[0]!=this.element[0]&&this.accept.call(this.element[0],c.currentItem||c.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",b,this.ui(c)))},_drop:function(b,c){var d=c||a.ui.ddmanager.current;if(!d||(d.currentItem||d.element)[0]==this.element[0])return!1;var e=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var b=a.data(this,"droppable");return b.options.greedy&&!b.options.disabled&&b.options.scope==d.options.scope&&b.accept.call(b.element[0],d.currentItem||d.element)&&a.ui.intersect(d,a.extend(b,{offset:b.element.offset()}),b.options.tolerance)?(e=!0,!1):void 0
}),e?!1:this.accept.call(this.element[0],d.currentItem||d.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",b,this.ui(d)),this.element):!1},ui:function(a){return{draggable:a.currentItem||a.element,helper:a.helper,position:a.position,offset:a.positionAbs}}}),a.extend(a.ui.droppable,{version:"1.8.23"}),a.ui.intersect=function(b,c,d){if(!c.offset)return!1;var e=(b.positionAbs||b.position.absolute).left,f=e+b.helperProportions.width,g=(b.positionAbs||b.position.absolute).top,h=g+b.helperProportions.height,i=c.offset.left,j=i+c.proportions.width,k=c.offset.top,l=k+c.proportions.height;
switch(d){case"fit":return e>=i&&j>=f&&g>=k&&l>=h;case"intersect":return i<e+b.helperProportions.width/2&&f-b.helperProportions.width/2<j&&k<g+b.helperProportions.height/2&&h-b.helperProportions.height/2<l;case"pointer":var m=(b.positionAbs||b.position.absolute).left+(b.clickOffset||b.offset.click).left,n=(b.positionAbs||b.position.absolute).top+(b.clickOffset||b.offset.click).top,o=a.ui.isOver(n,m,k,i,c.proportions.height,c.proportions.width);return o;case"touch":return(g>=k&&l>=g||h>=k&&l>=h||k>g&&h>l)&&(e>=i&&j>=e||f>=i&&j>=f||i>e&&f>j);default:return!1}},a.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(b,c){var d=a.ui.ddmanager.droppables[b.options.scope]||[],e=c?c.type:null,f=(b.currentItem||b.element).find(":data(droppable)").andSelf();
g:for(var h=0;h<d.length;h++)if(!(d[h].options.disabled||b&&!d[h].accept.call(d[h].element[0],b.currentItem||b.element))){for(var i=0;i<f.length;i++)if(f[i]==d[h].element[0]){d[h].proportions.height=0;continue g}d[h].visible="none"!=d[h].element.css("display"),d[h].visible&&("mousedown"==e&&d[h]._activate.call(d[h],c),d[h].offset=d[h].element.offset(),d[h].proportions={width:d[h].element[0].offsetWidth,height:d[h].element[0].offsetHeight})}},drop:function(b,c){var d=!1;return a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&a.ui.intersect(b,this,this.options.tolerance)&&(d=this._drop.call(this,c)||d),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],b.currentItem||b.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,c)))
}),d},dragStart:function(b,c){b.element.parents(":not(body,html)").bind("scroll.droppable",function(){b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)})},drag:function(b,c){b.options.refreshPositions&&a.ui.ddmanager.prepareOffsets(b,c),a.each(a.ui.ddmanager.droppables[b.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var d=a.ui.intersect(b,this,this.options.tolerance),e=d||1!=this.isover?d&&0==this.isover?"isover":null:"isout";if(e){var f;if(this.options.greedy){var g=this.element.parents(":data(droppable):eq(0)");g.length&&(f=a.data(g[0],"droppable"),f.greedyChild="isover"==e?1:0)}f&&"isover"==e&&(f.isover=0,f.isout=1,f._out.call(f,c)),this[e]=1,this["isout"==e?"isover":"isout"]=0,this["isover"==e?"_over":"_out"].call(this,c),f&&"isout"==e&&(f.isout=0,f.isover=1,f._over.call(f,c))
}}})},dragStop:function(b,c){b.element.parents(":not(body,html)").unbind("scroll.droppable"),b.options.refreshPositions||a.ui.ddmanager.prepareOffsets(b,c)}}}(jQuery),function(a){a.widget("ui.resizable",a.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var b=this,c=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!c.aspectRatio,aspectRatio:c.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:c.helper||c.ghost||c.animate?c.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=c.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");
var d=this.handles.split(",");this.handles={};for(var e=0;e<d.length;e++){var f=a.trim(d[e]),g="ui-resizable-"+f,h=a('<div class="ui-resizable-handle '+g+'"></div>');h.css({zIndex:c.zIndex}),"se"==f&&h.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[f]=".ui-resizable-"+f,this.element.append(h)}}this._renderAxis=function(b){b=b||this.element;for(var c in this.handles){if(this.handles[c].constructor==String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var d=a(this.handles[c],this.element),e=0;e=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth();
var f=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join("");b.css(f,e),this._proportionallyResize()}a(this.handles[c]).length}},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!b.resizing){if(this.className)var a=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);b.axis=a&&a[1]?a[1]:"se"}}),c.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").hover(function(){c.disabled||(a(this).removeClass("ui-resizable-autohide"),b._handles.show())},function(){c.disabled||b.resizing||(a(this).addClass("ui-resizable-autohide"),b._handles.hide())
})),this._mouseInit()},destroy:function(){this._mouseDestroy();var b=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){b(this.element);var c=this.element;c.after(this.originalElement.css({position:c.css("position"),width:c.outerWidth(),height:c.outerHeight(),top:c.css("top"),left:c.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),b(this.originalElement),this},_mouseCapture:function(b){var c=!1;for(var d in this.handles)a(this.handles[d])[0]==b.target&&(c=!0);return!this.options.disabled&&c
},_mouseStart:function(b){var d=this.options,e=this.element.position(),f=this.element;this.resizing=!0,this.documentScroll={top:a(document).scrollTop(),left:a(document).scrollLeft()},(f.is(".ui-draggable")||/absolute/.test(f.css("position")))&&f.css({position:"absolute",top:e.top,left:e.left}),this._renderProxy();var g=c(this.helper.css("left")),h=c(this.helper.css("top"));d.containment&&(g+=a(d.containment).scrollLeft()||0,h+=a(d.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:g,top:h},this.size=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalSize=this._helper?{width:f.outerWidth(),height:f.outerHeight()}:{width:f.width(),height:f.height()},this.originalPosition={left:g,top:h},this.sizeDiff={width:f.outerWidth()-f.width(),height:f.outerHeight()-f.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof d.aspectRatio?d.aspectRatio:this.originalSize.width/this.originalSize.height||1;
var i=a(".ui-resizable-"+this.axis).css("cursor");return a("body").css("cursor","auto"==i?this.axis+"-resize":i),f.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c=this.helper,g=(this.options,this.originalMousePosition),h=this.axis,i=b.pageX-g.left||0,j=b.pageY-g.top||0,k=this._change[h];if(!k)return!1;{var l=k.apply(this,[b,i,j]);a.browser.msie&&a.browser.version<7,this.sizeDiff}return this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(l=this._updateRatio(l,b)),l=this._respectSize(l,b),this._propagate("resize",b),c.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",b,this.ui()),!1
},_mouseStop:function(b){this.resizing=!1;var c=this.options,d=this;if(this._helper){var e=this._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:d.sizeDiff.height,h=f?0:d.sizeDiff.width,i={width:d.helper.width()-h,height:d.helper.height()-g},j=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,k=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;c.animate||this.element.css(a.extend(i,{top:k,left:j})),d.helper.height(d.size.height),d.helper.width(d.size.width),this._helper&&!c.animate&&this._proportionallyResize()}return a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1
},_updateVirtualBoundaries:function(a){var c,e,f,g,h,b=this.options;h={minWidth:d(b.minWidth)?b.minWidth:0,maxWidth:d(b.maxWidth)?b.maxWidth:1/0,minHeight:d(b.minHeight)?b.minHeight:0,maxHeight:d(b.maxHeight)?b.maxHeight:1/0},(this._aspectRatio||a)&&(c=h.minHeight*this.aspectRatio,f=h.minWidth/this.aspectRatio,e=h.maxHeight*this.aspectRatio,g=h.maxWidth/this.aspectRatio,c>h.minWidth&&(h.minWidth=c),f>h.minHeight&&(h.minHeight=f),e<h.maxWidth&&(h.maxWidth=e),g<h.maxHeight&&(h.maxHeight=g)),this._vBoundaries=h},_updateCache:function(a){this.options;this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)
},_updateRatio:function(a){var e=(this.options,this.position),f=this.size,g=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"==g&&(a.left=e.left+(f.width-a.width),a.top=null),"nw"==g&&(a.top=e.top+(f.height-a.height),a.left=e.left+(f.width-a.width)),a},_respectSize:function(a,b){var e=(this.helper,this._vBoundaries),g=(this._aspectRatio||b.shiftKey,this.axis),h=d(a.width)&&e.maxWidth&&e.maxWidth<a.width,i=d(a.height)&&e.maxHeight&&e.maxHeight<a.height,j=d(a.width)&&e.minWidth&&e.minWidth>a.width,k=d(a.height)&&e.minHeight&&e.minHeight>a.height;j&&(a.width=e.minWidth),k&&(a.height=e.minHeight),h&&(a.width=e.maxWidth),i&&(a.height=e.maxHeight);
var l=this.originalPosition.left+this.originalSize.width,m=this.position.top+this.size.height,n=/sw|nw|w/.test(g),o=/nw|ne|n/.test(g);j&&n&&(a.left=l-e.minWidth),h&&n&&(a.left=l-e.maxWidth),k&&o&&(a.top=m-e.minHeight),i&&o&&(a.top=m-e.maxHeight);var p=!a.width&&!a.height;return p&&!a.left&&a.top?a.top=null:p&&!a.top&&a.left&&(a.left=null),a},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var c=this.helper||this.element,d=0;d<this._proportionallyResizeElements.length;d++){var e=this._proportionallyResizeElements[d];if(!this.borderDif){var f=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],g=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];
this.borderDif=a.map(f,function(a,b){var c=parseInt(a,10)||0,d=parseInt(g[b],10)||0;return c+d})}a.browser.msie&&(a(c).is(":hidden")||a(c).parents(":hidden").length)||e.css({height:c.height()-this.borderDif[0]-this.borderDif[2]||0,width:c.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var b=this.element,c=this.options;if(this.elementOffset=b.offset(),this._helper){this.helper=this.helper||a('<div style="overflow:hidden;"></div>');var d=a.browser.msie&&a.browser.version<7,e=d?1:0,f=d?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+f,height:this.element.outerHeight()+f,position:"absolute",left:this.elementOffset.left-e+"px",top:this.elementOffset.top-e+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()
}else this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var e=(this.options,this.originalSize),f=this.originalPosition;return{left:f.left+b,width:e.width-b}},n:function(a,b,c){var e=(this.options,this.originalSize),f=this.originalPosition;return{top:f.top+c,height:e.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))
},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!=b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.extend(a.ui.resizable,{version:"1.8.23"}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var d=a(this).data("resizable"),e=d.options,f=function(b){a(b).each(function(){var b=a(this);b.data("resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})
})};"object"!=typeof e.alsoResize||e.alsoResize.parentNode?f(e.alsoResize):e.alsoResize.length?(e.alsoResize=e.alsoResize[0],f(e.alsoResize)):a.each(e.alsoResize,function(a){f(a)})},resize:function(b,c){var d=a(this).data("resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)
}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var d=a(this).data("resizable"),e=d.options,f=d._proportionallyResizeElements,g=f.length&&/textarea/i.test(f[0].nodeName),h=g&&a.ui.hasScroll(f[0],"left")?0:d.sizeDiff.height,i=g?0:d.sizeDiff.width,j={width:d.size.width-i,height:d.size.height-h},k=parseInt(d.element.css("left"),10)+(d.position.left-d.originalPosition.left)||null,l=parseInt(d.element.css("top"),10)+(d.position.top-d.originalPosition.top)||null;d.element.animate(a.extend(j,l&&k?{top:l,left:k}:{}),{duration:e.animateDuration,easing:e.animateEasing,step:function(){var c={width:parseInt(d.element.css("width"),10),height:parseInt(d.element.css("height"),10),top:parseInt(d.element.css("top"),10),left:parseInt(d.element.css("left"),10)};
f&&f.length&&a(f[0]).css({width:c.width,height:c.height}),d._updateCache(c),d._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var e=a(this).data("resizable"),f=e.options,g=e.element,h=f.containment,i=h instanceof a?h.get(0):/parent/.test(h)?g.parent().get(0):h;if(i)if(e.containerElement=a(i),/document/.test(h)||h==document)e.containerOffset={left:0,top:0},e.containerPosition={left:0,top:0},e.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight};else{var j=a(i),k=[];a(["Top","Right","Left","Bottom"]).each(function(a,b){k[a]=c(j.css("padding"+b))
}),e.containerOffset=j.offset(),e.containerPosition=j.position(),e.containerSize={height:j.innerHeight()-k[3],width:j.innerWidth()-k[1]};var l=e.containerOffset,m=e.containerSize.height,n=e.containerSize.width,o=a.ui.hasScroll(i,"left")?i.scrollWidth:n,p=a.ui.hasScroll(i)?i.scrollHeight:m;e.parentData={element:i,left:l.left,top:l.top,width:o,height:p}}},resize:function(b){var d=a(this).data("resizable"),e=d.options,g=(d.containerSize,d.containerOffset),i=(d.size,d.position),j=d._aspectRatio||b.shiftKey,k={top:0,left:0},l=d.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(k=g),i.left<(d._helper?g.left:0)&&(d.size.width=d.size.width+(d._helper?d.position.left-g.left:d.position.left-k.left),j&&(d.size.height=d.size.width/d.aspectRatio),d.position.left=e.helper?g.left:0),i.top<(d._helper?g.top:0)&&(d.size.height=d.size.height+(d._helper?d.position.top-g.top:d.position.top),j&&(d.size.width=d.size.height*d.aspectRatio),d.position.top=d._helper?g.top:0),d.offset.left=d.parentData.left+d.position.left,d.offset.top=d.parentData.top+d.position.top;
var m=Math.abs((d._helper?d.offset.left-k.left:d.offset.left-k.left)+d.sizeDiff.width),n=Math.abs((d._helper?d.offset.top-k.top:d.offset.top-g.top)+d.sizeDiff.height),o=d.containerElement.get(0)==d.element.parent().get(0),p=/relative|absolute/.test(d.containerElement.css("position"));o&&p&&(m-=d.parentData.left),m+d.size.width>=d.parentData.width&&(d.size.width=d.parentData.width-m,j&&(d.size.height=d.size.width/d.aspectRatio)),n+d.size.height>=d.parentData.height&&(d.size.height=d.parentData.height-n,j&&(d.size.width=d.size.height*d.aspectRatio))},stop:function(){var d=a(this).data("resizable"),e=d.options,g=(d.position,d.containerOffset),h=d.containerPosition,i=d.containerElement,j=a(d.helper),k=j.offset(),l=j.outerWidth()-d.sizeDiff.width,m=j.outerHeight()-d.sizeDiff.height;
d._helper&&!e.animate&&/relative/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m}),d._helper&&!e.animate&&/static/.test(i.css("position"))&&a(this).css({left:k.left-h.left-g.left,width:l,height:m})}}),a.ui.plugin.add("resizable","ghost",{start:function(){var d=a(this).data("resizable"),e=d.options,f=d.size;d.ghost=d.originalElement.clone(),d.ghost.css({opacity:.25,display:"block",position:"relative",height:f.height,width:f.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof e.ghost?e.ghost:""),d.ghost.appendTo(d.helper)},resize:function(){{var d=a(this).data("resizable");d.options}d.ghost&&d.ghost.css({position:"relative",height:d.size.height,width:d.size.width})
},stop:function(){{var d=a(this).data("resizable");d.options}d.ghost&&d.helper&&d.helper.get(0).removeChild(d.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(b){{var d=a(this).data("resizable"),e=d.options,f=d.size,g=d.originalSize,h=d.originalPosition,i=d.axis;e._aspectRatio||b.shiftKey}e.grid="number"==typeof e.grid?[e.grid,e.grid]:e.grid;var k=Math.round((f.width-g.width)/(e.grid[0]||1))*(e.grid[0]||1),l=Math.round((f.height-g.height)/(e.grid[1]||1))*(e.grid[1]||1);/^(se|s|e)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l):/^(ne)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l):/^(sw)$/.test(i)?(d.size.width=g.width+k,d.size.height=g.height+l,d.position.left=h.left-k):(d.size.width=g.width+k,d.size.height=g.height+l,d.position.top=h.top-l,d.position.left=h.left-k)
}});var c=function(a){return parseInt(a,10)||0},d=function(a){return!isNaN(parseInt(a,10))}}(jQuery),function(a){a.widget("ui.selectable",a.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var b=this;this.element.addClass("ui-selectable"),this.dragged=!1;var c;this.refresh=function(){c=a(b.options.filter,b.element[0]),c.addClass("ui-selectee"),c.each(function(){var b=a(this),c=b.offset();a.data(this,"selectable-item",{element:this,$element:b,left:c.left,top:c.top,right:c.left+b.outerWidth(),bottom:c.top+b.outerHeight(),startselected:!1,selected:b.hasClass("ui-selected"),selecting:b.hasClass("ui-selecting"),unselecting:b.hasClass("ui-unselecting")})
})},this.refresh(),this.selectees=c.addClass("ui-selectee"),this._mouseInit(),this.helper=a("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(b){var c=this;if(this.opos=[b.pageX,b.pageY],!this.options.disabled){var d=this.options;this.selectees=a(d.filter,this.element[0]),this._trigger("start",b),a(d.appendTo).append(this.helper),this.helper.css({left:b.clientX,top:b.clientY,width:0,height:0}),d.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var d=a.data(this,"selectable-item");
d.startselected=!0,!b.metaKey&&!b.ctrlKey&&(d.$element.removeClass("ui-selected"),d.selected=!1,d.$element.addClass("ui-unselecting"),d.unselecting=!0,c._trigger("unselecting",b,{unselecting:d.element}))}),a(b.target).parents().andSelf().each(function(){var d=a.data(this,"selectable-item");if(d){var e=!b.metaKey&&!b.ctrlKey||!d.$element.hasClass("ui-selected");return d.$element.removeClass(e?"ui-unselecting":"ui-selected").addClass(e?"ui-selecting":"ui-unselecting"),d.unselecting=!e,d.selecting=e,d.selected=e,e?c._trigger("selecting",b,{selecting:d.element}):c._trigger("unselecting",b,{unselecting:d.element}),!1}})}},_mouseDrag:function(b){var c=this;if(this.dragged=!0,!this.options.disabled){var d=this.options,e=this.opos[0],f=this.opos[1],g=b.pageX,h=b.pageY;
if(e>g){var i=g;g=e,e=i}if(f>h){var i=h;h=f,f=i}return this.helper.css({left:e,top:f,width:g-e,height:h-f}),this.selectees.each(function(){var i=a.data(this,"selectable-item");if(i&&i.element!=c.element[0]){var j=!1;"touch"==d.tolerance?j=!(i.left>g||i.right<e||i.top>h||i.bottom<f):"fit"==d.tolerance&&(j=i.left>e&&i.right<g&&i.top>f&&i.bottom<h),j?(i.selected&&(i.$element.removeClass("ui-selected"),i.selected=!1),i.unselecting&&(i.$element.removeClass("ui-unselecting"),i.unselecting=!1),i.selecting||(i.$element.addClass("ui-selecting"),i.selecting=!0,c._trigger("selecting",b,{selecting:i.element}))):(i.selecting&&((b.metaKey||b.ctrlKey)&&i.startselected?(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.$element.addClass("ui-selected"),i.selected=!0):(i.$element.removeClass("ui-selecting"),i.selecting=!1,i.startselected&&(i.$element.addClass("ui-unselecting"),i.unselecting=!0),c._trigger("unselecting",b,{unselecting:i.element}))),i.selected&&!b.metaKey&&!b.ctrlKey&&!i.startselected&&(i.$element.removeClass("ui-selected"),i.selected=!1,i.$element.addClass("ui-unselecting"),i.unselecting=!0,c._trigger("unselecting",b,{unselecting:i.element})))
}}),!1}},_mouseStop:function(b){var c=this;this.dragged=!1;this.options;return a(".ui-unselecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-unselecting"),d.unselecting=!1,d.startselected=!1,c._trigger("unselected",b,{unselected:d.element})}),a(".ui-selecting",this.element[0]).each(function(){var d=a.data(this,"selectable-item");d.$element.removeClass("ui-selecting").addClass("ui-selected"),d.selecting=!1,d.selected=!0,d.startselected=!0,c._trigger("selected",b,{selected:d.element})}),this._trigger("stop",b),this.helper.remove(),!1}}),a.extend(a.ui.selectable,{version:"1.8.23"})}(jQuery),function(a){a.widget("ui.sortable",a.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var a=this.options;
this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===a.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){a.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var b=this.items.length-1;b>=0;b--)this.items[b].item.removeData(this.widgetName+"-item");return this},_setOption:function(b,c){"disabled"===b?(this.options[b]=c,this.widget()[c?"addClass":"removeClass"]("ui-sortable-disabled")):a.Widget.prototype._setOption.apply(this,arguments)
},_mouseCapture:function(b,c){var d=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(b);{var e=null,f=this;a(b.target).parents().each(function(){return a.data(this,d.widgetName+"-item")==f?(e=a(this),!1):void 0})}if(a.data(b.target,d.widgetName+"-item")==f&&(e=a(b.target)),!e)return!1;if(this.options.handle&&!c){var h=!1;if(a(this.options.handle,e).find("*").andSelf().each(function(){this==b.target&&(h=!0)}),!h)return!1}return this.currentItem=e,this._removeCurrentsFromItems(),!0},_mouseStart:function(b,c,d){var e=this.options,f=this;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(b),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,e.cursorAt&&this._adjustOffsetFromHelper(e.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),e.containment&&this._setContainment(),e.cursor&&(a("body").css("cursor")&&(this._storedCursor=a("body").css("cursor")),a("body").css("cursor",e.cursor)),e.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",e.opacity)),e.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",e.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",b,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!d)for(var g=this.containers.length-1;g>=0;g--)this.containers[g]._trigger("activate",b,f._uiHash(this));
return a.ui.ddmanager&&(a.ui.ddmanager.current=this),a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(b),!0},_mouseDrag:function(b){if(this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var c=this.options,d=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-b.pageY<c.scrollSensitivity?this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop+c.scrollSpeed:b.pageY-this.overflowOffset.top<c.scrollSensitivity&&(this.scrollParent[0].scrollTop=d=this.scrollParent[0].scrollTop-c.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-b.pageX<c.scrollSensitivity?this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft+c.scrollSpeed:b.pageX-this.overflowOffset.left<c.scrollSensitivity&&(this.scrollParent[0].scrollLeft=d=this.scrollParent[0].scrollLeft-c.scrollSpeed)):(b.pageY-a(document).scrollTop()<c.scrollSensitivity?d=a(document).scrollTop(a(document).scrollTop()-c.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<c.scrollSensitivity&&(d=a(document).scrollTop(a(document).scrollTop()+c.scrollSpeed)),b.pageX-a(document).scrollLeft()<c.scrollSensitivity?d=a(document).scrollLeft(a(document).scrollLeft()-c.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<c.scrollSensitivity&&(d=a(document).scrollLeft(a(document).scrollLeft()+c.scrollSpeed))),d!==!1&&a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b)
}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var e=this.items.length-1;e>=0;e--){var f=this.items[e],g=f.item[0],h=this._intersectsWithPointer(f);if(h&&g!=this.currentItem[0]&&this.placeholder[1==h?"next":"prev"]()[0]!=g&&!a.ui.contains(this.placeholder[0],g)&&("semi-dynamic"==this.options.type?!a.ui.contains(this.element[0],g):!0)){if(this.direction=1==h?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(f))break;this._rearrange(b,f),this._trigger("change",b,this._uiHash());
break}}return this._contactContainers(b),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),this._trigger("sort",b,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(b,c){if(b){if(a.ui.ddmanager&&!this.options.dropBehaviour&&a.ui.ddmanager.drop(this,b),this.options.revert){var d=this,e=d.placeholder.offset();d.reverting=!0,a(this.helper).animate({left:e.left-this.offset.parent.left-d.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:e.top-this.offset.parent.top-d.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){d._clear(b)
})}else this._clear(b,c);return!1}},cancel:function(){var b=this;if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var c=this.containers.length-1;c>=0;c--)this.containers[c]._trigger("deactivate",null,b._uiHash(this)),this.containers[c].containerCache.over&&(this.containers[c]._trigger("out",null,b._uiHash(this)),this.containers[c].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),a.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?a(this.domPosition.prev).after(this.currentItem):a(this.domPosition.parent).prepend(this.currentItem)),this
},serialize:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},a(c).each(function(){var c=(a(b.item||this).attr(b.attribute||"id")||"").match(b.expression||/(.+)[-=_](.+)/);c&&d.push((b.key||c[1]+"[]")+"="+(b.key&&b.expression?c[1]:c[2]))}),!d.length&&b.key&&d.push(b.key+"="),d.join("&")},toArray:function(b){var c=this._getItemsAsjQuery(b&&b.connected),d=[];return b=b||{},c.each(function(){d.push(a(b.item||this).attr(b.attribute||"id")||"")}),d},_intersectsWith:function(a){var b=this.positionAbs.left,c=b+this.helperProportions.width,d=this.positionAbs.top,e=d+this.helperProportions.height,f=a.left,g=f+a.width,h=a.top,i=h+a.height,j=this.offset.click.top,k=this.offset.click.left,l=d+j>h&&i>d+j&&b+k>f&&g>b+k;
return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>a[this.floating?"width":"height"]?l:f<b+this.helperProportions.width/2&&c-this.helperProportions.width/2<g&&h<d+this.helperProportions.height/2&&e-this.helperProportions.height/2<i},_intersectsWithPointer:function(b){var c="x"===this.options.axis||a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top,b.height),d="y"===this.options.axis||a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left,b.width),e=c&&d,f=this._getDragVerticalDirection(),g=this._getDragHorizontalDirection();
return e?this.floating?g&&"right"==g||"down"==f?2:1:f&&("down"==f?2:1):!1},_intersectsWithSides:function(b){var c=a.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,b.top+b.height/2,b.height),d=a.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,b.left+b.width/2,b.width),e=this._getDragVerticalDirection(),f=this._getDragHorizontalDirection();return this.floating&&f?"right"==f&&d||"left"==f&&!d:e&&("down"==e&&c||"up"==e&&!c)},_getDragVerticalDirection:function(){var a=this.positionAbs.top-this.lastPositionAbs.top;return 0!=a&&(a>0?"down":"up")},_getDragHorizontalDirection:function(){var a=this.positionAbs.left-this.lastPositionAbs.left;return 0!=a&&(a>0?"right":"left")
},refresh:function(a){return this._refreshItems(a),this.refreshPositions(),this},_connectWith:function(){var a=this.options;return a.connectWith.constructor==String?[a.connectWith]:a.connectWith},_getItemsAsjQuery:function(b){var d=[],e=[],f=this._connectWith();if(f&&b)for(var g=f.length-1;g>=0;g--)for(var h=a(f[g]),i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&e.push([a.isFunction(j.options.items)?j.options.items.call(j.element):a(j.options.items,j.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),j])}e.push([a.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):a(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);
for(var g=e.length-1;g>=0;g--)e[g][0].each(function(){d.push(this)});return a(d)},_removeCurrentsFromItems:function(){for(var a=this.currentItem.find(":data("+this.widgetName+"-item)"),b=0;b<this.items.length;b++)for(var c=0;c<a.length;c++)a[c]==this.items[b].item[0]&&this.items.splice(b,1)},_refreshItems:function(b){this.items=[],this.containers=[this];var c=this.items,e=[[a.isFunction(this.options.items)?this.options.items.call(this.element[0],b,{item:this.currentItem}):a(this.options.items,this.element),this]],f=this._connectWith();if(f&&this.ready)for(var g=f.length-1;g>=0;g--)for(var h=a(f[g]),i=h.length-1;i>=0;i--){var j=a.data(h[i],this.widgetName);j&&j!=this&&!j.options.disabled&&(e.push([a.isFunction(j.options.items)?j.options.items.call(j.element[0],b,{item:this.currentItem}):a(j.options.items,j.element),j]),this.containers.push(j))
}for(var g=e.length-1;g>=0;g--)for(var k=e[g][1],l=e[g][0],i=0,m=l.length;m>i;i++){var n=a(l[i]);n.data(this.widgetName+"-item",k),c.push({item:n,instance:k,width:0,height:0,left:0,top:0})}},refreshPositions:function(b){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var c=this.items.length-1;c>=0;c--){var d=this.items[c];if(d.instance==this.currentContainer||!this.currentContainer||d.item[0]==this.currentItem[0]){var e=this.options.toleranceElement?a(this.options.toleranceElement,d.item):d.item;b||(d.width=e.outerWidth(),d.height=e.outerHeight());var f=e.offset();d.left=f.left,d.top=f.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);
else for(var c=this.containers.length-1;c>=0;c--){var f=this.containers[c].element.offset();this.containers[c].containerCache.left=f.left,this.containers[c].containerCache.top=f.top,this.containers[c].containerCache.width=this.containers[c].element.outerWidth(),this.containers[c].containerCache.height=this.containers[c].element.outerHeight()}return this},_createPlaceholder:function(b){var c=b||this,d=c.options;if(!d.placeholder||d.placeholder.constructor==String){var e=d.placeholder;d.placeholder={element:function(){var b=a(document.createElement(c.currentItem[0].nodeName)).addClass(e||c.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];
return e||(b.style.visibility="hidden"),b},update:function(a,b){(!e||d.forcePlaceholderSize)&&(b.height()||b.height(c.currentItem.innerHeight()-parseInt(c.currentItem.css("paddingTop")||0,10)-parseInt(c.currentItem.css("paddingBottom")||0,10)),b.width()||b.width(c.currentItem.innerWidth()-parseInt(c.currentItem.css("paddingLeft")||0,10)-parseInt(c.currentItem.css("paddingRight")||0,10)))}}}c.placeholder=a(d.placeholder.element.call(c.element,c.currentItem)),c.currentItem.after(c.placeholder),d.placeholder.update(c,c.placeholder)},_contactContainers:function(b){for(var c=null,d=null,e=this.containers.length-1;e>=0;e--)if(!a.ui.contains(this.currentItem[0],this.containers[e].element[0]))if(this._intersectsWith(this.containers[e].containerCache)){if(c&&a.ui.contains(this.containers[e].element[0],c.element[0]))continue;
c=this.containers[e],d=e}else this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",b,this._uiHash(this)),this.containers[e].containerCache.over=0);if(c)if(1===this.containers.length)this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1;else if(this.currentContainer!=this.containers[d]){for(var f=1e4,g=null,h=this.positionAbs[this.containers[d].floating?"left":"top"],i=this.items.length-1;i>=0;i--)if(a.ui.contains(this.containers[d].element[0],this.items[i].item[0])){var j=this.containers[d].floating?this.items[i].item.offset().left:this.items[i].item.offset().top;Math.abs(j-h)<f&&(f=Math.abs(j-h),g=this.items[i],this.direction=j-h>0?"down":"up")
}if(!g&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[d],g?this._rearrange(b,g,null,!0):this._rearrange(b,null,this.containers[d].element,!0),this._trigger("change",b,this._uiHash()),this.containers[d]._trigger("change",b,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[d]._trigger("over",b,this._uiHash(this)),this.containers[d].containerCache.over=1}},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b,this.currentItem])):"clone"==c.helper?this.currentItem.clone():this.currentItem;return d.parents("body").length||a("parent"!=c.appendTo?c.appendTo:this.currentItem[0].parentNode)[0].appendChild(d[0]),d[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==d[0].style.width||c.forceHelperSize)&&d.width(this.currentItem.width()),(""==d[0].style.height||c.forceHelperSize)&&d.height(this.currentItem.height()),d
},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&a.browser.msie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}
},_getRelativeOffset:function(){if("relative"==this.cssPosition){var a=this.currentItem.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;if("parent"==b.containment&&(b.containment=this.helper[0].parentNode),("document"==b.containment||"window"==b.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,a("document"==b.containment?document:window).width()-this.helperProportions.width-this.margins.left,(a("document"==b.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(b.containment)){var c=a(b.containment)[0],d=a(b.containment).offset(),e="hidden"!=a(c).css("overflow");
this.containment=[d.left+(parseInt(a(c).css("borderLeftWidth"),10)||0)+(parseInt(a(c).css("paddingLeft"),10)||0)-this.margins.left,d.top+(parseInt(a(c).css("borderTopWidth"),10)||0)+(parseInt(a(c).css("paddingTop"),10)||0)-this.margins.top,d.left+(e?Math.max(c.scrollWidth,c.offsetWidth):c.offsetWidth)-(parseInt(a(c).css("borderLeftWidth"),10)||0)-(parseInt(a(c).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,d.top+(e?Math.max(c.scrollHeight,c.offsetHeight):c.offsetHeight)-(parseInt(a(c).css("borderTopWidth"),10)||0)-(parseInt(a(c).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(b,c){c||(c=this.position);
var d="absolute"==b?1:-1,f=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&"fixed"==this.cssPosition?0:("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,e=/(html|body)/i.test(d[0].tagName);
"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var f=b.pageX,g=b.pageY;if(this.originalPosition&&(this.containment&&(b.pageX-this.offset.click.left<this.containment[0]&&(f=this.containment[0]+this.offset.click.left),b.pageY-this.offset.click.top<this.containment[1]&&(g=this.containment[1]+this.offset.click.top),b.pageX-this.offset.click.left>this.containment[2]&&(f=this.containment[2]+this.offset.click.left),b.pageY-this.offset.click.top>this.containment[3]&&(g=this.containment[3]+this.offset.click.top)),c.grid)){var h=this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1];
g=this.containment&&(h-this.offset.click.top<this.containment[1]||h-this.offset.click.top>this.containment[3])?h-this.offset.click.top<this.containment[1]?h+c.grid[1]:h-c.grid[1]:h;var i=this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0];f=this.containment&&(i-this.offset.click.left<this.containment[0]||i-this.offset.click.left>this.containment[2])?i-this.offset.click.left<this.containment[0]?i+c.grid[0]:i-c.grid[0]:i}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&"fixed"==this.cssPosition?0:"fixed"==this.cssPosition?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}
},_rearrange:function(a,b,c,d){c?c[0].appendChild(this.placeholder[0]):b.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?b.item[0]:b.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var e=this,f=this.counter;window.setTimeout(function(){f==e.counter&&e.refreshPositions(!d)},0)},_clear:function(b,c){this.reverting=!1;var d=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var f in this._storedCSS)("auto"==this._storedCSS[f]||"static"==this._storedCSS[f])&&(this._storedCSS[f]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")
}else this.currentItem.show();if(this.fromOutside&&!c&&d.push(function(a){this._trigger("receive",a,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!c&&d.push(function(a){this._trigger("update",a,this._uiHash())}),!a.ui.contains(this.element[0],this.currentItem[0])){c||d.push(function(a){this._trigger("remove",a,this._uiHash())});for(var f=this.containers.length-1;f>=0;f--)a.ui.contains(this.containers[f].element[0],this.currentItem[0])&&!c&&(d.push(function(a){return function(b){a._trigger("receive",b,this._uiHash(this))}
}.call(this,this.containers[f])),d.push(function(a){return function(b){a._trigger("update",b,this._uiHash(this))}}.call(this,this.containers[f])))}for(var f=this.containers.length-1;f>=0;f--)c||d.push(function(a){return function(b){a._trigger("deactivate",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over&&(d.push(function(a){return function(b){a._trigger("out",b,this._uiHash(this))}}.call(this,this.containers[f])),this.containers[f].containerCache.over=0);if(this._storedCursor&&a("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!c){this._trigger("beforeStop",b,this._uiHash());
for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!1}if(c||this._trigger("beforeStop",b,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!c){for(var f=0;f<d.length;f++)d[f].call(this,b);this._trigger("stop",b,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){a.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(b){var c=b||this;return{helper:c.helper,placeholder:c.placeholder||a([]),position:c.position,originalPosition:c.originalPosition,offset:c.positionAbs,item:c.currentItem,sender:b?b.element:null}
}}),a.extend(a.ui.sortable,{version:"1.8.23"})}(jQuery),function(a){a.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var b=this,c=b.options;if(b.running=0,b.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),b.headers=b.element.find(c.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){c.disabled||a(this).addClass("ui-state-hover")
}).bind("mouseleave.accordion",function(){c.disabled||a(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){c.disabled||a(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){c.disabled||a(this).removeClass("ui-state-focus")}),b.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom"),c.navigation){var d=b.element.find("a").filter(c.navigationFilter).eq(0);if(d.length){var e=d.closest(".ui-accordion-header");b.active=e.length?e:d.closest(".ui-accordion-content").prev()}}b.active=b._findActive(b.active||c.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),b.active.next().addClass("ui-accordion-content-active"),b._createIcons(),b.resize(),b.element.attr("role","tablist"),b.headers.attr("role","tab").bind("keydown.accordion",function(a){return b._keydown(a)
}).next().attr("role","tabpanel"),b.headers.not(b.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),b.active.length?b.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):b.headers.eq(0).attr("tabIndex",0),a.browser.safari||b.headers.find("a").attr("tabIndex",-1),c.event&&b.headers.bind(c.event.split(" ").join(".accordion ")+".accordion",function(a){b._clickHandler.call(b,a,this),a.preventDefault()})},_createIcons:function(){var b=this.options;b.icons&&(a("<span></span>").addClass("ui-icon "+b.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(b.icons.header).toggleClass(b.icons.headerSelected),this.element.addClass("ui-accordion-icons"))
},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var b=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var c=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");
return(b.autoHeight||b.fillHeight)&&c.css("height",""),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"active"==b&&this.activate(c),"icons"==b&&(this._destroyIcons(),c&&this._createIcons()),"disabled"==b&&this.headers.add(this.headers.next())[c?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(b){if(!(this.options.disabled||b.altKey||b.ctrlKey)){var c=a.ui.keyCode,d=this.headers.length,e=this.headers.index(b.target),f=!1;switch(b.keyCode){case c.RIGHT:case c.DOWN:f=this.headers[(e+1)%d];break;case c.LEFT:case c.UP:f=this.headers[(e-1+d)%d];break;case c.SPACE:case c.ENTER:this._clickHandler({target:b.target},b.target),b.preventDefault()
}return f?(a(b.target).attr("tabIndex",-1),a(f).attr("tabIndex",0),f.focus(),!1):!0}},resize:function(){var c,b=this.options;if(b.fillSpace){if(a.browser.msie){var d=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}c=this.element.parent().height(),a.browser.msie&&this.element.parent().css("overflow",d),this.headers.each(function(){c-=a(this).outerHeight(!0)}),this.headers.next().each(function(){a(this).height(Math.max(0,c-a(this).innerHeight()+a(this).height()))}).css("overflow","auto")}else b.autoHeight&&(c=0,this.headers.next().each(function(){c=Math.max(c,a(this).height("").height())}).height(c));return this},activate:function(a){this.options.active=a;
var b=this._findActive(a)[0];return this._clickHandler({target:b},b),this},_findActive:function(b){return b?"number"==typeof b?this.headers.filter(":eq("+b+")"):this.headers.not(this.headers.not(b)):b===!1?a([]):this.headers.filter(":eq(0)")},_clickHandler:function(b,c){var d=this.options;if(!d.disabled){if(!b.target){if(!d.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),this.active.next().addClass("ui-accordion-content-active");var e=this.active.next(),f={options:d,newHeader:a([]),oldHeader:d.active,newContent:a([]),oldContent:e},g=this.active=a([]);
return void this._toggle(g,e,f)}var h=a(b.currentTarget||c),i=h[0]===this.active[0];if(d.active=d.collapsible&&i?!1:this.headers.index(h),!(this.running||!d.collapsible&&i)){var j=this.active,g=h.next(),e=this.active.next(),f={options:d,newHeader:i&&d.collapsible?a([]):h,oldHeader:this.active,newContent:i&&d.collapsible?a([]):g,oldContent:e},k=this.headers.index(this.active[0])>this.headers.index(h[0]);this.active=i?a([]):h,this._toggle(g,e,f,i,k),j.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(d.icons.headerSelected).addClass(d.icons.header),i||(h.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(d.icons.header).addClass(d.icons.headerSelected),h.next().addClass("ui-accordion-content-active"))
}}},_toggle:function(b,c,d,e,f){var g=this,h=g.options;g.toShow=b,g.toHide=c,g.data=d;var i=function(){return g?g._completed.apply(g,arguments):void 0};if(g._trigger("changestart",null,g.data),g.running=0===c.size()?b.size():c.size(),h.animated){var j={};j=h.collapsible&&e?{toShow:a([]),toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace}:{toShow:b,toHide:c,complete:i,down:f,autoHeight:h.autoHeight||h.fillSpace},h.proxied||(h.proxied=h.animated),h.proxiedDuration||(h.proxiedDuration=h.duration),h.animated=a.isFunction(h.proxied)?h.proxied(j):h.proxied,h.duration=a.isFunction(h.proxiedDuration)?h.proxiedDuration(j):h.proxiedDuration;var k=a.ui.accordion.animations,l=h.duration,m=h.animated;
m&&!k[m]&&!a.easing[m]&&(m="slide"),k[m]||(k[m]=function(a){this.slide(a,{easing:m,duration:l||700})}),k[m](j)}else h.collapsible&&e?b.toggle():(c.hide(),b.show()),i(!0);c.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),b.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(a){this.running=a?0:--this.running,this.running||(this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data))
}}),a.extend(a.ui.accordion,{version:"1.8.23",animations:{slide:function(b,c){if(b=a.extend({easing:"swing",duration:300},b,c),!b.toHide.size())return void b.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},b);if(!b.toShow.size())return void b.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},b);var i,d=b.toShow.css("overflow"),e=0,f={},g={},h=["height","paddingTop","paddingBottom"],j=b.toShow;i=j[0].style.width,j.width(j.parent().width()-parseFloat(j.css("paddingLeft"))-parseFloat(j.css("paddingRight"))-(parseFloat(j.css("borderLeftWidth"))||0)-(parseFloat(j.css("borderRightWidth"))||0)),a.each(h,function(c,d){g[d]="hide";
var e=(""+a.css(b.toShow[0],d)).match(/^([\d+-.]+)(.*)$/);f[d]={value:e[1],unit:e[2]||"px"}}),b.toShow.css({height:0,overflow:"hidden"}).show(),b.toHide.filter(":hidden").each(b.complete).end().filter(":visible").animate(g,{step:function(a,c){"height"==c.prop&&(e=c.end-c.start===0?0:(c.now-c.start)/(c.end-c.start)),b.toShow[0].style[c.prop]=e*f[c.prop].value+f[c.prop].unit},duration:b.duration,easing:b.easing,complete:function(){b.autoHeight||b.toShow.css("height",""),b.toShow.css({width:i,overflow:d}),b.complete()}})},bounceslide:function(a){this.slide(a,{easing:a.down?"easeOutBounce":"swing",duration:a.down?1e3:200})}}})}(jQuery),function(a){var c=0;a.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var d,b=this,c=this.element[0].ownerDocument;
this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(c){if(!b.options.disabled&&!b.element.propAttr("readOnly")){d=!1;var e=a.ui.keyCode;switch(c.keyCode){case e.PAGE_UP:b._move("previousPage",c);break;case e.PAGE_DOWN:b._move("nextPage",c);break;case e.UP:b._keyEvent("previous",c);break;case e.DOWN:b._keyEvent("next",c);break;case e.ENTER:case e.NUMPAD_ENTER:b.menu.active&&(d=!0,c.preventDefault());case e.TAB:if(!b.menu.active)return;b.menu.select(c);break;case e.ESCAPE:b.element.val(b.term),b.close(c);
break;default:clearTimeout(b.searching),b.searching=setTimeout(function(){b.term!=b.element.val()&&(b.selectedItem=null,b.search(null,c))},b.options.delay)}}}).bind("keypress.autocomplete",function(a){d&&(d=!1,a.preventDefault())}).bind("focus.autocomplete",function(){b.options.disabled||(b.selectedItem=null,b.previous=b.element.val())}).bind("blur.autocomplete",function(a){b.options.disabled||(clearTimeout(b.searching),b.closing=setTimeout(function(){b.close(a),b._change(a)},150))}),this._initSource(),this.menu=a("<ul></ul>").addClass("ui-autocomplete").appendTo(a(this.options.appendTo||"body",c)[0]).mousedown(function(c){var d=b.menu.element[0];a(c.target).closest(".ui-menu-item").length||setTimeout(function(){a(document).one("mousedown",function(c){c.target!==b.element[0]&&c.target!==d&&!a.ui.contains(d,c.target)&&b.close()
})},1),setTimeout(function(){clearTimeout(b.closing)},13)}).menu({focus:function(a,c){var d=c.item.data("item.autocomplete");!1!==b._trigger("focus",a,{item:d})&&/^key/.test(a.originalEvent.type)&&b.element.val(d.value)},selected:function(a,d){var e=d.item.data("item.autocomplete"),f=b.previous;b.element[0]!==c.activeElement&&(b.element.focus(),b.previous=f,setTimeout(function(){b.previous=f,b.selectedItem=e},1)),!1!==b._trigger("select",a,{item:e})&&b.element.val(e.value),b.term=b.element.val(),b.close(a),b.selectedItem=e},blur:function(){b.menu.element.is(":visible")&&b.element.val()!==b.term&&b.element.val(b.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),a.fn.bgiframe&&this.menu.element.bgiframe(),b.beforeunloadHandler=function(){b.element.removeAttr("autocomplete")
},a(window).bind("beforeunload",b.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),a(window).unbind("beforeunload",this.beforeunloadHandler),a.Widget.prototype.destroy.call(this)},_setOption:function(b,c){a.Widget.prototype._setOption.apply(this,arguments),"source"===b&&this._initSource(),"appendTo"===b&&this.menu.element.appendTo(a(c||"body",this.element[0].ownerDocument)[0]),"disabled"===b&&c&&this.xhr&&this.xhr.abort()},_initSource:function(){var c,d,b=this;a.isArray(this.options.source)?(c=this.options.source,this.source=function(b,d){d(a.ui.autocomplete.filter(c,b.term))
}):"string"==typeof this.options.source?(d=this.options.source,this.source=function(c,e){b.xhr&&b.xhr.abort(),b.xhr=a.ajax({url:d,data:c,dataType:"json",success:function(a){e(a)},error:function(){e([])}})}):this.source=this.options.source},search:function(a,b){return a=null!=a?a:this.element.val(),this.term=this.element.val(),a.length<this.options.minLength?this.close(b):(clearTimeout(this.closing),this._trigger("search",b)!==!1?this._search(a):void 0)},_search:function(a){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:a},this._response())},_response:function(){var a=this,b=++c;return function(d){b===c&&a.__response(d),a.pending--,a.pending||a.element.removeClass("ui-autocomplete-loading")
}},__response:function(a){!this.options.disabled&&a&&a.length?(a=this._normalize(a),this._suggest(a),this._trigger("open")):this.close()},close:function(a){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",a))},_change:function(a){this.previous!==this.element.val()&&this._trigger("change",a,{item:this.selectedItem})},_normalize:function(b){return b.length&&b[0].label&&b[0].value?b:a.map(b,function(b){return"string"==typeof b?{label:b,value:b}:a.extend({label:b.label||b.value,value:b.value||b.label},b)})},_suggest:function(b){var c=this.menu.element.empty().zIndex(this.element.zIndex()+1);
this._renderMenu(c,b),this.menu.deactivate(),this.menu.refresh(),c.show(),this._resizeMenu(),c.position(a.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new a.Event("mouseover"))},_resizeMenu:function(){var a=this.menu.element;a.outerWidth(Math.max(a.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(b,c){var d=this;a.each(c,function(a,c){d._renderItem(b,c)})},_renderItem:function(b,c){return a("<li></li>").data("item.autocomplete",c).append(a("<a></a>").text(c.label)).appendTo(b)},_move:function(a,b){return this.menu.element.is(":visible")?this.menu.first()&&/^previous/.test(a)||this.menu.last()&&/^next/.test(a)?(this.element.val(this.term),void this.menu.deactivate()):void this.menu[a](b):void this.search(null,b)
},widget:function(){return this.menu.element},_keyEvent:function(a,b){(!this.isMultiLine||this.menu.element.is(":visible"))&&(this._move(a,b),b.preventDefault())}}),a.extend(a.ui.autocomplete,{escapeRegex:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(b,c){var d=new RegExp(a.ui.autocomplete.escapeRegex(c),"i");return a.grep(b,function(a){return d.test(a.label||a.value||a)})}})}(jQuery),function(a){a.widget("ui.menu",{_create:function(){var b=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(c){a(c.target).closest(".ui-menu-item a").length&&(c.preventDefault(),b.select(c))
}),this.refresh()},refresh:function(){var b=this,c=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");c.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(c){b.activate(c,a(this).parent())}).mouseleave(function(){b.deactivate()})},activate:function(a,b){if(this.deactivate(),this.hasScroll()){var c=b.offset().top-this.element.offset().top,d=this.element.scrollTop(),e=this.element.height();0>c?this.element.scrollTop(d+c):c>=e&&this.element.scrollTop(d+c-e+b.height())}this.active=b.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",a,{item:b})
},deactivate:function(){this.active&&(this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null)},next:function(a){this.move("next",".ui-menu-item:first",a)},previous:function(a){this.move("prev",".ui-menu-item:last",a)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(a,b,c){if(!this.active)return void this.activate(c,this.element.children(b));var d=this.active[a+"All"](".ui-menu-item").eq(0);d.length?this.activate(c,d):this.activate(c,this.element.children(b))},nextPage:function(b){if(this.hasScroll()){if(!this.active||this.last())return void this.activate(b,this.element.children(".ui-menu-item:first"));
var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c-d+a(this).height();return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:last")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(b){if(this.hasScroll()){if(!this.active||this.first())return void this.activate(b,this.element.children(".ui-menu-item:last"));var c=this.active.offset().top,d=this.element.height(),e=this.element.children(".ui-menu-item").filter(function(){var b=a(this).offset().top-c+d-a(this).height();
return 10>b&&b>-10});e.length||(e=this.element.children(".ui-menu-item:first")),this.activate(b,e)}else this.activate(b,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[a.fn.prop?"prop":"attr"]("scrollHeight")},select:function(a){this._trigger("selected",a,{item:this.active})}})}(jQuery),function(a){var c,d,e,f,g="ui-button ui-widget ui-state-default ui-corner-all",h="ui-state-hover ui-state-active ",i="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",j=function(){var b=a(this).find(":ui-button");
setTimeout(function(){b.button("refresh")},1)},k=function(b){var c=b.name,d=b.form,e=a([]);return c&&(e=d?a(d).find("[name='"+c+"']"):a("[name='"+c+"']",b.ownerDocument).filter(function(){return!this.form})),e};a.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",j),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var b=this,h=this.options,i="checkbox"===this.type||"radio"===this.type,l="ui-state-hover"+(i?"":" ui-state-active"),m="ui-state-focus";
null===h.label&&(h.label=this.buttonElement.html()),this.buttonElement.addClass(g).attr("role","button").bind("mouseenter.button",function(){h.disabled||(a(this).addClass("ui-state-hover"),this===c&&a(this).addClass("ui-state-active"))}).bind("mouseleave.button",function(){h.disabled||a(this).removeClass(l)}).bind("click.button",function(a){h.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}),this.element.bind("focus.button",function(){b.buttonElement.addClass(m)}).bind("blur.button",function(){b.buttonElement.removeClass(m)}),i&&(this.element.bind("change.button",function(){f||b.refresh()}),this.buttonElement.bind("mousedown.button",function(a){h.disabled||(f=!1,d=a.pageX,e=a.pageY)
}).bind("mouseup.button",function(a){h.disabled||(d!==a.pageX||e!==a.pageY)&&(f=!0)})),"checkbox"===this.type?this.buttonElement.bind("click.button",function(){return h.disabled||f?!1:(a(this).toggleClass("ui-state-active"),void b.buttonElement.attr("aria-pressed",b.element[0].checked))}):"radio"===this.type?this.buttonElement.bind("click.button",function(){if(h.disabled||f)return!1;a(this).addClass("ui-state-active"),b.buttonElement.attr("aria-pressed","true");var c=b.element[0];k(c).not(c).map(function(){return a(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){return h.disabled?!1:(a(this).addClass("ui-state-active"),c=this,a(document).one("mouseup",function(){c=null
}),void 0)}).bind("mouseup.button",function(){return h.disabled?!1:void a(this).removeClass("ui-state-active")}).bind("keydown.button",function(b){return h.disabled?!1:void((b.keyCode==a.ui.keyCode.SPACE||b.keyCode==a.ui.keyCode.ENTER)&&a(this).addClass("ui-state-active"))}).bind("keyup.button",function(){a(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(b){b.keyCode===a.ui.keyCode.SPACE&&a(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){if(this.type=this.element.is(":checkbox")?"checkbox":this.element.is(":radio")?"radio":this.element.is("input")?"input":"button","checkbox"===this.type||"radio"===this.type){var a=this.element.parents().filter(":last"),b="label[for='"+this.element.attr("id")+"']";
this.buttonElement=a.find(b),this.buttonElement.length||(a=a.length?a.siblings():this.element.siblings(),this.buttonElement=a.filter(b),this.buttonElement.length||(this.buttonElement=a.find(b))),this.element.addClass("ui-helper-hidden-accessible");var c=this.element.is(":checked");c&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",c)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(g+" "+h+" "+i).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),a.Widget.prototype.destroy.call(this)
},_setOption:function(b,c){return a.Widget.prototype._setOption.apply(this,arguments),"disabled"===b?void(c?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1)):void this._resetButton()},refresh:function(){var b=this.element.is(":disabled");b!==this.options.disabled&&this._setOption("disabled",b),"radio"===this.type?k(this.element[0]).each(function(){a(this).is(":checked")?a(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):a(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))
},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var b=this.buttonElement.removeClass(i),c=a("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(b.empty()).text(),d=this.options.icons,e=d.primary&&d.secondary,f=[];d.primary||d.secondary?(this.options.text&&f.push("ui-button-text-icon"+(e?"s":d.primary?"-primary":"-secondary")),d.primary&&b.prepend("<span class='ui-button-icon-primary ui-icon "+d.primary+"'></span>"),d.secondary&&b.append("<span class='ui-button-icon-secondary ui-icon "+d.secondary+"'></span>"),this.options.text||(f.push(e?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||b.attr("title",c))):f.push("ui-button-text-only"),b.addClass(f.join(" "))
}}),a.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(b,c){"disabled"===b&&this.buttons.button("option",b,c),a.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var b="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(b?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(b?"ui-corner-left":"ui-corner-right").end().end()
},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return a(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),a.Widget.prototype.destroy.call(this)}})}(jQuery),function(a,b){var c="ui-dialog ui-widget ui-widget-content ui-corner-all ",d={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},e={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};a.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(b){var c=a(this).css(b).offset().top;
0>c&&a(this).css("top",b.top-c)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;{var b=this,d=b.options,e=d.title||"&#160;",f=a.ui.dialog.getTitleId(b.element),g=(b.uiDialog=a("<div></div>")).appendTo(document.body).hide().addClass(c+d.dialogClass).css({zIndex:d.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(c){d.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}).attr({role:"dialog","aria-labelledby":f}).mousedown(function(a){b.moveToTop(!1,a)
}),i=(b.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(g),(b.uiDialogTitlebar=a("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(g)),j=a('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){j.addClass("ui-state-hover")},function(){j.removeClass("ui-state-hover")}).focus(function(){j.addClass("ui-state-focus")}).blur(function(){j.removeClass("ui-state-focus")}).click(function(a){return b.close(a),!1}).appendTo(i);(b.uiDialogTitlebarCloseText=a("<span></span>")).addClass("ui-icon ui-icon-closethick").text(d.closeText).appendTo(j),a("<span></span>").addClass("ui-dialog-title").attr("id",f).html(e).prependTo(i)
}a.isFunction(d.beforeclose)&&!a.isFunction(d.beforeClose)&&(d.beforeClose=d.beforeclose),i.find("*").add(i).disableSelection(),d.draggable&&a.fn.draggable&&b._makeDraggable(),d.resizable&&a.fn.resizable&&b._makeResizable(),b._createButtons(d.buttons),b._isOpen=!1,a.fn.bgiframe&&g.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var a=this;return a.overlay&&a.overlay.destroy(),a.uiDialog.hide(),a.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),a.uiDialog.remove(),a.originalTitle&&a.element.attr("title",a.originalTitle),a},widget:function(){return this.uiDialog
},close:function(b){var d,e,c=this;if(!1!==c._trigger("beforeClose",b))return c.overlay&&c.overlay.destroy(),c.uiDialog.unbind("keypress.ui-dialog"),c._isOpen=!1,c.options.hide?c.uiDialog.hide(c.options.hide,function(){c._trigger("close",b)}):(c.uiDialog.hide(),c._trigger("close",b)),a.ui.dialog.overlay.resize(),c.options.modal&&(d=0,a(".ui-dialog").each(function(){this!==c.uiDialog[0]&&(e=a(this).css("z-index"),isNaN(e)||(d=Math.max(d,e)))}),a.ui.dialog.maxZ=d),c},isOpen:function(){return this._isOpen},moveToTop:function(b,c){var f,d=this,e=d.options;return e.modal&&!b||!e.stack&&!e.modal?d._trigger("focus",c):(e.zIndex>a.ui.dialog.maxZ&&(a.ui.dialog.maxZ=e.zIndex),d.overlay&&(a.ui.dialog.maxZ+=1,d.overlay.$el.css("z-index",a.ui.dialog.overlay.maxZ=a.ui.dialog.maxZ)),f={scrollTop:d.element.scrollTop(),scrollLeft:d.element.scrollLeft()},a.ui.dialog.maxZ+=1,d.uiDialog.css("z-index",a.ui.dialog.maxZ),d.element.attr(f),d._trigger("focus",c),d)
},open:function(){if(!this._isOpen){var b=this,c=b.options,d=b.uiDialog;return b.overlay=c.modal?new a.ui.dialog.overlay(b):null,b._size(),b._position(c.position),d.show(c.show),b.moveToTop(!0),c.modal&&d.bind("keydown.ui-dialog",function(b){if(b.keyCode===a.ui.keyCode.TAB){var c=a(":tabbable",this),d=c.filter(":first"),e=c.filter(":last");return b.target!==e[0]||b.shiftKey?b.target===d[0]&&b.shiftKey?(e.focus(1),!1):void 0:(d.focus(1),!1)}}),a(b.element.find(":tabbable").get().concat(d.find(".ui-dialog-buttonpane :tabbable").get().concat(d.get()))).eq(0).focus(),b._isOpen=!0,b._trigger("open"),b}},_createButtons:function(b){var c=this,d=!1,e=a("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),f=a("<div></div>").addClass("ui-dialog-buttonset").appendTo(e);
c.uiDialog.find(".ui-dialog-buttonpane").remove(),"object"==typeof b&&null!==b&&a.each(b,function(){return!(d=!0)}),d&&(a.each(b,function(b,d){d=a.isFunction(d)?{click:d,text:b}:d;var e=a('<button type="button"></button>').click(function(){d.click.apply(c.element[0],arguments)}).appendTo(f);a.each(d,function(a,b){"click"!==a&&(a in e?e[a](b):e.attr(a,b))}),a.fn.button&&e.button()}),e.appendTo(c.uiDialog))},_makeDraggable:function(){function f(a){return{position:a.position,offset:a.offset}}var e,b=this,c=b.options,d=a(document);b.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(d,g){e="auto"===c.height?"auto":a(this).height(),a(this).height(a(this).height()).addClass("ui-dialog-dragging"),b._trigger("dragStart",d,f(g))
},drag:function(a,c){b._trigger("drag",a,f(c))},stop:function(g,h){c.position=[h.position.left-d.scrollLeft(),h.position.top-d.scrollTop()],a(this).removeClass("ui-dialog-dragging").height(e),b._trigger("dragStop",g,f(h)),a.ui.dialog.overlay.resize()}})},_makeResizable:function(c){function h(a){return{originalPosition:a.originalPosition,originalSize:a.originalSize,position:a.position,size:a.size}}c=c===b?this.options.resizable:c;var d=this,e=d.options,f=d.uiDialog.css("position"),g="string"==typeof c?c:"n,e,s,w,se,sw,ne,nw";d.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:d.element,maxWidth:e.maxWidth,maxHeight:e.maxHeight,minWidth:e.minWidth,minHeight:d._minHeight(),handles:g,start:function(b,c){a(this).addClass("ui-dialog-resizing"),d._trigger("resizeStart",b,h(c))
},resize:function(a,b){d._trigger("resize",a,h(b))},stop:function(b,c){a(this).removeClass("ui-dialog-resizing"),e.height=a(this).height(),e.width=a(this).width(),d._trigger("resizeStop",b,h(c)),a.ui.dialog.overlay.resize()}}).css("position",f).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var a=this.options;return"auto"===a.height?a.minHeight:Math.min(a.minHeight,a.height)},_position:function(b){var e,c=[],d=[0,0];b?(("string"==typeof b||"object"==typeof b&&"0"in b)&&(c=b.split?b.split(" "):[b[0],b[1]],1===c.length&&(c[1]=c[0]),a.each(["left","top"],function(a,b){+c[a]===c[a]&&(d[a]=c[a],c[a]=b)}),b={my:c.join(" "),at:c.join(" "),offset:d.join(" ")}),b=a.extend({},a.ui.dialog.prototype.options.position,b)):b=a.ui.dialog.prototype.options.position,e=this.uiDialog.is(":visible"),e||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(a.extend({of:window},b)),e||this.uiDialog.hide()
},_setOptions:function(b){var c=this,f={},g=!1;a.each(b,function(a,b){c._setOption(a,b),a in d&&(g=!0),a in e&&(f[a]=b)}),g&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",f)},_setOption:function(b,d){var e=this,f=e.uiDialog;switch(b){case"beforeclose":b="beforeClose";break;case"buttons":e._createButtons(d);break;case"closeText":e.uiDialogTitlebarCloseText.text(""+d);break;case"dialogClass":f.removeClass(e.options.dialogClass).addClass(c+d);break;case"disabled":d?f.addClass("ui-dialog-disabled"):f.removeClass("ui-dialog-disabled");break;case"draggable":var g=f.is(":data(draggable)");g&&!d&&f.draggable("destroy"),!g&&d&&e._makeDraggable();
break;case"position":e._position(d);break;case"resizable":var h=f.is(":data(resizable)");h&&!d&&f.resizable("destroy"),h&&"string"==typeof d&&f.resizable("option","handles",d),!h&&d!==!1&&e._makeResizable(d);break;case"title":a(".ui-dialog-title",e.uiDialogTitlebar).html(""+(d||"&#160;"))}a.Widget.prototype._setOption.apply(e,arguments)},_size:function(){var c,d,b=this.options,e=this.uiDialog.is(":visible");if(this.element.show().css({width:"auto",minHeight:0,height:0}),b.minWidth>b.width&&(b.width=b.minWidth),c=this.uiDialog.css({height:"auto",width:b.width}).height(),d=Math.max(0,b.minHeight-c),"auto"===b.height)if(a.support.minHeight)this.element.css({minHeight:d,height:"auto"});
else{this.uiDialog.show();var f=this.element.css("height","auto").height();e||this.uiDialog.hide(),this.element.height(Math.max(f,d))}else this.element.height(Math.max(b.height-c,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),a.extend(a.ui.dialog,{version:"1.8.23",uuid:0,maxZ:0,getTitleId:function(a){var b=a.attr("id");return b||(this.uuid+=1,b=this.uuid),"ui-dialog-title-"+b},overlay:function(b){this.$el=a.ui.dialog.overlay.create(b)}}),a.extend(a.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:a.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(a){return a+".dialog-overlay"
}).join(" "),create:function(b){0===this.instances.length&&(setTimeout(function(){a.ui.dialog.overlay.instances.length&&a(document).bind(a.ui.dialog.overlay.events,function(b){return a(b.target).zIndex()<a.ui.dialog.overlay.maxZ?!1:void 0})},1),a(document).bind("keydown.dialog-overlay",function(c){b.options.closeOnEscape&&!c.isDefaultPrevented()&&c.keyCode&&c.keyCode===a.ui.keyCode.ESCAPE&&(b.close(c),c.preventDefault())}),a(window).bind("resize.dialog-overlay",a.ui.dialog.overlay.resize));var c=(this.oldInstances.pop()||a("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return a.fn.bgiframe&&c.bgiframe(),this.instances.push(c),c
},destroy:function(b){var c=a.inArray(b,this.instances);-1!=c&&this.oldInstances.push(this.instances.splice(c,1)[0]),0===this.instances.length&&a([document,window]).unbind(".dialog-overlay"),b.remove();var d=0;a.each(this.instances,function(){d=Math.max(d,this.css("z-index"))}),this.maxZ=d},height:function(){var b,c;return a.browser.msie&&a.browser.version<7?(b=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),c=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),c>b?a(window).height()+"px":b+"px"):a(document).height()+"px"},width:function(){var b,c;return a.browser.msie?(b=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),c=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),c>b?a(window).width()+"px":b+"px"):a(document).width()+"px"
},resize:function(){var b=a([]);a.each(a.ui.dialog.overlay.instances,function(){b=b.add(this)}),b.css({width:0,height:0}).css({width:a.ui.dialog.overlay.width(),height:a.ui.dialog.overlay.height()})}}),a.extend(a.ui.dialog.overlay.prototype,{destroy:function(){a.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(a){var c=5;a.widget("ui.slider",a.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var b=this,d=this.options,e=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),f="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",g=d.values&&d.values.length||1,h=[];
this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(d.disabled?" ui-slider-disabled ui-disabled":"")),this.range=a([]),d.range&&(d.range===!0&&(d.values||(d.values=[this._valueMin(),this._valueMin()]),d.values.length&&2!==d.values.length&&(d.values=[d.values[0],d.values[0]])),this.range=a("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===d.range||"max"===d.range?" ui-slider-range-"+d.range:"")));for(var i=e.length;g>i;i+=1)h.push(f);this.handles=e.add(a(h.join("")).appendTo(b.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(a){a.preventDefault()
}).hover(function(){d.disabled||a(this).addClass("ui-state-hover")},function(){a(this).removeClass("ui-state-hover")}).focus(function(){d.disabled?a(this).blur():(a(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),a(this).addClass("ui-state-focus"))}).blur(function(){a(this).removeClass("ui-state-focus")}),this.handles.each(function(b){a(this).data("index.ui-slider-handle",b)}),this.handles.keydown(function(d){var f,g,h,i,e=a(this).data("index.ui-slider-handle");if(!b.options.disabled){switch(d.keyCode){case a.ui.keyCode.HOME:case a.ui.keyCode.END:case a.ui.keyCode.PAGE_UP:case a.ui.keyCode.PAGE_DOWN:case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(d.preventDefault(),!b._keySliding&&(b._keySliding=!0,a(this).addClass("ui-state-active"),f=b._start(d,e),f===!1))return
}switch(i=b.options.step,g=h=b.options.values&&b.options.values.length?b.values(e):b.value(),d.keyCode){case a.ui.keyCode.HOME:h=b._valueMin();break;case a.ui.keyCode.END:h=b._valueMax();break;case a.ui.keyCode.PAGE_UP:h=b._trimAlignValue(g+(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.PAGE_DOWN:h=b._trimAlignValue(g-(b._valueMax()-b._valueMin())/c);break;case a.ui.keyCode.UP:case a.ui.keyCode.RIGHT:if(g===b._valueMax())return;h=b._trimAlignValue(g+i);break;case a.ui.keyCode.DOWN:case a.ui.keyCode.LEFT:if(g===b._valueMin())return;h=b._trimAlignValue(g-i)}b._slide(d,e,h)}}).keyup(function(c){var d=a(this).data("index.ui-slider-handle");b._keySliding&&(b._keySliding=!1,b._stop(c,d),b._change(c,d),a(this).removeClass("ui-state-active"))
}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(b){var d,e,f,g,h,i,j,k,l,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),d={x:b.pageX,y:b.pageY},e=this._normValueFromMouse(d),f=this._valueMax()-this._valueMin()+1,h=this,this.handles.each(function(b){var c=Math.abs(e-h.values(b));
f>c&&(f=c,g=a(this),i=b)}),c.range===!0&&this.values(1)===c.min&&(i+=1,g=a(this.handles[i])),j=this._start(b,i),j===!1?!1:(this._mouseSliding=!0,h._handleIndex=i,g.addClass("ui-state-active").focus(),k=g.offset(),l=!a(b.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:b.pageX-k.left-g.width()/2,top:b.pageY-k.top-g.height()/2-(parseInt(g.css("borderTopWidth"),10)||0)-(parseInt(g.css("borderBottomWidth"),10)||0)+(parseInt(g.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(b,i,e),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(a){var b={x:a.pageX,y:a.pageY},c=this._normValueFromMouse(b);
return this._slide(a,this._handleIndex,c),!1},_mouseStop:function(a){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(a,this._handleIndex),this._change(a,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(a){var b,c,d,e,f;return"horizontal"===this.orientation?(b=this.elementSize.width,c=a.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(b=this.elementSize.height,c=a.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),d=c/b,d>1&&(d=1),0>d&&(d=0),"vertical"===this.orientation&&(d=1-d),e=this._valueMax()-this._valueMin(),f=this._valueMin()+d*e,this._trimAlignValue(f)
},_start:function(a,b){var c={handle:this.handles[b],value:this.value()};return this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("start",a,c)},_slide:function(a,b,c){var d,e,f;this.options.values&&this.options.values.length?(d=this.values(b?0:1),2===this.options.values.length&&this.options.range===!0&&(0===b&&c>d||1===b&&d>c)&&(c=d),c!==this.values(b)&&(e=this.values(),e[b]=c,f=this._trigger("slide",a,{handle:this.handles[b],value:c,values:e}),d=this.values(b?0:1),f!==!1&&this.values(b,c,!0))):c!==this.value()&&(f=this._trigger("slide",a,{handle:this.handles[b],value:c}),f!==!1&&this.value(c))},_stop:function(a,b){var c={handle:this.handles[b],value:this.value()};
this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("stop",a,c)},_change:function(a,b){if(!this._keySliding&&!this._mouseSliding){var c={handle:this.handles[b],value:this.value()};this.options.values&&this.options.values.length&&(c.value=this.values(b),c.values=this.values()),this._trigger("change",a,c)}},value:function(a){return arguments.length?(this.options.value=this._trimAlignValue(a),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(b,c){var d,e,f;if(arguments.length>1)return this.options.values[b]=this._trimAlignValue(c),this._refreshValue(),this._change(null,b),void 0;
if(!arguments.length)return this._values();if(!a.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(b):this.value();for(d=this.options.values,e=arguments[0],f=0;f<d.length;f+=1)d[f]=this._trimAlignValue(e[f]),this._change(null,f);this._refreshValue()},_setOption:function(b,c){var d,e=0;switch(a.isArray(this.options.values)&&(e=this.options.values.length),a.Widget.prototype._setOption.apply(this,arguments),b){case"disabled":c?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));
break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),d=0;e>d;d+=1)this._change(null,d);this._animateOff=!1}},_value:function(){var a=this.options.value;return a=this._trimAlignValue(a)},_values:function(a){var b,c,d;if(arguments.length)return b=this.options.values[a],b=this._trimAlignValue(b);for(c=this.options.values.slice(),d=0;d<c.length;d+=1)c[d]=this._trimAlignValue(c[d]);
return c},_trimAlignValue:function(a){if(a<=this._valueMin())return this._valueMin();if(a>=this._valueMax())return this._valueMax();var b=this.options.step>0?this.options.step:1,c=(a-this._valueMin())%b,d=a-c;return 2*Math.abs(c)>=b&&(d+=c>0?b:-b),parseFloat(d.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var f,h,i,j,k,b=this.options.range,c=this.options,d=this,e=this._animateOff?!1:c.animate,g={};this.options.values&&this.options.values.length?this.handles.each(function(b){f=(d.values(b)-d._valueMin())/(d._valueMax()-d._valueMin())*100,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",a(this).stop(1,1)[e?"animate":"css"](g,c.animate),d.options.range===!0&&("horizontal"===d.orientation?(0===b&&d.range.stop(1,1)[e?"animate":"css"]({left:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({width:f-h+"%"},{queue:!1,duration:c.animate})):(0===b&&d.range.stop(1,1)[e?"animate":"css"]({bottom:f+"%"},c.animate),1===b&&d.range[e?"animate":"css"]({height:f-h+"%"},{queue:!1,duration:c.animate}))),h=f
}):(i=this.value(),j=this._valueMin(),k=this._valueMax(),f=k!==j?(i-j)/(k-j)*100:0,g["horizontal"===d.orientation?"left":"bottom"]=f+"%",this.handle.stop(1,1)[e?"animate":"css"](g,c.animate),"min"===b&&"horizontal"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({width:f+"%"},c.animate),"max"===b&&"horizontal"===this.orientation&&this.range[e?"animate":"css"]({width:100-f+"%"},{queue:!1,duration:c.animate}),"min"===b&&"vertical"===this.orientation&&this.range.stop(1,1)[e?"animate":"css"]({height:f+"%"},c.animate),"max"===b&&"vertical"===this.orientation&&this.range[e?"animate":"css"]({height:100-f+"%"},{queue:!1,duration:c.animate}))}}),a.extend(a.ui.slider,{version:"1.8.23"})
}(jQuery),function(a,b){function e(){return++c}function f(){return++d}var c=0,d=0;a.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(a,b){if("selected"==a){if(this.options.collapsible&&b==this.options.selected)return;this.select(b)}else this.options[a]=b,this._tabify()},_tabId:function(a){return a.title&&a.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+e()
},_sanitizeSelector:function(a){return a.replace(/:/g,"\\:")},_cookie:function(){var b=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+f());return a.cookie.apply(null,[b].concat(a.makeArray(arguments)))},_ui:function(a,b){return{tab:a,panel:b,index:this.anchors.index(a)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var b=a(this);b.html(b.data("label.tabs")).removeData("label.tabs")})},_tabify:function(c){function m(b,c){b.css("display",""),!a.support.opacity&&c.opacity&&b[0].style.removeAttribute("filter")}var d=this,e=this.options,f=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=a(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return a("a",this)[0]
}),this.panels=a([]),this.anchors.each(function(b,c){var i,g=a(c).attr("href"),h=g.split("#")[0];if(h&&(h===location.toString().split("#")[0]||(i=a("base")[0])&&h===i.href)&&(g=c.hash,c.href=g),f.test(g))d.panels=d.panels.add(d.element.find(d._sanitizeSelector(g)));else if(g&&"#"!==g){a.data(c,"href.tabs",g),a.data(c,"load.tabs",g.replace(/#.*$/,""));var j=d._tabId(c);c.href="#"+j;var k=d.element.find("#"+j);k.length||(k=a(e.panelTemplate).attr("id",j).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(d.panels[b-1]||d.list),k.data("destroy.tabs",!0)),d.panels=d.panels.add(k)}else e.disabled.push(b)}),c?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),e.selected===b?(location.hash&&this.anchors.each(function(a,b){return b.hash==location.hash?(e.selected=a,!1):void 0
}),"number"!=typeof e.selected&&e.cookie&&(e.selected=parseInt(d._cookie(),10)),"number"!=typeof e.selected&&this.lis.filter(".ui-tabs-selected").length&&(e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),e.selected=e.selected||(this.lis.length?0:-1)):null===e.selected&&(e.selected=-1),e.selected=e.selected>=0&&this.anchors[e.selected]||e.selected<0?e.selected:0,e.disabled=a.unique(e.disabled.concat(a.map(this.lis.filter(".ui-state-disabled"),function(a){return d.lis.index(a)}))).sort(),-1!=a.inArray(e.selected,e.disabled)&&e.disabled.splice(a.inArray(e.selected,e.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),e.selected>=0&&this.anchors.length&&(d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(e.selected).addClass("ui-tabs-selected ui-state-active"),d.element.queue("tabs",function(){d._trigger("show",null,d._ui(d.anchors[e.selected],d.element.find(d._sanitizeSelector(d.anchors[e.selected].hash))[0]))
}),this.load(e.selected)),a(window).bind("unload",function(){d.lis.add(d.anchors).unbind(".tabs"),d.lis=d.anchors=d.panels=null})):e.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[e.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),e.cookie&&this._cookie(e.selected,e.cookie);for(var h,g=0;h=this.lis[g];g++)a(h)[-1==a.inArray(g,e.disabled)||a(h).hasClass("ui-tabs-selected")?"removeClass":"addClass"]("ui-state-disabled");if(e.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs"),"mouseover"!==e.event){var i=function(a,b){b.is(":not(.ui-state-disabled)")&&b.addClass("ui-state-"+a)},j=function(a,b){b.removeClass("ui-state-"+a)
};this.lis.bind("mouseover.tabs",function(){i("hover",a(this))}),this.lis.bind("mouseout.tabs",function(){j("hover",a(this))}),this.anchors.bind("focus.tabs",function(){i("focus",a(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){j("focus",a(this).closest("li"))})}var k,l;e.fx&&(a.isArray(e.fx)?(k=e.fx[0],l=e.fx[1]):k=l=e.fx);var n=l?function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.hide().removeClass("ui-tabs-hide").animate(l,l.duration||"normal",function(){m(c,l),d._trigger("show",null,d._ui(b,c[0]))})}:function(b,c){a(b).closest("li").addClass("ui-tabs-selected ui-state-active"),c.removeClass("ui-tabs-hide"),d._trigger("show",null,d._ui(b,c[0]))
},o=k?function(a,b){b.animate(k,k.duration||"normal",function(){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),m(b,k),d.element.dequeue("tabs")})}:function(a,b){d.lis.removeClass("ui-tabs-selected ui-state-active"),b.addClass("ui-tabs-hide"),d.element.dequeue("tabs")};this.anchors.bind(e.event+".tabs",function(){var b=this,c=a(b).closest("li"),f=d.panels.filter(":not(.ui-tabs-hide)"),g=d.element.find(d._sanitizeSelector(b.hash));if(c.hasClass("ui-tabs-selected")&&!e.collapsible||c.hasClass("ui-state-disabled")||c.hasClass("ui-state-processing")||d.panels.filter(":animated").length||d._trigger("select",null,d._ui(this,g[0]))===!1)return this.blur(),!1;
if(e.selected=d.anchors.index(this),d.abort(),e.collapsible){if(c.hasClass("ui-tabs-selected"))return e.selected=-1,e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){o(b,f)}).dequeue("tabs"),this.blur(),!1;if(!f.length)return e.cookie&&d._cookie(e.selected,e.cookie),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),this.blur(),!1}if(e.cookie&&d._cookie(e.selected,e.cookie),!g.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";f.length&&d.element.queue("tabs",function(){o(b,f)}),d.element.queue("tabs",function(){n(b,g)}),d.load(d.anchors.index(this)),a.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1
})},_getIndex:function(a){return"string"==typeof a&&(a=this.anchors.index(this.anchors.filter("[href$='"+a+"']"))),a},destroy:function(){var b=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var b=a.data(this,"href.tabs");b&&(this.href=b);var c=a(this).unbind(".tabs");a.each(["href","load","cache"],function(a,b){c.removeData(b+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){a.data(this,"destroy.tabs")?a(this).remove():a(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))
}),b.cookie&&this._cookie(null,b.cookie),this},add:function(c,d,e){e===b&&(e=this.anchors.length);var f=this,g=this.options,h=a(g.tabTemplate.replace(/#\{href\}/g,c).replace(/#\{label\}/g,d)),i=c.indexOf("#")?this._tabId(a("a",h)[0]):c.replace("#","");h.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var j=f.element.find("#"+i);return j.length||(j=a(g.panelTemplate).attr("id",i).data("destroy.tabs",!0)),j.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),e>=this.lis.length?(h.appendTo(this.list),j.appendTo(this.list[0].parentNode)):(h.insertBefore(this.lis[e]),j.insertBefore(this.panels[e])),g.disabled=a.map(g.disabled,function(a){return a>=e?++a:a
}),this._tabify(),1==this.anchors.length&&(g.selected=0,h.addClass("ui-tabs-selected ui-state-active"),j.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){f._trigger("show",null,f._ui(f.anchors[0],f.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[e],this.panels[e])),this},remove:function(b){b=this._getIndex(b);var c=this.options,d=this.lis.eq(b).remove(),e=this.panels.eq(b).remove();return d.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(b+(b+1<this.anchors.length?1:-1)),c.disabled=a.map(a.grep(c.disabled,function(a){return a!=b}),function(a){return a>=b?--a:a}),this._tabify(),this._trigger("remove",null,this._ui(d.find("a")[0],e[0])),this
},enable:function(b){b=this._getIndex(b);var c=this.options;if(-1!=a.inArray(b,c.disabled))return this.lis.eq(b).removeClass("ui-state-disabled"),c.disabled=a.grep(c.disabled,function(a){return a!=b}),this._trigger("enable",null,this._ui(this.anchors[b],this.panels[b])),this},disable:function(a){a=this._getIndex(a);var c=this.options;return a!=c.selected&&(this.lis.eq(a).addClass("ui-state-disabled"),c.disabled.push(a),c.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[a],this.panels[a]))),this},select:function(a){if(a=this._getIndex(a),-1==a){if(!this.options.collapsible||-1==this.options.selected)return this;a=this.options.selected}return this.anchors.eq(a).trigger(this.options.event+".tabs"),this
},load:function(b){b=this._getIndex(b);var c=this,d=this.options,e=this.anchors.eq(b)[0],f=a.data(e,"load.tabs");if(this.abort(),!f||0!==this.element.queue("tabs").length&&a.data(e,"cache.tabs"))return void this.element.dequeue("tabs");if(this.lis.eq(b).addClass("ui-state-processing"),d.spinner){var g=a("span",e);g.data("label.tabs",g.html()).html(d.spinner)}return this.xhr=a.ajax(a.extend({},d.ajaxOptions,{url:f,success:function(f,g){c.element.find(c._sanitizeSelector(e.hash)).html(f),c._cleanup(),d.cache&&a.data(e,"cache.tabs",!0),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));try{d.ajaxOptions.success(f,g)}catch(h){}},error:function(a,f){c._cleanup(),c._trigger("load",null,c._ui(c.anchors[b],c.panels[b]));
try{d.ajaxOptions.error(a,f,b,e)}catch(g){}}})),c.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(a,b){return this.anchors.eq(a).removeData("cache.tabs").data("load.tabs",b),this},length:function(){return this.anchors.length}}),a.extend(a.ui.tabs,{version:"1.8.23"}),a.extend(a.ui.tabs.prototype,{rotation:null,rotate:function(a,b){var c=this,d=this.options,e=c._rotate||(c._rotate=function(b){clearTimeout(c.rotation),c.rotation=setTimeout(function(){var a=d.selected;
c.select(++a<c.anchors.length?a:0)},a),b&&b.stopPropagation()}),f=c._unrotate||(c._unrotate=b?function(){e()}:function(a){a.clientX&&c.rotate(null)});return a?(this.element.bind("tabsshow",e),this.anchors.bind(d.event+".tabs",f),e()):(clearTimeout(c.rotation),this.element.unbind("tabsshow",e),this.anchors.unbind(d.event+".tabs",f),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))
}function bindHover(a){var b="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return a.bind("mouseout",function(a){var c=$(a.target).closest(b);c.length&&c.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(c){var d=$(c.target).closest(b);!$.datepicker._isDisabledDatepicker(instActive.inline?a.parent()[0]:instActive.input[0])&&d.length&&(d.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),d.addClass("ui-state-hover"),d.hasClass("ui-datepicker-prev")&&d.addClass("ui-datepicker-prev-hover"),d.hasClass("ui-datepicker-next")&&d.addClass("ui-datepicker-next-hover"))
})}function extendRemove(a,b){$.extend(a,b);for(var c in b)(null==b[c]||b[c]==undefined)&&(a[c]=b[c]);return a}function isArray(a){return a&&($.browser.safari&&"object"==typeof a&&a.length||a.constructor&&a.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.23"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){return extendRemove(this._defaults,a||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;
for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(a,b){var c=a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:c,input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:b?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}
},_connectDatepicker:function(a,b){var c=$(a);b.append=$([]),b.trigger=$([]),c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),$.data(a,PROP_NAME,b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),d=this._get(b,"isRTL");b.append&&b.append.remove(),c&&(b.append=$('<span class="'+this._appendClass+'">'+c+"</span>"),a[d?"before":"after"](b.append)),a.unbind("focus",this._showDatepicker),b.trigger&&b.trigger.remove();
var e=this._get(b,"showOn");if(("focus"==e||"both"==e)&&a.focus(this._showDatepicker),"button"==e||"both"==e){var f=this._get(b,"buttonText"),g=this._get(b,"buttonImage");b.trigger=$(this._get(b,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:g,alt:f,title:f}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==g?f:$("<img/>").attr({src:g,alt:f,title:f}))),a[d?"before":"after"](b.trigger),b.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==a[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=a[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(a[0])):$.datepicker._showDatepicker(a[0]),!1
})}},_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort"))),b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=$(a);c.hasClass(this.markerClassName)||(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)
}),$.data(a,PROP_NAME,b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,d,e){var f=this._dialogInst;if(!f){this.uuid+=1;var g="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+g+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),f=this._dialogInst=this._newInst(this._dialogInput,!1),f.settings={},$.data(this._dialogInput[0],PROP_NAME,f)}if(extendRemove(f.settings,d||{}),b=b&&b.constructor==Date?this._formatDate(f,b):b,this._dialogInput.val(b),this._pos=e?e.length?e:[e.pageX,e.pageY]:null,!this._pos){var h=document.documentElement.clientWidth,i=document.documentElement.clientHeight,j=document.documentElement.scrollLeft||document.body.scrollLeft,k=document.documentElement.scrollTop||document.body.scrollTop;
this._pos=[h/2-100+j,i/2-150+k]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),f.settings.onSelect=c,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,f),this},_destroyDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();$.removeData(a,PROP_NAME),"input"==d?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==d||"span"==d)&&b.removeClass(this.markerClassName).empty()
}},_enableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();if("input"==d)a.disabled=!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().removeClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=$(a),c=$.data(a,PROP_NAME);if(b.hasClass(this.markerClassName)){var d=a.nodeName.toLowerCase();
if("input"==d)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==d||"span"==d){var e=b.children("."+this._inlineClass);e.children().addClass("ui-state-disabled"),e.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(b){return b==a?null:b}),this._disabledInputs[this._disabledInputs.length]=a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return $.data(a,PROP_NAME)
}catch(b){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(a,b,c){var d=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?$.extend({},$.datepicker._defaults):d?"all"==b?$.extend({},d.settings):this._get(d,b):null;var e=b||{};if("string"==typeof b&&(e={},e[b]=c),d){this._curInst==d&&this._hideDatepicker();var f=this._getDateDatepicker(a,!0),g=this._getMinMaxDate(d,"min"),h=this._getMinMaxDate(d,"max");extendRemove(d.settings,e),null!==g&&e.dateFormat!==undefined&&e.minDate===undefined&&(d.settings.minDate=this._formatDate(d,g)),null!==h&&e.dateFormat!==undefined&&e.maxDate===undefined&&(d.settings.maxDate=this._formatDate(d,h)),this._attachments($(a),d),this._autoSize(d),this._setDate(d,f),this._updateAlternate(d),this._updateDatepicker(d)
}},_changeDatepicker:function(a,b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){var b=this._getInst(a);b&&this._updateDatepicker(b)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);return c&&!c.inline&&this._setDateFromField(c,b),c?this._getDate(c):null},_doKeyDown:function(a){var b=$.datepicker._getInst(a.target),c=!0,d=b.dpDiv.is(".ui-datepicker-rtl");if(b._keyEvent=!0,$.datepicker._datepickerShowing)switch(a.keyCode){case 9:$.datepicker._hideDatepicker(),c=!1;break;case 13:var e=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",b.dpDiv);
e[0]&&$.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,e[0]);var f=$.datepicker._get(b,"onSelect");if(f){var g=$.datepicker._formatDate(b);f.apply(b.input?b.input[0]:null,[g,b])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&$.datepicker._clearDate(a.target),c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&$.datepicker._gotoToday(a.target),c=a.ctrlKey||a.metaKey;
break;case 37:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?1:-1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?-$.datepicker._get(b,"stepBigMonths"):-$.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,-7,"D"),c=a.ctrlKey||a.metaKey;break;case 39:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,d?-1:1,"D"),c=a.ctrlKey||a.metaKey,a.originalEvent.altKey&&$.datepicker._adjustDate(a.target,a.ctrlKey?+$.datepicker._get(b,"stepBigMonths"):+$.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&$.datepicker._adjustDate(a.target,7,"D"),c=a.ctrlKey||a.metaKey;
break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?$.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=$.datepicker._getInst(a.target);if($.datepicker._get(b,"constrainInput")){var c=$.datepicker._possibleChars($.datepicker._get(b,"dateFormat")),d=String.fromCharCode(a.charCode==undefined?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">d||!c||c.indexOf(d)>-1}},_doKeyUp:function(a){var b=$.datepicker._getInst(a.target);if(b.input.val()!=b.lastVal)try{var c=$.datepicker.parseDate($.datepicker._get(b,"dateFormat"),b.input?b.input.val():null,$.datepicker._getFormatConfig(b));c&&($.datepicker._setDateFromField(b),$.datepicker._updateAlternate(b),$.datepicker._updateDatepicker(b))
}catch(d){$.datepicker.log(d)}return!0},_showDatepicker:function(a){if(a=a.target||a,"input"!=a.nodeName.toLowerCase()&&(a=$("input",a.parentNode)[0]),!$.datepicker._isDisabledDatepicker(a)&&$.datepicker._lastInput!=a){var b=$.datepicker._getInst(a);$.datepicker._curInst&&$.datepicker._curInst!=b&&($.datepicker._curInst.dpDiv.stop(!0,!0),b&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var c=$.datepicker._get(b,"beforeShow"),d=c?c.apply(a,[a,b]):{};if(d!==!1){extendRemove(b.settings,d),b.lastVal=null,$.datepicker._lastInput=a,$.datepicker._setDateFromField(b),$.datepicker._inDialog&&(a.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(a),$.datepicker._pos[1]+=a.offsetHeight);
var e=!1;$(a).parents().each(function(){return e|="fixed"==$(this).css("position"),!e}),e&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var f={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,b.dpDiv.empty(),b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(b),f=$.datepicker._checkOffset(b,f,e),b.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":e?"fixed":"absolute",display:"none",left:f.left+"px",top:f.top+"px"}),!b.inline){var g=$.datepicker._get(b,"showAnim"),h=$.datepicker._get(b,"duration"),i=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");
if(a.length){var c=$.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex($(a).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[g]?b.dpDiv.show(g,$.datepicker._get(b,"showOptions"),h,i):b.dpDiv[g||"show"](g?h:null,i),(!g||!h)&&i(),b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus(),$.datepicker._curInst=b}}}},_updateDatepicker:function(a){var b=this;b.maxRows=4;var c=$.datepicker._getBorders(a.dpDiv);instActive=a,a.dpDiv.empty().append(this._generateHTML(a)),this._attachHandlers(a);var d=a.dpDiv.find("iframe.ui-datepicker-cover");!d.length||d.css({left:-c[0],top:-c[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()}),a.dpDiv.find("."+this._dayOverClass+" a").mouseover();
var e=this._getNumberOfMonths(a),f=e[1],g=17;if(a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),f>1&&a.dpDiv.addClass("ui-datepicker-multi-"+f).css("width",g*f+"em"),a.dpDiv[(1!=e[0]||1!=e[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),a==$.datepicker._curInst&&$.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement&&a.input.focus(),a.yearshtml){var h=a.yearshtml;setTimeout(function(){h===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml),h=a.yearshtml=null
},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var d=a.dpDiv.outerWidth(),e=a.dpDiv.outerHeight(),f=a.input?a.input.outerWidth():0,g=a.input?a.input.outerHeight():0,h=document.documentElement.clientWidth+(c?0:$(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:$(document).scrollTop());return b.left-=this._get(a,"isRTL")?d-f:0,b.left-=c&&b.left==a.input.offset().left?$(document).scrollLeft():0,b.top-=c&&b.top==a.input.offset().top+g?$(document).scrollTop():0,b.left-=Math.min(b.left,b.left+d>h&&h>d?Math.abs(b.left+d-h):0),b.top-=Math.min(b.top,b.top+e>i&&i>e?Math.abs(e+g):0),b
},_findPos:function(a){for(var b=this._getInst(a),c=this._get(b,"isRTL");a&&("hidden"==a.type||1!=a.nodeType||$.expr.filters.hidden(a));)a=a[c?"previousSibling":"nextSibling"];var d=$(a).offset();return[d.left,d.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&(!a||b==$.data(a,PROP_NAME))&&this._datepickerShowing){var c=this._get(b,"showAnim"),d=this._get(b,"duration"),e=function(){$.datepicker._tidyDialog(b)};$.effects&&$.effects[c]?b.dpDiv.hide(c,$.datepicker._get(b,"showOptions"),d,e):b.dpDiv["slideDown"==c?"slideUp":"fadeIn"==c?"fadeOut":"hide"](c?d:null,e),c||e(),this._datepickerShowing=!1;var f=this._get(b,"onClose");f&&f.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1
}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if($.datepicker._curInst){var b=$(a.target),c=$.datepicker._getInst(b[0]);(b[0].id!=$.datepicker._mainDivId&&0==b.parents("#"+$.datepicker._mainDivId).length&&!b.hasClass($.datepicker.markerClassName)&&!b.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||b.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=c)&&$.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var d=$(a),e=this._getInst(d[0]);this._isDisabledDatepicker(d[0])||(this._adjustInstDate(e,b+("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))
},_gotoToday:function(a){var b=$(a),c=this._getInst(b[0]);if(this._get(c,"gotoCurrent")&&c.currentDay)c.selectedDay=c.currentDay,c.drawMonth=c.selectedMonth=c.currentMonth,c.drawYear=c.selectedYear=c.currentYear;else{var d=new Date;c.selectedDay=d.getDate(),c.drawMonth=c.selectedMonth=d.getMonth(),c.drawYear=c.selectedYear=d.getFullYear()}this._notifyChange(c),this._adjustDate(b)},_selectMonthYear:function(a,b,c){var d=$(a),e=this._getInst(d[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10),this._notifyChange(e),this._adjustDate(d)},_selectDay:function(a,b,c,d){var e=$(a);if(!$(d).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(e[0])){var f=this._getInst(e[0]);
f.selectedDay=f.currentDay=$("a",d).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear))}},_clearDate:function(a){{var b=$(a);this._getInst(b[0])}this._selectDate(b,"")},_selectDate:function(a,b){var c=$(a),d=this._getInst(c[0]);b=null!=b?b:this._formatDate(d),d.input&&d.input.val(b),this._updateAlternate(d);var e=this._get(d,"onSelect");e?e.apply(d.input?d.input[0]:null,[b,d]):d.input&&d.input.trigger("change"),d.inline?this._updateDatepicker(d):(this._hideDatepicker(),this._lastInput=d.input[0],"object"!=typeof d.input[0]&&d.input.focus(),this._lastInput=null)
},_updateAlternate:function(a){var b=this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),d=this._getDate(a),e=this.formatDate(c,d,this._getFormatConfig(a));$(b).each(function(){$(this).val(e)})}},noWeekends:function(a){var b=a.getDay();return[b>0&&6>b,""]},iso8601Week:function(a){var b=new Date(a.getTime());b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";if(b="object"==typeof b?b.toString():b+"",""==b)return null;var d=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff;
d="string"!=typeof d?d:(new Date).getFullYear()%100+parseInt(d,10);for(var e=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,g=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,h=(c?c.monthNames:null)||this._defaults.monthNames,i=-1,j=-1,k=-1,l=-1,m=!1,n=function(b){var c=s+1<a.length&&a.charAt(s+1)==b;return c&&s++,c},o=function(a){var c=n(a),d="@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2,e=new RegExp("^\\d{1,"+d+"}"),f=b.substring(r).match(e);if(!f)throw"Missing number at position "+r;return r+=f[0].length,parseInt(f[0],10)},p=function(a,c,d){var e=$.map(n(a)?d:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)
}),f=-1;if($.each(e,function(a,c){var d=c[1];return b.substr(r,d.length).toLowerCase()==d.toLowerCase()?(f=c[0],r+=d.length,!1):void 0}),-1!=f)return f+1;throw"Unknown name at position "+r},q=function(){if(b.charAt(r)!=a.charAt(s))throw"Unexpected literal at position "+r;r++},r=0,s=0;s<a.length;s++)if(m)"'"!=a.charAt(s)||n("'")?q():m=!1;else switch(a.charAt(s)){case"d":k=o("d");break;case"D":p("D",e,f);break;case"o":l=o("o");break;case"m":j=o("m");break;case"M":j=p("M",g,h);break;case"y":i=o("y");break;case"@":var t=new Date(o("@"));i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();break;case"!":var t=new Date((o("!")-this._ticksTo1970)/1e4);i=t.getFullYear(),j=t.getMonth()+1,k=t.getDate();
break;case"'":n("'")?q():m=!0;break;default:q()}if(r<b.length)throw"Extra/unparsed characters found in date: "+b.substring(r);if(-1==i?i=(new Date).getFullYear():100>i&&(i+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d>=i?0:-100)),l>-1)for(j=1,k=l;;){var u=this._getDaysInMonth(i,j-1);if(u>=k)break;j++,k-=u}var t=this._daylightSavingAdjust(new Date(i,j-1,k));if(t.getFullYear()!=i||t.getMonth()+1!=j||t.getDate()!=k)throw"Invalid date";return t},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(a,b,c){if(!b)return"";
var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,e=(c?c.dayNames:null)||this._defaults.dayNames,f=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,h=function(b){var c=m+1<a.length&&a.charAt(m+1)==b;return c&&m++,c},i=function(a,b,c){var d=""+b;if(h(a))for(;d.length<c;)d="0"+d;return d},j=function(a,b,c,d){return h(a)?d[b]:c[b]},k="",l=!1;if(b)for(var m=0;m<a.length;m++)if(l)"'"!=a.charAt(m)||h("'")?k+=a.charAt(m):l=!1;else switch(a.charAt(m)){case"d":k+=i("d",b.getDate(),2);break;case"D":k+=j("D",b.getDay(),d,e);break;case"o":k+=i("o",Math.round((new Date(b.getFullYear(),b.getMonth(),b.getDate()).getTime()-new Date(b.getFullYear(),0,0).getTime())/864e5),3);
break;case"m":k+=i("m",b.getMonth()+1,2);break;case"M":k+=j("M",b.getMonth(),f,g);break;case"y":k+=h("y")?b.getFullYear():(b.getYear()%100<10?"0":"")+b.getYear()%100;break;case"@":k+=b.getTime();break;case"!":k+=1e4*b.getTime()+this._ticksTo1970;break;case"'":h("'")?k+="'":l=!0;break;default:k+=a.charAt(m)}return k},_possibleChars:function(a){for(var b="",c=!1,d=function(b){var c=e+1<a.length&&a.charAt(e+1)==b;return c&&e++,c},e=0;e<a.length;e++)if(c)"'"!=a.charAt(e)||d("'")?b+=a.charAt(e):c=!1;else switch(a.charAt(e)){case"d":case"m":case"y":case"@":b+="0123456789";break;case"D":case"M":return null;case"'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(e)}return b
},_get:function(a,b){return a.settings[b]!==undefined?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var e,f,c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null;e=f=this._getDefaultDate(a);var g=this._getFormatConfig(a);try{e=this.parseDate(c,d,g)||f}catch(h){this.log(h),d=b?"":d}a.selectedDay=e.getDate(),a.drawMonth=a.selectedMonth=e.getMonth(),a.drawYear=a.selectedYear=e.getFullYear(),a.currentDay=d?e.getDate():0,a.currentMonth=d?e.getMonth():0,a.currentYear=d?e.getFullYear():0,this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))
},_determineDate:function(a,b,c){var d=function(a){var b=new Date;return b.setDate(b.getDate()+a),b},e=function(b){try{return $.datepicker.parseDate($.datepicker._get(a,"dateFormat"),b,$.datepicker._getFormatConfig(a))}catch(c){}for(var d=(b.toLowerCase().match(/^c/)?$.datepicker._getDate(a):null)||new Date,e=d.getFullYear(),f=d.getMonth(),g=d.getDate(),h=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,i=h.exec(b);i;){switch(i[2]||"d"){case"d":case"D":g+=parseInt(i[1],10);break;case"w":case"W":g+=7*parseInt(i[1],10);break;case"m":case"M":f+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f));break;case"y":case"Y":e+=parseInt(i[1],10),g=Math.min(g,$.datepicker._getDaysInMonth(e,f))
}i=h.exec(b)}return new Date(e,f,g)},f=null==b||""===b?c:"string"==typeof b?e(b):"number"==typeof b?isNaN(b)?c:d(b):new Date(b.getTime());return f=f&&"Invalid Date"==f.toString()?c:f,f&&(f.setHours(0),f.setMinutes(0),f.setSeconds(0),f.setMilliseconds(0)),this._daylightSavingAdjust(f)},_daylightSavingAdjust:function(a){return a?(a.setHours(a.getHours()>12?a.getHours()+2:0),a):null},_setDate:function(a,b,c){var d=!b,e=a.selectedMonth,f=a.selectedYear,g=this._restrictMinMax(a,this._determineDate(a,b,new Date));a.selectedDay=a.currentDay=g.getDate(),a.drawMonth=a.selectedMonth=a.currentMonth=g.getMonth(),a.drawYear=a.selectedYear=a.currentYear=g.getFullYear(),(e!=a.selectedMonth||f!=a.selectedYear)&&!c&&this._notifyChange(a),this._adjustInstDate(a),a.input&&a.input.val(d?"":this._formatDate(a))
},_getDate:function(a){var b=!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return b},_attachHandlers:function(a){var b=this._get(a,"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){var a={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(c)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(c,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1
},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(c,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),a[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date;b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate()));var c=this._get(a,"isRTL"),d=this._get(a,"showButtonPanel"),e=this._get(a,"hideIfNoPrevNext"),f=this._get(a,"navigationAsDateFormat"),g=this._getNumberOfMonths(a),h=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),j=1!=g[0]||1!=g[1],k=this._daylightSavingAdjust(a.currentDay?new Date(a.currentYear,a.currentMonth,a.currentDay):new Date(9999,9,9)),l=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),n=a.drawMonth-h,o=a.drawYear;
if(0>n&&(n+=12,o--),m){var p=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-g[0]*g[1]+1,m.getDate()));for(p=l&&l>p?l:p;this._daylightSavingAdjust(new Date(o,n,1))>p;)n--,0>n&&(n=11,o--)}a.drawMonth=n,a.drawYear=o;var q=this._get(a,"prevText");q=f?this.formatDate(q,this._daylightSavingAdjust(new Date(o,n-i,1)),this._getFormatConfig(a)):q;var r=this._canAdjustMonth(a,-1,o,n)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>":e?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+q+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+q+"</span></a>",s=this._get(a,"nextText");
s=f?this.formatDate(s,this._daylightSavingAdjust(new Date(o,n+i,1)),this._getFormatConfig(a)):s;var t=this._canAdjustMonth(a,1,o,n)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":e?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>",u=this._get(a,"currentText"),v=this._get(a,"gotoCurrent")&&a.currentDay?k:b;u=f?this.formatDate(u,v,this._getFormatConfig(a)):u;var w=a.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>",x=d?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?w:"")+(this._isInRange(a,v)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+u+"</button>":"")+(c?"":w)+"</div>":"",y=parseInt(this._get(a,"firstDay"),10);
y=isNaN(y)?0:y;for(var z=this._get(a,"showWeek"),A=this._get(a,"dayNames"),C=(this._get(a,"dayNamesShort"),this._get(a,"dayNamesMin")),D=this._get(a,"monthNames"),E=this._get(a,"monthNamesShort"),F=this._get(a,"beforeShowDay"),G=this._get(a,"showOtherMonths"),H=this._get(a,"selectOtherMonths"),J=(this._get(a,"calculateWeek")||this.iso8601Week,this._getDefaultDate(a)),K="",L=0;L<g[0];L++){var M="";this.maxRows=4;for(var N=0;N<g[1];N++){var O=this._daylightSavingAdjust(new Date(o,n,a.selectedDay)),P=" ui-corner-all",Q="";if(j){if(Q+='<div class="ui-datepicker-group',g[1]>1)switch(N){case 0:Q+=" ui-datepicker-group-first",P=" ui-corner-"+(c?"right":"left");break;
case g[1]-1:Q+=" ui-datepicker-group-last",P=" ui-corner-"+(c?"left":"right");break;default:Q+=" ui-datepicker-group-middle",P=""}Q+='">'}Q+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+P+'">'+(/all|left/.test(P)&&0==L?c?t:r:"")+(/all|right/.test(P)&&0==L?c?r:t:"")+this._generateMonthYearHeader(a,n,o,l,m,L>0||N>0,D,E)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var R=z?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",S=0;7>S;S++){var T=(S+y)%7;R+="<th"+((S+y+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+A[T]+'">'+C[T]+"</span></th>"}Q+=R+"</tr></thead><tbody>";var U=this._getDaysInMonth(o,n);
o==a.selectedYear&&n==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,U));var V=(this._getFirstDayOfMonth(o,n)-y+7)%7,W=Math.ceil((V+U)/7),X=j&&this.maxRows>W?this.maxRows:W;this.maxRows=X;for(var Y=this._daylightSavingAdjust(new Date(o,n,1-V)),Z=0;X>Z;Z++){Q+="<tr>";for(var _=z?'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(Y)+"</td>":"",S=0;7>S;S++){var ba=F?F.apply(a.input?a.input[0]:null,[Y]):[!0,""],bb=Y.getMonth()!=n,bc=bb&&!H||!ba[0]||l&&l>Y||m&&Y>m;_+='<td class="'+((S+y+6)%7>=5?" ui-datepicker-week-end":"")+(bb?" ui-datepicker-other-month":"")+(Y.getTime()==O.getTime()&&n==a.selectedMonth&&a._keyEvent||J.getTime()==Y.getTime()&&J.getTime()==O.getTime()?" "+this._dayOverClass:"")+(bc?" "+this._unselectableClass+" ui-state-disabled":"")+(bb&&!G?"":" "+ba[1]+(Y.getTime()==k.getTime()?" "+this._currentClass:"")+(Y.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+(bb&&!G||!ba[2]?"":' title="'+ba[2]+'"')+(bc?"":' data-handler="selectDay" data-event="click" data-month="'+Y.getMonth()+'" data-year="'+Y.getFullYear()+'"')+">"+(bb&&!G?"&#xa0;":bc?'<span class="ui-state-default">'+Y.getDate()+"</span>":'<a class="ui-state-default'+(Y.getTime()==b.getTime()?" ui-state-highlight":"")+(Y.getTime()==k.getTime()?" ui-state-active":"")+(bb?" ui-priority-secondary":"")+'" href="#">'+Y.getDate()+"</a>")+"</td>",Y.setDate(Y.getDate()+1),Y=this._daylightSavingAdjust(Y)
}Q+=_+"</tr>"}n++,n>11&&(n=0,o++),Q+="</tbody></table>"+(j?"</div>"+(g[0]>0&&N==g[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),M+=Q}K+=M}return K+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),a._keyEvent=!1,K},_generateMonthYearHeader:function(a,b,c,d,e,f,g,h){var i=this._get(a,"changeMonth"),j=this._get(a,"changeYear"),k=this._get(a,"showMonthAfterYear"),l='<div class="ui-datepicker-title">',m="";if(f||!i)m+='<span class="ui-datepicker-month">'+g[b]+"</span>";else{var n=d&&d.getFullYear()==c,o=e&&e.getFullYear()==c;m+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';
for(var p=0;12>p;p++)(!n||p>=d.getMonth())&&(!o||p<=e.getMonth())&&(m+='<option value="'+p+'"'+(p==b?' selected="selected"':"")+">"+h[p]+"</option>");m+="</select>"}if(k||(l+=m+(!f&&i&&j?"":"&#xa0;")),!a.yearshtml)if(a.yearshtml="",f||!j)l+='<span class="ui-datepicker-year">'+c+"</span>";else{var q=this._get(a,"yearRange").split(":"),r=(new Date).getFullYear(),s=function(a){var b=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?r+parseInt(a,10):parseInt(a,10);return isNaN(b)?r:b},t=s(q[0]),u=Math.max(t,s(q[1]||""));for(t=d?Math.max(t,d.getFullYear()):t,u=e?Math.min(u,e.getFullYear()):u,a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';u>=t;t++)a.yearshtml+='<option value="'+t+'"'+(t==c?' selected="selected"':"")+">"+t+"</option>";
a.yearshtml+="</select>",l+=a.yearshtml,a.yearshtml=null}return l+=this._get(a,"yearSuffix"),k&&(l+=(!f&&i&&j?"":"&#xa0;")+m),l+="</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),e=a.drawMonth+("M"==c?b:0),f=Math.min(a.selectedDay,this._getDaysInMonth(d,e))+("D"==c?b:0),g=this._restrictMinMax(a,this._daylightSavingAdjust(new Date(d,e,f)));a.selectedDay=g.getDate(),a.drawMonth=a.selectedMonth=g.getMonth(),a.drawYear=a.selectedYear=g.getFullYear(),("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),e=c&&c>b?c:b;return e=d&&e>d?d:e},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");
b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){var b=this._get(a,"numberOfMonths");return null==b?[1,1]:"number"==typeof b?[1,b]:b},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return new Date(a,b,1).getDay()},_canAdjustMonth:function(a,b,c,d){var e=this._getNumberOfMonths(a),f=this._daylightSavingAdjust(new Date(c,d+(0>b?b:e[0]*e[1]),1));return 0>b&&f.setDate(this._getDaysInMonth(f.getFullYear(),f.getMonth())),this._isInRange(a,f)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");
return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff");return b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10),{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);var e=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),e,this._getFormatConfig(a))
}}),$.fn.datepicker=function(a){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"!=typeof a||"isDisabled"!=a&&"getDate"!=a&&"widget"!=a?"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b)):this.each(function(){"string"==typeof a?$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this].concat(b)):$.datepicker._attachDatepicker(this,a)}):$.datepicker["_"+a+"Datepicker"].apply($.datepicker,[this[0]].concat(b))
},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.23",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(a,b){a.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=a("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),a.Widget.prototype.destroy.apply(this,arguments)
},value:function(a){return a===b?this._value():(this._setOption("value",a),this)},_setOption:function(b,c){"value"===b&&(this.options.value=c,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),a.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var a=this.options.value;return"number"!=typeof a&&(a=0),Math.min(this.options.max,Math.max(this.min,a))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var a=this.value(),b=this._percentage();this.oldValue!==a&&(this.oldValue=a,this._trigger("change")),this.valueDiv.toggle(a>this.min).toggleClass("ui-corner-right",a===this.options.max).width(b.toFixed(0)+"%"),this.element.attr("aria-valuenow",a)
}}),a.extend(a.ui.progressbar,{version:"1.8.23"})}(jQuery),jQuery.effects||function(a,b){function c(b){var c;return b&&b.constructor==Array&&3==b.length?b:(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b))?[parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10)]:(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b))?[2.55*parseFloat(c[1]),2.55*parseFloat(c[2]),2.55*parseFloat(c[3])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b))?[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16)]:(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b))?[parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16)]:(c=/rgba\(0, 0, 0, 0\)/.exec(b))?e.transparent:e[a.trim(b).toLowerCase()]
}function d(b,d){var e;do{if(e=(a.curCSS||a.css)(b,d),""!=e&&"transparent"!=e||a.nodeName(b,"body"))break;d="backgroundColor"}while(b=b.parentNode);return c(e)}function h(){var c,d,a=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,b={};if(a&&a.length&&a[0]&&a[a[0]])for(var e=a.length;e--;)c=a[e],"string"==typeof a[c]&&(d=c.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),b[d]=a[c]);else for(c in a)"string"==typeof a[c]&&(b[c]=a[c]);return b}function i(b){var c,d;for(c in b)d=b[c],(null==d||a.isFunction(d)||c in g||/scrollbar/.test(c)||!/color/i.test(c)&&isNaN(parseFloat(d)))&&delete b[c];return b}function j(a,b){var d,c={_:0};
for(d in b)a[d]!=b[d]&&(c[d]=b[d]);return c}function k(b,c,d,e){return"object"==typeof b&&(e=c,d=null,c=b,b=c.effect),a.isFunction(c)&&(e=c,d=null,c={}),("number"==typeof c||a.fx.speeds[c])&&(e=d,d=c,c={}),a.isFunction(d)&&(e=d,d=null),c=c||{},d=d||c.duration,d=a.fx.off?0:"number"==typeof d?d:d in a.fx.speeds?a.fx.speeds[d]:a.fx.speeds._default,e=e||c.complete,[b,c,d,e]}function l(b){return!b||"number"==typeof b||a.fx.speeds[b]?!0:"string"!=typeof b||a.effects[b]?!1:!0}a.effects={},a.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(b,e){a.fx.step[e]=function(a){a.colorInit||(a.start=d(a.elem,e),a.end=c(a.end),a.colorInit=!0),a.elem.style[e]="rgb("+Math.max(Math.min(parseInt(a.pos*(a.end[0]-a.start[0])+a.start[0],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[1]-a.start[1])+a.start[1],10),255),0)+","+Math.max(Math.min(parseInt(a.pos*(a.end[2]-a.start[2])+a.start[2],10),255),0)+")"
}});var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},f=["add","remove","toggle"],g={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};
a.effects.animateClass=function(b,c,d,e){return a.isFunction(d)&&(e=d,d=null),this.queue(function(){var m,g=a(this),k=g.attr("style")||" ",l=i(h.call(this)),n=g.attr("class")||"";a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),m=i(h.call(this)),g.attr("class",n),g.animate(j(l,m),{queue:!1,duration:c,easing:d,complete:function(){a.each(f,function(a,c){b[c]&&g[c+"Class"](b[c])}),"object"==typeof g.attr("style")?(g.attr("style").cssText="",g.attr("style").cssText=k):g.attr("style",k),e&&e.apply(this,arguments),a.dequeue(this)}})})},a.fn.extend({_addClass:a.fn.addClass,addClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{add:b},c,d,e]):this._addClass(b)
},_removeClass:a.fn.removeClass,removeClass:function(b,c,d,e){return c?a.effects.animateClass.apply(this,[{remove:b},c,d,e]):this._removeClass(b)},_toggleClass:a.fn.toggleClass,toggleClass:function(c,d,e,f,g){return"boolean"==typeof d||d===b?e?a.effects.animateClass.apply(this,[d?{add:c}:{remove:c},e,f,g]):this._toggleClass(c,d):a.effects.animateClass.apply(this,[{toggle:c},d,e,f])},switchClass:function(b,c,d,e,f){return a.effects.animateClass.apply(this,[{add:c,remove:b},d,e,f])}}),a.extend(a.effects,{version:"1.8.23",save:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.data("ec.storage."+b[c],a[0].style[b[c]])},restore:function(a,b){for(var c=0;c<b.length;c++)null!==b[c]&&a.css(b[c],a.data("ec.storage."+b[c]))
},setMode:function(a,b){return"toggle"==b&&(b=a.is(":hidden")?"show":"hide"),b},getBaseline:function(a,b){var c,d;switch(a[0]){case"top":c=0;break;case"middle":c=.5;break;case"bottom":c=1;break;default:c=a[0]/b.height}switch(a[1]){case"left":d=0;break;case"center":d=.5;break;case"right":d=1;break;default:d=a[1]/b.width}return{x:d,y:c}},createWrapper:function(b){if(b.parent().is(".ui-effects-wrapper"))return b.parent();var c={width:b.outerWidth(!0),height:b.outerHeight(!0),"float":b.css("float")},d=a("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e=document.activeElement;try{e.id}catch(f){e=document.body
}return b.wrap(d),(b[0]===e||a.contains(b[0],e))&&a(e).focus(),d=b.parent(),"static"==b.css("position")?(d.css({position:"relative"}),b.css({position:"relative"})):(a.extend(c,{position:b.css("position"),zIndex:b.css("z-index")}),a.each(["top","left","bottom","right"],function(a,d){c[d]=b.css(d),isNaN(parseInt(c[d],10))&&(c[d]="auto")}),b.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),d.css(c).show()},removeWrapper:function(b){var c,d=document.activeElement;return b.parent().is(".ui-effects-wrapper")?(c=b.parent().replaceWith(b),(b[0]===d||a.contains(b[0],d))&&a(d).focus(),c):b},setTransition:function(b,c,d,e){return e=e||{},a.each(c,function(a,c){var f=b.cssUnit(c);
f[0]>0&&(e[c]=f[0]*d+f[1])}),e}}),a.fn.extend({effect:function(b){var f=k.apply(this,arguments),g={options:f[1],duration:f[2],callback:f[3]},h=g.options.mode,i=a.effects[b];return a.fx.off||!i?h?this[h](g.duration,g.callback):this.each(function(){g.callback&&g.callback.call(this)}):i.call(this,g)},_show:a.fn.show,show:function(a){if(l(a))return this._show.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="show",this.effect.apply(this,b)},_hide:a.fn.hide,hide:function(a){if(l(a))return this._hide.apply(this,arguments);var b=k.apply(this,arguments);return b[1].mode="hide",this.effect.apply(this,b)},__toggle:a.fn.toggle,toggle:function(b){if(l(b)||"boolean"==typeof b||a.isFunction(b))return this.__toggle.apply(this,arguments);
var c=k.apply(this,arguments);return c[1].mode="toggle",this.effect.apply(this,c)},cssUnit:function(b){var c=this.css(b),d=[];return a.each(["em","px","%","pt"],function(a,b){c.indexOf(b)>0&&(d=[parseFloat(c),b])}),d}});var m={};a.each(["Quad","Cubic","Quart","Quint","Expo"],function(a,b){m[b]=function(b){return Math.pow(b,a+2)}}),a.extend(m,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)
}}),a.each(m,function(b,c){a.easing["easeIn"+b]=c,a.easing["easeOut"+b]=function(a){return 1-c(1-a)},a.easing["easeInOut"+b]=function(a){return.5>a?c(2*a)/2:c(-2*a+2)/-2+1}})}(jQuery),function(a){a.effects.blind=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="vertical"==f?"height":"width",i="vertical"==f?g.height():g.width();"show"==e&&g.css(h,0);var j={};j[h]="show"==e?i:0,g.animate(j,b.duration,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()
})})}}(jQuery),function(a){a.effects.bounce=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"effect"),f=b.options.direction||"up",g=b.options.distance||20,h=b.options.times||5,i=b.duration||250;/show|hide/.test(e)&&d.push("opacity"),a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",g=b.options.distance||("top"==j?c.outerHeight(!0)/3:c.outerWidth(!0)/3);if("show"==e&&c.css("opacity",0).css(j,"pos"==k?-g:g),"hide"==e&&(g/=2*h),"hide"!=e&&h--,"show"==e){var l={opacity:1};l[j]=("pos"==k?"+=":"-=")+g,c.animate(l,i/2,b.options.easing),g/=2,h--
}for(var m=0;h>m;m++){var n={},p={};n[j]=("pos"==k?"-=":"+=")+g,p[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing),g="hide"==e?2*g:g/2}if("hide"==e){var l={opacity:0};l[j]=("pos"==k?"-=":"+=")+g,c.animate(l,i/2,b.options.easing,function(){c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}else{var n={},p={};n[j]=("pos"==k?"-=":"+=")+g,p[j]=("pos"==k?"+=":"-=")+g,c.animate(n,i/2,b.options.easing).animate(p,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)})}c.queue("fx",function(){c.dequeue()
}),c.dequeue()})}}(jQuery),function(a){a.effects.clip=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","height","width"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"vertical";a.effects.save(c,d),c.show();var g=a.effects.createWrapper(c).css({overflow:"hidden"}),h="IMG"==c[0].tagName?g:c,i={size:"vertical"==f?"height":"width",position:"vertical"==f?"top":"left"},j="vertical"==f?h.height():h.width();"show"==e&&(h.css(i.size,0),h.css(i.position,j/2));var k={};k[i.size]="show"==e?j:0,k[i.position]="show"==e?0:j/2,h.animate(k,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()
}})})}}(jQuery),function(a){a.effects.drop=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","opacity"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0)/2:c.outerWidth(!0)/2);"show"==e&&c.css("opacity",0).css(g,"pos"==h?-i:i);var j={opacity:"show"==e?1:0};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()
}})})}}(jQuery),function(a){a.effects.explode=function(b){return this.queue(function(){var c=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3,d=b.options.pieces?Math.round(Math.sqrt(b.options.pieces)):3;b.options.mode="toggle"==b.options.mode?a(this).is(":visible")?"hide":"show":b.options.mode;var e=a(this).show().css("visibility","hidden"),f=e.offset();f.top-=parseInt(e.css("marginTop"),10)||0,f.left-=parseInt(e.css("marginLeft"),10)||0;for(var g=e.outerWidth(!0),h=e.outerHeight(!0),i=0;c>i;i++)for(var j=0;d>j;j++)e.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-j*(g/d),top:-i*(h/c)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:g/d,height:h/c,left:f.left+j*(g/d)+("show"==b.options.mode?(j-Math.floor(d/2))*(g/d):0),top:f.top+i*(h/c)+("show"==b.options.mode?(i-Math.floor(c/2))*(h/c):0),opacity:"show"==b.options.mode?0:1}).animate({left:f.left+j*(g/d)+("show"==b.options.mode?0:(j-Math.floor(d/2))*(g/d)),top:f.top+i*(h/c)+("show"==b.options.mode?0:(i-Math.floor(c/2))*(h/c)),opacity:"show"==b.options.mode?1:0},b.duration||500);
setTimeout(function(){"show"==b.options.mode?e.css({visibility:"visible"}):e.css({visibility:"visible"}).hide(),b.callback&&b.callback.apply(e[0]),e.dequeue(),a("div.ui-effects-explode").remove()},b.duration||500)})}}(jQuery),function(a){a.effects.fade=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide");c.animate({opacity:d},{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.fold=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"hide"),f=b.options.size||15,g=!!b.options.horizFirst,h=b.duration?b.duration/2:a.fx.speeds._default/2;
a.effects.save(c,d),c.show();var i=a.effects.createWrapper(c).css({overflow:"hidden"}),j="show"==e!=g,k=j?["width","height"]:["height","width"],l=j?[i.width(),i.height()]:[i.height(),i.width()],m=/([0-9]+)%/.exec(f);m&&(f=parseInt(m[1],10)/100*l["hide"==e?0:1]),"show"==e&&i.css(g?{height:0,width:f}:{height:f,width:0});var n={},p={};n[k[0]]="show"==e?l[0]:f,p[k[1]]="show"==e?l[1]:0,i.animate(n,h,b.options.easing).animate(p,h,b.options.easing,function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),function(a){a.effects.highlight=function(b){return this.queue(function(){var c=a(this),d=["backgroundImage","backgroundColor","opacity"],e=a.effects.setMode(c,b.options.mode||"show"),f={backgroundColor:c.css("backgroundColor")};
"hide"==e&&(f.opacity=0),a.effects.save(c,d),c.show().css({backgroundImage:"none",backgroundColor:b.options.color||"#ffff99"}).animate(f,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),"show"==e&&!a.support.opacity&&this.style.removeAttribute("filter"),b.callback&&b.callback.apply(this,arguments),c.dequeue()}})})}}(jQuery),function(a){a.effects.pulsate=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"show"),e=2*(b.options.times||5)-1,f=b.duration?b.duration/2:a.fx.speeds._default/2,g=c.is(":visible"),h=0;g||(c.css("opacity",0).show(),h=1),("hide"==d&&g||"show"==d&&!g)&&e--;
for(var i=0;e>i;i++)c.animate({opacity:h},f,b.options.easing),h=(h+1)%2;c.animate({opacity:h},f,b.options.easing,function(){0==h&&c.hide(),b.callback&&b.callback.apply(this,arguments)}),c.queue("fx",function(){c.dequeue()}).dequeue()})}}(jQuery),function(a){a.effects.puff=function(b){return this.queue(function(){var c=a(this),d=a.effects.setMode(c,b.options.mode||"hide"),e=parseInt(b.options.percent,10)||150,f=e/100,g={height:c.height(),width:c.width()};a.extend(b.options,{fade:!0,mode:d,percent:"hide"==d?e:100,from:"hide"==d?g:{height:g.height*f,width:g.width*f}}),c.effect("scale",b.options,b.duration,b.callback),c.dequeue()})},a.effects.scale=function(b){return this.queue(function(){var c=a(this),d=a.extend(!0,{},b.options),e=a.effects.setMode(c,b.options.mode||"effect"),f=parseInt(b.options.percent,10)||(0==parseInt(b.options.percent,10)?0:"hide"==e?0:100),g=b.options.direction||"both",h=b.options.origin;
"effect"!=e&&(d.origin=h||["middle","center"],d.restore=!0);var i={height:c.height(),width:c.width()};c.from=b.options.from||("show"==e?{height:0,width:0}:i);var j={y:"horizontal"!=g?f/100:1,x:"vertical"!=g?f/100:1};c.to={height:i.height*j.y,width:i.width*j.x},b.options.fade&&("show"==e&&(c.from.opacity=0,c.to.opacity=1),"hide"==e&&(c.from.opacity=1,c.to.opacity=0)),d.from=c.from,d.to=c.to,d.mode=e,c.effect("size",d,b.duration,b.callback),c.dequeue()})},a.effects.size=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right","width","height","overflow","opacity"],e=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],g=["fontSize"],h=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],i=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],j=a.effects.setMode(c,b.options.mode||"effect"),k=b.options.restore||!1,l=b.options.scale||"both",m=b.options.origin,n={height:c.height(),width:c.width()};
if(c.from=b.options.from||n,c.to=b.options.to||n,m){var p=a.effects.getBaseline(m,n);c.from.top=(n.height-c.from.height)*p.y,c.from.left=(n.width-c.from.width)*p.x,c.to.top=(n.height-c.to.height)*p.y,c.to.left=(n.width-c.to.width)*p.x}var q={from:{y:c.from.height/n.height,x:c.from.width/n.width},to:{y:c.to.height/n.height,x:c.to.width/n.width}};("box"==l||"both"==l)&&(q.from.y!=q.to.y&&(d=d.concat(h),c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(d=d.concat(i),c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to))),("content"==l||"both"==l)&&q.from.y!=q.to.y&&(d=d.concat(g),c.from=a.effects.setTransition(c,g,q.from.y,c.from),c.to=a.effects.setTransition(c,g,q.to.y,c.to)),a.effects.save(c,k?d:e),c.show(),a.effects.createWrapper(c),c.css("overflow","hidden").css(c.from),("content"==l||"both"==l)&&(h=h.concat(["marginTop","marginBottom"]).concat(g),i=i.concat(["marginLeft","marginRight"]),f=d.concat(h).concat(i),c.find("*[width]").each(function(){var c=a(this);
k&&a.effects.save(c,f);var d={height:c.height(),width:c.width()};c.from={height:d.height*q.from.y,width:d.width*q.from.x},c.to={height:d.height*q.to.y,width:d.width*q.to.x},q.from.y!=q.to.y&&(c.from=a.effects.setTransition(c,h,q.from.y,c.from),c.to=a.effects.setTransition(c,h,q.to.y,c.to)),q.from.x!=q.to.x&&(c.from=a.effects.setTransition(c,i,q.from.x,c.from),c.to=a.effects.setTransition(c,i,q.to.x,c.to)),c.css(c.from),c.animate(c.to,b.duration,b.options.easing,function(){k&&a.effects.restore(c,f)})})),c.animate(c.to,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){0===c.to.opacity&&c.css("opacity",c.from.opacity),"hide"==j&&c.hide(),a.effects.restore(c,k?d:e),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()
}})})}}(jQuery),function(a){a.effects.shake=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],f=(a.effects.setMode(c,b.options.mode||"effect"),b.options.direction||"left"),g=b.options.distance||20,h=b.options.times||3,i=b.duration||b.options.duration||140;a.effects.save(c,d),c.show(),a.effects.createWrapper(c);var j="up"==f||"down"==f?"top":"left",k="up"==f||"left"==f?"pos":"neg",l={},m={},n={};l[j]=("pos"==k?"-=":"+=")+g,m[j]=("pos"==k?"+=":"-=")+2*g,n[j]=("pos"==k?"-=":"+=")+2*g,c.animate(l,i,b.options.easing);for(var p=1;h>p;p++)c.animate(m,i,b.options.easing).animate(n,i,b.options.easing);c.animate(m,i,b.options.easing).animate(l,i/2,b.options.easing,function(){a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments)
}),c.queue("fx",function(){c.dequeue()}),c.dequeue()})}}(jQuery),function(a){a.effects.slide=function(b){return this.queue(function(){var c=a(this),d=["position","top","bottom","left","right"],e=a.effects.setMode(c,b.options.mode||"show"),f=b.options.direction||"left";a.effects.save(c,d),c.show(),a.effects.createWrapper(c).css({overflow:"hidden"});var g="up"==f||"down"==f?"top":"left",h="up"==f||"left"==f?"pos":"neg",i=b.options.distance||("top"==g?c.outerHeight(!0):c.outerWidth(!0));"show"==e&&c.css(g,"pos"==h?isNaN(i)?"-"+i:-i:i);var j={};j[g]=("show"==e?"pos"==h?"+=":"-=":"pos"==h?"-=":"+=")+i,c.animate(j,{queue:!1,duration:b.duration,easing:b.options.easing,complete:function(){"hide"==e&&c.hide(),a.effects.restore(c,d),a.effects.removeWrapper(c),b.callback&&b.callback.apply(this,arguments),c.dequeue()
}})})}}(jQuery),function(a){a.effects.transfer=function(b){return this.queue(function(){var c=a(this),d=a(b.options.to),e=d.offset(),f={top:e.top,left:e.left,height:d.innerHeight(),width:d.innerWidth()},g=c.offset(),h=a('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(b.options.className).css({top:g.top,left:g.left,height:c.innerHeight(),width:c.innerWidth(),position:"absolute"}).animate(f,b.duration,b.options.easing,function(){h.remove(),b.callback&&b.callback.apply(c[0],arguments),c.dequeue()})})}}(jQuery),define("jqueryui",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/OrderInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/orderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","jqueryui"],function(_,$,tpl,Helper,pciResponse,__){var render=function(interaction){var $container=Helper.getContainer(interaction),$choiceArea=$container.find(".choice-area"),$resultArea=$container.find(".result-area"),$iconAdd=$container.find(".icon-add-to-selection"),$iconRemove=$container.find(".icon-remove-from-selection"),$iconBefore=$container.find(".icon-move-before"),$iconAfter=$container.find(".icon-move-after"),$activeChoice=null,_activeControls=function(){$iconAdd.addClass("inactive"),$iconRemove.removeClass("inactive").addClass("active"),$iconBefore.removeClass("inactive").addClass("active"),$iconAfter.removeClass("inactive").addClass("active")
},_resetControls=function(){$iconAdd.removeClass("inactive"),$iconRemove.removeClass("active").addClass("inactive"),$iconBefore.removeClass("active").addClass("inactive"),$iconAfter.removeClass("active").addClass("inactive")},_setSelection=function($choice){$activeChoice&&$activeChoice.removeClass("active"),$activeChoice=$choice,$activeChoice.addClass("active"),_activeControls()},_resetSelection=function(){$activeChoice&&($activeChoice.removeClass("active"),$activeChoice=null),_resetControls()};$container.on("mousedown.commonRenderer",function(){_resetSelection()}),$choiceArea.on("mousedown.commonRenderer",">li:not(.deactivated)",function(e){e.stopPropagation(),_resetSelection(),$iconAdd.addClass("triggered"),setTimeout(function(){$iconAdd.removeClass("triggered")
},150),$resultArea.append($(this)),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction)}),$resultArea.on("mousedown.commonRenderer",">li",function(e){e.stopPropagation();var $choice=$(this);$choice.hasClass("active")?_resetSelection():_setSelection($(this))}),$iconRemove.on("mousedown.commonRenderer",function(e){e.stopPropagation(),$activeChoice&&($choiceArea.append($activeChoice),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction)),_resetSelection()}),$iconBefore.on("mousedown.commonRenderer",function(e){e.stopPropagation();var $prev=$activeChoice.prev();$prev.length&&($prev.before($activeChoice),Helper.triggerResponseChangeEvent(interaction))
}),$iconAfter.on("mousedown.commonRenderer",function(e){e.stopPropagation();var $next=$activeChoice.next();$next.length&&($next.after($activeChoice),Helper.triggerResponseChangeEvent(interaction))}),_setInstructions(interaction),$(document).on("attributeChange.qti-widget.commonRenderer",function(e,data){data.element.getSerial()===interaction.getSerial()&&("maxChoices"===data.key||"minChoices"===data.key)&&(Helper.removeInstructions(interaction),_setInstructions(interaction),Helper.validateInstructions(interaction))}),_freezeSize($container)},_freezeSize=function($container){var $orderArea=$container.find(".order-interaction-area");$orderArea.height($orderArea.height())
},_setInstructions=function(interaction){var $choiceArea=Helper.getContainer(interaction).find(".choice-area"),$resultArea=Helper.getContainer(interaction).find(".result-area"),min=parseInt(interaction.attr("minChoices")),max=parseInt(interaction.attr("maxChoices"));if(min&&Helper.appendInstruction(interaction,__("You must use at least "+min+" choices"),function(){$resultArea.find(">li").length>=min?this.setLevel("success"):this.reset()}),max&&max<_.size(interaction.getChoices())){var instructionMax=Helper.appendInstruction(interaction,__("You can use maximum "+max+" choices"),function(){$resultArea.find(">li").length>=max?($choiceArea.find(">li").addClass("deactivated"),this.setMessage(__("Maximum choices reached"))):($choiceArea.find(">li").removeClass("deactivated"),this.reset())
});$choiceArea.on("mousedown.commonRenderer",">li.deactivated",function(){var $choice=$(this);$choice.addClass("brd-error"),instructionMax.setLevel("warning",2e3),setTimeout(function(){$choice.removeClass("brd-error")},150)})}},_resetResponse=function(interaction){var initialOrder=_.keys(interaction.getChoices()),$choiceArea=Helper.getContainer(interaction).find(".choice-area").append(Helper.getContainer(interaction).find(".result-area>li")),$choices=$choiceArea.children(".qti-choice");$choices.detach().sort(function(choice1,choice2){return _.indexOf(initialOrder,$(choice1).data("serial"))>_.indexOf(initialOrder,$(choice2).data("serial"))}),$choiceArea.prepend($choices)
},setResponse=function(interaction,response){var $choiceArea=Helper.getContainer(interaction).find(".choice-area"),$resultArea=Helper.getContainer(interaction).find(".result-area");if(null===response||_.isEmpty(response))_resetResponse(interaction);else try{_.each(pciResponse.unserialize(response,interaction),function(identifier){$resultArea.append($choiceArea.find("[data-identifier="+identifier+"]"))})}catch(e){throw new Error("wrong response format in argument : "+e)}Helper.validateInstructions(interaction)},_getRawResponse=function(interaction){var response=[];return Helper.getContainer(interaction).find(".result-area>li").each(function(){response.push($(this).data("identifier"))
}),response},getResponse=function(interaction){return pciResponse.serialize(_getRawResponse(interaction),interaction)},getCustomData=function(interaction,data){return _.merge(data||{},{horizontal:"horizontal"===interaction.attr("orientation")})},destroy=function(interaction){var $container=Helper.getContainer(interaction);$container.find(".qti-choice.active").mousedown();var selectors=[".choice-area",".result-area",".icon-add-to-selection",".icon-remove-from-selection",".icon-move-before",".icon-move-after"];$container.find(selectors.join(",")).andSelf().off(".commonRenderer"),$(document).off(".commonRenderer"),$container.find(".order-interaction-area").removeAttr("style"),_resetResponse(interaction),Helper.removeInstructions(interaction)
};return{qtiClass:"orderInteraction",getData:getCustomData,template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="qti-interaction qti-customInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',(helper=helpers.markup)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.markup,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="\n</div>"
})}),define("taoQtiItem/runtime/qtiCustomInteractionContext",[],function(){window._pciHooks=window._pciHooks||{};var taoQtiCustomInteractionContext={register:function(pciHook){window._pciHooks[pciHook.getTypeIdentifier()]=pciHook},notifyReady:function(){},notifyDone:function(){},createPciInstance:function(pciTypeIdentifier){if(window._pciHooks[pciTypeIdentifier]){var instance={},proto=window._pciHooks[pciTypeIdentifier];for(var name in proto)instance[name]="function"==typeof proto[name]?proto[name]:null!==proto[name]&&"object"==typeof proto[name]?proto[name].constructor():proto[name];return instance}throw"no portable custom interaction hook found with the id "+pciTypeIdentifier
}};return taoQtiCustomInteractionContext}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/PortableCustomInteraction",["tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/customInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PortableElement","taoQtiItem/runtime/qtiCustomInteractionContext","taoQtiItem/qtiItem/helper/util","lodash","context"],function(tpl,Helper,PortableElement,qtiCustomInteractionContext,util,_,context){var _getPci=function(interaction){var pciTypeIdentifier,pci=interaction.data("pci")||void 0;if(!pci){if(pciTypeIdentifier=interaction.typeIdentifier,pci=qtiCustomInteractionContext.createPciInstance(pciTypeIdentifier),!pci)throw"no custom interaction hook found for the type "+pciTypeIdentifier;
interaction.data("pci",pci),pci._taoCustomInteraction=interaction}return pci},render=function(interaction,options){options=options||{};var id=interaction.attr("responseIdentifier"),typeIdentifier=interaction.typeIdentifier,baseUrl=this.getOption("baseUrl")||PortableElement.getDocumentBaseUrl(),runtimeLocations=options.runtimeLocations?options.runtimeLocations:this.getOption("runtimeLocations"),config=_.clone(interaction.properties),entryPoint=this.getAbsoluteUrl(interaction.entryPoint),$dom=Helper.getContainer(interaction).children(),localRequirePaths={qtiCustomInteractionContext:context.root_url+"taoQtiItem/views/js/runtime/qtiCustomInteractionContext"},localRequireConfig={},state={},response={base:null};
runtimeLocations&&runtimeLocations[typeIdentifier]&&(localRequireConfig.runtimeLocation=runtimeLocations[typeIdentifier]);var localRequire=PortableElement.getCachedLocalRequire(typeIdentifier,baseUrl,localRequirePaths,localRequireConfig);localRequire([entryPoint],function(){var pci=_getPci(interaction);pci&&(pci.initialize(id,$dom[0],config),pci.setSerializedState(state),pci.setResponse(response),interaction.triggerPciReady(pci))})},setResponse=function(interaction,response){_getPci(interaction).setResponse(response)},getResponse=function(interaction){return _getPci(interaction).getResponse()},resetResponse=function(interaction){_getPci(interaction).resetResponse()
},destroy=function(interaction){_getPci(interaction).destroy()},setSerializedState=function(interaction,serializedState){_getPci(interaction).setSerializedState(serializedState)},getSerializedState=function(interaction){return _getPci(interaction).getSerializedState()};return{qtiClass:"customInteraction",template:tpl,getData:function(customInteraction,data){return data.markup=PortableElement.replaceMarkupMediaSource(data.markup,this.getOption("baseUrl")),data},render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy,getSerializedState:getSerializedState,setSerializedState:setSerializedState}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/prompt",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<div class="qti-prompt-container" data-html-editable-container>\n    <p class="qti-prompt" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-html-editable>',(helper=helpers.body)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.body,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),(stack1||0===stack1)&&(buffer+=stack1),buffer+="</p>\n</div>\n"
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/Prompt",["tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/prompt","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function(tpl,Helper){return{qtiClass:"prompt",template:tpl,getContainer:Helper.getContainer}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""
}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-graphicInteraction qti-selectPointInteraction clearfix '+escapeExpression((stack1=depth0&&depth0.attributes,stack1=null==stack1||stack1===!1?stack1:stack1["class"],typeof stack1===functionType?stack1.apply(depth0):stack1))+'" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n    <div class="instruction-container"></div>\n    <div class="image-editor solid">\n        <div id=\'graphic-paper-',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'\' class="main-image-box"></div>\n    </div>\n</div>\n'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/SelectPointInteraction",["jquery","lodash","i18n","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/selectPointInteraction","taoQtiItem/qtiCommonRenderer/helpers/Graphic","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","taoQtiItem/qtiCommonRenderer/helpers/Helper"],function($,_,__,tpl,graphic,pciResponse,Helper){var render=function(interaction){var $container=Helper.getContainer(interaction),background=interaction.object.attributes,baseUrl=this.getOption("baseUrl")||"";interaction.paper=graphic.responsivePaper("graphic-paper-"+interaction.serial,interaction.serial,{width:background.width,height:background.height,img:baseUrl+background.data,imgId:"bg-image-"+interaction.serial,container:$container}),_enableSelection(interaction),Helper.minMaxChoiceInstructions(interaction,{min:interaction.attr("minChoices"),max:interaction.attr("maxChoices"),choiceCount:!1,getResponse:_getRawResponse,onError:function(data){data&&graphic.highlightError(data.target,"success")
}})},_enableSelection=function(interaction){function changePoint(target){isTouch&&target&&graphic.createTouchCircle(interaction.paper,target.getBBox()),Helper.triggerResponseChangeEvent(interaction),Helper.validateInstructions(interaction,{target:target})}var maxChoices=interaction.attr("maxChoices"),$container=Helper.getContainer(interaction),$imageBox=$container.find(".main-image-box"),isResponsive=$container.hasClass("responsive"),image=interaction.paper.getById("bg-image-"+interaction.serial),isTouch=!1;image.touchstart(function(){isTouch=!0,image.untouchstart()}),image.click(function(event){if(maxChoices>0&&_getRawResponse(interaction).length>=maxChoices)return void Helper.validateInstructions(interaction);
var point=graphic.getPoint(event,interaction.paper,$imageBox,isResponsive);graphic.createTarget(interaction.paper,{point:point,create:changePoint,remove:function(){changePoint()}})})},_getRawResponse=function(interaction){var points=[];return interaction.paper.forEach(function(element){var point=element.data("point");"object"==typeof point&&point.x&&point.y&&points.push([Math.round(point.x),Math.round(point.y)])}),points},setResponse=function(interaction,response){var responseValues;if(response&&interaction.paper){try{responseValues=pciResponse.unserialize(response,interaction)}catch(e){}_.isArray(responseValues)&&_(responseValues).flatten().map(function(value,index){return index%2===0?{x:value,y:responseValues[index+1]}:void 0
}).filter(_.isObject).forEach(function(point){graphic.createTarget(interaction.paper,{point:point})})}},resetResponse=function(interaction){interaction.paper.forEach(function(element){var point=element.data("point");"object"==typeof point&&graphic.trigger(element,"click")})},getResponse=function(interaction){var response=(_getRawResponse(interaction),pciResponse.serialize(_getRawResponse(interaction),interaction));return response},destroy=function(interaction){var $container;interaction.paper&&($container=Helper.getContainer(interaction),$(window).off("resize.qti-widget."+interaction.serial),$container.off("resize.qti-widget."+interaction.serial),interaction.paper.clear(),Helper.removeInstructions(interaction),$(".main-image-box",$container).empty().removeAttr("style"),$(".image-editor",$container).removeAttr("style"))
};return{qtiClass:"selectPointInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};
var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-sliderInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="sliderInteraction" >\r\n    ',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\r\n    <div class="instruction-container"></div>\r\n</div>'
})}),function($){function throwError(message){throw new RangeError("noUiSlider: "+message)}function throwEqualError(F,a,b){(F[a]||F[b])&&F[a]===F[b]&&throwError("(Link) '"+a+"' can't match '"+b+"'.'")}function limit(a){return Math.max(Math.min(a,100),0)}function closest(value,to){return Math.round(value/to)*to}function subRangeRatio(pa,pb){return 100/(pb-pa)}function typeMatch(a,b){return typeof a==typeof b}function isInstance(a){return a instanceof $||$.zepto&&$.zepto.isZ(a)}function isNumeric(a){return"number"==typeof a&&!isNaN(a)&&isFinite(a)}function asArray(a){return $.isArray(a)?a:[a]}function addClassFor(element,className,duration){element.addClass(className),setTimeout(function(){element.removeClass(className)
},duration)}function fromPercentage(range,value){return 100*value/(range[1]-range[0])}function toPercentage(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0])}function isPercentage(range,value){return value*(range[1]-range[0])/100+range[0]}function toStepping(options,value){if(value>=options.xVal.slice(-1)[0])return 100;for(var va,vb,pa,pb,j=1;value>=options.xVal[j];)j++;return va=options.xVal[j-1],vb=options.xVal[j],pa=options.xPct[j-1],pb=options.xPct[j],pa+toPercentage([va,vb],value)/subRangeRatio(pa,pb)}function fromStepping(options,value){if(value>=100)return options.xVal.slice(-1)[0];for(var va,vb,pa,pb,j=1;value>=options.xPct[j];)j++;
return va=options.xVal[j-1],vb=options.xVal[j],pa=options.xPct[j-1],pb=options.xPct[j],isPercentage([va,vb],(value-pa)*subRangeRatio(pa,pb))}function getStep(options,value){for(var a,b,j=1;value>=options.xPct[j];)j++;return options.snap?(a=options.xPct[j-1],b=options.xPct[j],value-a>(b-a)/2?b:a):options.xSteps[j-1]?options.xPct[j-1]+closest(value-options.xPct[j-1],options.xSteps[j-1]):value}function fixEvent(e){e.preventDefault();var x,y,touch=0===e.type.indexOf("touch"),mouse=0===e.type.indexOf("mouse"),pointer=0===e.type.indexOf("pointer"),event=e;return 0===e.type.indexOf("MSPointer")&&(pointer=!0),e.originalEvent&&(e=e.originalEvent),touch&&(x=e.changedTouches[0].pageX,y=e.changedTouches[0].pageY),(mouse||pointer)&&(pointer||void 0!==window.pageXOffset||(window.pageXOffset=document.documentElement.scrollLeft,window.pageYOffset=document.documentElement.scrollTop),x=e.clientX+window.pageXOffset,y=e.clientY+window.pageYOffset),event.points=[x,y],event.cursor=mouse,event
}function Format(options){void 0===options&&(options={}),"object"!=typeof options&&throwError("(Format) 'format' option must be an object.");var settings={};$(Formatting).each(function(i,val){void 0===options[val]?settings[val]=FormatDefaults[i]:typeMatch(options[val],FormatDefaults[i])?("decimals"===val&&(options[val]<0||options[val]>7)&&throwError("(Format) 'format.decimals' option must be between 0 and 7."),settings[val]=options[val]):throwError("(Format) 'format."+val+"' must be a "+typeof FormatDefaults[i]+".")}),throwEqualError(settings,"mark","thousand"),throwEqualError(settings,"prefix","negative"),throwEqualError(settings,"prefix","negativeBefore"),this.settings=settings
}function Link(entry,update){if(!(this instanceof Link))throw new Error("Link: Don't use Link as a function. Use the 'new' keyword.");if(!entry)throw new RangeError("Link: missing parameters.");this.formatting=entry.format||{},this.update=!update;var that=this,target=entry.target||function(){},method=entry.method,isTooltip="string"==typeof target&&0===target.indexOf("-tooltip-"),isHidden="string"==typeof target&&0!==target.indexOf("-"),isMethod="function"==typeof target,is$=isInstance(target),isInput=is$&&target.is("input, select, textarea"),methodIsFunction=is$&&"function"==typeof method,methodIsName=is$&&"string"==typeof method&&target[method];if(isTooltip)return this.method=method||"html",void(this.el=$(target.replace("-tooltip-","")||"<div/>")[0]);
if(isHidden)return this.method="val",this.el=document.createElement("input"),this.el.name=target,void(this.el.type="hidden");if(isMethod)return this.target=!1,void(this.method=target);if(is$){if(method&&(methodIsFunction||methodIsName))return this.target=target,void(this.method=method);if(!method&&isInput)return this.method="val",this.target=target,void this.target.on("change",function(e){function at(a,b,c){return[c?a:b,c?b:a]}var output=at(null,$(e.target).val(),that.N);that.obj.val(output,{link:that})});if(!method&&!isInput)return this.method="html",void(this.target=target)}throw new RangeError("Link: Invalid Link.")}function testStep(parsed,entry){isNumeric(entry)||throwError("'step' is not numeric."),parsed.xSteps[0]=entry
}function testRange(parsed,entry){("object"!=typeof entry||$.isArray(entry))&&throwError("'range' is not an object."),$.each(entry,function(index,value){var percentage;"number"==typeof value&&(value=[value]),$.isArray(value)||throwError("'range' contains invalid value."),percentage="min"===index?0:"max"===index?100:parseFloat(index),isNumeric(percentage)&&isNumeric(value[0])||throwError("'range' value isn't numeric."),parsed.xPct.push(percentage),parsed.xVal.push(value[0]),percentage?parsed.xSteps.push(isNaN(value[1])?!1:value[1]):isNaN(value[1])||(parsed.xSteps[0]=value[1])}),$.each(parsed.xSteps,function(i,n){return n?void(parsed.xSteps[i]=fromPercentage([parsed.xVal[i],parsed.xVal[i+1]],n)/subRangeRatio(parsed.xPct[i],parsed.xPct[i+1])):!0
})}function testStart(parsed,entry){"number"==typeof entry&&(entry=[entry]),(!$.isArray(entry)||!entry.length||entry.length>2)&&throwError("'start' option is incorrect."),parsed.handles=entry.length,parsed.start=entry}function testSnap(parsed,entry){parsed.snap=entry,"boolean"!=typeof entry&&throwError("'snap' option must be a boolean.")}function testConnect(parsed,entry){"lower"===entry&&1===parsed.handles?parsed.connect=1:"upper"===entry&&1===parsed.handles?parsed.connect=2:entry===!0&&2===parsed.handles?parsed.connect=3:entry===!1?parsed.connect=0:throwError("'connect' option was doesn't match handle count.")}function testOrientation(parsed,entry){switch(entry){case"horizontal":parsed.ort=0;
break;case"vertical":parsed.ort=1;break;default:throwError("'orientation' option is invalid.")}}function testMargin(parsed,entry){parsed.xPct.length>2&&throwError("'margin' option is only supported on linear sliders."),parsed.margin=fromPercentage(parsed.xVal,entry),isNumeric(entry)||throwError("'margin' option must be numeric.")}function testDirection(parsed,entry){switch(entry){case"ltr":parsed.dir=0;break;case"rtl":parsed.dir=1,parsed.connect=[0,2,1,3][parsed.connect];break;default:throwError("'direction' option was not recognized.")}}function testBehaviour(parsed,entry){"string"!=typeof entry&&throwError("'behaviour' must be a string containing options.");
var tap=entry.indexOf("tap")>=0,extend=entry.indexOf("extend")>=0,drag=entry.indexOf("drag")>=0,fixed=entry.indexOf("fixed")>=0,snap=entry.indexOf("snap")>=0;parsed.events={tap:tap||snap,extend:extend,drag:drag,fixed:fixed,snap:snap}}function testSerialization(parsed,entry,sliders){parsed.ser=[entry.lower,entry.upper],parsed.formatting=new Format(entry.format),$.each(parsed.ser,function(i,a){$.isArray(a)||throwError("'serialization."+(i?"upper":"lower")+"' must be an array."),$.each(a,function(){this instanceof Link||throwError("'serialization."+(i?"upper":"lower")+"' can only contain Link instances."),this.N=i,this.obj=sliders,this.scope=this.scope||sliders,this.formatting=new Format($.extend({},entry.format,this.formatting))
})}),parsed.dir&&parsed.handles>1&&parsed.ser.reverse()}function test(options,sliders){var tests,parsed={xPct:[],xVal:[],xSteps:[!1],margin:0};return tests={step:{r:!1,t:testStep},range:{r:!0,t:testRange},start:{r:!0,t:testStart},snap:{r:!1,t:testSnap},connect:{r:!0,t:testConnect},orientation:{r:!1,t:testOrientation},margin:{r:!1,t:testMargin},direction:{r:!0,t:testDirection},behaviour:{r:!0,t:testBehaviour},serialization:{r:!0,t:testSerialization}},options=$.extend({connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal"},options),options.serialization=$.extend({lower:[],upper:[],format:{}},options.serialization),$.each(tests,function(name,test){if(void 0===options[name]){if(!test.r)return!0;
throwError("'"+name+"' is required.")}test.t(parsed,options[name],sliders)}),parsed.style=parsed.ort?"top":"left",parsed}function addHandle(options,index){var handle=$("<div><div/></div>").addClass(Classes[2]),additions=["-lower","-upper"];return options.dir&&additions.reverse(),handle.children().addClass(Classes[3]+" "+Classes[3]+additions[index]),handle}function addElement(handle,link){return link.el&&(link=new Link({target:$(link.el).clone().appendTo(handle),method:link.method,format:link.formatting},!0)),link}function addElements(elements,handle,formatting){var index,list=[];for(list.push(new Link({format:formatting},!0)),index=0;index<elements.length;index++)list.push(addElement(handle,elements[index]));
return list}function addLinks(options,handles){var index,links=[];for(index=0;index<options.handles;index++)links[index]=addElements(options.ser[index],handles[index].children(),options.formatting);return links}function addConnection(connect,target,handles){switch(connect){case 1:target.addClass(Classes[7]),handles[0].addClass(Classes[6]);break;case 3:handles[1].addClass(Classes[6]);case 2:handles[0].addClass(Classes[7]);case 0:target.addClass(Classes[6])}}function addHandles(options,base){var index,handles=[];for(index=0;index<options.handles;index++)handles.push(addHandle(options,index).appendTo(base));return handles}function addSlider(options,target){return target.addClass([Classes[0],Classes[8+options.dir],Classes[4+options.ort]].join(" ")),$("<div/>").appendTo(target).addClass(Classes[1])
}function closure(target,options,originalOptions){function baseSize(){return $Base[["width","height"][options.ort]]()}function fireEvents(events){var index,values=[$Target.val()];for(index=0;index<events.length;index++)$Target.trigger(events[index],values)}function setHandle(handle,to,delimit){var n=handle[0]!==$Handles[0][0]?1:0,lower=$Locations[0]+options.margin,upper=$Locations[1]-options.margin;return delimit&&$Handles.length>1&&(to=n?Math.max(to,lower):Math.min(to,upper)),100>to&&(to=getStep(options,to)),to=limit(parseFloat(to.toFixed(7))),to===$Locations[n]?1===$Handles.length?!1:to===lower||to===upper?0:!1:(handle.css(options.style,to+"%"),handle.is(":first-child")&&handle.toggleClass(Classes[17],to>50),$Locations[n]=to,options.dir&&(to=100-to),$($Serialization[n]).each(function(){this.write(options,to,handle.children(),$Target)
}),!0)}function getPositions(a,b,delimit){var c=a+b[0],d=a+b[1];return delimit?(0>c&&(d+=Math.abs(c)),d>100&&(c-=d-100),[limit(c),limit(d)]):[c,d]}function jump(handle,to,instant){instant||addClassFor($Target,Classes[14],300),setHandle(handle,to,!1),fireEvents(["slide","set","change"])}function attach(events,element,callback,data){return events=events.replace(/\s/g,namespace+" ")+namespace,element.on(events,function(e){var disabled=$Target.attr("disabled");return disabled=!(void 0===disabled||null===disabled),$Target.hasClass(Classes[14])||disabled?!1:(e=fixEvent(e),e.calcPoint=e.points[options.ort],void callback(e,data))})}function move(event,data){var positions,handles=data.handles||$Handles,state=!1,proposal=100*(event.calcPoint-data.start)/baseSize(),h=handles[0][0]!==$Handles[0][0]?1:0;
positions=getPositions(proposal,data.positions,handles.length>1),state=setHandle(handles[0],positions[h],1===handles.length),handles.length>1&&(state=setHandle(handles[1],positions[h?0:1],!1)||state),state&&fireEvents(["slide"])}function end(event){$("."+Classes[15]).removeClass(Classes[15]),event.cursor&&$("body").css("cursor","").off(namespace),doc.off(namespace),$Target.removeClass(Classes[12]),fireEvents(["set","change"])}function start(event,data){1===data.handles.length&&data.handles[0].children().addClass(Classes[15]),event.stopPropagation(),attach(actions.move,doc,move,{start:event.calcPoint,handles:data.handles,positions:[$Locations[0],$Locations[$Handles.length-1]]}),attach(actions.end,doc,end,null),event.cursor&&($("body").css("cursor",$(event.target).css("cursor")),$Handles.length>1&&$Target.addClass(Classes[12]),$("body").on("selectstart"+namespace,!1))
}function tap(event){var to,location=event.calcPoint,total=0;event.stopPropagation(),$.each($Handles,function(){total+=this.offset()[options.style]}),total=total/2>location||1===$Handles.length?0:1,location-=$Base.offset()[options.style],to=100*location/baseSize(),jump($Handles[total],to,options.events.snap),options.events.snap&&start(event,{handles:[$Handles[total]]})}function edge(event){var i=event.calcPoint<$Base.offset()[options.style],to=i?0:100;i=i?0:$Handles.length-1,jump($Handles[i],to,!1)}function events(behaviour){var i,drag;if(!behaviour.fixed)for(i=0;i<$Handles.length;i++)attach(actions.start,$Handles[i].children(),start,{handles:[$Handles[i]]});
behaviour.tap&&attach(actions.start,$Base,tap,{handles:$Handles}),behaviour.extend&&($Target.addClass(Classes[16]),behaviour.tap&&attach(actions.start,$Target,edge,{handles:$Handles})),behaviour.drag&&(drag=$Base.find("."+Classes[7]).addClass(Classes[10]),behaviour.fixed&&(drag=drag.add($Base.children().not(drag).children())),attach(actions.start,drag,start,{handles:$Handles}))}var $Base,$Serialization,$Handles,$Target=$(target),$Locations=[-1,-1];if(!$Target.is(":empty"))throw new Error("Slider was already initialized.");$Base=addSlider(options,$Target),$Handles=addHandles(options,$Base),$Serialization=addLinks(options,$Handles),addConnection(options.connect,$Target,$Handles),events(options.events),target.vSet=function(values,callback,link,update,animate){var i,to;
for(options.dir&&options.handles>1&&values.reverse(),animate&&addClassFor($Target,Classes[14],300),i=0;i<($Handles.length>1?3:1);i++)to=link||$Serialization[i%2][0],to=to.valueOf(values[i%2]),to!==!1&&(to=toStepping(options,to),options.dir&&(to=100-to),setHandle($Handles[i%2],to,!0)!==!0&&$($Serialization[i%2]).each(function(){this.write(options,$Locations[i%2],$Handles[i%2].children(),$Target,update)}));return callback===!0&&fireEvents(["set"]),this},target.vGet=function(){var i,retour=[];for(i=0;i<options.handles;i++)retour[i]=$Serialization[i][0].saved;return 1===retour.length?retour[0]:options.dir&&options.handles>1?retour.reverse():retour},target.destroy=function(){return $.each($Serialization,function(){$.each(this,function(){this.target&&this.target.off(namespace)
})}),$(this).off(namespace).removeClass(Classes.join(" ")).empty(),originalOptions},$Target.val(options.start)}function initialize(originalOptions){if(this.length){var options=test(originalOptions,this);return this.each(function(){closure(this,options,originalOptions)})}}function rebuild(options){return this.each(function(){var values=$(this).val(),originalOptions=this.destroy(),newOptions=$.extend({},originalOptions,options);$(this).noUiSlider(newOptions),originalOptions.start===newOptions.start&&$(this).val(values)})}var doc=$(document),namespace=".nui",$val=$.fn.val,actions=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},Classes=["noUi-target","noUi-base","noUi-origin","noUi-handle","noUi-horizontal","noUi-vertical","noUi-background","noUi-connect","noUi-ltr","noUi-rtl","noUi-dragable","","noUi-state-drag","","noUi-state-tap","noUi-active","noUi-extended","noUi-stacking"],Formatting=["decimals","mark","thousand","prefix","postfix","encoder","decoder","negative","negativeBefore"],FormatDefaults=[2,".","","","",function(a){return a
},function(a){return a},"-",""];Format.prototype.v=function(a){return this.settings[a]},Format.prototype.to=function(number){function reverse(a){return a.split("").reverse().join("")}number=this.v("encoder")(number);var negative="",preNegative="",base="",mark="";return 0>number&&(negative=this.v("negative"),preNegative=this.v("negativeBefore")),number=Math.abs(number).toFixed(this.v("decimals")).toString(),number=number.split("."),0===parseFloat(number)&&(number[0]="0"),this.v("thousand")?(base=reverse(number[0]).match(/.{1,3}/g),base=reverse(base.join(reverse(this.v("thousand"))))):base=number[0],this.v("mark")&&number.length>1&&(mark=this.v("mark")+number[1]),preNegative+this.v("prefix")+negative+base+mark+this.v("postfix")
},Format.prototype.from=function(input){function esc(s){return s.replace(/[\-\/\\\^$*+?.()|\[\]{}]/g,"\\$&")}var isNeg;return null===input||void 0===input?!1:(input=input.toString(),isNeg=input.replace(new RegExp("^"+esc(this.v("negativeBefore"))),""),input!==isNeg?(input=isNeg,isNeg="-"):isNeg="",input=input.replace(new RegExp("^"+esc(this.v("prefix"))),""),this.v.negative&&(isNeg="",input=input.replace(new RegExp("^"+esc(this.v("negative"))),"-")),input=input.replace(new RegExp(esc(this.v("postfix"))+"$"),"").replace(new RegExp(esc(this.v("thousand")),"g"),"").replace(this.v("mark"),"."),input=this.v("decoder")(parseFloat(isNeg+input)),isNaN(input)?!1:input)
},Link.prototype.write=function(options,value,handle,slider,update){this.update&&update===!1||(value=fromStepping(options,value),value=this.format(value),this.saved=value,"function"==typeof this.method?this.method.call(this.target[0]||slider[0],value,handle,slider):this.target[this.method](value,handle,slider))},Link.prototype.format=function(a){return this.formatting.to(a)},Link.prototype.valueOf=function(a){return this.formatting.from(a)},$.noUiSlider={Link:Link},$.fn.noUiSlider=function(options,re){return(re?rebuild:initialize).call(this,options)},$.fn.val=function(){var set,link,update,animate,args=Array.prototype.slice.call(arguments,0);return args.length?("object"==typeof args[1]?(set=args[1].set,link=args[1].link,update=args[1].update,animate=args[1].animate):args[1]===!0&&(set=!0),this.each(function(){$(this).hasClass(Classes[0])?this.vSet(asArray(args[0]),set,link,update,animate):$val.apply($(this),args)
})):this.hasClass(Classes[0])?this[0].vGet():$val.apply(this)}}(window.jQuery||window.Zepto),define("nouislider",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/SliderInteraction",["lodash","jquery","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/sliderInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","nouislider"],function(_,$,tpl,Helper,pciResponse){var _slideTo=function(options){options.sliderCurrentValue.find(".qti-slider-cur-value").text(options.value),options.sliderValue.val(options.value)},render=function(interaction){var attributes=interaction.getAttributes(),$container=interaction.getContainer(),$el=$("<div />").attr({id:attributes.identifier+"-qti-slider","class":"qti-slider"}),$sliderLabels=$("<div />").attr({"class":"qti-slider-values"}),$sliderCurrentValue=$("<div />").attr({id:attributes.identifier+"-qti-slider-cur-value","class":"qti-slider-cur-value"}),$sliderValue=$("<input />").attr({type:"hidden",id:attributes.identifier+"-qti-slider-value"}),orientation="horizontal",reverse="undefined"!=typeof attributes.reverse&&attributes.reverse?!0:!1,min=parseInt(attributes.lowerBound),max=parseInt(attributes.upperBound),step="undefined"!=typeof attributes.step&&attributes.step?parseInt(attributes.step):1,steps=(max-min)/step;
$sliderCurrentValue.append('<span class="qti-slider-cur-value-text">Current value: </span>').append('<span class="qti-slider-cur-value"></span>'),$sliderLabels.append('<span class="slider-min">'+(reverse?max:min)+"</span>").append('<span class="slider-max">'+(reverse?min:max)+"</span>"),interaction.getContainer().append($el).append($sliderLabels).append($sliderCurrentValue).append($sliderValue),"undefined"!=typeof attributes.orientation&&$.inArray(attributes.orientation,["horizontal","vertical"])>-1&&(orientation=attributes.orientation);var sliderSize=0;if("horizontal"===orientation)$container.addClass("qti-slider-horizontal");else{var maxHeight=300;sliderSize=20*steps,sliderSize>maxHeight&&(sliderSize=maxHeight),$container.addClass("qti-slider-vertical"),$el.height(sliderSize+"px"),$sliderLabels.height(sliderSize+"px")
}if("undefined"!=typeof attributes.stepLabel&&attributes.stepLabel){var middleStep=parseInt(steps/2),leftOffset=100/steps*middleStep,middleValue=reverse?max-middleStep*step:min+middleStep*step;$sliderLabels.find(".slider-min").after("horizontal"===orientation?'<span class="slider-middle" style="left:'+leftOffset+'%">'+middleValue+"</span>":'<span class="slider-middle" style="top:'+leftOffset+'%">'+middleValue+"</span>")}$el.noUiSlider({start:reverse?max:min,range:{min:min,max:max},step:step,orientation:orientation}).on("slide",function(){var val=parseInt($(this).val());interaction.attr("reverse")&&(val=max+min-val),val=Math.round(1e3*val)/1e3,_slideTo({value:val,sliderValue:$sliderValue,sliderCurrentValue:$sliderCurrentValue}),Helper.triggerResponseChangeEvent(interaction)
}),_slideTo({value:min,sliderValue:$sliderValue,sliderCurrentValue:$sliderCurrentValue})},resetResponse=function(interaction){var attributes=interaction.getAttributes(),$el=$("#"+attributes.identifier+"-qti-slider"),$sliderValue=$("#"+attributes.identifier+"-qti-slider-value"),$sliderCurrentValue=$("#"+attributes.identifier+"-qti-slider-cur-value"),min=parseInt(attributes.lowerBound),max=parseInt(attributes.upperBound),reverse="undefined"!=typeof attributes.reverse&&attributes.reverse?!0:!1,startValue=reverse?max:min;_slideTo({value:min,sliderValue:$sliderValue,sliderCurrentValue:$sliderCurrentValue}),$el.val(startValue)},setResponse=function(interaction,response){var value,attributes=interaction.getAttributes(),$sliderValue=$("#"+attributes.identifier+"-qti-slider-value"),$sliderCurrentValue=$("#"+attributes.identifier+"-qti-slider-cur-value"),$el=$("#"+attributes.identifier+"-qti-slider"),min=parseInt(attributes.lowerBound),max=parseInt(attributes.upperBound);
value=pciResponse.unserialize(response,interaction)[0],_slideTo({value:value,sliderValue:$sliderValue,sliderCurrentValue:$sliderCurrentValue}),$el.val(interaction.attr("reverse")?max+min-value:value)},_getRawResponse=function(interaction){var value,attributes=interaction.getAttributes(),baseType=interaction.getResponseDeclaration().attr("baseType"),min=parseInt(attributes.lowerBound),$sliderValue=$("#"+attributes.identifier+"-qti-slider-value");return"integer"===baseType?value=parseInt($sliderValue.val()):"float"===baseType&&(value=parseFloat($sliderValue.val())),isNaN(value)?min:value},getResponse=function(interaction){return pciResponse.serialize([_getRawResponse(interaction)],interaction)
},destroy=function(interaction){var $container=interaction.getContainer();$container.empty()};return{qtiClass:"sliderInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,destroy:destroy}}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression;return buffer+='<input class="qti-interaction qti-inlineInteraction qti-textEntryInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'" data-qti-class="textEntryInteraction" type="text">'
})}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/TextEntryInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/textEntryInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","taoQtiItem/qtiCommonRenderer/helpers/PciResponse","i18n","polyfill/placeholders","tooltipster"],function(_,tpl,Helper,pciResponse,__){var _setPattern=function($element,pattern){var patt=new RegExp("^"+pattern+"$"),patternSupported="pattern"in document.createElement("input");$element.attr("pattern",pattern),$element.on("keyup",function(){$element.removeClass("field-error"),patt.test($element.val())?$element.tooltipster("hide"):((!patternSupported||navigator.userAgent.match(/Safari/i))&&$element.addClass("field-error"),$element.tooltipster("show"))
})},render=function(interaction){var attributes=interaction.getAttributes(),$el=interaction.getContainer();attributes.expectedLength&&$el.css("width",parseInt(attributes.expectedLength)+"em"),attributes.patternMask&&($el.tooltipster({theme:"tao-error-tooltip",content:__("Invalid pattern"),delay:350,trigger:"custom"}),_setPattern($el,attributes.patternMask)),attributes.placeholderText&&$el.attr("placeholder",attributes.placeholderText)},resetResponse=function(interaction){interaction.getContainer().val("")},setResponse=function(interaction,response){var responseValue;try{responseValue=pciResponse.unserialize(response,interaction)}catch(e){}responseValue&&responseValue.length&&interaction.getContainer().val(responseValue[0])
},getResponse=function(interaction){var value,ret={base:{}},$el=interaction.getContainer(),attributes=interaction.getAttributes(),baseType=interaction.getResponseDeclaration().attr("baseType"),numericBase=attributes.base||10;return attributes.placeholderText&&$el.val()===attributes.placeholderText?value="":"integer"===baseType?value=parseInt($el.val(),numericBase):"float"===baseType?value=parseFloat($el.val()):"string"===baseType&&(value=$el.val()),ret.base[baseType]=isNaN(value)&&"number"==typeof value?"":value,ret};return{qtiClass:"textEntryInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse}
}),define("tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction",["handlebars"],function(Handlebars){return Handlebars.template(function(Handlebars,depth0,helpers,partials,data){function program1(depth0,data){var stack1,helper;return(helper=helpers.prompt)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.prompt,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),stack1||0===stack1?stack1:""}this.compilerInfo=[4,">= 1.0.0"],helpers=this.merge(helpers,Handlebars.helpers),data=data||{};var stack1,helper,buffer="",functionType="function",escapeExpression=this.escapeExpression,self=this;return buffer+='<div class="qti-interaction qti-blockInteraction qti-uploadInteraction" data-serial="',(helper=helpers.serial)?stack1=helper.call(depth0,{hash:{},data:data}):(helper=depth0&&depth0.serial,stack1=typeof helper===functionType?helper.call(depth0,{hash:{},data:data}):helper),buffer+=escapeExpression(stack1)+'">\n	',stack1=helpers["if"].call(depth0,depth0&&depth0.prompt,{hash:{},inverse:self.noop,fn:self.program(1,program1,data),data:data}),(stack1||0===stack1)&&(buffer+=stack1),buffer+='\n	<div class="instruction-container"></div>\n    <div class="file-upload fixed-grid-row">\n        <div class="progressbar"></div>\n        <span class="btn-info small col-4"></span>\n        <span class="file-name placeholder col-8 truncate"></span>\n        <input type="file"/>\n    </div>\n</div> '
})});var swfobject=function(){function f(){if(!J){try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=!0;for(var X=U.length,Y=0;X>Y;Y++)U[Y]()}}function K(X){J?X():U[U.length]=X}function s(Y){if(typeof O.addEventListener!=D)O.addEventListener("load",Y,!1);else if(typeof j.addEventListener!=D)j.addEventListener("load",Y,!1);else if(typeof O.attachEvent!=D)i(O,"onload",Y);else if("function"==typeof O.onload){var X=O.onload;O.onload=function(){X(),Y()}}else O.onload=Y}function h(){T?V():H()}function V(){var X=j.getElementsByTagName("body")[0],aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;
!function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");ab&&(ab=ab.split(" ")[1].split(","),M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)])}else if(10>Y)return Y++,void setTimeout(arguments.callee,10);X.removeChild(aa),Z=null,H()}()}else H()}function H(){var ag=o.length;if(ag>0)for(var af=0;ag>af;af++){var Y=o[af].id,ab=o[af].callbackFn,aa={success:!1,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae)if(!F(o[af].swfVersion)||M.wk&&M.wk<312)if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall,ai.width=ae.getAttribute("width")||"0",ai.height=ae.getAttribute("height")||"0",ae.getAttribute("class")&&(ai.styleclass=ae.getAttribute("class")),ae.getAttribute("align")&&(ai.align=ae.getAttribute("align"));
for(var ah={},X=ae.getElementsByTagName("param"),ac=X.length,ad=0;ac>ad;ad++)"movie"!=X[ad].getAttribute("name").toLowerCase()&&(ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value"));P(ai,ah,Y,ab)}else p(ae),ab&&ab(aa);else w(Y,!0),ab&&(aa.success=!0,aa.ref=z(Y),ab(aa))}else if(w(Y,!0),ab){var Z=z(Y);Z&&typeof Z.SetVariable!=D&&(aa.success=!0,aa.ref=Z),ab(aa)}}}function z(aa){var X=null,Y=c(aa);if(Y&&"OBJECT"==Y.nodeName)if(typeof Y.SetVariable!=D)X=Y;else{var Z=Y.getElementsByTagName(r)[0];Z&&(X=Z)}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=!0,E=Z||null,B={success:!1,id:X};var ae=c(X);if(ae){"OBJECT"==ae.nodeName?(l=g(ae),Q=null):(l=ae,Q=X),aa.id=R,(typeof aa.width==D||!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)&&(aa.width="310"),(typeof aa.height==D||!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)&&(aa.height="137"),j.title=j.title.slice(0,47)+" - Flash Player Installation";
var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D?ab.flashvars+="&"+ac:ab.flashvars=ac,M.ie&&M.win&&4!=ae.readyState){var Y=C("div");X+="SWFObjectNew",Y.setAttribute("id",X),ae.parentNode.insertBefore(Y,ae),ae.style.display="none",function(){4==ae.readyState?ae.parentNode.removeChild(ae):setTimeout(arguments.callee,10)}()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&4!=Y.readyState){var X=C("div");Y.parentNode.insertBefore(X,Y),X.parentNode.replaceChild(g(Y),X),Y.style.display="none",function(){4==Y.readyState?Y.parentNode.removeChild(Y):setTimeout(arguments.callee,10)
}()}else Y.parentNode.replaceChild(g(Y),Y)}function g(ab){var aa=C("div");if(M.win&&M.ie)aa.innerHTML=ab.innerHTML;else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad)for(var X=ad.length,Z=0;X>Z;Z++)1==ad[Z].nodeType&&"PARAM"==ad[Z].nodeName||8==ad[Z].nodeType||aa.appendChild(ad[Z].cloneNode(!0))}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312)return X;if(aa)if(typeof ai.id==D&&(ai.id=Y),M.ie&&M.win){var ah="";for(var ae in ai)ai[ae]!=Object.prototype[ae]&&("data"==ae.toLowerCase()?ag.movie=ai[ae]:"styleclass"==ae.toLowerCase()?ah+=' class="'+ai[ae]+'"':"classid"!=ae.toLowerCase()&&(ah+=" "+ae+'="'+ai[ae]+'"'));var af="";for(var ad in ag)ag[ad]!=Object.prototype[ad]&&(af+='<param name="'+ad+'" value="'+ag[ad]+'" />');
aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>",N[N.length]=ai.id,X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai)ai[ac]!=Object.prototype[ac]&&("styleclass"==ac.toLowerCase()?Z.setAttribute("class",ai[ac]):"classid"!=ac.toLowerCase()&&Z.setAttribute(ac,ai[ac]));for(var ab in ag)ag[ab]!=Object.prototype[ab]&&"movie"!=ab.toLowerCase()&&e(Z,ab,ag[ab]);aa.parentNode.replaceChild(Z,aa),X=Z}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X),aa.setAttribute("value",Y),Z.appendChild(aa)}function y(Y){var X=c(Y);X&&"OBJECT"==X.nodeName&&(M.ie&&M.win?(X.style.display="none",function(){4==X.readyState?b(Y):setTimeout(arguments.callee,10)
}()):X.parentNode.removeChild(X))}function b(Z){var Y=c(Z);if(Y){for(var X in Y)"function"==typeof Y[X]&&(Y[X]=null);Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y),I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");return X[0]=parseInt(X[0],10),X[1]=parseInt(X[1],10)||0,X[2]=parseInt(X[2],10)||0,Y[0]>X[0]||Y[0]==X[0]&&Y[1]>X[1]||Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]?!0:!1}function v(ac,Y,ad,ab){if(!M.ie||!M.mac){var aa=j.getElementsByTagName("head")[0];if(aa){var X=ad&&"string"==typeof ad?ad:"screen";if(ab&&(n=null,G=null),!n||G!=X){var Z=C("style");
Z.setAttribute("type","text/css"),Z.setAttribute("media",X),n=aa.appendChild(Z),M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0&&(n=j.styleSheets[j.styleSheets.length-1]),G=X}M.ie&&M.win?n&&typeof n.addRule==r&&n.addRule(ac,Y):n&&typeof j.createTextNode!=D&&n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(m){var Y=X?"visible":"hidden";J&&c(Z)?c(Z).style.visibility=Y:v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/,X=null!=Z.exec(Y);return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}{var l,Q,E,B,n,G,D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=!1,U=[h],o=[],N=[],I=[],J=!1,a=!1,m=!0,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=/win/.test(Y?Y:ah),ac=/mac/.test(Y?Y:ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,X=!1,ag=[0,0,0],ab=null;
if(typeof t.plugins!=D&&typeof t.plugins[S]==r)ab=t.plugins[S].description,!ab||typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin||(T=!0,X=!1,ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10),ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10),ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof O.ActiveXObject!=D)try{var ad=new ActiveXObject(W);ad&&(ab=ad.GetVariable("$version"),ab&&(X=!0,ab=ab.split(" ")[1].split(","),ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]))}catch(Z){}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}();!function(){M.w3&&((typeof j.readyState!=D&&"complete"==j.readyState||typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))&&f(),J||(typeof j.addEventListener!=D&&j.addEventListener("DOMContentLoaded",f,!1),M.ie&&M.win&&(j.attachEvent(x,function(){"complete"==j.readyState&&(j.detachEvent(x,arguments.callee),f())
}),O==top&&!function(){if(!J){try{j.documentElement.doScroll("left")}catch(X){return void setTimeout(arguments.callee,0)}f()}}()),M.wk&&!function(){return J?void 0:/loaded|complete/.test(j.readyState)?void f():void setTimeout(arguments.callee,0)}(),s(f)))}(),function(){M.ie&&M.win&&window.attachEvent("onunload",function(){for(var ac=I.length,ab=0;ac>ab;ab++)I[ab][0].detachEvent(I[ab][1],I[ab][2]);for(var Z=N.length,aa=0;Z>aa;aa++)y(N[aa]);for(var Y in M)M[Y]=null;M=null;for(var X in swfobject)swfobject[X]=null;swfobject=null})}()}return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab,Y.swfVersion=X,Y.expressInstall=aa,Y.callbackFn=Z,o[o.length]=Y,w(ab,!1)
}else Z&&Z({success:!1,id:ab})},getObjectById:function(X){return M.w3?z(X):void 0},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:!1,id:ah};M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y?(w(ah,!1),K(function(){ae+="",ag+="";var aj={};if(af&&typeof af===r)for(var al in af)aj[al]=af[al];aj.data=ab,aj.width=ae,aj.height=ag;var am={};if(ad&&typeof ad===r)for(var ak in ad)am[ak]=ad[ak];if(Z&&typeof Z===r)for(var ai in Z)typeof am.flashvars!=D?am.flashvars+="&"+ai+"="+Z[ai]:am.flashvars=ai+"="+Z[ai];if(F(Y)){var an=u(aj,am,ah);aj.id==ah&&w(ah,!0),X.success=!0,X.ref=an}else{if(aa&&A())return aj.data=aa,void P(aj,am,ah,ac);w(ah,!0)}ac&&ac(X)})):ac&&ac(X)},switchOffAutoHideShow:function(){m=!1
},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){return M.w3?u(Z,Y,X):void 0},showExpressInstall:function(Z,aa,X,Y){M.w3&&A()&&P(Z,aa,X,Y)},removeSWF:function(X){M.w3&&y(X)},createCSS:function(aa,Z,Y,X){M.w3&&v(aa,Z,Y,X)},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)&&(Z=Z.split("?")[1]),null==aa)return L(Z);for(var Y=Z.split("&"),X=0;X<Y.length;X++)if(Y[X].substring(0,Y[X].indexOf("="))==aa)return L(Y[X].substring(Y[X].indexOf("=")+1))}return""},expressInstallCallback:function(){if(a){var X=c(R);
X&&l&&(X.parentNode.replaceChild(l,X),Q&&(w(Q,!0),M.ie&&M.win&&(l.style.display="block")),E&&E(B)),a=!1}}}}();define("polyfill/swfobject",function(){}),function(e){var t=e.Callbacks("once unique memory"),n=0,r=null;if(window.FileReader)return void(e.fn.fileReader=function(){return this});e.fn.fileReader=function(n){n=e.extend(e.fn.fileReader.defaults,n);var r=this;return t.add(function(){return i(r,n)}),e.isFunction(n.callback)&&t.add(n.callback),FileAPIProxy.ready||FileAPIProxy.init(n),this},e.fn.fileReader.defaults={id:"fileReaderSWFObject",multiple:null,accept:null,label:null,extensions:null,filereader:"files/filereader.swf",expressInstall:null,debugMode:!1,callback:!1};
var i=function(t,i){return t.each(function(t,s){s=e(s);var u,a,o=s.attr("id");o||(o="flashFileInput"+n,n++),u=s.parent("label"),a=u.length>0?u:s,a.attr("id",a.attr("id")||o),i.multiple=!!(null===i.multiple?s.attr("multiple"):i.multiple),i.accept=null===i.accept?s.attr("accept"):i.accept,FileAPIProxy.inputs[o]=s,FileAPIProxy.swfObject.add(a.attr("id"),i.multiple,i.accept,i.label,i.extensions),a.css("z-index",0).mouseover(function(e){o!==r&&(e=e||window.event,r=o,FileAPIProxy.swfObject.mouseover(a.attr("id")),FileAPIProxy.container.height(a.outerHeight()).width(a.outerWidth()).css(a.offset()))}).click(function(e){return e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1
})})};window.FileAPIProxy={ready:!1,init:function(n){var i=this;this.debugMode=n.debugMode,this.container=e("<div>").attr("id",n.id).wrap("<div>").parent().css({position:"fixed",width:"1px",height:"1px",display:"inline-block",background:"transparent","z-index":99999}).on("mouseover mouseout mousedown mouseup",function(t){r&&e("#"+r).trigger(t.type)}).appendTo("body"),swfobject.embedSWF(n.filereader,n.id,"100%","100%","10",n.expressInstall,{debugMode:n.debugMode?!0:""},{wmode:"transparent",allowScriptAccess:"sameDomain"},{},function(n){i.swfObject=n.ref,e(i.swfObject).css({display:"block",outline:0}).attr("tabindex",0),i.ready&&t.fire(),i.ready=n.success&&"function"==typeof n.ref.add
})},swfObject:null,container:null,inputs:{},readers:{},onFileInputEvent:function(e){if(this.debugMode&&console.info("FileInput Event ",e.type,e),e.target in this.inputs){var t=this.inputs[e.target];e.target=t[0],"change"===e.type&&(e.files=new FileList(e.files),e.target={files:e.files}),t.trigger(e)}window.focus()},onFileReaderEvent:function(e){if(this.debugMode&&console.info("FileReader Event ",e.type,e,e.target in this.readers),e.target in this.readers){var t=this.readers[e.target];e.target=t,t._handleFlashEvent.call(t,e)}},onFileReaderError:function(e){this.debugMode&&console.log(e)},onSWFReady:function(){return this.container.css({position:"absolute"}),this.ready="function"==typeof this.swfObject.add,this.ready&&t.fire(),!0
}},window.FileReader=function(){this.EMPTY=0,this.LOADING=1,this.DONE=2,this.readyState=0,this.result=null,this.error=null,this.onloadstart=null,this.onprogress=null,this.onload=null,this.onabort=null,this.onerror=null,this.onloadend=null,this._callbacks={loadstart:e.Callbacks("unique"),progress:e.Callbacks("unique"),abort:e.Callbacks("unique"),error:e.Callbacks("unique"),load:e.Callbacks("unique"),loadend:e.Callbacks("unique")},this._id=null},window.FileReader.prototype={readAsBinaryString:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsBinaryString")},readAsText:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsText")
},readAsDataURL:function(e){this._start(e),FileAPIProxy.swfObject.read(e.input,e.name,"readAsDataURL")},readAsArrayBuffer:function(){throw"Whoops FileReader.readAsArrayBuffer is unimplemented"},abort:function(){this.result=null,this.readyState!==this.EMPTY&&this.readyState!==this.DONE&&FileAPIProxy.swfObject.abort(this._id)},addEventListener:function(e,t){e in this._callbacks&&this._callbacks[e].add(t)},removeEventListener:function(e,t){e in this._callbacks&&this._callbacks[e].remove(t)},dispatchEvent:function(t){if(t.target=this,t.type in this._callbacks){var n=this["on"+t.type];e.isFunction(n)&&n(t),this._callbacks[t.type].fire(t)}return!0},_register:function(e){this._id=e.input+"."+e.name,FileAPIProxy.readers[this._id]=this
},_start:function(e){if(this._register(e),this.readyState===this.LOADING)throw{type:"InvalidStateError",code:11,message:"The object is in an invalid state."}},_handleFlashEvent:function(e){switch(e.type){case"loadstart":this.readyState=this.LOADING;break;case"loadend":this.readyState=this.DONE;break;case"load":this.readyState=this.DONE,this.result=FileAPIProxy.swfObject.result(this._id);break;case"error":this.result=null,this.error={name:"NotReadableError",message:"The File cannot be read!"}}this.dispatchEvent(new FileReaderEvent(e))}},FileReaderEvent=function(e){this.initEvent(e)},FileReaderEvent.prototype={initEvent:function(t){e.extend(this,{type:null,target:null,currentTarget:null,eventPhase:2,bubbles:!1,cancelable:!1,defaultPrevented:!1,isTrusted:!1,timeStamp:(new Date).getTime()},t)
},stopPropagation:function(){},stopImmediatePropagation:function(){},preventDefault:function(){}},FileList=function(e){if(e){for(var t=0;t<e.length;t++)this[t]=e[t];this.length=e.length}else this.length=0},FileList.prototype={item:function(e){return e in this?this[e]:null}}}(jQuery),define("filereader",function(){}),define("taoQtiItem/qtiCommonRenderer/renderers/interactions/UploadInteraction",["lodash","tpl!taoQtiItem/qtiCommonRenderer/tpl/interactions/uploadInteraction","taoQtiItem/qtiCommonRenderer/helpers/Helper","jquery","jqueryui","i18n","context","filereader"],function(_,tpl,Helper,$,$ui,__,context){var _response={base:null},_initialInstructions=__("Browse your computer and select the appropriate file."),_readyInstructions=__("The selected file is ready to be sent."),_handleSelectedFiles=function(interaction,file){Helper.removeInstructions(interaction),Helper.appendInstruction(interaction,_initialInstructions);
var $container=Helper.getContainer(interaction),filename=file.name,filetype=(file.size,file.type);$container.find(".file-name").empty().append(filename);var reader=new FileReader;reader.onload=function(e){Helper.removeInstructions(interaction),Helper.appendInstruction(interaction,_readyInstructions,function(){this.setLevel("success")}),Helper.validateInstructions(interaction),$container.find(".progressbar").progressbar({value:100});var base64Data=e.target.result,commaPosition=base64Data.indexOf(",");base64Raw=base64Data.substring(commaPosition+1),filetype=filetype,_response={base:{file:{data:base64Raw,mime:filetype,name:filename}}}},reader.onloadstart=function(){Helper.removeInstructions(interaction),$container.find(".progressbar").progressbar({value:0})
},reader.onprogress=function(e){var percentProgress=Math.ceil(Math.round(e.loaded)/Math.round(e.total)*100);$container.find(".progressbar").progressbar({value:percentProgress})},reader.readAsDataURL(file)},_resetGui=function(interaction){$container=Helper.getContainer(interaction),$container.find(".file-name").text(__("No file selected")),$container.find(".btn-info").text(__("Browse..."))},render=function(interaction){$container=Helper.getContainer(interaction),_resetGui(interaction),Helper.appendInstruction(interaction,_initialInstructions);var changeListener=function(e){var file=e.target.files[0];"undefined"!=typeof file&&_handleSelectedFiles(interaction,file)
};$input=$container.find("input"),window.File&&window.FileReader&&window.FileList?$input.bind("change",changeListener):$input.fileReader({id:"fileReaderSWFObject",filereader:context.taobase_www+"js/lib/polyfill/filereader.swf",callback:function(){$input.bind("change",changeListener)}}),$input.bind("mousedown",function(e){return e.preventDefault(),$(this).blur(),!1})},resetResponse=function(interaction){$container=Helper.getContainer(interaction),_resetGui(interaction)},setResponse=function(interaction,response){if($container=Helper.getContainer(interaction),null!=response.base){var filename="undefined"!=typeof response.base.file.name?response.base.file.name:"previously-uploaded-file";
$container.find(".file-name").empty().text(filename)}_response=response},getResponse=function(){return _response};return{qtiClass:"uploadInteraction",template:tpl,render:render,getContainer:Helper.getContainer,setResponse:setResponse,getResponse:getResponse,resetResponse:resetResponse,resetGui:_resetGui}}),function(c){var d=document,a="appendChild",i="styleSheet",s=d.createElement("style");s.type="text/css",d.getElementsByTagName("head")[0][a](s),s[i]?s[i].cssText=c:s[a](d.createTextNode(c))}('                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\nhtml, button, input, select, textarea { color: #222; background: white; border-width: 1px; }\n\nhtml { line-height: 1.4; }\n\nhtml { font-size: 62.5%; }\n\nbody { font-size: 14px; background-color: white; }\n\nh1 { font-size: 24px; font-size: 2.4rem; }\n\nh2 { font-size: 22px; font-size: 2.2rem; }\n\nh3 { font-size: 20px; font-size: 2rem; }\n\nh4 { font-size: 18px; font-size: 1.8rem; }\n\nh5 { font-size: 16px; font-size: 1.6rem; }\n\nh6 { font-size: 14px; font-size: 1.4rem; }\n\n/* Remove text-shadow in selection highlight: h5bp.com/i These selection rule sets have to be separate. Customize the background color to match your design. */\n::-moz-selection { background: #b3d4fc; text-shadow: none; }\n\n::selection { background: #b3d4fc; text-shadow: none; }\n\n/* A better looking default horizontal rule */\nhr { display: block; height: 1px; border: 0; border-top: 1px solid #ccc; margin: 1em 0; padding: 0; }\n\n/* Remove the gap between images, videos, audio and canvas and the bottom of their containers: h5bp.com/i/440 */\naudio, canvas, img, video { vertical-align: middle; }\n\n/* Remove default fieldset styles. */\nfieldset { border: 0; margin: 0; padding: 0; }\n\n/* Allow only vertical resizing of textareas. */\ntextarea { resize: vertical; }\n\n/* Hide from both screenreaders and browsers: h5bp.com/u */\n.hidden { display: none !important; visibility: hidden; }\n\n/* Hide only visually, but have it available for screenreaders: h5bp.com/v */\n.visuallyhidden { border: 0; clip: rect(0 0 0 0); height: 1px; margin: -1px; overflow: hidden; padding: 0; position: absolute; width: 1px; }\n\n/* Extends the .visuallyhidden class to allow the element to be focusable when navigated to via the keyboard: h5bp.com/p */\n.visuallyhidden.focusable:active, .visuallyhidden.focusable:focus { clip: auto; height: auto; margin: 0; overflow: visible; position: static; width: auto; }\n\n/* Hide visually and from screenreaders, but maintain layout */\n.invisible { visibility: hidden; }\n\n/* Clearfix: contain floats  For modern browsers 1. The space content is one way to avoid an Opera bug when the `contenteditable` attribute is included anywhere else in the document. Otherwise it causes space to appear at the top and bottom of elements that receive the `clearfix` class. 2. The use of `table` rather than `block` is only necessary if using `:before` to contain the top-margins of child elements. */\n.clearfix:before, .block-listing.horizontal:before, .qti-associateInteraction .result-area > li:before, .clearfix:after, .block-listing.horizontal:after, .qti-associateInteraction .result-area > li:after { content: " "; /* 1 */ display: table; /* 2 */ }\n\n.clearfix:after, .block-listing.horizontal:after, .qti-associateInteraction .result-area > li:after { clear: both; }\n\n/* For IE 6/7 only Include this rule to trigger hasLayout and contain floats. */\n.clearfix, .block-listing.horizontal, .qti-associateInteraction .result-area > li { background-repeat: no-repeat; }\n\n/* ========================================================================== EXAMPLE Media Queries for Responsive Design. These examples override the primary (\'mobile first\') styles. Modify as content requires. ========================================================================== */\n@media only screen and (min-width: 35em) { /* Style adjustments for viewports that meet the condition */ }\n@media print, (-o-min-device-pixel-ratio: 5 / 4), (-webkit-min-device-pixel-ratio: 1.25), (min-resolution: 120dpi) { /* Style adjustments for high resolution devices */ }\n/* ========================================================================== Print styles. Inlined to avoid required HTTP connection: h5bp.com/r ========================================================================== */\n@media print { * { background: transparent !important; color: #000 !important; /* Black prints faster: h5bp.com/s */ box-shadow: none !important; text-shadow: none !important; }\n  a, a:visited { text-decoration: underline; }\n  a[href]:after { content: " (" attr(href) ")"; }\n  abbr[title]:after { content: " (" attr(title) ")"; }\n  /* Don\'t show links for images, or javascript/internal links */\n  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }\n  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }\n  thead { display: table-header-group; /* h5bp.com/t */ }\n  tr, img { page-break-inside: avoid; }\n  img { max-width: 100% !important; }\n  @page { margin: 0.5cm; }\n  p, h2, h3 { orphans: 3; widows: 3; }\n  h2, h3 { page-break-after: avoid; } }\n.qti-item { padding: 15px; background: white; margin: auto; max-width: 1024px; }\n.qti-item.runtime { min-height: 100%; }\n.qti-item [class*="col-"] img { max-width: auto; }\n\n.runtime .block-listing > li:hover, .qti-associateInteraction .empty:hover, .qti-graphicGapMatchInteraction ul.source > li:hover, .qti-graphicGapMatchInteraction ul.source > li.active.selectable:hover, .qti-graphicOrderInteraction ul.ordinals > li:hover, .qti-hottextInteraction .hottext:hover, .qti-gapMatchInteraction .gapmatch-content:hover { background: #f2f6f9 !important; cursor: pointer !important; }\n\n.runtime .block-listing > li.active:hover, .qti-associateInteraction .result-area > li > .target.active:hover { background: #e9f0f5 !important; }\n\n#modalFeedbacks { max-height: 0; }\n\n.mini-tlb .tlb-button { color: #222 !important; padding-top: 3px; }\n.mini-tlb .tlb-button:hover { color: #3e7da7 !important; }\n.mini-tlb ul[data-button-group] { background: transparent !important; border: none; }\n.mini-tlb ul[data-button-group] > li { display: none; background: transparent !important; min-width: 0; padding: 0; float: none; }\n.mini-tlb ul[data-button-group] > li span { color: #222; text-shadow: none !important; }\n.mini-tlb ul[data-button-group] > li.active { display: inline-block; }\n\n.edit-question .qti-blockInteraction .horizontal .add-option { margin-top: 25px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice { margin-top: 25px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice .mini-tlb { white-space: nowrap; top: -26px; right: -4px; }\n.edit-question .qti-blockInteraction .horizontal .qti-choice .mini-tlb .tlb-button { min-width: 25px; height: 20px; margin: 0; }\n\n.qti-choice p:last-child, .qti-prompt-container p:last-child { margin-bottom: 0 !important; }\n\n.runtime .block-listing > li.active { border-color: #3e7da7 !important; }\n\n.block-listing > li { border: 1px solid #e0e0e0; border-radius: 2px; -webkit-border-radius: 2px; background: transparent; padding: 5px; margin: 3px; cursor: pointer; position: relative; }\n.block-listing.horizontal > li { display: block; float: left; }\n.block-listing.solid, .block-listing.bordered { padding-top: 3px; padding-right: 3px; padding-bottom: 3px; }\n.block-listing.solid.none, .block-listing.bordered.none { padding-left: 3px; }\n\n.qti-block { border: 1px solid transparent; }\n\n.qti-interaction .solid { border: 6px solid #f5f3f2; }\n.qti-interaction .bordered { border: 1px solid #e0e0e0; border-radius: 2px; -webkit-border-radius: 2px; background: white; }\n.qti-interaction .empty { border: 1px #3e7da7 dashed !important; min-height: 50px; cursor: default; }\n.qti-interaction .add-option { border: 1px #3e7da7 dashed !important; list-style-type: none; position: relative; cursor: pointer !important; color: #0e5d91 !important; border-radius: 3px; background-color: #e6eef4; }\n.qti-interaction .add-option [class^="icon-"], .qti-interaction .add-option [class*=" icon-"] { font-size: 14px; font-size: 1.4rem; position: relative; top: 1px; left: 2px; color: #0e5d91; padding-right: 5px; }\n.qti-interaction .add-option > div { display: table; width: 100%; height: 100%; }\n.qti-interaction .add-option > div [class^="icon-"], .qti-interaction .add-option > div [class*=" icon-"] { display: table-cell; font-size: 60px; font-size: 6rem; position: static !important; vertical-align: middle; width: 100%; height: 100%; text-align: center; top: 0; left: auto; padding: 0; }\n.qti-interaction .add-option:hover { opacity: 0.8; }\n.qti-interaction input[type="color"], .qti-interaction input[type="date"], .qti-interaction input[type="datetime"], .qti-interaction input[type="datetime-local"], .qti-interaction input[type="email"], .qti-interaction input[type="month"], .qti-interaction input[type="number"], .qti-interaction input[type="range"], .qti-interaction input[type="search"], .qti-interaction input[type="tel"], .qti-interaction input[type="time"], .qti-interaction input[type="text"], .qti-interaction input[type="password"], .qti-interaction input[type="url"], .qti-interaction input[type="week"], .qti-interaction textarea, .qti-interaction select { border-top-color: #aaa; border-left-color: #aaa; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-choiceInteraction .qti-choice .real-label { top: 1px; }\n.qti-choiceInteraction .block-listing > li { margin-top: 0; margin-bottom: 0; border-top: none; border-bottom: none; -moz-border-radius: 0px; -webkit-border-radius: 0px; border-radius: 0px; }\n.qti-choiceInteraction .block-listing > li:first-child { margin-top: 3px; border-top: 1px solid #eee; -webkit-border-top-left-radius: 2px; -webkit-border-top-right-radius: 2px; -moz-border-radius-topleft: 2px; -moz-border-radius-topright: 2px; border-top-left-radius: 2px; border-top-right-radius: 2px; }\n.qti-choiceInteraction .block-listing > li:last-child { margin-bottom: 3px; border-bottom: 1px solid #eee; -webkit-border-bottom-right-radius: 2px; -webkit-border-bottom-left-radius: 2px; -moz-border-radius-bottomright: 2px; -moz-border-radius-bottomleft: 2px; border-bottom-right-radius: 2px; border-bottom-left-radius: 2px; }\n.qti-choiceInteraction .real-label input { position: absolute; left: -10000px; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-orderInteraction .arrow-bar { text-align: center; }\n.qti-orderInteraction .arrow-bar span { margin: 3px auto; font-size: 25px; font-size: 2.5rem; color: #909090; background: #f9f8f7; cursor: default; height: 40px; }\n.qti-orderInteraction .arrow-bar span.active { background: #f3f1ef; cursor: pointer; color: #222; }\n.qti-orderInteraction .arrow-bar span.active:hover { color: white; background: #3e7da7; }\n.qti-orderInteraction .arrow-bar span.triggered { color: white; background: #3e7da7; }\n.qti-orderInteraction.qti-vertical .order-interaction-area { display: table; border-collapse: separate; border-spacing: 5px 5px 5px 0; width: 100%; }\n.qti-orderInteraction.qti-vertical ul.source, .qti-orderInteraction.qti-vertical ul.target, .qti-orderInteraction.qti-vertical ol.source, .qti-orderInteraction.qti-vertical ol.target { display: table-cell; width: 43%; }\n.qti-orderInteraction.qti-vertical .arrow-bar { display: table-cell; vertical-align: middle; padding: 5px; }\n.qti-orderInteraction.qti-vertical .arrow-bar span { padding: 8px 0; display: block; width: 50px; }\n.qti-orderInteraction.qti-vertical .arrow-bar span.inactive { visibility: hidden; }\n.qti-orderInteraction.qti-vertical .arrow-bar.middle span.inactive { display: none; }\n.qti-orderInteraction.qti-horizontal .block-listing { min-height: 38px; }\n.qti-orderInteraction.qti-horizontal .arrow-bar { margin-bottom: 10px; }\n.qti-orderInteraction.qti-horizontal .arrow-bar span { padding: 0 15px; display: inline-block; line-height: 1.6; }\n.qti-orderInteraction.qti-horizontal .arrow-bar span.inactive { visibility: hidden; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-extendedTextInteraction input { width: 100%; }\n.qti-extendedTextInteraction .solid > li, .qti-extendedTextInteraction .bordered > li { padding: 0; border: none; }\n.qti-extendedTextInteraction .solid ~ input, .qti-extendedTextInteraction .solid ~ textarea, .qti-extendedTextInteraction .bordered ~ input, .qti-extendedTextInteraction .bordered ~ textarea { border: 1px solid #eee; border-radius: 2px; -webkit-border-radius: 2px; }\n.qti-extendedTextInteraction .active > input, .qti-extendedTextInteraction .active > textarea, .qti-extendedTextInteraction .active input.active, .qti-extendedTextInteraction .active textarea.active { border-color: #3e7da7; }\n.qti-extendedTextInteraction textarea { max-width: 100% !important; width: 100%; height: 150px; resize: none; }\n.qti-extendedTextInteraction textarea[disabled="disabled"] { background-color: white; opacity: 1 !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-associateInteraction .empty { cursor: pointer; min-height: 0; }\n.qti-associateInteraction .choice-area { margin-bottom: 30px; }\n.qti-associateInteraction .choice-area .deactivated { opacity: 0.2; cursor: default !important; }\n.qti-associateInteraction .choice-area > .qti-choice { min-width: 100px; min-height: 30px; max-width: 150px; }\n.qti-associateInteraction .result-area { width: 40%; min-width: 260px; margin: auto; }\n.qti-associateInteraction .result-area > li { display: block; margin-bottom: 30px; position: relative; }\n.qti-associateInteraction .result-area > li:before { border-top: 1px solid #86aec8; display: block; width: 80%; left: 10%; height: 1px; position: absolute; z-index: 1; top: 50%; }\n.qti-associateInteraction .result-area > li > .target { background: white; padding: 5px; margin: 5px; float: right; position: relative; z-index: 2; min-width: 100px; min-height: 30px; max-width: 150px; max-height: 150px; outline: 5px #f5f3f2 solid; border: 1px solid #eee; border-radius: 2px; -webkit-border-radius: 2px; overflow: hidden; }\n.qti-associateInteraction .result-area > li > .target.active { border-color: #3e7da7; }\n.qti-associateInteraction .result-area > li > .target:first-child { float: left; }\n.qti-associateInteraction .result-area > li.removing > div { background-color: #eee; }\n.qti-associateInteraction .result-area > li.incomplete-pair { display: none; }\n.qti-associateInteraction .result-area > li.incomplete-pair > div { border: 1px dashed #ccc; }\n.qti-associateInteraction .result-area .remove-choice { cursor: pointer; position: absolute; right: 0; bottom: 0; margin: 0 2px 2px 0; color: #0e5d91; }\n.qti-associateInteraction .result-area .remove-choice:hover { opacity: 0.6; }\n.qti-associateInteraction .result-area .filled { cursor: pointer; }\n.qti-associateInteraction .result-area .filled:hover { background: #f2f6f9; }\n\n.result-area > li > div.filled ~ div.filled:before { border-top: 1px solid #86c8a5 !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-matchInteraction .matrix { table-layout: fixed; }\n.qti-matchInteraction .matrix tbody [data-edit] { width: 30px; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-mediaInteraction .mejs-container iframe { min-height: inherit; }\n.qti-mediaInteraction .overlay { background: #000; z-index: 999; position: relative; opacity: 0; width: 100%; height: 100%; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-graphicInteraction .source li > img { display: block; }\n.qti-graphicInteraction .active > input, .qti-graphicInteraction .active > textarea, .qti-graphicInteraction .active input.active, .qti-graphicInteraction .active textarea.active { border-color: #3e7da7; }\n.qti-graphicInteraction .image-editor { position: relative; float: left; padding: 3px; }\n.qti-graphicInteraction .image-editor .mapping-editor { display: none; position: absolute; width: 150px; height: 150px; text-align: left; z-index: 10009; }\n.qti-graphicInteraction .main-image-box { margin: 0 auto; padding: 0; text-align: center; overflow: visible; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-graphicGapMatchInteraction ul.source { width: 100%; margin: 10px auto; padding: 3px !important; clear: both; min-height: 60px; }\n.qti-graphicGapMatchInteraction ul.source > li { min-width: 60px; line-height: 60px; min-height: 60px; text-align: center; font-size: 20px; font-size: 2rem; margin: 0 3px 3px 0 !important; padding: 0; background: white; border: solid 1px #ddd !important; cursor: pointer; }\n.qti-graphicGapMatchInteraction ul.source > li.active { border: solid 1px #3e7da7 !important; -webkit-transition: background 0.4s ease-out; -moz-transition: background 0.4s ease-out; -o-transition: background 0.4s ease-out; transition: background 0.4s ease-out; }\n.qti-graphicGapMatchInteraction ul.source > li.active:hover { background: white !important; cursor: default !important; }\n.qti-graphicGapMatchInteraction ul.source > li.active.selectable:hover { cursor: pointer !important; }\n.qti-graphicGapMatchInteraction ul.source > li.disabled { border: none; cursor: default !important; color: #333 !important; background-color: transparent !important; }\n.qti-graphicGapMatchInteraction ul.source > li img { display: block; }\n.qti-graphicGapMatchInteraction .gap-filler { display: block; position: absolute; z-index: 20000; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-graphicOrderInteraction ul.ordinals { width: 100%; margin: 10px auto; padding: 0 !important; clear: both; min-height: 54px; }\n.qti-graphicOrderInteraction ul.ordinals > li { width: 30px; line-height: 30px; text-align: center; font-size: 20px; font-size: 2rem; margin: 0; background: white; margin-right: 1px; }\n.qti-graphicOrderInteraction ul.ordinals > li:hover { cursor: pointer; }\n.qti-graphicOrderInteraction ul.ordinals > li.active { border: solid 1px #3e7da7; -webkit-transition: background 0.4s ease-out; -moz-transition: background 0.4s ease-out; -o-transition: background 0.4s ease-out; transition: background 0.4s ease-out; }\n.qti-graphicOrderInteraction ul.ordinals > li.active:hover { background: white !important; cursor: default !important; }\n.qti-graphicOrderInteraction ul.ordinals > li.disabled { border: none; cursor: default !important; color: #666 !important; background-color: transparent !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-SelectPointInteraction .txt-success:hover { background: transparent !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-hottextInteraction .hottext { background: #f3f1ef; padding-right: 5px; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; position: relative; }\n.qti-hottextInteraction .hottext.error { color: #ba122b; }\n.qti-hottextInteraction .hottext .hottext-checkmark { padding-right: 0; min-width: auto; width: auto; }\n.qti-hottextInteraction .hottext [class^="icon-"].small, .qti-hottextInteraction .hottext [class*=" icon-"].small { font-size: 12px; font-size: 1.2rem; text-shadow: none; line-height: 10px; top: 1px; }\n.qti-hottextInteraction .hottext [class^="icon-"].error, .qti-hottextInteraction .hottext [class*=" icon-"].error { color: #ba122b; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] { top: -2px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit].icon-undo { padding-right: 8px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] label { padding: 0 3px; }\n.qti-hottextInteraction .hottext .mini-tlb[data-edit] [data-role="score"] { width: 30px; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-gapMatchInteraction .gapmatch-content { background: #f3f1ef; color: #222; -moz-border-radius: 2px; -webkit-border-radius: 2px; border-radius: 2px; position: relative; top: 0px; min-width: 45px; min-height: 20px; display: inline-block; }\n.qti-gapMatchInteraction .gapmatch-content audio, .qti-gapMatchInteraction .gapmatch-content canvas, .qti-gapMatchInteraction .gapmatch-content img, .qti-gapMatchInteraction .gapmatch-content video { vertical-align: baseline; }\n.qti-gapMatchInteraction .gapmatch-content.empty { min-height: 20px; }\n.qti-gapMatchInteraction .gapmatch-content .remove { float: right; }\n.qti-gapMatchInteraction .gapmatch-content.filled { top: 0 !important; }\n.qti-gapMatchInteraction .choice-area .deactivated { cursor: default; opacity: 0.2; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-sliderInteraction .ui-slider-horizontal { margin: 0 20px; }\n.qti-sliderInteraction .ui-slider-vertical { margin: 0 20px; display: inline-block; }\n.qti-sliderInteraction .qti-slider-values { position: relative; }\n.qti-sliderInteraction.qti-slider-horizontal .qti-slider-values { height: 20px; margin: 0 20px; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-min, .qti-sliderInteraction.qti-slider-horizontal .slider-max, .qti-sliderInteraction.qti-slider-horizontal .slider-middle { position: absolute; width: 40px; margin-left: -20px; text-align: center; font-size: 12px; font-size: 1.2rem; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-min { left: 0%; }\n.qti-sliderInteraction.qti-slider-horizontal .slider-max { left: 100%; }\n.qti-sliderInteraction.qti-slider-vertical .qti-slider-values { width: 30px; display: inline-block; }\n.qti-sliderInteraction.qti-slider-vertical .slider-min, .qti-sliderInteraction.qti-slider-vertical .slider-max, .qti-sliderInteraction.qti-slider-vertical .slider-middle { position: absolute; }\n.qti-sliderInteraction.qti-slider-vertical .slider-min { bottom: -10px; }\n.qti-sliderInteraction.qti-slider-vertical .slider-max { top: -10px; }\n.qti-sliderInteraction.qti-slider-vertical .ui-slider-handle { width: 17px !important; height: 10px !important; margin-left: -4px !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-inlineChoiceInteraction { min-width: 150px; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-textEntryInteraction { /*background: rgba($uiClickableDefaultBg, .85);*/ /*padding: 50px 10px 10px 30px;*/ }\n.qti-textEntryInteraction table { border-collapse: separate; border-spacing: 2px; }\n.qti-textEntryInteraction tr { height: 27px; white-space: nowrap; }\n.qti-textEntryInteraction .icon-bin, .qti-textEntryInteraction .icon-pin, .qti-textEntryInteraction .icon-shuffle { text-align: center; padding: 0 5px; cursor: pointer; vertical-align: middle; }\n.qti-textEntryInteraction .icon-radio, .qti-textEntryInteraction .icon-checkbox, .qti-textEntryInteraction .icon-radio-checked, .qti-textEntryInteraction .icon-checkbox-checked { font-size: 13px !important; }\n.qti-textEntryInteraction .icon-bin:hover, .qti-textEntryInteraction .icon-pin:hover, .qti-textEntryInteraction .icon-shuffle:hover { color: #3e7da7; }\n.qti-textEntryInteraction td[contenteditable], .qti-textEntryInteraction .main-option { padding: 0 7px; background: white; border: 1px solid #ddd; border-radius: 2px; -webkit-border-radius: 2px; }\n.qti-textEntryInteraction .main-option { border-top: 1px #ddd solid; border-bottom: 1px #ddd solid; padding-right: 29px; min-width: 180px; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-uploadInteraction { padding: 6px 6px 0 6px; }\n.qti-uploadInteraction .grid-row { margin-bottom: 0 !important; }\n.qti-uploadInteraction .progressbar { margin-bottom: 6px; }\n.qti-uploadInteraction .btn-info { padding-top: 0 !important; }\n.qti-uploadInteraction .file-name { padding: 2px 3px !important; }\n\n                                  /* /  \\ |    | --:\'\'\'\':--\nTHIS CODE IS GENERATED          :*_* : _:"":\\___\nAUTOMAGICALLY    * *      ____.\' :::     \'._ *=====<<=)           \\    :\nDO NOT EDIT!     * *      \'-\'-\'\\_      /\'._.\' \\====:_ "" .\'     \\ :       : /   :    \\ :   .      \'. :  : :      : :__:-:__.;--\' <*_/   <*/\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-before, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-before { content: "\\e610"; }\n\n.qti-orderInteraction.qti-vertical .arrow-bar .icon-move-behind, .qti-orderInteraction.qti-horizontal .arrow-bar span.icon-move-behind { content: "\\e611"; }\n\n.qti-choiceInteraction .checked span.icon-radio:before { content: "\\e69a"; }\n\n.qti-choiceInteraction .checked span.icon-checkbox:before { content: "\\e69d"; }\n\n.qti-rubricBlock .qti-rubricBlock-body { border: 1px solid transparent; }\n.qti-rubricBlock > .col-12 { border: 1px solid #DDD !important; background-color: rgba(243, 241, 239, 0.3); }\n\n#qti-submit-response { display: block; width: 100px; margin-top: 20px; margin-right: auto; margin-left: auto; }\n\n/* Below is a temporary solution to address Bug #2768. Eventually this will be fixed by implementing feature #2771. */\n.qti-simpleChoice .mini-tlb[data-edit="question"] { right: -45px !important; top: 3px; }\n\n.qti-hottextInteraction .mini-tlb { right: -31px !important; }\n\n.qti-interaction .qti-prompt ~ .mini-tlb { right: -31px !important; top: 1px; }\n\n.widget-textBlock .mini-tlb { right: -60px !important; }\n\n.qti-flow-container .mini-tlb { right: -31px !important; }\n\n/* end tmp fix #2768 */\n\n/*# sourceMappingURL=qti.css.map */\n/* This is the default Tooltipster theme (feel free to modify or duplicate and create multiple themes!): */\n.tooltipster-default {\n	border-radius: 5px; \n	border: 2px solid #000;\n	background: #4c4c4c;\n	color: #fff;\n}\n\n/* Use this next selector to style things like font-size and line-height: */\n.tooltipster-default .tooltipster-content {\n	font-family: Arial, sans-serif;\n	font-size: 14px;\n	line-height: 16px;\n	padding: 8px 10px;\n	overflow: hidden;\n}\n\n/* This next selector defines the color of the border on the outside of the arrow. This will automatically match the color and size of the border set on the main tooltip styles. Set display: none; if you would like a border around the tooltip but no border around the arrow */\n.tooltipster-default .tooltipster-arrow .tooltipster-arrow-border {\n	/* border-color: ... !important; */\n}\n\n\n/* If you\'re using the icon option, use this next selector to style them */\n.tooltipster-icon {\n	cursor: help;\n	margin-left: 4px;\n}\n\n\n\n\n\n\n\n\n/* This is the base styling required to make all Tooltipsters work */\n.tooltipster-base {\n	padding: 0;\n	font-size: 0;\n	line-height: 0;\n	position: absolute;\n	left: 0;\n	top: 0;\n	z-index: 9999999;\n	pointer-events: none;\n	width: auto;\n	overflow: visible;\n}\n.tooltipster-base .tooltipster-content {\n	overflow: hidden;\n}\n\n\n/* These next classes handle the styles for the little arrow attached to the tooltip. By default, the arrow will inherit the same colors and border as what is set on the main tooltip itself. */\n.tooltipster-arrow {\n	display: block;\n	text-align: center;\n	width: 100%;\n	height: 100%;\n	position: absolute;\n	top: 0;\n	left: 0;\n	z-index: -1;\n}\n.tooltipster-arrow span, .tooltipster-arrow-border {\n	display: block;\n	width: 0; \n	height: 0;\n	position: absolute;\n}\n.tooltipster-arrow-top span, .tooltipster-arrow-top-right span, .tooltipster-arrow-top-left span {\n	border-left: 8px solid transparent !important;\n	border-right: 8px solid transparent !important;\n	border-top: 8px solid;\n	bottom: -7px;\n}\n.tooltipster-arrow-top .tooltipster-arrow-border, .tooltipster-arrow-top-right .tooltipster-arrow-border, .tooltipster-arrow-top-left .tooltipster-arrow-border {\n	border-left: 9px solid transparent !important;\n	border-right: 9px solid transparent !important;\n	border-top: 9px solid;\n	bottom: -7px;\n}\n\n.tooltipster-arrow-bottom span, .tooltipster-arrow-bottom-right span, .tooltipster-arrow-bottom-left span {\n	border-left: 8px solid transparent !important;\n	border-right: 8px solid transparent !important;\n	border-bottom: 8px solid;\n	top: -7px;\n}\n.tooltipster-arrow-bottom .tooltipster-arrow-border, .tooltipster-arrow-bottom-right .tooltipster-arrow-border, .tooltipster-arrow-bottom-left .tooltipster-arrow-border {\n	border-left: 9px solid transparent !important;\n	border-right: 9px solid transparent !important;\n	border-bottom: 9px solid;\n	top: -7px;\n}\n.tooltipster-arrow-top span, .tooltipster-arrow-top .tooltipster-arrow-border, .tooltipster-arrow-bottom span, .tooltipster-arrow-bottom .tooltipster-arrow-border {\n	left: 0;\n	right: 0;\n	margin: 0 auto;\n}\n.tooltipster-arrow-top-left span, .tooltipster-arrow-bottom-left span {\n	left: 6px;\n}\n.tooltipster-arrow-top-left .tooltipster-arrow-border, .tooltipster-arrow-bottom-left .tooltipster-arrow-border {\n	left: 5px;\n}\n.tooltipster-arrow-top-right span,  .tooltipster-arrow-bottom-right span {\n	right: 6px;\n}\n.tooltipster-arrow-top-right .tooltipster-arrow-border, .tooltipster-arrow-bottom-right .tooltipster-arrow-border {\n	right: 5px;\n}\n.tooltipster-arrow-left span, .tooltipster-arrow-left .tooltipster-arrow-border {\n	border-top: 8px solid transparent !important;\n	border-bottom: 8px solid transparent !important; \n	border-left: 8px solid;\n	top: 50%;\n	margin-top: -7px;\n	right: -7px;\n}\n.tooltipster-arrow-left .tooltipster-arrow-border {\n	border-top: 9px solid transparent !important;\n	border-bottom: 9px solid transparent !important; \n	border-left: 9px solid;\n	margin-top: -8px;\n}\n.tooltipster-arrow-right span, .tooltipster-arrow-right .tooltipster-arrow-border {\n	border-top: 8px solid transparent !important;\n	border-bottom: 8px solid transparent !important; \n	border-right: 8px solid;\n	top: 50%;\n	margin-top: -7px;\n	left: -7px;\n}\n.tooltipster-arrow-right .tooltipster-arrow-border {\n	border-top: 9px solid transparent !important;\n	border-bottom: 9px solid transparent !important; \n	border-right: 9px solid;\n	margin-top: -8px;\n}\n\n\n/* Some CSS magic for the awesome animations - feel free to make your own custom animations and reference it in your Tooltipster settings! */\n\n.tooltipster-fade {\n	opacity: 0;\n	-webkit-transition-property: opacity;\n	-moz-transition-property: opacity;\n	-o-transition-property: opacity;\n	-ms-transition-property: opacity;\n	transition-property: opacity;\n}\n.tooltipster-fade-show {\n	opacity: 1;\n}\n\n.tooltipster-grow {\n	-webkit-transform: scale(0,0);\n	-moz-transform: scale(0,0);\n	-o-transform: scale(0,0);\n	-ms-transform: scale(0,0);\n	transform: scale(0,0);\n	-webkit-transition-property: -webkit-transform;\n	-moz-transition-property: -moz-transform;\n	-o-transition-property: -o-transform;\n	-ms-transition-property: -ms-transform;\n	transition-property: transform;\n	-webkit-backface-visibility: hidden;\n}\n.tooltipster-grow-show {\n	-webkit-transform: scale(1,1);\n	-moz-transform: scale(1,1);\n	-o-transform: scale(1,1);\n	-ms-transform: scale(1,1);\n	transform: scale(1,1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15);\n}\n\n.tooltipster-swing {\n	opacity: 0;\n	-webkit-transform: rotateZ(4deg);\n	-moz-transform: rotateZ(4deg);\n	-o-transform: rotateZ(4deg);\n	-ms-transform: rotateZ(4deg);\n	transform: rotateZ(4deg);\n	-webkit-transition-property: -webkit-transform, opacity;\n	-moz-transition-property: -moz-transform;\n	-o-transition-property: -o-transform;\n	-ms-transition-property: -ms-transform;\n	transition-property: transform;\n}\n.tooltipster-swing-show {\n	opacity: 1;\n	-webkit-transform: rotateZ(0deg);\n	-moz-transform: rotateZ(0deg);\n	-o-transform: rotateZ(0deg);\n	-ms-transform: rotateZ(0deg);\n	transform: rotateZ(0deg);\n	-webkit-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-moz-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-ms-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	-o-transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4); \n	transition-timing-function: cubic-bezier(0.230, 0.635, 0.495, 2.4);\n}\n\n.tooltipster-fall {\n	top: 0;\n	-webkit-transition-property: top;\n	-moz-transition-property: top;\n	-o-transition-property: top;\n	-ms-transition-property: top;\n	transition-property: top;\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n}\n.tooltipster-fall-show {\n}\n.tooltipster-fall.tooltipster-dying {\n	-webkit-transition-property: all;\n	-moz-transition-property: all;\n	-o-transition-property: all;\n	-ms-transition-property: all;\n	transition-property: all;\n	top: 0px !important;\n	opacity: 0;\n}\n\n.tooltipster-slide {\n	left: -40px;\n	-webkit-transition-property: left;\n	-moz-transition-property: left;\n	-o-transition-property: left;\n	-ms-transition-property: left;\n	transition-property: left;\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1);\n	-webkit-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-moz-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-ms-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	-o-transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15); \n	transition-timing-function: cubic-bezier(0.175, 0.885, 0.320, 1.15);\n}\n.tooltipster-slide.tooltipster-slide-show {\n}\n.tooltipster-slide.tooltipster-dying {\n	-webkit-transition-property: all;\n	-moz-transition-property: all;\n	-o-transition-property: all;\n	-ms-transition-property: all;\n	transition-property: all;\n	left: 0px !important;\n	opacity: 0;\n}\n\n\n/* CSS transition for when contenting is changing in a tooltip that is still open. The only properties that will NOT transition are: width, height, top, and left */\n.tooltipster-content-changing {\n	opacity: 0.5;\n	-webkit-transform: scale(1.1, 1.1);\n	-moz-transform: scale(1.1, 1.1);\n	-o-transform: scale(1.1, 1.1);\n	-ms-transform: scale(1.1, 1.1);\n	transform: scale(1.1, 1.1);\n}\n');

//# sourceMappingURL=qtiBootstrap.js.map